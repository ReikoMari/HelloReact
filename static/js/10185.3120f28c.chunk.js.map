{"version":3,"file":"static/js/10185.3120f28c.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js","../node_modules/@arcgis/core/views/layers/StreamLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Error.js\";import{handlesGroup as t,makeHandle as s}from\"../../../core/handleUtils.js\";import{watch as o}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../rest/support/FeatureSet.js\";import c from\"./FeatureLayerView2D.js\";import{handleNoEngineError as l}from\"./support/handleNoEngineError.js\";import h from\"../../layers/StreamLayerView.js\";let p=class extends(h(c)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null}initialize(){this.addHandles([o((()=>this.layer.customParameters),(e=>this._worker.streamMessenger.updateCustomParameters(e))),this.layer.on(\"send-message-to-socket\",(e=>this._worker.streamMessenger.sendMessageToSocket(e))),this.layer.on(\"send-message-to-client\",(e=>{this._worker.streamMessenger.sendMessageToClient(e),this._isUserPaused&&\"type\"in e&&\"clear\"===e.type&&this.incrementSourceRefreshVersion()})),o((()=>this.layer.purgeOptions),(()=>this._update())),o((()=>this.suspended),this._onSuspendedChange.bind(this))],\"constructor\"),this._doResume()}destroy(){this._doPause()}get connectionError(){return this.pipelineErrorString?new r(\"stream-controller\",this.pipelineErrorString):null}on(e,r){if(Array.isArray(e))return t(e.map((e=>this.on(e,r))));const o=[\"data-received\",\"message-received\"].includes(e);o&&this._worker.streamMessenger.enableEvent(e,!0);const n=super.on(e,r),i=this;return s((()=>{n.remove(),o&&(i._worker.closed||i.hasEventListener(e)||i._worker.streamMessenger.enableEvent(e,!1))}))}queryLatestObservations(e,t){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new r(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");return l(this._worker.features.executeQueryForLatestObservations(this._cleanUpQuery(e),t).then((e=>{const r=a.fromJSON(e);return r.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),r})),new a({features:[]}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){null!=this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}_doResume(){this._refreshInterval=setInterval((()=>this.incrementSourceRefreshVersion()),this.layer.updateInterval)}_doDisconnect(){this._worker.streamMessenger.disconnect(),this._doPause()}_doConnect(){this._worker.streamMessenger.connect(),this.resume()}_doClear(){this._worker.streamMessenger.clear(),null==this._refreshInterval&&this.incrementSourceRefreshVersion()}_createClientOptions(){const e=super._createClientOptions(),r=this;return{...e,get container(){return r.featureContainer},setProperty:e=>{this.set(e.propertyName,e.value)}}}};e([n()],p.prototype,\"pipelineConnectionStatus\",void 0),e([n()],p.prototype,\"pipelineErrorString\",void 0),e([n({readOnly:!0})],p.prototype,\"connectionError\",null),e([n({readOnly:!0})],p.prototype,\"_streamConnectionStatus\",null),p=e([i(\"esri.views.2d.layers.StreamLayerView2D\")],p);const u=p;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../layers/support/FeatureFilter.js\";const r=r=>{let i=class extends r{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}disconnect(){this._doDisconnect()}connect(){this._doConnect()}clear(){this._doClear()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return(this._isUserPaused||this.suspended)&&\"connected\"===this._streamConnectionStatus?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],i.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],i.prototype,\"connectionStatus\",null),s([e({type:o})],i.prototype,\"filter\",void 0),i=s([t(\"esri.layers.mixins.StreamLayerView\")],i),i};export{r as default};\n"],"names":["p","h","c","constructor","super","arguments","this","pipelineConnectionStatus","pipelineErrorString","initialize","addHandles","o","layer","customParameters","e","_worker","streamMessenger","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","_isUserPaused","type","incrementSourceRefreshVersion","purgeOptions","_update","suspended","_onSuspendedChange","bind","_doResume","destroy","_doPause","connectionError","r","Array","isArray","t","map","includes","enableEvent","n","i","s","remove","closed","hasEventListener","queryLatestObservations","_this$layer$timeInfo","_this$layer$timeInfo2","_this$layer$timeInfo3","timeInfo","endField","startField","trackIdField","l","features","executeQueryForLatestObservations","_cleanUpQuery","then","a","fromJSON","forEach","sourceLayer","detach","_streamConnectionStatus","_refreshInterval","clearInterval","setInterval","updateInterval","_doDisconnect","disconnect","_doConnect","connect","resume","_doClear","clear","_createClientOptions","container","featureContainer","setProperty","set","propertyName","value","prototype","readOnly","u","pause","filter","connectionStatus"],"sourceRoot":""}