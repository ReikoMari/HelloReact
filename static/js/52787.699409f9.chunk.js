"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[52787],{86100:(e,t,s)=>{s.d(t,{DN:()=>l,Sv:()=>n,ZY:()=>a,z8:()=>i});s(35238);var o=s(68002),r=s(76797);function i(e){var t;switch(null===e||void 0===e?void 0:e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return null===(t=e.extent)||void 0===t?void 0:t.center;default:return null}}async function n(e,t){var s,o;if(e.hasZ||"2d"===t.type)return e;const r=null===(s=t.map)||void 0===s?void 0:s.ground;if(null===r||void 0===r||!r.layers.length)return e;const{geometry:i}=await r.queryElevation(e,{cache:null===(o=t.basemapTerrain)||void 0===o?void 0:o.elevationQueryCache});return i}function l(e,t,s){return u(e.center,t,s)}function a(e,t,s){switch(null===e||void 0===e?void 0:e.type){case"extent":return e;case"multipoint":case"polygon":case"polyline":return e.extent;case"point":return u(e,t,s);default:return null}}function u(e,t,s){const i=e.hasZ?e.z:void 0;if(null!==t&&void 0!==t&&t.map)return(null!=s?(0,o.eU)(t,s):t.extent).clone().centerAt(e).set({zmax:i,zmin:i});const{x:n,y:l,spatialReference:a}=e;return new r.A({xmin:n-.25,ymin:l-.25,xmax:n+.25,ymax:l+.25,spatialReference:a,zmin:i,zmax:i})}},71334:(e,t,s)=>{s.d(t,{C:()=>c});var o=s(3825),r=s(40565),i=s(19902),n=s(54994),l=s(71838),a=s(70414);const u=(0,r.dp)(a.A);async function c(e,t,s){t=u(t);const r=(0,n.Dl)(e),a={...r.query,f:"json",...t.toJSON()},c=t.outSpatialReference,d=(0,i.$B)(t.geometries[0]),h=(0,n.jV)(a,s);return(0,o.A)(r.path+"/project",h).then((e=>{let{data:{geometries:t}}=e;return(0,l.V)(t,d,c)}))}},70414:(e,t,s)=>{s.d(t,{A:()=>c});var o=s(35143),r=s(42553),i=s(46053),n=(s(81806),s(76460),s(47249),s(85842)),l=s(19902),a=s(80963);let u=class extends r.oY{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((e=>e.toJSON())),t=this.geometries[0],s={};return s.outSR=(0,a.YX)(this.outSpatialReference),s.inSR=(0,a.YX)(t.spatialReference),s.geometries=JSON.stringify({geometryType:(0,l.$B)(t),geometries:e}),this.transformation&&(s.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(s.transformForward=this.transformForward),s}};(0,o._)([(0,i.MZ)()],u.prototype,"geometries",void 0),(0,o._)([(0,i.MZ)({json:{read:{source:"outSR"}}})],u.prototype,"outSpatialReference",void 0),(0,o._)([(0,i.MZ)()],u.prototype,"transformation",void 0),(0,o._)([(0,i.MZ)()],u.prototype,"transformForward",void 0),u=(0,o._)([(0,n.$)("esri.rest.support.ProjectParameters")],u);const c=u},29067:(e,t,s)=>{s.d(t,{K:()=>o});const o={type:String,json:{read:{source:"token"},write:{target:"token"}}}},90992:(e,t,s)=>{function o(e){return e&&"function"==typeof e.highlight}function r(e){return e&&"function"==typeof e.maskOccludee}function i(e,t,s){return null==e||e>s&&(0===t||e<t)}function n(e,t){return null!=e&&e>0||null!=t&&t>0}function l(e){var t,s;const o=e.effectiveScaleRange;return{minScale:null!==(t=null===o||void 0===o?void 0:o.minScale)&&void 0!==t?t:0,maxScale:null!==(s=null===o||void 0===o?void 0:o.maxScale)&&void 0!==s?s:0}}function a(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatures"in e&&"layer"in e&&"view"in e}s.d(t,{Cf:()=>l,JU:()=>i,Of:()=>o,Uk:()=>r,WK:()=>n,lO:()=>a})},52787:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Pe});var o=s(35143),r=(s(11265),s(30726)),i=s(68134),n=s(88685),l=s(46053),a=(s(81806),s(76460)),u=(s(47249),s(85842)),c=s(25329),d=s(15062);const h="esri-search",p={base:h,widgetIcon:d.T.search,hasMultipleSources:"".concat(h,"--multiple-sources"),isLoading:"".concat(h,"--loading"),isSearching:"".concat(h,"--searching"),showSuggestions:"".concat(h,"--show-suggestions"),showSources:"".concat(h,"--sources"),showWarning:"".concat(h,"--warning"),container:"".concat(h,"__container"),input:"".concat(h,"__input"),inputContainer:"".concat(h,"__input-container"),form:"".concat(h,"__form"),submitButton:"".concat(h,"__submit-button"),sourcesButton:"".concat(h,"__sources-button"),sourcesButtonDown:"".concat(h,"__sources-button--down"),sourcesButtonUp:"".concat(h,"__sources-button--up"),clearButton:"".concat(h,"__clear-button"),sourceName:"".concat(h,"__source-name"),suggestionsMenu:"".concat(h,"__suggestions-menu"),suggestionList:"".concat(h,"__suggestions-list"),suggestionListCurrentLocation:"".concat(h,"__suggestions-list--current-location"),sourcesMenu:"".concat(h,"__sources-menu"),source:"".concat(h,"__source"),warningMenu:"".concat(h,"__warning-menu"),warningMenuBody:"".concat(h,"__warning-body"),warningMenuHeader:"".concat(h,"__warning-header"),warningMenuText:"".concat(h,"__warning-text"),noValueText:"".concat(h,"__no-value-text")},g="esri-search-result-renderer",v={base:g,showMoreResults:"".concat(g,"__more-results--show-more-results"),moreResults:"".concat(g,"__more-results"),moreResultsList:"".concat(g,"__more-results-list"),moreResultsHeader:"".concat(g,"__more-results-header"),moreResultsItem:"".concat(g,"__more-results-item"),moreResultsListHeader:"".concat(g,"__more-results-list-header")};var m=s(28899),y=s(86560),_=s(39356),f=s(16868),S=(s(95444),s(91967)),w=s(18690),M=s(19276),x=s(50076),b=s(54099),I=s(50346),R=s(13904),Z=s(13312),T=s(86100),A=s(38042),C=s(63860),L=s(65308),F=s(90992),E=s(53084),N=s(5632),k=s(42553);let K=class extends((0,N.sA)(k.oY)){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};(0,o._)([(0,l.MZ)()],K.prototype,"autoNavigate",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"filter",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"getResults",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"getSuggestions",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"maxResults",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"maxSuggestions",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"minSuggestCharacters",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"outFields",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"placeholder",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"popupEnabled",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"popupTemplate",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"prefix",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"resultGraphicEnabled",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"resultSymbol",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"suggestionsEnabled",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"suffix",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"withinViewEnabled",void 0),(0,o._)([(0,l.MZ)()],K.prototype,"zoomScale",void 0),K=(0,o._)([(0,u.$)("esri.widgets.Search.SearchSource")],K);const D=K;var j=s(31633),O=s(65215),B=s(77269),G=s(39348),P=s(65256);const z=/https?:\/\/services.*\.arcgis\.com/i,V=/(?:\{([^}]+)\})/g,H=()=>a.A.getLogger("esri.widgets.Search.support.layerSearchUtils");function J(e,t){const{exactMatch:s=!1,location:o,maxResults:r,spatialReference:i,source:n,sourceIndex:l,suggestResult:a,view:u}=e,{layer:c,filter:d,zoomScale:h}=n,p=null===u||void 0===u?void 0:u.scale,g=W(n,u),v=null===t||void 0===t?void 0:t.signal;return q(c).then((()=>{const e=c.popupTemplate;return e?e.getRequiredFields(c.fieldsIndex):null})).then((e=>{var t,m;const{objectIdField:y,returnZ:_}=c,f=se(n);if(!re(c,f))throw H().error("invalid-field: displayField is invalid."),new x.A("getResults():invalid-field","displayField is invalid.");const S=e&&e.length?e:[f],w=n.outFields||S,M=U(w);if(w.includes(y)||M||w.push(y),(null===(t=c.floorInfo)||void 0===t?void 0:t.floorField)&&w.push(c.floorInfo.floorField),!M&&!oe(c,w))throw H().error("invalid-field: outField is invalid."),new x.A("getResults():invalid-field","outField is invalid.");const b=c.createQuery(),{orderByFields:I}=n;if(I&&(b.orderByFields=I),i){b.outSpatialReference=i;const e=1/(0,j.GA)(i);e&&(b.maxAllowableOffset=e)}const R="mesh"===c.geometryType||"multipatch"===c.geometryType,Z=(null===(m=c.capabilities)||void 0===m||null===(m=m.data)||void 0===m?void 0:m.supportsZ)&&!R;if(b.returnZ=Z&&!1!==_,b.returnGeometry=!0,b.multipatchOption=R?"xyFootprint":null,w&&(b.outFields=w),o)b.geometry=o;else if(a.key)b.objectIds=[a.key];else{var T;const e=n.searchFields||[f];if(!oe(c,e))throw H().error("invalid-field: search field is invalid."),new x.A("getResults():invalid-field","search field is invalid.");te(c)&&(b.num=r),g&&(b.geometry=g);if(!(null===(T=a.text)||void 0===T?void 0:T.trim()))return[];const t=a.text,{prefix:o="",suffix:i=""}=n,l=ie("".concat(o).concat(t).concat(i));ee(c)&&Q(c,e)&&!s&&t&&(b.fullText=X({text:t,searchFields:e}));const u=le({searchTerm:l,layer:c,searchFields:e,filter:d,exactMatch:s,query:b,type:"search"});if(b.where=u,!Y(b))return[]}return c.queryFeatures(b,{signal:v}).then((e=>function(e,t,s,o,r,i,n){return e.features.map((e=>ue(e,t,s,o,r,i,n)))}(e,u,n,l,f,p,h)))}))}function $(e,t){const{source:s,spatialReference:o,view:r,suggestTerm:i,maxSuggestions:n,sourceIndex:l,exactMatch:a}=e,{layer:u,filter:c}=s,d=null===t||void 0===t?void 0:t.signal,h=W(s,r);return q(u).then((()=>{if(!te(u))return[];const e=se(s),t=s.searchFields||[e],r=[];s.suggestionTemplate?s.suggestionTemplate.replaceAll(V,((e,t)=>(r.push(t),e))):r.push(e);const p=U(r);r.includes(u.objectIdField)||p||r.push(u.objectIdField);const g=re(u,e),v=p||oe(u,r),m=oe(u,t);if(!g)throw H().error("invalid-field: displayField is invalid."),new x.A("getSuggestions():invalid-field","displayField is invalid.");if(!v)throw H().error("invalid-field: outField is invalid."),new x.A("getSuggestions():invalid-field","outField is invalid.");if(!m)throw H().error("invalid-field: search field is invalid."),new x.A("getSuggestions():invalid-field","search field is invalid.");const y=u.createQuery(),{orderByFields:_}=s;if(_&&(y.orderByFields=_),y.outSpatialReference=o,y.returnGeometry=!1,y.num=n,y.outFields=r,h&&(y.geometry=h),!i.trim())return[];const{prefix:f="",suffix:S=""}=s,w=ie("".concat(f).concat(i).concat(S));ee(u)&&Q(u,t)&&!a&&i&&(y.fullText=X({text:i,searchFields:t}));const M=le({searchTerm:w,layer:u,searchFields:t,filter:c,exactMatch:a,query:y,type:"suggest"});return y.where=M,Y(y)?u.queryFeatures(y,{signal:d}).then((t=>function(e,t,s,o){return e.features.map((e=>function(e,t,s,o){const r=e.sourceLayer,{attributes:i}=e,{objectIdField:n}=r,l=n?i[n]:null;return{text:ae(e,t.suggestionTemplate,o),key:l,sourceIndex:s}}(e,t,s,o)))}(t,s,l,e))):[]}))}function W(e,t){const{filter:s,withinViewEnabled:o}=e,r=null===t||void 0===t?void 0:t.extent,i=null===s||void 0===s?void 0:s.geometry;return null!==i&&void 0!==i?i:o&&r?r:void 0}function U(e){return e&&e.includes("*")}async function q(e){e&&await e.load()}function Y(e){return!(!e.fullText&&!e.where)}function Q(e,t){const s=null===e||void 0===e?void 0:e.indexes;return!(!s||null===t||void 0===t||!t.length)&&s.filter((e=>"FullText"===e.indexType)).some((e=>{var s;const o=(null===(s=e.fields)||void 0===s?void 0:s.split(",").map((e=>e.trim().toLowerCase())))||[];return t.every((e=>o.includes(e.toLowerCase())))}))}function X(e){let{text:t,searchFields:s}=e;return t.trim().split(" ").filter((e=>!!e.trim())).map((e=>new B.A({onFields:s,searchTerm:e,searchType:"prefix"})))}function ee(e){var t,s;return null!==(t=null===e||void 0===e||null===(s=e.capabilities)||void 0===s||null===(s=s.query)||void 0===s?void 0:s.supportsFullTextSearch)&&void 0!==t&&t}function te(e){var t,s;return null!==(t=null===e||void 0===e||null===(s=e.capabilities)||void 0===s||null===(s=s.query)||void 0===s?void 0:s.supportsPagination)&&void 0!==t&&t}function se(e){return e.displayField||e.layer.displayField||function(e){var t,s;return null!==(t=null===e||void 0===e||null===(s=e.fieldsIndex)||void 0===s||null===(s=s.fields)||void 0===s||null===(s=s.find((e=>"string"===e.type)))||void 0===s?void 0:s.name)&&void 0!==t?t:""}(e.layer)}function oe(e,t){return!(!e||null===t||void 0===t||!t.length)&&t.every((t=>re(e,t)))}function re(e,t){return!!e.getField(t)}function ie(e){return e.replaceAll("'","''")}function ne(e,t){const s=null===t||void 0===t?void 0:t.where;return s?"(".concat(e,") AND (").concat(s,")"):e}function le(e){let{searchTerm:t,layer:s,searchFields:o,filter:i,exactMatch:n,query:l,type:a}=e;const{definitionExpression:u,url:c}=s;let d="";return!l.fullText&&t&&o&&o.forEach((e=>{const o=s.getField(e),l="function"==typeof s.getFieldDomain&&s.getFieldDomain(e),u=(l&&"coded-value"===l.type?function(e,t,s){var o;let{codedValues:i}=e;return null!==(o=(0,r.Pb)(null!==i&&void 0!==i?i:[],(e=>{const o=e.name,r=s?o:o.toLowerCase();return(s?t:t.toLowerCase())===r?e.code.toString():null})))&&void 0!==o?o:null}(l,t,n):null)||t||null;if(null!==u){const e=function(e){let{currentTerm:t,field:s,filter:o,exactMatch:r,url:i,type:n}=e;const l=null===s||void 0===s?void 0:s.type,a=null===s||void 0===s?void 0:s.name;if("string"===l||"date"===l||"global-id"===l){const e=z.test(null!==i&&void 0!==i?i:""),s=e&&function(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}(t)?"N":"";return ne(r&&"search"===n?"".concat(a," = ").concat(s,"'").concat(t,"'"):e?"".concat(a," LIKE ").concat(s,"'".concat(t,"%'")):"".concat("LOWER(".concat(a,")")," LIKE ",s,"'".concat(t.toLowerCase(),"%'")),o)}if("oid"===l||"small-integer"===l||"integer"===l||"single"===l||"double"===l){const e=Number(t);return isNaN(e)?null:ne("".concat(a," = ").concat(e),o)}return ne("".concat(a," = ").concat(t),o)}({currentTerm:u,field:o,filter:i,exactMatch:n,url:c,type:a});e&&(d+=function(e,t){return e?" OR (".concat(t,")"):"(".concat(t,")")}(d,e))}})),u&&d?"(".concat(u,") AND (").concat(d,")"):u||d}function ae(e,t,s){const o=e.sourceLayer,{attributes:r}=e,i="function"==typeof o.getFieldDomain&&o.getFieldDomain(s);if(t)return(0,G.V)(t,r);if(s&&r){var n;const e=o.getField(s),t=function(e,t){var s;return null!==(s=e[t])&&void 0!==s?s:e[Object.keys(e).find((e=>e.toLowerCase()===t.toLowerCase()))]}(r,s);return null==t?"":i&&"coded-value"===i.type?null!==(n=function(e,t){let s=null;const{codedValues:o}=e;return o&&o.length&&o.some((e=>e.code===t&&(s=e.name,!0))),s}(i,t))&&void 0!==n?n:"":"date"===(null===e||void 0===e?void 0:e.type)?(0,P.Yq)(new Date(t)):"number"==typeof t?t.toString():"string"!=typeof t?"":t.trim()}return""}function ue(e,t,s,o,r,i,n){var l;const a=e.clone(),u=e.sourceLayer,c=null===u||void 0===u?void 0:u.objectIdField,d=c?e.attributes[c]:null,h=ae(e,s.searchTemplate,r);null!=i&&function(e){return null!=e&&null!=e.minScale&&null!=e.maxScale}(u)&&(u.minScale&&u.minScale<i?i=u.minScale:u.maxScale&&u.maxScale>i&&(i=u.maxScale));const p=a.geometry?(0,T.ZY)(a.geometry,null!==t&&void 0!==t?t:void 0,null!==(l=i)&&void 0!==l?l:void 0):void 0,g="number"==typeof n&&p?(0,T.DN)((0,E.o8)(p),null!==t&&void 0!==t?t:void 0,n):p,v=e.clone();return null!=g&&(v.geometry=O.A.fromExtent(g)),{extent:g,target:v,feature:a,key:d,name:h,sourceIndex:o}}var ce;let de=ce=class extends D{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,t)=>J({source:this,...e},t),this.getSuggestions=(e,t)=>$({source:this,...e},t)}set layer(e){this._set("layer",e),e&&e.load().catch((()=>{}))}get name(){var e;return null!==(e=this._getLayerTitle())&&void 0!==e?e:""}set name(e){this._overrideIfSome("name",e)}clone(){return new ce({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,E.o8)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?(0,E.o8)(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return null!==(e=null===(t=this.layer.fieldsIndex)||void 0===t||null===(t=t.fields.find((e=>"string"===e.type)))||void 0===t?void 0:t.name)&&void 0!==e?e:""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?": ".concat((t||[this._getDisplayField()]).map((t=>{const s=e.getField(t);return(null===s||void 0===s?void 0:s.alias)||t})).join(", ")):""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?"".concat(t).concat(this._getSearchFieldsString()):void 0}};(0,o._)([(0,l.MZ)({json:{read:{source:"field.name"},write:{target:"field.name"}}})],de.prototype,"displayField",void 0),(0,o._)([(0,l.MZ)({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],de.prototype,"exactMatch",void 0),(0,o._)([(0,l.MZ)({value:null})],de.prototype,"layer",null),(0,o._)([(0,l.MZ)()],de.prototype,"name",null),(0,o._)([(0,l.MZ)({type:[String],json:{write:!0}})],de.prototype,"orderByFields",void 0),(0,o._)([(0,l.MZ)()],de.prototype,"searchFields",void 0),(0,o._)([(0,l.MZ)()],de.prototype,"searchTemplate",void 0),(0,o._)([(0,l.MZ)()],de.prototype,"suggestionTemplate",void 0),de=ce=(0,o._)([(0,u.$)("esri.widgets.Search.LayerSearchSource")],de);const he=de;var pe,ge=s(72153);let ve=pe=class extends D{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,t)=>(0,ge.h1)({source:this,...e},t),this.getSuggestions=(e,t)=>(0,ge.KW)({source:this,...e},t)}clone(){return new pe({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,E.o8)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?(0,E.o8)(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};(0,o._)([(0,l.MZ)()],ve.prototype,"apiKey",void 0),(0,o._)([(0,l.MZ)()],ve.prototype,"categories",void 0),(0,o._)([(0,l.MZ)()],ve.prototype,"countryCode",void 0),(0,o._)([(0,l.MZ)({json:{write:!0}})],ve.prototype,"defaultZoomScale",void 0),(0,o._)([(0,l.MZ)()],ve.prototype,"localSearchDisabled",void 0),(0,o._)([(0,l.MZ)()],ve.prototype,"locationType",void 0),(0,o._)([(0,l.MZ)({json:{write:!0}})],ve.prototype,"name",void 0),(0,o._)([(0,l.MZ)({json:{write:!0}})],ve.prototype,"placeholder",void 0),(0,o._)([(0,l.MZ)()],ve.prototype,"searchTemplate",void 0),(0,o._)([(0,l.MZ)({json:{write:!0}})],ve.prototype,"singleLineFieldName",void 0),(0,o._)([(0,l.MZ)({json:{read:{source:"suggest"},write:{target:"suggest"}}})],ve.prototype,"suggestionsEnabled",void 0),(0,o._)([(0,l.MZ)({json:{write:!0}})],ve.prototype,"url",void 0),(0,o._)([(0,l.MZ)({json:{write:!0}})],ve.prototype,"zoomScale",void 0),ve=pe=(0,o._)([(0,u.$)("esri.widgets.Search.LocatorSearchSource")],ve);const me=ve;var ye=s(99403),_e=s(79535),fe=s(27410),Se=s(86645),we=s(86875),Me=s(86659);function xe(e,t){return e.hasOwnProperty(t)&&null!=e[t]&&""!==e[t]}const be="highlight",Ie=M.A.ofType({key:e=>e.layer?"layer":"locator",base:D,typeMap:{layer:he,locator:me}}),Re=Z.A.WGS84,Ze=/<[\s\S]*?>/g,Te=-1;let Ae=class extends((0,_e.R)(b.A.EventedMixin(S.A))){constructor(e){super(e),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new Ie,this.defaultSymbols={point:new fe.A({url:(0,m.s)("esri/images/search/search-symbol-32.png"),size:24,width:24,height:24}),polyline:new Se.default({color:[130,130,130,1],width:2}),polygon:new we.default({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=L.A.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new Ie,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const e=await(0,C.ud)("esri/widgets/Search/t9n/Search");this.messages=e,this.defaultPopupTemplate=new f.A({title:e.searchResult,content:"{Match_addr}"})};e(),this.addHandles([(0,i.watch)((()=>[this.includeDefaultSources,this.view,this.portal]),(()=>this._update()),i.initial),(0,A.oQ)(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){var e;return null!==(e=this.allSources.at(this.activeSourceIndex))&&void 0!==e?e:null}get activeSourceIndex(){return 1!==this.allSources.length&&this.searchAllEnabled?Te:0}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return null===(e=this.messages)||void 0===e?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:s}=this,o="function"==typeof s?s.call(null,{sources:e,defaultSources:t}):s?t.concat(e):e,r=this._get("allSources")||new Ie;return r.removeAll(),r.addMany(o.filter(Boolean)),r}get locationEnabled(){return this._get("locationEnabled")||(0,ye.$j)()}set locationEnabled(e){if(void 0===e)return void this._clearOverride("locationEnabled");const t=(0,ye.$j)();if(e&&!t){const e=new x.A("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});a.A.getLogger(this).error(e)}this._override("locationEnabled",!!e&&t)}get placeholder(){var e;const{allSources:t,activeSourceIndex:s,allPlaceholder:o}=this;if(s===Te)return null!==o&&void 0!==o?o:"";const r=t.at(s);return null!==(e=null===r||void 0===r?void 0:r.placeholder)&&void 0!==e?e:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),""===e&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}get updating(){return null!=this._updatingPromise}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:t}=this;e&&t&&e.graphics.remove(t),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const s=this._createSuggestionForSearch(e),o=(async()=>{try{var e,o;await this.when();const r=await this._getResultsFromSources(s,t);if(null!==t&&void 0!==t&&null!==(e=t.signal)&&void 0!==e&&e.aborted)return null;const i={activeSourceIndex:this.activeSourceIndex,searchTerm:null!==(o=s.text)&&void 0!==o?o:"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(i,r,s);const n=this._getFirstResult(i.results),l=s.location&&n?n.name:s.text,a=null===l||void 0===l?void 0:l.replace(Ze,"");return this._set("searchTerm",a),(s.key&&"number"==typeof s.sourceIndex||s.location)&&this._set("selectedSuggestion",s),this._set("results",i.results),this._set("resultCount",i.results.reduce(((e,t)=>{var s,o;return e+(null!==(s=null===(o=t.results)||void 0===o?void 0:o.length)&&void 0!==s?s:0)}),0)),this.emit("search-complete",i),await this._selectFirstResult(n),i}finally{this._clearSearching()}})();return this._searching=o,o}async searchNearby(e){if(!this.locationEnabled){const e=new x.A("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw a.A.getLogger(this).error(e),e}const t=(async()=>{try{const t=await(0,ye.J1)(),s=await(0,ye.Ly)({position:t,view:this.view},e);return await this.search(s,e)}finally{this._clearSearching()}})();return this._searching=t,t}async select(e){if(this.clearGraphics(),!e){const t=new x.A("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});throw a.A.getLogger(this).error(t),t}const{view:t}=this,s=xe(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),o=null!=s?this.allSources.at(s):null;if(!o){const e=new x.A("select:missing-source","Cannot select without a source.",{source:o});throw a.A.getLogger(this).error(e),e}const r=o instanceof he?this._getLayerSourcePopupTemplate(o):o.popupTemplate,i=o.resultSymbol||this._getDefaultSymbol(e),n=xe(o,"resultGraphicEnabled")?o.resultGraphicEnabled:this.resultGraphicEnabled,l=xe(o,"autoNavigate")?o.autoNavigate:this.autoNavigate,u=(xe(o,"popupEnabled")?o.popupEnabled:this.popupEnabled)?r||this.popupTemplate||this.defaultPopupTemplate:null,{feature:c}=e;if(!c){const e=new x.A("select:missing-feature","Cannot select without a feature.",{feature:c});throw a.A.getLogger(this).error(e),e}const{attributes:d,geometry:h,layer:p,sourceLayer:g}=c,v=h?(0,T.z8)(h):null,m={layerViewQuery:this._getLayerView(c),elevationQuery:t&&null!=v?(0,T.Sv)(v,t):Promise.resolve(v)},y=await(0,I.Lx)(m),f=y.layerViewQuery.value,S=y.elevationQuery.value;i instanceof Me.A&&(i.text=e.name);const w=t&&l?e.target||e.extent:null,M=null!=w?this._goToSearchResult(w):Promise.resolve();await M;const b=f?c:new _.A({geometry:h,symbol:i,attributes:d,layer:p,sourceLayer:g,popupTemplate:u}),R=null===t||void 0===t?void 0:t.popup,Z=R&&b.getEffectivePopupTemplate(R.defaultPopupTemplateEnabled);return Z&&await t.openPopup({features:[b],location:S}),f&&(0,F.Of)(f)&&!Z&&this._highlightFeature({graphic:b,layerView:f}),!f&&n&&t&&t.graphics.push(b),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",b),this.emit("select-result",{result:e,source:o,sourceIndex:s}),e}async suggest(e,t,s){var o;const r=e||this.searchTerm;this.emit("suggest-start",{searchTerm:r}),await this._suggestTimer(t,s);const i=await this._suggestImmediate(r,s);return this._set("suggestions",null===i||void 0===i?void 0:i.results),this._set("suggestionCount",null!==(o=null===i||void 0===i?void 0:i.results.reduce(((e,t)=>{var s,o;return e+(null!==(s=null===(o=t.results)||void 0===o?void 0:o.length)&&void 0!==s?s:0)}),0))&&void 0!==o?o:null),this.emit("suggest-complete",i),i}async when(){await(0,i.whenOnce)((()=>!this.updating))}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const s=this._updatingPromise=(0,I.Lx)([null===e||void 0===e?void 0:e.load(),null===t||void 0===t?void 0:t.when()]);if(this.destroyed)return;if(await s,s!==this._updatingPromise)return}await(0,i.whenOnce)((()=>this.messages)),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var e;const t=null===(e=this.portal)||void 0===e||null===(e=e.helperServices)||void 0===e?void 0:e.geocode;return t?t.map((e=>{if(!1===e.placefinding)return;const t=y.A.apiKey&&(0,ge.m$)(e.url)?{url:ge.jd}:null,s=me.fromJSON({...e,...t}),o=s.url;if((0,ge.m$)(o)||(0,ge.jE)(o)||(0,ge.sx)(o)){var r,i,n;const e=null!==(r=s.outFields)&&void 0!==r?r:["Addr_type","Match_addr","StAddr","City"],t=null!==(i=s.placeholder||(null===(n=this.messages)||void 0===n?void 0:n.placeholder))&&void 0!==i?i:"",o="number"==typeof s.defaultZoomScale?s.defaultZoomScale:2500;s.singleLineFieldName="SingleLine",s.outFields=e,s.placeholder=t,s.defaultZoomScale=o}return s.singleLineFieldName?s:void 0})).filter(w.Ru):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach((e=>null===e||void 0===e?void 0:e.destroy())),this._createdFeatureLayers=[]}_getLayerSources(e,t){var s;const o=null===(s=this.view)||void 0===s?void 0:s.map;return e.map((e=>{const s=o.findLayerById(e.id);if(!s)return;const r=this._getLayerJSON(e),i=he.fromJSON(r);return i.placeholder=t,this._getLayer(s,r).then((e=>{i.layer=e})),i})).filter(w.Ru).toArray()}_getTableSources(e,t){var s;const o=null===(s=this.view)||void 0===s?void 0:s.map;return e.map((e=>{if(!e.id)return;const s=o.findTableById(e.id);if(!s)return;const r=this._getLayerJSON(e),i=he.fromJSON(r);return i.placeholder=t,this._getLayer(s,r).then((e=>{i.layer=e})),i})).filter(w.Ru).toArray()}_convertApplicationProperties(){var e,t;const s=null===(e=this.view)||void 0===e?void 0:e.map,o=null===s||void 0===s||null===(t=s.applicationProperties)||void 0===t||null===(t=t.viewing)||void 0===t?void 0:t.search;if(!o)return[];const{enabled:r,hintText:i,layers:n,tables:l}=o;return r?[...this._getLayerSources(n,i),...this._getTableSources(l,i)]:[]}async _getSubLayer(e,t){var s;if(await e.load(),!e.allSublayers)throw new Error;const o=e.allSublayers.find((e=>e.id===t.subLayer));if(!o)throw new Error;const r=await(null===(s=o.createFeatureLayer)||void 0===s?void 0:s.call(o));if(!r)throw new Error;return this._createdFeatureLayers.push(r),r}async _getBuildingSubLayer(e,t){await e.load();const s=e.allSublayers.find((e=>e.id===t.subLayer));if("building-component"!==(null===s||void 0===s?void 0:s.type))throw new Error;if(await s.load(),null==s.associatedLayer)throw new Error;return await s.associatedLayer.load(),s}async _getLayer(e,t){if("feature"===e.type||"scene"===e.type||"csv"===e.type||"geojson"===e.type||"ogc-feature"===e.type)return e;if("map-image"===e.type)try{return await this._getSubLayer(e,t)}catch(D){const s=new x.A("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return a.A.getLogger(this).error(s),null}return"building-scene"===e.type?this._getBuildingSubLayer(e,t):null}_getLayerJSON(e){return"function"==typeof e.toJSON?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;this._destroyFeatureLayers(),e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var e;const t=null===(e=this.view)||void 0===e?void 0:e.popup,{resultGraphic:s}=this;if(!t||!s)return;const o="selectedFeature"in t,r=o?t.selectedFeature:null;o&&r&&r===s&&t.close()}_suggestTimer(e,t){const s=null!=e?e:this.suggestionDelay;return(0,I.Pl)(s,null,null===t||void 0===t?void 0:t.signal)}_createLocationForSearch(e){return e instanceof _.A&&e.geometry?(0,T.z8)(e.geometry):e instanceof R.A?e:Array.isArray(e)&&2===e.length?new R.A({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&xe(e,"key")&&xe(e,"text")&&xe(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),s="string"==typeof e?e:this.searchTerm,{selectedSuggestion:o,selectedResult:r}=this,i=!e&&o&&r,n=i&&o.key===r.key&&o.sourceIndex===r.sourceIndex,l=i&&o.location;return n||l?o:{location:t,text:t?"":s,sourceIndex:null,key:null}}_getFirstResult(e){var t;return null!==(t=(0,r.Pb)(e,(e=>{let{results:t}=e;return null===t||void 0===t?void 0:t[0]})))&&void 0!==t?t:null}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,t){var s;await this.when();const o=await this._getSuggestionsFromSources(e,t);if(null!==t&&void 0!==t&&null!==(s=t.signal)&&void 0!==s&&s.aborted)return null;const r={activeSourceIndex:this.activeSourceIndex,searchTerm:null!==e&&void 0!==e?e:"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(r,o),r}_formatSourceResponse(e,t,s){const o=(null===t||void 0===t?void 0:t.value)||[],r=null===t||void 0===t?void 0:t.error,i=this.allSources.at(s);if(r){const t={sourceIndex:s,source:i,error:r};e.errors.push(t),a.A.getLogger(this).error(r),e.numErrors++}else{const t={sourceIndex:s,source:i,results:o};e.results.push(t),e.numResults+=o.length}}_formatResponse(e,t,s){if(t)if(e.activeSourceIndex===Te){const o=s&&xe(s,"sourceIndex")&&-1!==s.sourceIndex?s.sourceIndex:void 0;t.forEach(((t,s)=>{const r=void 0!==o?o:s;this._formatSourceResponse(e,t,r)}))}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}async _getResultsFromSources(e,t){const{allSources:s}=this,o=!e.location&&xe(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,r=[];if(!s.length){const e=new x.A("search:no-sources-defined","At least one source is required.",{allSources:s});throw a.A.getLogger(this).error(e),e}return o===Te?s.forEach(((s,o)=>{r.push(this._getResultsFromSource(e,o,t))})):r.push(this._getResultsFromSource(e,o,t)),(0,I.Lx)(r)}async _getSuggestionsFromSources(e,t){const{allSources:s,activeSourceIndex:o}=this,r=[];if(!s.length){const e=new x.A("suggest:no-sources-defined","At least one source is required.",{allSources:s});throw a.A.getLogger(this).error(e),e}return o===Te?s.forEach(((s,o)=>{r.push(this._getSuggestionsFromSource(e,o,t))})):r.push(this._getSuggestionsFromSource(e,o,t)),(0,I.Lx)(r)}async _getResultsFromSource(e,t,s){var o,r;const i=null!=t?this.allSources.at(t):null;if(!i)return null;const{location:n=null}=e,l=(null===(o=this.view)||void 0===o?void 0:o.spatialReference)||Re,a=xe(i,"maxResults")?i.maxResults:this.maxResults,u=!!(i instanceof he&&xe(i,"exactMatch"))&&i.exactMatch,{view:c}=this;return null===(r=i.getResults)||void 0===r?void 0:r.call(i,{view:c,sourceIndex:t,location:n,suggestResult:e,spatialReference:l,exactMatch:u,maxResults:a},s)}async _getSuggestionsFromSource(e,t,s){var o,r;const i=this.allSources.at(t);if(!i)return null;null!==(o=e)&&void 0!==o||(e="");const n=xe(i,"suggestionsEnabled")?i.suggestionsEnabled:this.suggestionsEnabled,l=null===(r=e)||void 0===r?void 0:r.length,a=xe(i,"minSuggestCharacters")?i.minSuggestCharacters:this.minSuggestCharacters;if(n&&e.trim()&&l>=a){var u,c;const o=(null===(u=this.view)||void 0===u?void 0:u.spatialReference)||Re,r=xe(i,"maxSuggestions")?i.maxSuggestions:this.maxSuggestions,{view:n}=this,l=!!(i instanceof he&&xe(i,"exactMatch"))&&i.exactMatch;return null===(c=i.getSuggestions)||void 0===c?void 0:c.call(i,{view:n,sourceIndex:t,suggestTerm:e,spatialReference:o,maxSuggestions:r,exactMatch:l},s)}return null}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return xe(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){var t,s;return null!==(t=(0,r.Pb)(null!==(s=this.results)&&void 0!==s?s:[],(t=>{let{results:s,sourceIndex:o}=t;return(null===s||void 0===s?void 0:s.includes(e))?o:null})))&&void 0!==t?t:null}async _goToSearchResult(e){this._abortGoTo();const t=new AbortController;this._gotoController=t;const s={target:{target:e},options:{signal:t.signal}};e||(s.options.animate=!1),await this.callGoTo(s),this._gotoController=null}_getDefaultSymbol(e){var t;const{defaultSymbols:s}=this,o=null===(t=e.feature)||void 0===t?void 0:t.geometry;if(null==o)return null;switch(o.type){case"point":case"multipoint":return s.point;case"polyline":return s.polyline;case"extent":case"polygon":return s.polygon;default:return null}}_removeHighlight(){this.removeHandles(be)}async _getLayerView(e){var t,s;const{view:o}=this;if(!e||!o||"building-component"===(null===(t=e.layer)||void 0===t?void 0:t.type)||"subtype-sublayer"===(null===(s=e.layer)||void 0===s?void 0:s.type))return null;const{layer:r}=e;return r?(await o.when(),o.whenLayerView(r)):null}_highlightFeature(e){var t;const{graphic:s,layerView:o}=e,{attributes:r,layer:i}=s,{objectIdField:n}=i,l=null!==(t=n&&(null===r||void 0===r?void 0:r[n]))&&void 0!==t?t:null,a=o.highlight(null!==l&&void 0!==l?l:s);this.addHandles(a,be)}_setResultFloor(e){var t,s,o;const{view:r}=this,i=null===(t=e.feature)||void 0===t?void 0:t.attributes,n=null===(s=e.feature)||void 0===s?void 0:s.sourceLayer;if(n&&"floorInfo"in n&&null!==n&&void 0!==n&&null!==(o=n.floorInfo)&&void 0!==o&&o.floorField&&i){const e=i[n.floorInfo.floorField];null===r||void 0===r||r.emit("select-result-floor",e)}}};Ae.ALL_INDEX=Te,(0,o._)([(0,l.MZ)()],Ae.prototype,"_searching",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"_updatingPromise",void 0),(0,o._)([(0,l.MZ)({readOnly:!0,value:null})],Ae.prototype,"activeSource",null),(0,o._)([(0,l.MZ)()],Ae.prototype,"activeSourceIndex",null),(0,o._)([(0,l.MZ)()],Ae.prototype,"allPlaceholder",null),(0,o._)([(0,l.MZ)({readOnly:!0})],Ae.prototype,"allSources",null),(0,o._)([(0,l.MZ)()],Ae.prototype,"autoNavigate",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"autoSelect",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"defaultPopupTemplate",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],Ae.prototype,"defaultSources",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"defaultSymbols",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"includeDefaultSources",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"locationEnabled",null),(0,o._)([(0,l.MZ)()],Ae.prototype,"maxInputLength",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"maxResults",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"maxSuggestions",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"messages",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"minSuggestCharacters",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],Ae.prototype,"placeholder",null),(0,o._)([(0,l.MZ)()],Ae.prototype,"popupEnabled",void 0),(0,o._)([(0,l.MZ)({type:f.A})],Ae.prototype,"popupTemplate",void 0),(0,o._)([(0,l.MZ)({type:L.A})],Ae.prototype,"portal",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"resultCount",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"resultGraphicEnabled",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],Ae.prototype,"resultGraphic",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],Ae.prototype,"results",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],Ae.prototype,"selectedSuggestion",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"searchAllEnabled",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],Ae.prototype,"selectedResult",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"searchTerm",null),(0,o._)([(0,l.MZ)({type:Ie})],Ae.prototype,"sources",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],Ae.prototype,"state",null),(0,o._)([(0,l.MZ)()],Ae.prototype,"suggestionDelay",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"suggestionCount",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],Ae.prototype,"suggestions",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"suggestionsEnabled",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],Ae.prototype,"updating",null),(0,o._)([(0,l.MZ)()],Ae.prototype,"view",void 0),(0,o._)([(0,l.MZ)()],Ae.prototype,"clear",null),Ae=(0,o._)([(0,u.$)("esri.widgets.Search.SearchViewModel")],Ae);const Ce=Ae;var Le=s(98108),Fe=s(20459),Ee=s(63582),Ne=s(54761),ke=s(76099);let Ke=class extends c.A{constructor(e,t){super(e,t),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}destroy(){this.viewModel=null}render(){const e={[v.showMoreResults]:this.showMoreResultsOpen};return(0,Ne.K)("div",{class:this.classes(v.base,Le.D.widget)},(0,Ne.K)("div",{class:this.classes(v.moreResults,e),key:"esri-search-renderer__container"},this._renderSearchResultName(),this._renderMoreResults()))}_renderMoreResults(){return(0,Ne.K)("div",{key:"esri-search-renderer__more-results"},this._renderMoreResultsButton(),this._renderMoreResultsLists())}_renderSearchResultName(){var e;const t=null===(e=this.viewModel)||void 0===e?void 0:e.selectedResult,s=(null===t||void 0===t?void 0:t.name)||"";return(0,Ne.K)("div",{class:v.moreResultsItem,key:"esri-search-renderer__result-name"},s)}_renderMoreResultsLists(){var e;const{viewModel:t}=this;if(!t)return[];const s=t.results;if((null!==(e=t.resultCount)&&void 0!==e?e:0)<2)return null;const o=null===s||void 0===s?void 0:s.map((e=>this._renderMoreResultsList(e)));return(0,Ne.K)("div",{class:v.moreResultsList,key:"esri-search-renderer__more-results-container"},o)}_renderMoreResultsButton(){var e;const{messages:t,viewModel:s}=this;return s?(null!==(e=s.resultCount)&&void 0!==e?e:0)<2?null:(0,Ne.K)("div",{class:v.moreResultsItem,key:"esri-search-renderer__more-results-button"},(0,Ne.K)("a",{bind:this,class:Le.D.anchor,href:"#",onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?t.hideMoreResults:t.showMoreResults)):null}_renderMoreResultsHeader(e,t){return(0,Ne.K)("div",{class:v.moreResultsListHeader,key:"esri-search-result-renderer__header-".concat(t)},e)}_renderMoreResultsList(e){var t,s,o,r;const{results:i}=e,n=null!==(t=null===i||void 0===i?void 0:i.length)&&void 0!==t?t:0,l=n>0,a=null===(s=this.viewModel)||void 0===s?void 0:s.selectedResult,u=1===n&&i[0]===a,c=this._getSourceName(e.source,e.sourceIndex),d=(null!==(o=null===(r=this.viewModel)||void 0===r||null===(r=r.results)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>1&&!u?this._renderMoreResultsHeader(c,e.sourceIndex):null,h=l&&i.map(((e,t)=>this._renderMoreResultsListItem(e,t))),p=l&&!u?(0,Ne.K)("ul",{key:"esri-search-result-renderer__list-".concat(e.sourceIndex)},h):null;return l?(0,Ne.K)("div",{key:"esri-search-result-renderer__results-".concat(e.sourceIndex)},d,p):null}_renderMoreResultsListItem(e,t){var s;return e!==(null===(s=this.viewModel)||void 0===s?void 0:s.selectedResult)?(0,Ne.K)("li",{key:"esri-search-result-renderer__list-item-".concat(t)},(0,Ne.K)("a",{bind:this,class:Le.D.anchor,"data-result":e,href:"#",onclick:this._selectResultClick,onkeydown:this._selectResultClick,tabIndex:0},e.name)):null}_showMoreResultsClick(e){var t;e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const s=null===(t=this.viewModel)||void 0===t||null===(t=t.view)||void 0===t?void 0:t.popup;s&&"reposition"in s&&s.reposition()}_selectResultClick(e){var t;e.preventDefault();const s=e.currentTarget["data-result"];null===(t=this.viewModel)||void 0===t||t.select(s)}_getSourceName(e,t){return t===Ce.ALL_INDEX?this.messages.all:e.name}};(0,o._)([(0,l.MZ)(),(0,Ee.G)("esri/widgets/Search/t9n/Search")],Ke.prototype,"messages",void 0),(0,o._)([(0,l.MZ)()],Ke.prototype,"showMoreResultsOpen",void 0),(0,o._)([(0,l.MZ)()],Ke.prototype,"viewModel",void 0),(0,o._)([(0,Fe.$)()],Ke.prototype,"_showMoreResultsClick",null),(0,o._)([(0,Fe.$)()],Ke.prototype,"_selectResultClick",null),Ke=(0,o._)([(0,u.$)("esri.widgets.Search.SearchResultRenderer")],Ke);const De=Ke;var je=s(12254);const Oe=/<[a-z/][\s\S]*>/i;let Be=class extends c.A{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new De,this._suggestController=null,this._searchController=null,this._locateFailed=!1,this._container=null,this.activeMenu="none",this.disabled=!1,this.iconClass=p.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.viewModel=new Ce,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=e=>{var t;const s=e.relatedTarget;s&&(null===(t=this._container)||void 0===t?void 0:t.contains(s))||this._clearActiveMenu()},this.addHandles([(0,i.watch)((()=>this.searchTerm),(e=>{var t;(e&&"warning"===this.activeMenu||!e&&(null===(t=this.viewModel)||void 0===t||null===(t=t.selectedSuggestion)||void 0===t||!t.location))&&this._clearActiveMenu()})),(0,i.on)((()=>{var e;return null===(e=this.viewModel)||void 0===e?void 0:e.allSources}),"change",(()=>this._watchSourceChanges())),(0,i.watch)((()=>this.activeMenu),(()=>this._resetActiveMenuItemIndex()),i.initial),(0,i.watch)((()=>{var e;return null===(e=this.viewModel)||void 0===e?void 0:e.defaultPopupTemplate}),(e=>{e&&(e.content=this._renderSearchResultsContent.bind(this))}),i.initial)])}destroy(){this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer=(0,r.pR)(this._searchResultRenderer)}get displayedSearchTerm(){return"".concat(this.viewModel.searchTerm).trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){var e;return null===(e=this.viewModel)||void 0===e?void 0:e.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(e){this.viewModel.activeSourceIndex=e}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(e){this.viewModel.allPlaceholder=e}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(e){this.viewModel.autoNavigate=e}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(e){this.viewModel.autoSelect=e}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(e){this.viewModel.includeDefaultSources=e}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(e){this.viewModel.locationEnabled=e}get maxResults(){return this.viewModel.maxResults}set maxResults(e){this.viewModel.maxResults=e}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(e){this.viewModel.maxSuggestions=e}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(e){this.viewModel.minSuggestCharacters=e}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(e){this.viewModel.popupEnabled=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get portal(){var e;return null===(e=this.viewModel)||void 0===e?void 0:e.portal}set portal(e){this.viewModel&&(this.viewModel.portal=e)}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(e){this.viewModel.resultGraphic=e}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(e){this.viewModel.resultGraphicEnabled=e}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(e){this.viewModel.searchAllEnabled=e}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(e){this.viewModel.searchTerm=e}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(e){this.viewModel.suggestionsEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}clear(){this.viewModel.clear()}focus(){var e;null!==(e=this._inputNode)&&void 0!==e&&e.focus(),this.emit("search-focus")}blur(){var e;null!==(e=this._inputNode)&&void 0!==e&&e.blur(),this.emit("search-blur")}async search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:s}=t;this._searchController=t;try{const o=await this.viewModel.search(e,{signal:s});if(this._searchController!==t)return;return this.activeMenu=null!==o&&void 0!==o&&o.numResults?"none":"warning",this._searchController=null,o}catch(D){if(this._searchController!==t)return;return this._clearActiveMenu(),void(this._searchController=null)}}async suggest(e){this._cancelSuggest();const t=new AbortController,{signal:s}=t;this._suggestController=t;try{const o=await this.viewModel.suggest(e,null,{signal:s});if(this._suggestController!==t)return;return this._suggestController=null,null!==o&&void 0!==o&&o.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),o}catch(D){return this._suggestController!==t||(this._suggestController=null),null}}render(){const{state:e}=this.viewModel,t={[Le.D.disabled]:"disabled"===e,[Le.D.widgetDisabled]:this.disabled};return(0,Ne.K)("div",{class:this.classes(p.base,Le.D.widget,t)},"loading"===e?this._renderLoader():this._renderContainer())}_renderSubmitButton(){const{messages:e,disabled:t}=this;return(0,Ne.K)("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(p.submitButton,Le.D.widgetButton),disabled:t,key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},(0,Ne.K)("span",{"aria-hidden":"true",class:d.T.search}))}_renderWarningMenu(){return(0,Ne.K)("div",{class:this.classes(Le.D.menu,p.warningMenu),key:"esri-search__error-menu"},(0,Ne.K)("div",{class:p.warningMenuBody},this._renderWarning()))}_renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:s,sourceMenuButtonId:o,disabled:r}=this,{activeSourceIndex:i,allSources:n}=this.viewModel;return n.length>1?(0,Ne.K)("button",{afterCreate:ke.cA,"aria-controls":s,"aria-expanded":("source"===t).toString(),"aria-haspopup":"true","aria-label":e.searchIn,bind:this,class:this.classes(p.sourcesButton,Le.D.widgetButton),"data-node-ref":"_sourceMenuButtonNode",disabled:r,id:o,key:"esri-search__source-menu-button",onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,title:e.searchIn,type:"button"},(0,Ne.K)("span",{"aria-hidden":"true",class:this.classes(d.T.downArrow,p.sourcesButtonDown)}),(0,Ne.K)("span",{"aria-hidden":"true",class:this.classes(d.T.upArrow,p.sourcesButtonUp)}),(0,Ne.K)("span",{class:p.sourceName},this._getSourceName(i))):null}_renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:s,activeMenu:o,sourceMenuId:r,sourceMenuButtonId:i}=this,n="source"===o&&s>-1?this._buildId("source-item",s):null;return e.length>1?(0,Ne.K)("ul",{afterCreate:ke.cA,"aria-activedescendant":n,"aria-labelledby":i,bind:this,class:Le.D.menuList,"data-node-ref":"_sourceListNode",id:r,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,role:"menu",tabIndex:-1},t?this._renderSource(Ce.ALL_INDEX):null,e.map(((e,t)=>this._renderSource(t))).toArray()):null}_renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?(0,Ne.K)("div",{class:this.classes(Le.D.menu,p.sourcesMenu),key:"esri-search__source-menu"},this._renderSourcesList()):null}_renderLoader(){const{messages:e,messagesCommon:t,disabled:s}=this;return(0,Ne.K)("div",{class:Le.D.loader,key:"base-loader",tabIndex:s?-1:void 0},(0,Ne.K)("span",{"aria-hidden":"true",class:Le.D.loaderAnimation}),(0,Ne.K)("span",{class:d.T.fontFallbackText},e.searchButtonTitle),(0,Ne.K)("span",{class:Le.D.loaderText},t.loading))}_renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:s}=this,o={[p.hasMultipleSources]:e.length>1,[p.isLoading]:"loading"===t,[p.isSearching]:"searching"===t,[p.showWarning]:"warning"===s,[p.showSources]:"source"===s,[p.showSuggestions]:"suggestion"===s};return(0,Ne.K)("div",{afterCreate:e=>{this._container=e,e.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:e=>{e.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(o,p.container),key:"base-container",tabIndex:-1},this._renderSourceMenuButton(),this._renderSourcesMenu(),this._renderInputContainer(),this._renderSubmitButton(),this._renderWarningMenu())}_renderClearButton(){return this.searchTerm?(0,Ne.K)("button",{bind:this,class:this.classes(p.clearButton,Le.D.widgetButton),disabled:this.disabled,key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},(0,Ne.K)("span",{"aria-hidden":"true",class:d.T.close})):null}_renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:s}=this,o=t&&!s,r="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return o?(0,Ne.K)("ul",{class:this.classes(Le.D.menuList,p.suggestionList,p.suggestionListCurrentLocation),key:"esri-search__suggestion-list-current-location",role:"group"},(0,Ne.K)("li",{"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),bind:this,class:this.classes(Le.D.menuItem,r?Le.D.menuItemFocus:null),"data-current-location-item":!0,id:this._buildId("suggestion-item",0),onclick:this._handleUseCurrentLocationClick,role:"option"},(0,Ne.K)("span",{"aria-hidden":"true",class:d.T.locateCircled})," ",e.useCurrentLocation)):null}_renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:s,messages:o,suggestionsMenuId:r,inputId:i,_activeMenuItemIndex:n,disabled:l}=this,{maxInputLength:a,placeholder:u,searchTerm:c,suggestionCount:d}=this.viewModel,h=!((!t||s)&&!d),g="suggestion"===e&&n>-1?this._buildId("suggestion-item",n):null;return(0,Ne.K)("input",{afterCreate:ke.cA,"aria-activedescendant":g,"aria-autocomplete":"list","aria-controls":h?r:null,"aria-expanded":(h&&"suggestion"===e).toString(),"aria-haspopup":"listbox","aria-label":o.searchButtonTitle,autocomplete:"off",bind:this,class:this.classes(Le.D.input,p.input),"data-node-ref":"_inputNode",disabled:l,id:i,maxlength:a,onblur:this.blur,onclick:this._openSuggestionMenu,onfocus:this.focus,oninput:this._handleInputPaste,onkeyup:this._handleInputKeyup,onpaste:this._handleInputPaste,placeholder:u,role:"combobox",title:c?"":u,type:"text",value:c})}_renderForm(){return(0,Ne.K)("form",{bind:this,class:p.form,disabled:this.disabled,key:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this._renderInput())}_renderSuggestList(e){const{sourceIndex:t}=e,{results:s}=e;return(null===s||void 0===s?void 0:s.length)?(0,Ne.K)("ul",{class:this.classes(Le.D.menuList,p.suggestionList),key:"esri-search__suggestion-list-".concat(t),role:"group"},null===s||void 0===s?void 0:s.map((e=>this._renderSuggestion(e,this._menuItemCount++)))):null}_renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map((e=>[this._renderSuggestionHeader(e),this._renderSuggestList(e)])):[]}_renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:s,inputId:o}=this,{suggestionCount:r}=this.viewModel,i=t&&!e||r;return this._menuItemCount=0,i?(0,Ne.K)("div",{afterCreate:ke.cA,"aria-labelledby":o,bind:this,class:this.classes(Le.D.menu,p.suggestionsMenu),"data-node-ref":"_suggestionListNode",id:s,key:"esri-search__suggestions-menu",role:"listbox"},this._renderLocationGroup(),this._renderSuggestionsGroup()):null}_renderInputContainer(){return(0,Ne.K)("div",{class:p.inputContainer,key:"esri-search__input-container"},this._renderForm(),this._renderSuggestionsMenu(),this._renderClearButton())}_renderSuggestionHeader(e){var t;const{allSources:s,activeSourceIndex:o}=this.viewModel,{sourceIndex:r}=e,i=null===(t=e.results)||void 0===t?void 0:t.length,n=s.length>1&&o===Ce.ALL_INDEX;return i&&n?(0,Ne.K)("div",{class:Le.D.menuHeader,key:"esri-search__suggestion-header-".concat(r)},this._getSourceName(r)):null}_renderSuggestion(e,t){const{_activeMenuItemIndex:s,viewModel:{searchTerm:o}}=this;if(!o)return;const r="suggestion"===this.activeMenu&&s===t;return(0,Ne.K)("li",{"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===t).toString(),bind:this,class:this.classes(Le.D.menuItem,r?Le.D.menuItemFocus:null),"data-suggestion":e,id:this._buildId("suggestion-item",t),innerHTML:this._getSuggestResultHTML(e.text,o),key:"esri-search__suggestion_".concat(t),onclick:this._handleSuggestionClick,role:"option"})}_renderSource(e){const{activeSourceIndex:t,searchAllEnabled:s}=this.viewModel,o={[Le.D.menuItemActive]:e===t,[Le.D.menuItemFocus]:"source"===this.activeMenu&&e===(s?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},r=s?e+1:e;return(0,Ne.K)("li",{"aria-checked":(e===t).toString(),bind:this,class:this.classes(p.source,Le.D.menuItem,o),"data-source-index":e,id:this._buildId("source-item",r),key:"esri-search__source-".concat(e),onclick:this._handleSourceClick,role:"menuitemradio"},this._getSourceName(e))}_renderNoResultsWarning(e){const{messages:t}=this,s=e?(0,G.V)(t.noResultsFoundForValue,{value:'"'.concat(e,'"')}):t.noResultsFound;return(0,Ne.K)("div",{key:"esri-search__no_results"},(0,Ne.K)("div",{class:p.warningMenuHeader},t.noResults),(0,Ne.K)("div",{class:p.warningMenuText},s))}_renderEmptySearchWarning(){const{messages:e}=this;return(0,Ne.K)("div",{key:"esri-search__empty-search"},(0,Ne.K)("span",{"aria-hidden":"true",class:d.T.noticeTriangle}),(0,Ne.K)("span",{class:p.noValueText},e.emptyValue))}_renderLocateWarning(){const{messages:e}=this;return(0,Ne.K)("div",{key:"esri-search__locate-error"},(0,Ne.K)("span",{"aria-hidden":"true",class:d.T.noticeTriangle}),(0,Ne.K)("span",{class:p.noValueText},e.locateError))}_renderWarning(){var e;const{displayedSearchTerm:t,_locateFailed:s}=this,{viewModel:o}=this;return s?this._renderLocateWarning():null!==(e=o.selectedSuggestion)&&void 0!==e&&e.location||t?this._renderNoResultsWarning(t):this._renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,t){return"".concat(this.id,"-").concat(e).concat(void 0===t?"":"-".concat(t))}_watchSourceChanges(){const{viewModel:{allSources:e}}=this,t="sources";this.removeHandles(t),e.forEach((e=>this.addHandles((0,i.watch)((()=>e.name),(()=>this.scheduleRender())),t)))}_handleSourcesMenuToggleFocus(){"source"!==this.activeMenu&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var e;const t="source"===this.activeMenu;this.activeMenu=t?"none":"source",this.renderNow(),"source"===this.activeMenu&&(null===(e=this._sourceListNode)||void 0===e||e.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const t=Ge(e.currentTarget);t&&(this._focus(),this.search(t))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:t}=e;this._searchController=e,(async()=>{try{const e=await this.viewModel.searchNearby({signal:t});this.activeMenu=null!==e&&void 0!==e&&e.numResults?"none":"warning"}catch(e){this._locateFailed=!0,this.activeMenu="warning"}finally{this._searchController=null}})()}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var t;if(!e)return;const s=function(e){return null===e||void 0===e?void 0:e["data-source-index"]}(e);null!=s&&(this.viewModel.activeSourceIndex=s,this._clearActiveMenu(),null===(t=this._sourceMenuButtonNode)||void 0===t||t.focus())}_cancelSuggest(){this._suggestController=(0,r.DC)(this._suggestController)}_cancelSearch(){this._searchController=(0,r.DC)(this._searchController),this._locateFailed=!1}_handleInputKeyup(e){var t;const{key:s}=e;if(e.ctrlKey||e.metaKey||"Copy"===s||"ArrowLeft"===s||"ArrowRight"===s||"Shift"===s)return;if("Tab"===s||"Escape"===s||e.shiftKey&&"Tab"===s)return this._cancelSuggest(),void("Escape"===s&&this._clearActiveMenu());const o="Home"===s||"End"===s||"ArrowUp"===s||"ArrowDown"===s;if("Enter"===s&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const r=null===(t=this._suggestionListNode)||void 0===t?void 0:t.getElementsByTagName("li");if(null!==r&&void 0!==r&&r.length){if("suggestion"!==this.activeMenu&&this._openSuggestionMenu(),o)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(s,r,this._suggestionListNode);const t=r[this._activeMenuItemIndex];if("Enter"===s&&t){const e=Ge(t);return void(e?(this._focus(),this.search(e)):function(e){return!(null===e||void 0===e||!e["data-current-location-item"])}(t)&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,t,s){const o=this._activeMenuItemIndex;"Home"===e&&(this._activeMenuItemIndex=0),"End"===e&&(this._activeMenuItemIndex=t.length-1),"ArrowUp"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),"ArrowDown"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),o!==this._activeMenuItemIndex&&s&&(0,ke.yH)(t[this._activeMenuItemIndex],s)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){const{key:t}=e;if((0,ke.OU)(t)){var s;e.preventDefault();const t=null===(s=this._sourceListNode)||void 0===s?void 0:s.getElementsByTagName("li"),o=null===t||void 0===t?void 0:t[this._activeMenuItemIndex];this._setSourceFromMenuItem(o)}else"ArrowUp"!==t&&"ArrowDown"!==t&&"End"!==t&&"Home"!==t||e.preventDefault()}_handleSourceMenuKeyup(e){var t,s,o;const{key:r}=e,i="ArrowUp"===r||"ArrowDown"===r||"End"===r||"Home"===r;if(i&&e.preventDefault(),"Escape"===r)return this._clearActiveMenu(),void(null===(t=this._sourceMenuButtonNode)||void 0===t||t.focus());const n=null===(s=this._sourceListNode)||void 0===s?void 0:s.getElementsByTagName("li");return n&&0!==n.length&&i?("source"!==this.activeMenu&&(this.activeMenu="source"),void this._handleItemNavigation(r,n,null===(o=this._sourceListNode)||void 0===o?void 0:o.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),-1===this._activeMenuItemIndex&&this.search()}_getSourceName(e){const{messages:t}=this,s=this.viewModel,{allSources:o}=s,r=o.at(e);return e===Ce.ALL_INDEX?t.all:r&&r.name||t.untitledSource}_getSuggestResultHTML(e,t){return e?Oe.test(e)?e:((e,t)=>{const s=(0,n.Cj)(t).split(/\s/),o=new RegExp("(".concat(s.join("|"),")"),"gi");return e.replace(o,(e=>"<strong>".concat(e,"</strong>")))})(e,t):this.messages.untitledResult}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};function Ge(e){return null===e||void 0===e?void 0:e["data-suggestion"]}(0,o._)([(0,l.MZ)()],Be.prototype,"_activeMenuItemIndex",void 0),(0,o._)([(0,l.MZ)()],Be.prototype,"displayedSearchTerm",null),(0,o._)([(0,l.MZ)({readOnly:!0})],Be.prototype,"inputId",null),(0,o._)([(0,l.MZ)({readOnly:!0})],Be.prototype,"suggestionsMenuId",null),(0,o._)([(0,l.MZ)({readOnly:!0})],Be.prototype,"sourceMenuId",null),(0,o._)([(0,l.MZ)({readOnly:!0})],Be.prototype,"sourceMenuButtonId",null),(0,o._)([(0,l.MZ)()],Be.prototype,"activeMenu",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],Be.prototype,"activeSource",null),(0,o._)([(0,l.MZ)()],Be.prototype,"activeSourceIndex",null),(0,o._)([(0,l.MZ)()],Be.prototype,"allPlaceholder",null),(0,o._)([(0,l.MZ)({readOnly:!0})],Be.prototype,"allSources",null),(0,o._)([(0,l.MZ)()],Be.prototype,"autoNavigate",null),(0,o._)([(0,l.MZ)()],Be.prototype,"autoSelect",null),(0,o._)([(0,l.MZ)({readOnly:!0})],Be.prototype,"defaultSources",null),(0,o._)([(0,l.MZ)()],Be.prototype,"disabled",void 0),(0,o._)([(0,l.MZ)()],Be.prototype,"goToOverride",null),(0,o._)([(0,l.MZ)()],Be.prototype,"iconClass",void 0),(0,o._)([(0,l.MZ)()],Be.prototype,"icon",void 0),(0,o._)([(0,l.MZ)()],Be.prototype,"includeDefaultSources",null),(0,o._)([(0,l.MZ)()],Be.prototype,"label",null),(0,o._)([(0,l.MZ)()],Be.prototype,"locationEnabled",null),(0,o._)([(0,l.MZ)()],Be.prototype,"maxResults",null),(0,o._)([(0,l.MZ)()],Be.prototype,"maxSuggestions",null),(0,o._)([(0,l.MZ)(),(0,Ee.G)("esri/widgets/Search/t9n/Search")],Be.prototype,"messages",void 0),(0,o._)([(0,l.MZ)(),(0,Ee.G)("esri/t9n/common")],Be.prototype,"messagesCommon",void 0),(0,o._)([(0,l.MZ)()],Be.prototype,"minSuggestCharacters",null),(0,o._)([(0,l.MZ)()],Be.prototype,"popupEnabled",null),(0,o._)([(0,l.MZ)()],Be.prototype,"popupTemplate",null),(0,o._)([(0,l.MZ)()],Be.prototype,"portal",null),(0,o._)([(0,l.MZ)()],Be.prototype,"resultGraphic",null),(0,o._)([(0,l.MZ)()],Be.prototype,"resultGraphicEnabled",null),(0,o._)([(0,l.MZ)({readOnly:!0})],Be.prototype,"results",null),(0,o._)([(0,l.MZ)()],Be.prototype,"searchAllEnabled",null),(0,o._)([(0,l.MZ)()],Be.prototype,"searchTerm",null),(0,o._)([(0,l.MZ)({readOnly:!0})],Be.prototype,"selectedResult",null),(0,o._)([(0,l.MZ)()],Be.prototype,"sources",null),(0,o._)([(0,l.MZ)({readOnly:!0})],Be.prototype,"suggestions",null),(0,o._)([(0,l.MZ)()],Be.prototype,"suggestionsEnabled",null),(0,o._)([(0,l.MZ)()],Be.prototype,"view",null),(0,o._)([(0,je.U)(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),(0,l.MZ)({type:Ce})],Be.prototype,"viewModel",void 0),Be=(0,o._)([(0,u.$)("esri.widgets.Search")],Be);const Pe=Be},72153:(e,t,s)=>{s.d(t,{h1:()=>E,KW:()=>k,m$:()=>j,sx:()=>K,jE:()=>D,jd:()=>O});var o=s(39356),r=s(65215),i=s(86100),n=s(3825),l=s(54994);var a=s(35143),u=s(42553),c=s(46053),d=(s(81806),s(76460),s(47249),s(85842)),h=s(76797),p=s(13904);let g=class extends u.oY{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};(0,a._)([(0,c.MZ)({type:String,json:{write:!0}})],g.prototype,"address",void 0),(0,a._)([(0,c.MZ)({type:Object,json:{write:!0}})],g.prototype,"attributes",void 0),(0,a._)([(0,c.MZ)({type:h.A,json:{write:!0}})],g.prototype,"extent",void 0),(0,a._)([(0,c.MZ)({type:p.A,json:{write:!0}})],g.prototype,"location",void 0),(0,a._)([(0,c.MZ)({type:Number,json:{write:!0}})],g.prototype,"score",void 0),g=(0,a._)([(0,d.$)("esri.rest.support.AddressCandidate")],g);const v=g;s(35238);var m=s(40565),y=s(29067),_=s(13312);let f=class extends u.oY{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};(0,a._)([(0,c.MZ)({type:Object,json:{write:!0}})],f.prototype,"address",void 0),(0,a._)([(0,c.MZ)(y.K)],f.prototype,"apiKey",void 0),(0,a._)([(0,c.MZ)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],f.prototype,"categories",void 0),(0,a._)([(0,c.MZ)({type:String,json:{write:!0}})],f.prototype,"countryCode",void 0),(0,a._)([(0,c.MZ)({type:Boolean,json:{write:!0}})],f.prototype,"forStorage",void 0),(0,a._)([(0,c.MZ)({type:p.A,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],f.prototype,"location",void 0),(0,a._)([(0,c.MZ)({type:String,json:{write:!0}})],f.prototype,"locationType",void 0),(0,a._)([(0,c.MZ)({type:String,json:{write:!0}})],f.prototype,"magicKey",void 0),(0,a._)([(0,c.MZ)({type:Number,json:{write:!0}})],f.prototype,"maxLocations",void 0),(0,a._)([(0,c.MZ)({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],f.prototype,"outFields",void 0),(0,a._)([(0,c.MZ)({type:_.A,json:{read:{source:"outSR"},write:{target:"outSR"}}})],f.prototype,"outSpatialReference",void 0),(0,a._)([(0,c.MZ)({type:h.A,json:{write:{writer:(e,t)=>{const s=e?e.shiftCentralMeridian():null;t.searchExtent=s}}}})],f.prototype,"searchExtent",void 0),f=(0,a._)([(0,d.$)("esri.rest.support.AddressToLocationsParameters")],f),f.from=(0,m.dp)(f);const S=f;function w(e){let{data:t}=e;if(!t)return[];const{candidates:s,spatialReference:o}=t;return s?s.map((e=>{if(!e)return;const{extent:t,location:s}=e,r=!t||function(e){return e&&"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax}(t);return function(e){return!!e&&"number"==typeof e.x&&"number"==typeof e.y}(s)&&r?(t&&(t.spatialReference=o),s&&(s.spatialReference=o),v.fromJSON(e)):void 0})):[]}let M=class extends u.oY{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};(0,a._)([(0,c.MZ)(y.K)],M.prototype,"apiKey",void 0),(0,a._)([(0,c.MZ)({type:p.A,json:{write:{writer:(e,t)=>{const s=e?e.clone().normalize():null,o=void 0!==s;t.location=o?s:null}}}})],M.prototype,"location",void 0),(0,a._)([(0,c.MZ)({type:String,json:{write:!0}})],M.prototype,"locationType",void 0),(0,a._)([(0,c.MZ)({type:_.A,json:{read:{source:"outSR"},write:{target:"outSR"}}})],M.prototype,"outSpatialReference",void 0),M=(0,a._)([(0,d.$)("esri.rest.support.LocationToAddressParameters")],M),M.from=(0,m.dp)(M);const x=M;async function b(e,t,s){t=x.from(t);const o=(0,l.Dl)(e),r={...t.toJSON(),f:"json"},i=(0,l.lF)({...o.query,...r}),a=(0,l.jV)(i,s),u="".concat(o.path,"/reverseGeocode");return(0,n.A)(u,a).then(I)}function I(e){let{data:t}=e;if(!t)return;const{address:s,location:o}=t,r=(null===s||void 0===s?void 0:s.Match_addr)||"";return v.fromJSON({address:r,attributes:s||{},location:o,score:100})}let R=class extends u.oY{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};(0,a._)([(0,c.MZ)({type:Boolean,json:{write:!0}})],R.prototype,"isCollection",void 0),(0,a._)([(0,c.MZ)({type:String,json:{write:!0}})],R.prototype,"magicKey",void 0),(0,a._)([(0,c.MZ)({type:String,json:{write:!0}})],R.prototype,"text",void 0),R=(0,a._)([(0,d.$)("esri.rest.support.SuggestionCandidate")],R);const Z=R;let T=class extends u.oY{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};(0,a._)([(0,c.MZ)(y.K)],T.prototype,"apiKey",void 0),(0,a._)([(0,c.MZ)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],T.prototype,"categories",void 0),(0,a._)([(0,c.MZ)({type:String,json:{write:!0}})],T.prototype,"countryCode",void 0),(0,a._)([(0,c.MZ)({type:p.A,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],T.prototype,"location",void 0),(0,a._)([(0,c.MZ)({type:Number,json:{write:!0}})],T.prototype,"maxSuggestions",void 0),(0,a._)([(0,c.MZ)({type:_.A,json:{read:{source:"outSR"},write:{target:"outSR"}}})],T.prototype,"outSpatialReference",void 0),(0,a._)([(0,c.MZ)({type:h.A,json:{write:{writer:(e,t)=>{const s=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(s)}}}})],T.prototype,"searchExtent",void 0),(0,a._)([(0,c.MZ)({type:String,json:{write:!0}})],T.prototype,"text",void 0),T=(0,a._)([(0,d.$)("esri.rest.support.SuggestLocationsParameters")],T),T.from=(0,m.dp)(T);const A=T;function C(e){const{data:t}=e;if(!t)return[];const{suggestions:s}=t;return s?s.map((e=>new Z(e))):[]}const L="Single Line Input",F=3e5;function E(e,t){return e.location?async function(e,t){const{source:s,spatialReference:o,location:r,sourceIndex:i,view:n}=e,{apiKey:l,url:a,zoomScale:u,defaultZoomScale:c}=s;if(null==a)return[];const d=null===n||void 0===n?void 0:n.scale,h=null===t||void 0===t?void 0:t.signal,p=new x;p.location=r,l&&(p.apiKey=l),o&&(p.outSpatialReference=o);try{return G([await b(a,p,{signal:h})],{sourceIndex:i,scale:d,view:n,zoomScale:u,defaultZoomScale:c})}catch(D){return[]}}(e,t):async function(e,t){var s;const{source:o,suggestResult:r,spatialReference:i,view:a,maxResults:u,sourceIndex:c}=e,d=null===o||void 0===o?void 0:o.zoomScale,h=null===o||void 0===o?void 0:o.defaultZoomScale,p=null===(s=r.text)||void 0===s?void 0:s.trim();if(!p)return null;const g=!r.key&&o.prefix?o.prefix:"",v=!r.key&&o.suffix?o.suffix:"",m="".concat(g).concat(r.text).concat(v),y=new S,{apiKey:_,url:f}=o,M=null===a||void 0===a?void 0:a.scale,x=B(o,a),b=null===t||void 0===t?void 0:t.signal;if(_&&(y.apiKey=_),!f)return null;o.categories&&(y.categories=o.categories),o.locationType&&(y.locationType=o.locationType),i&&(y.outSpatialReference=i);const I=N(a,o);I&&(y.location=I),y.maxLocations=u,x&&(y.searchExtent=x),o.countryCode&&(y.countryCode=o.countryCode);const{key:R}=r,Z="".concat(R);return R&&(y.magicKey=Z),y.address={},y.address[o.singleLineFieldName||L]=m,o.outFields&&(y.outFields=o.outFields),async function(e,t,s){t=S.from(t);const o=(0,l.Dl)(e),{address:r,...i}=t.toJSON(),a={...r,...i,f:"json"},u=(0,l.lF)({...o.query,...a}),c=(0,l.jV)(u,s),d="".concat(o.path,"/findAddressCandidates");return(0,n.A)(d,c).then(w)}(f,y,{signal:b}).then((e=>G(e,{key:Z,scale:M,sourceIndex:c,view:a,zoomScale:d,defaultZoomScale:h})))}(e,t)}function N(e,t){var s;if(t.localSearchDisabled)return null;const o=null===e||void 0===e?void 0:e.scale;return"number"==typeof o&&o<=F?null===e||void 0===e||null===(s=e.extent)||void 0===s?void 0:s.center:null}async function k(e,t){const{source:s,spatialReference:o,view:r,suggestTerm:i,maxSuggestions:a,sourceIndex:u}=e,c=new A,{apiKey:d,url:h}=s,p=B(s,r),g=null===t||void 0===t?void 0:t.signal;if(!h)return null;d&&(c.apiKey=d),s.categories&&(c.categories=s.categories),o&&(c.outSpatialReference=o);const v=N(r,s);if(v&&(c.location=v),!i.trim())return null;const{prefix:m="",suffix:y=""}=s,_="".concat(m).concat(i).concat(y);return c.text=_,p&&(c.searchExtent=p),c.maxSuggestions=a,s.countryCode&&(c.countryCode=s.countryCode),async function(e,t,s){const o=(0,l.Dl)(e),r={...(t=A.from(t)).toJSON(),f:"json"},i=(0,l.lF)({...o.query,...r}),a=(0,l.jV)(i,s),u="".concat(o.path,"/suggest");return(0,n.A)(u,a).then(C)}(h,c,{signal:g}).then((e=>function(e,t){return e.map((e=>function(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}(e,t)))}(e,u)))}function K(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}function D(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e)}function j(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}const O="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function B(e,t){const{filter:s,withinViewEnabled:o}=e,r=null===t||void 0===t?void 0:t.scale,n=null===t||void 0===t?void 0:t.extent,l=null===s||void 0===s?void 0:s.geometry;return(l?(0,i.ZY)(l,null!==t&&void 0!==t?t:void 0,r):void 0)||(o&&n?n:void 0)}function G(e,t){return e.filter(Boolean).map((e=>function(e,t){const{key:s,scale:n,sourceIndex:l,view:a,zoomScale:u,defaultZoomScale:c}=t,{attributes:d,extent:h,location:p,address:g}=e,v=new o.A({geometry:p,attributes:d}),m=h||p,y=m?(0,i.ZY)(m,null!==a&&void 0!==a?a:void 0,null!==n&&void 0!==n?n:void 0):void 0,_=y?"number"==typeof u?(0,i.DN)(y,null!==a&&void 0!==a?a:void 0,u):"number"==typeof c&&"point"===(null===m||void 0===m?void 0:m.type)?(0,i.DN)(y,null!==a&&void 0!==a?a:void 0,c):y:null,f=p?"".concat(p.x,",").concat(p.y):"",S=g||f,w=v.clone();return null!=_&&(w.geometry=r.A.fromExtent(_)),{extent:_,feature:v,target:w,key:s,name:S,sourceIndex:l}}(e,t)))}},12254:(e,t,s)=>{function o(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const s=t._delegatedEventNames,o=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);s.push(...o)}}s.d(t,{U:()=>o})},99403:(e,t,s)=>{s.d(t,{$j:()=>g,J1:()=>v,Ly:()=>y});var o=s(86560),r=s(50076),i=s(81806),n=s(76460),l=s(13904),a=s(45417),u=s(65308),c=s(71334),d=s(70414);const h=()=>n.A.getLogger("esri.widgets.support.geolocationUtils"),p={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function g(){return function(){const e=(0,i.A)("esri-geolocation");return e||h().warn("geolocation-unsupported","Geolocation unsupported."),e}()&&function(){const e=window.isSecureContext;return e||h().warn("insecure-context","Geolocation requires a secure origin."),e}()}function v(e){return e||(e=p),new Promise(((t,s)=>{var o;setTimeout((()=>s(new r.A("geolocation:timeout","getting the current geolocation position timed out"))),15e3),navigator.geolocation.getCurrentPosition(t,s,null!==(o=e)&&void 0!==o?o:void 0)}))}let m;function y(e,t){if(m)return m(e,t);const{position:s,view:i}=e,n=function(e){const t=e&&e.coords||{},s={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e?{coords:s,timestamp:e.timestamp}:e}(s),h=null===n||void 0===n?void 0:n.coords;if(!h)throw new r.A("geometry-service:no-coords","Geolocation has no coordinates");return function(e,t,s){if(!t)return Promise.resolve(e);const i=t.spatialReference;return i.isWGS84?Promise.resolve(e):i.isWebMercator?Promise.resolve((0,a.Gh)(e)):function(e){if(o.A.geometryServiceUrl)return Promise.resolve(o.A.geometryServiceUrl);const t=u.A.getDefault();return t.load(e).catch((()=>{})).then((()=>{var e;return null===(e=t.helperServices)||void 0===e||null===(e=e.geometry)||void 0===e?void 0:e.url}))}(s).then((t=>{if(!t)throw new r.A("geometry-service:missing-url","Geometry service URL is missing");const o=new d.A({geometries:[e],outSpatialReference:i});return(0,c.C)(t,o,s).then((e=>e[0]))}))}(function(e){let{longitude:t,latitude:s,altitude:o}=e;return new l.A({longitude:t,latitude:s,z:o||void 0,spatialReference:{wkid:4326}})}(h),i,t)}}}]);
//# sourceMappingURL=52787.699409f9.chunk.js.map