/*! For license information please see 60159.81f5a278.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[60159],{60159:(e,i,t)=>{t.r(i),t.d(i,{arcgis_version_management_service_item:()=>o,arcgis_version_management_version_properties:()=>c});var s=t(85643),n=t(83308);const o=class{constructor(e){(0,s.r)(this,e),this.versionItemActionClickedEventWithServiceUrl=(0,s.c)(this,"versionItemActionClickedEventWithServiceUrl",7),this.versionListActionClickedEvent=(0,s.c)(this,"versionListActionClickedEvent",7),this._versionListEventListeners=new Map,this._watchHandles=[],this._versionItemActionClickedEventWithServiceUrl=e=>{this.versionItemActionClickedEventWithServiceUrl.emit(e.detail)},this._versionListActionClickedEvent=e=>{this.versionListActionClickedEvent.emit(e.detail)},this.flowElement=void 0,this.heading=void 0,this.serviceUrl=void 0,this.strings=void 0,this.viewModel=void 0,this.state=void 0}async componentDidLoad(){const{watch:e}=await(0,n.i)();this._watchHandles.push(e((()=>this.viewModel.state),(e=>{this.state=e})))}async componentWillLoad(){this.state=this.viewModel.state}disconnectedCallback(){this._watchHandles.forEach((e=>{e.remove()})),this._watchHandles=[],this._removeVersionListEventListeners(this._versionList)}render(){const{flowElement:e,heading:i,serviceUrl:t,strings:n,viewModel:o}=this;let{_versionList:c}=this;const r=o.serviceNameLookup.get(t);return(0,s.h)(s.H,null,(0,s.h)("calcite-panel",{heading:r},(0,s.h)("calcite-action",{id:"actionManageVersions_".concat(r),icon:"list",scale:"s",slot:"header-actions-end",text:"",onClick:async()=>{await o.getVersionInfos(t,!1),c=document.createElement("arcgis-version-management-version-list"),c.addEventListener("calciteFlowItemBack",(async()=>{c.remove()})),c.heading=i,c.serviceUrl=t,c.serviceName=r,c.strings=n,c.userHasAdvancedEditingUserTypeExtension=o.advancedEditingUserTypeExtensionLookup.get(t),c.versionInfos=o.versionInfoLookup.get(t),c.viewModel=o,this._addVersionListEventListeners(c),e.append(c)}}),(0,s.h)("calcite-tooltip",{"overlay-positioning":"fixed",referenceElement:"actionManageVersions_".concat(r)},(0,s.h)("span",null,n.headers.manageVersions))))}_addVersionListEventListeners(e){e.addEventListener("versionItemActionClickedEventWithServiceUrl",this._versionItemActionClickedEventWithServiceUrl),this._versionListEventListeners.set("versionItemActionClickedEventWithServiceUrl",this._versionItemActionClickedEventWithServiceUrl),e.addEventListener("versionListActionClickedEvent",this._versionListActionClickedEvent),this._versionListEventListeners.set("versionListActionClickedEvent",this._versionListActionClickedEvent)}_removeVersionListEventListeners(e){for(const[i,t]of this._versionListEventListeners)e.removeEventListener(i,t)}get _hostElement(){return(0,s.g)(this)}},c=class{constructor(e){(0,s.r)(this,e),this.versionPropertiesSaveClickedEvent=(0,s.c)(this,"versionPropertiesSaveClickedEvent",7),this._watchHandles=[],this.flowElement=void 0,this.serviceUrl=void 0,this.strings=void 0,this.versionInfo=void 0,this.viewModel=void 0,this.executionError=void 0,this.state=void 0}async componentDidLoad(){await this.viewModel.getVersionInfos(this.serviceUrl,!1)}async componentWillLoad(){const{watch:e}=await(0,n.i)();this._watchHandles.push(e((()=>this.viewModel.state),(e=>{this.state=e})))}disconnectedCallback(){this._watchHandles.forEach((e=>{e.remove()})),this._watchHandles=[]}render(){var e;const{serviceUrl:i,strings:t,versionInfo:n}=this,{viewModel:{executionError:o}}=this;return(0,s.h)(s.H,null,(0,s.h)("calcite-flow-item",{description:n?n.versionIdentifier.name:"",heading:n?t.actions.editVersion:t.actions.newVersion},(0,s.h)("calcite-panel",{loading:"executing"===this.state},(0,s.h)("div",{class:"div-content"},(0,s.h)("calcite-label",null,t.input.versionName,(0,s.h)("calcite-input-text",{id:"inputName",maxLength:62,value:n?n.versionIdentifier.name.split(".")[1]:""})),(0,s.h)("calcite-label",null,t.input.versionDescription,(0,s.h)("calcite-text-area",{id:"inputDescription",resize:"vertical",value:n?n.description:""})),(0,s.h)("calcite-label",null,t.input.versionAccess,(0,s.h)("calcite-chip-group",{id:"chipGroupAccessLevel",selectionMode:"single",label:""},(0,s.h)("calcite-chip",{selected:"public"===(null===n||void 0===n?void 0:n.access)||!n,value:"public"},t.accessLevels.public),(0,s.h)("calcite-chip",{selected:"protected"===(null===n||void 0===n?void 0:n.access),value:"protected"},t.accessLevels.protected),(0,s.h)("calcite-chip",{selected:"private"===(null===n||void 0===n?void 0:n.access),value:"private"},t.accessLevels.private))),(0,s.h)("calcite-label",null,t.input.versionOwner,(0,s.h)("calcite-input-text",{id:"inputOwner",disabled:!this.viewModel.advancedEditingUserTypeExtensionLookup.get(i),value:n?n.versionIdentifier.name.split(".")[0]:null===(e=this.viewModel.userLookup.get(i))||void 0===e?void 0:e.toUpperCase()})),(0,s.h)("calcite-button",{appearance:"outline",slot:"footer",width:"half",onClick:()=>{this.flowElement.back()}},t.actions.cancelSave),(0,s.h)("calcite-button",{slot:"footer",width:"half",onClick:async()=>{const e=Array.from(this._hostElement.getElementsByTagName("calcite-input-text")),t=this._hostElement.getElementsByTagName("calcite-text-area")[0],s=e.find((e=>"inputName"===e.id)),o=e.find((e=>"inputOwner"===e.id)),c={access:Array.from(this._hostElement.getElementsByTagName("calcite-chip-group"))[0].selectedItems[0].value,description:t.value,versionIdentifier:{name:""!==o.value?"".concat(o.value,".").concat(s.value):s.value,guid:n?n.versionIdentifier.guid:""}};this.versionPropertiesSaveClickedEvent.emit({serviceUrl:i,versionInfo:c})}},t.actions.saveVersion)),"failed"===this.state?(0,s.h)("calcite-notice",{class:"notice",closable:!0,kind:"warning",open:!0,scale:"s",slot:"footer"},(0,s.h)("div",{slot:"message"},this._getExecutionError(o))):void 0)))}_getExecutionError(e){const{strings:{executionErrors:i}}=this;switch(e){case"no-advanced-editing-user-type-extension":return i.noAdvancedEditingUserTypeExtension;case"no-feature-service-found":return i.noFeatureServiceFound;case"no-valid-enterprise-version":return i.notValidEnterpriseVersion;case"no-valid-version-name":return i.invalidVersionName;default:return e}}get _hostElement(){return(0,s.g)(this)}}}}]);
//# sourceMappingURL=60159.81f5a278.chunk.js.map