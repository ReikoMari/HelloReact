"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[4219],{42664:(e,t,i)=>{i.d(t,{S:()=>l});var o,n,s,r=i(54787),a={exports:{}};o=a,n=function(){var e=Math.PI,t=Math.sin,i=Math.cos,o=Math.tan,n=Math.asin,s=Math.atan2,r=Math.acos,a=e/180,l=864e5,c=2440588,d=2451545,u={dec:0,ra:0};function h(e){return new Date((e+.5-c)*l)}function p(e){return function(e){return e.valueOf()/l-.5+c}(e)-d}var v=23.4397*a;function _(e,n){return s(t(e)*i(v)-o(n)*t(v),i(e))}function m(e,o){return n(t(o)*i(v)+i(o)*t(v)*t(e))}function g(e,n,r){return s(t(e),i(e)*t(n)-o(r)*i(n))}function f(e,o,s){return n(t(o)*t(s)+i(o)*i(s)*i(e))}function y(e,t){return a*(280.16+360.9856235*e)-t}function w(e){return a*(357.5291+.98560028*e)}function b(e){return a*(1.9148*t(e)+.02*t(2*e)+3e-4*t(3*e))}function M(t,i){return t+i+102.9372*a+e}function C(e,t){var i=w(e),o=M(i,b(i));return t||(t={dec:0,ra:0}),t.dec=m(o,0),t.ra=_(o,0),t}var T={PolarException:{NORMAL:0,MIDNIGHT_SUN:1,POLAR_NIGHT:2},getPosition:function(e,t,i,o){var n=a*-i,s=a*t,r=p(e),l=C(r,u),c=y(r,n)-l.ra;return o||(o={azimuth:0,altitude:0}),o.azimuth=g(c,s,l.dec),o.altitude=f(c,s,l.dec),o}},P=[[-.83,"sunrise","sunset"]];T.addTime=function(e,t,i){P.push([e,t,i])};var k=9e-4;function A(t,i){return Math.round(t-k-i/(2*e))}function S(t,i,o){return k+(t+i)/(2*e)+o}function D(e,i,o){return d+e+.0053*t(i)-.0069*t(2*o)}function O(e,o,n){return r((t(e)-t(o)*t(n))/(i(o)*i(n)))}function Z(e){var o=a*(134.963+13.064993*e),n=a*(93.272+13.22935*e),s=a*(218.316+13.176396*e)+6.289*a*t(o),r=5.128*a*t(n),l=385001-20905*i(o);return{ra:_(s,r),dec:m(s,r),dist:l}}return T.getTimes=function(e,o,n){var s=a*-n,r=a*o,l=A(p(e),s),c=S(0,s,l),d=w(c),u=b(d),v=M(d,u),_=m(v,0),g=D(c,d,v);function f(e){return D(S(O(e,r,_),s,l),d,v)}var y,C,k,Z,z,x={solarNoon:h(g),nadir:h(g-.5),polarException:T.PolarException.NORMAL};for(y=0,C=P.length;y<C;y+=1)z=g-((Z=f((k=P[y])[0]*a))-g),x[k[1]]=h(z),x[k[2]]=h(Z);return x.polarException=function(e){var o=(t(e)-t(r)*t(_))/(i(r)*i(_));return o<-1?T.PolarException.MIDNIGHT_SUN:o>1?T.PolarException.POLAR_NIGHT:T.PolarException.NORMAL}(P[0][0]*a),x},T.getMoonPosition=function(e,t,i){var n=a*-i,s=a*t,r=p(e),l=Z(r),c=y(r,n)-l.ra,d=f(c,s,l.dec);return d+=.017*a/o(d+10.26*a/(d+5.1*a)),{azimuth:g(c,s,l.dec),altitude:d,distance:l.dist}},T.getMoonFraction=function(e){var o=p(e),n=C(o),a=Z(o),l=149598e3,c=r(t(n.dec)*t(a.dec)+i(n.dec)*i(a.dec)*i(n.ra-a.ra)),d=s(l*t(c),a.dist-l*i(c));return(1+i(d))/2},T},void 0!==(s=n())&&(o.exports=s);const l=(0,r.g)(a.exports)},13191:(e,t,i)=>{function o(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function n(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function s(e,t,i,o,n,s,r,a,l,c,d,u,h,p,v,_){return[e,t,i,o,n,s,r,a,l,c,d,u,h,p,v,_]}i.d(t,{fA:()=>s,o8:()=>n,vt:()=>o,zK:()=>r});const r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:r,clone:n,create:o,createView:function(e,t){return new Float64Array(e,t,16)},fromValues:s},Symbol.toStringTag,{value:"Module"}))},79468:(e,t,i)=>{function o(e,t,i,o){let n=null,s=1e3;"number"==typeof t?(s=t,o=i):(n=null!==t&&void 0!==t?t:null,s=i);let r,a=0;const l=()=>{a=0,e.apply(o,r)},c=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n&&n.apply(o,t),r=t,s?a||(a=setTimeout(l,s)):l()};return c.remove=()=>{a&&(clearTimeout(a),a=0)},c.forceUpdate=()=>{a&&(clearTimeout(a),l())},c.hasPendingUpdates=()=>!!a,c}i.d(t,{n:()=>o})},3136:(e,t,i)=>{i.d(t,{J_:()=>a,aE:()=>d,cq:()=>l,uu:()=>c});var o=i(15941),n=i(34111),s=i(13904);function r(e,t,i){if(null==t.longitude||null==t.latitude||null==i.longitude||null==i.latitude)throw new Error("Invalid points: no lon/lat");return function(e,t,i,n,s){const r=(0,o.kU)(i),a=(0,o.kU)(s),l=r-a,c=(0,o.kU)(t)-(0,o.kU)(n),d=Math.sin(l/2),u=Math.sin(c/2),h=2*(0,o.YN)(Math.sqrt(d*d+Math.cos(r)*Math.cos(a)*u*u))*e;return Math.round(1e4*h)/1e4}(e,t.longitude,t.latitude,i.longitude,i.latitude)}function a(e,t,i){const o=t.spatialReference,a=(0,n.tO)(o),l=new s.A(t.x,e.y,o),c=new s.A(i.x,e.y,o),d=new s.A(e.x,t.y,o),u=new s.A(e.x,i.y,o);return{lon:r(a.radius,l,c),lat:r(a.radius,d,u)}}function l(e,t,i){const n=t/i,s=(0,o.kU)(e),r=Math.sin(n/2),a=Math.cos(s),l=2*(0,o.YN)(Math.sqrt(r*r/(a*a)));return(0,o.KJ)(l)}function c(e,t){let i=e/15;return t||(i=Math.round(i)),i}function d(e,t){const i=null===e||void 0===e?void 0:e[0];if(null==i)return null;t||(t={hours:0,minutes:0,seconds:0}),t.hours=c(i,!0);const o=t.hours%1;t.hours-=o,t.minutes=60*o;const n=t.minutes%1;return t.minutes-=n,t.seconds=Math.round(60*n),t}},94966:(e,t,i)=>{i.d(t,{BI:()=>d,VV:()=>c,YH:()=>l,e9:()=>_,g7:()=>p,hG:()=>r,is:()=>h,ix:()=>m,nu:()=>u,su:()=>v,wp:()=>a});var o=i(15941),n=i(20664),s=i(9392);function r(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],i=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],o=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,i,o))}function a(e,t){const i=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),o=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),s=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return(0,n.s)(e,i,o,s),e}function l(e,t,i){i=i||e;const o=(0,n.k)(e,t);(0,n.s)(i,e[0]-o*t[0],e[1]-o*t[1],e[2]-o*t[2]),(0,n.n)(i,i)}function c(e,t,i){Math.abs(e[0])>Math.abs(e[1])?(0,n.s)(t,0,1,0):(0,n.s)(t,1,0,0),(0,n.b)(i,e,t),(0,n.b)(t,i,e),(0,n.n)(i,i),(0,n.n)(t,t)}function d(e,t,i,o,n,s){const r=e+(t-e)*n;return r+(i+(o-i)*n-r)*s}function u(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,s.vt)();const r=(0,n.l)(e),a=(0,n.l)(t),l=(0,n.k)(e,t)/(r*a);if(l<.9999999999999999){const s=Math.acos(l),c=((1-i)*r+i*a)/Math.sin(s),d=c/r*Math.sin((1-i)*s),u=c/a*Math.sin(i*s);return(0,n.h)(w,e,d),(0,n.h)(b,t,u),(0,n.g)(o,w,b)}return(0,n.m)(o,e,t,i)}function h(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,s.vt)(),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,s.vt)();const a=(0,n.l)(e),l=(0,n.l)(t),c=(0,n.k)(e,t)/(a*l);if(c<.9999999999999999){const s=Math.acos(c),d=Math.sin(s),u=Math.sin(i*s),h=Math.sin((1-i)*s),p=(1-i)*a+i*l;{const i=p/d,s=i/l*u;(0,n.h)(w,e,i/a*h),(0,n.h)(b,t,s),(0,n.g)(o,w,b)}{const o=1/a*(-Math.cos((1-i)*s)*s*p+h*(-a+l));(0,n.h)(w,e,o);const c=1/l*(Math.cos(i*s)*s*p+u*(-a+l));(0,n.h)(b,t,c),(0,n.g)(r,w,b),(0,n.h)(r,r,1/d)}return r}return(0,n.m)(o,e,t,i),(0,n.f)(r,t,e),(0,n.n)(r,r),r}function p(e,t,i){e=(0,n.n)(w,e),t=(0,n.n)(b,t);const s=(0,o.XM)((0,n.k)(e,t));if(i){const o=(0,n.b)(y,e,t);if((0,n.k)(o,i)<0)return-s}return s}function v(e){const t=e.length;return i=>{if(i<=e[0][0])return e[0][1];if(i>=e[t-1][0])return e[t-1][1];let o=1;for(;i>e[o][0];)o++;const n=e[o-1][0],s=e[o][0],r=(s-i)/(s-n);return r*e[o-1][1]+(1-r)*e[o][1]}}function _(e,t,i,o){(0,n.f)(g,t,e),(0,n.f)(f,i,e),(0,n.b)(o,g,f),(0,n.n)(o,o),o[3]=-(0,n.k)(e,o)}function m(e,t){if((0,n.s)(t,0,0,0),e.length>0){for(let i=0;i<e.length;++i)(0,n.g)(t,t,e[i]);(0,n.h)(t,t,1/e.length)}}const g=(0,s.vt)(),f=(0,s.vt)(),y=(0,s.vt)(),w=(0,s.vt)(),b=(0,s.vt)()},30338:(e,t,i)=>{i.d(t,{$8:()=>_,Md:()=>f,ld:()=>y,qI:()=>m,uf:()=>b});var o=i(15941),n=i(34761),s=i(13191),r=i(19555),a=i(72745),l=i(20664),c=i(9392),d=i(64465),u=i(42664),h=i(94966);const p={local:{altitude:1500,ambientAtNight:.1,ambientAtNoon:.45,ambientAtTwilight:.2,directAtNoon:.65,directAtTwilight:.7},global:{altitude:8e5,ambient:.015,direct:.75},planarDirection:{localAltitude:1e4,globalAltitude:1e6,globalAngles:{azimuth:1.3*Math.PI,altitude:.6*Math.PI}}};class v{constructor(e,t){this.direct=e,this.ambient=t}}function _(e,t,i,n,s,d){(0,l.s)(d.ambient.color,1,1,1),d.ambient.intensity=p.global.ambient,(0,l.s)(d.direct.color,1,1,1),d.direct.intensity=p.global.direct;const h=t[2],v=(0,o.qE)((Math.abs(h)-p.local.altitude)/(p.global.altitude-p.local.altitude),0,1);let _;if(d.globalFactor=v,null!=e&&(_=u.S.getTimes(e,t[1],t[0])),v<1){let t;if(null!=e)t=function(e,t,i){const o=e.valueOf();let n,s;t.polarException===u.S.PolarException.MIDNIGHT_SUN?(n=o-60*(e.getHours()+48)*60*1e3-60*e.getMinutes()*1e3,s=n+432e6):t.polarException===u.S.PolarException.POLAR_NIGHT?(n=o-2,s=o-1):(n=t.sunrise.valueOf(),s=t.sunset.valueOf());const d=s-n,h=n+d/2,p=d/4,v=h-p,_=h+p,m=.06*d,g=n-m/2,f=n+m/2,y=s-m/2,w=s+m/2,b=(0,a.vt)(),M=(0,c.vt)(),C=(0,c.vt)();let G="";if(o<g||o>w)(0,r.C)(b,E),(0,l.c)(M,k),(0,l.c)(C,O),G="night";else if(o<f){const e=(o-g)/(f-g);(0,r.Cc)(b,E,V,e),(0,l.m)(M,k,A,e),(0,l.m)(C,O,Z,e),G="sun rising"}else if(o<v){const e=(o-f)/(v-f);(0,r.Cc)(b,V,I,e),(0,l.m)(M,A,S,e),(0,l.m)(C,Z,z,e),G="early morning"}else if(o<h){const e=(o-v)/(h-v);(0,r.Cc)(b,I,R,e),(0,l.m)(M,S,D,e),(0,l.m)(C,z,x,e),G="late morning"}else if(o<_){const e=(o-h)/(_-h);(0,r.Cc)(b,R,K,e),(0,l.m)(M,D,N,e),(0,l.m)(C,x,H,e),G="early afternoon"}else if(o<y){const e=(o-_)/(y-_);(0,r.Cc)(b,K,L,e),(0,l.m)(M,N,U,e),(0,l.m)(C,H,F,e),G="late afternoon"}else if(o<w){const e=(o-y)/(w-y);(0,r.Cc)(b,L,E,e),(0,l.m)(M,U,k,e),(0,l.m)(C,F,O,e),G="sun setting"}let B=0;switch(i){case"rainy":case"foggy":B=.8;break;case"snowy":B=.5}B>0&&(P(M,B),P(C,B));const $=T(i);return{direct:{intensity:b[0]*$.direct,color:M},ambient:{intensity:b[1]*$.ambient,color:C},timeOfDay:G}}(e,_,n);else{const e=T(n);t={direct:{intensity:p.local.directAtNoon*e.direct,color:(0,c.fA)(1,1,1)},ambient:{intensity:p.local.ambientAtNoon*e.ambient,color:(0,c.fA)(1,1,1)},timeOfDay:"early afternoon"}}(0,l.m)(d.ambient.color,t.ambient.color,d.ambient.color,v),d.ambient.intensity=(0,o.Cc)(t.ambient.intensity,d.ambient.intensity,v),(0,l.m)(d.direct.color,t.direct.color,d.direct.color,v),d.direct.intensity=(0,o.Cc)(t.direct.intensity,d.direct.intensity,v),d.specularStrength="rainy"===n||"snowy"===n||"foggy"===n?0:1,d.environmentStrength="rainy"===n?.7:"snowy"===n||"foggy"===n?.75:1}d.noonFactor=null!=e?function(e,t){const i=e.valueOf();let n,s;t.polarException===u.S.PolarException.MIDNIGHT_SUN?(n=i-60*(e.getHours()+48)*60*1e3-60*e.getMinutes()*1e3,s=n+432e6):t.polarException===u.S.PolarException.POLAR_NIGHT?(n=i-2,s=i-1):(n=t.sunrise.valueOf(),s=t.sunset.valueOf());const r=n+(s-n)/2;return 1-(0,o.qE)(Math.abs(i-r)/432e5,0,1)}(e,_):1,null!=e?g(e,t,i,d.direct.directionToLightSource):m(s,i,d.direct.directionToLightSource)}function m(e,t,i){t===d.RT.Global?(0,l.n)($,e.eye):(0,l.s)($,0,0,1),(0,l.h)(W,e.viewForward,-1);const o=(0,h.g7)(W,$),s=Math.max(o-2*Y,0),r=.85*s/(s+1),a=Math.max(Y,o-Y-r);(0,n.$0)(B,-a,e.viewRight),(0,l.e)(i,W,B),(0,l.g)(i,i,(0,l.h)(q,e.viewRight,j)),(0,l.n)(i,i)}function g(e,t,i,s){const r=C,a=(0,n.D_)(M);if(i===d.RT.Global)u.S.getPosition(e,0,0,r),(0,l.s)(s,0,0,-1),(0,n.eL)(a,a,-r.azimuth),(0,n.Z8)(a,a,-r.altitude),(0,l.e)(s,s,a);else{const i=p.planarDirection,c=i.globalAngles,d=t[2];let h=(Math.abs(d)-i.localAltitude)/(i.globalAltitude-i.localAltitude);h=(0,o.qE)(h,0,1),h<1?(u.S.getPosition(e,t[1],t[0],r),r.azimuth=(1-h)*r.azimuth+h*c.azimuth,r.altitude=(1-h)*r.altitude+h*c.altitude):(r.azimuth=c.azimuth,r.altitude=c.altitude),(0,l.s)(s,0,-1,0),(0,n.Qr)(a,a,-r.azimuth),(0,n.eL)(a,a,-r.altitude),(0,l.e)(s,s,a)}}function f(e,t){if(t===d.RT.Global)return!0;const i=p.planarDirection;return Math.abs(e)<i.localAltitude}function y(e,t,i,o,n){const s=e.getTime(),r=t.getTime()-s,a=Math.floor(r/i)+1,l=new Array(a);for(let d=0;d<a;++d)G.setTime(s+i*d),l[d]=(0,c.vt)(),g(G,o,n,l[d]);return l}const w=(0,c.fA)(.5773502691896258,-.5773502691896258,.5773502691896258);class b{constructor(){this.ambient={color:(0,c.fA)(1,1,1),intensity:.55},this.direct={color:(0,c.fA)(1,1,1),intensity:.55,directionToLightSource:(0,c.o8)(w)},this.noonFactor=.5,this.globalFactor=0,this.specularStrength=1,this.environmentStrength=1}}const M=(0,s.vt)(),C={azimuth:0,altitude:0};function T(e){switch(e){case"disabled":case"sunny":case"cloudy":return new v(1,1);case"rainy":return new v(.4,1.2);case"snowy":return new v(.5,1.3);case"foggy":return new v(.2,1.6)}}function P(e,t){const i=(e[0]+e[1]+e[2])/3;e[0]+=(i-e[0])*t,e[1]+=(i-e[1])*t,e[2]+=(i-e[2])*t}const k=(0,c.fA)(.01,.01,.01),A=(0,c.fA)(1,.6,.5),S=(0,c.fA)(1,.98,.98),D=(0,c.fA)(1,1,1),O=(0,c.fA)(.8,.8,1),Z=(0,c.fA)(.8,.8,1),z=(0,c.fA)(.98,.98,1),x=(0,c.fA)(1,1,1),E=(0,a.fA)(.01,p.local.ambientAtNight),V=(0,a.fA)(p.local.directAtTwilight,p.local.ambientAtTwilight),I=(0,a.fA)(.9*p.local.directAtNoon,p.local.ambientAtNoon),R=(0,a.fA)(p.local.directAtNoon,p.local.ambientAtNoon),K=I,N=S,H=z,L=V,U=A,F=Z;const G=new Date(0),B=(0,s.vt)(),$=(0,c.vt)(),W=(0,c.vt)(),q=(0,c.vt)(),Y=.25,j=.2},64839:(e,t,i)=>{i.d(t,{H:()=>n,Y:()=>o});const o=class{};function n(e){let t="";for(let i=0;i<(arguments.length<=1?0:arguments.length-1);i++)t+=e[i]+(i+1<1||arguments.length<=i+1?void 0:arguments[i+1]);return t+=e[e.length-1],t}!function(e){e.int=function(e){return Math.round(e).toString()},e.float=function(e){return e.toPrecision(8)}}(n||(n={}))},99415:(e,t,i)=>{i.d(t,{K:()=>n,W:()=>s});var o=i(64839);class n extends o.Y{constructor(){super(),this._key="",this._keyDirty=!1,this._parameterBits=this._parameterBits?this._parameterBits.map((()=>0)):[],this._parameterNames||(this._parameterNames=[])}get key(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}snapshot(){const e=this._parameterNames,t={key:this.key};for(const i of e)t[i]=this[i];return t}}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,i)=>{var o;if(t._parameterNames=null!==(o=t._parameterNames)&&void 0!==o?o:[],t._parameterNames.push(i),null!=e.constValue)Object.defineProperty(t,i,{get:()=>e.constValue});else{var n;const o=t._parameterNames.length-1,s=e.count||2,r=Math.ceil(Math.log2(s)),a=null!==(n=t._parameterBits)&&void 0!==n?n:[0];let l=0;for(;a[l]+r>16;)l++,l>=a.length&&a.push(0);t._parameterBits=a;const c=a[l],d=(1<<r)-1<<c;a[l]+=r,Object.defineProperty(t,i,{get(){return this[o]},set(e){if(this[o]!==e&&(this[o]=e,this._keyDirty=!0,this._parameterBits[l]=this._parameterBits[l]&~d|+e<<c&d,"number"!=typeof e&&"boolean"!=typeof e))throw new Error("Configuration value for "+i+" must be boolean or number, got "+typeof e)}})}}}},50578:(e,t,i)=>{i.d(t,{o:()=>o,q:()=>a});var o,n,s=i(35143),r=i(99415);(n=o||(o={}))[n.Gradient=0]="Gradient",n[n.Threshold=1]="Threshold",n[n.COUNT=2]="COUNT";class a extends r.K{constructor(){super(...arguments),this.visualization=o.Gradient,this.bandsEnabled=!1}}(0,s._)([(0,r.W)({count:o.COUNT})],a.prototype,"visualization",void 0),(0,s._)([(0,r.W)()],a.prototype,"bandsEnabled",void 0)},4219:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Le});var o=i(35143),n=(i(11265),i(30726)),s=i(68134),r=i(18288),a=i(46053),l=(i(81806),i(76460),i(47249),i(85842)),c=i(39348),d=i(22785),u=i(25329);const h="esri-shadow-cast",p={base:h,widgetIcon:i(15062).T.measureBuildingHeightShadow,timeRange:"".concat(h,"__time-range"),timeRangeIndicator:"".concat(h,"__time-range__indicator"),datePickerContainer:"".concat(h,"__date-picker-container"),visualization:"".concat(h,"__visualization"),visualizationSelect:"".concat(h,"__visualization__select"),visualizationConfigHidden:"".concat(h,"__visualization__config--hidden")},v="".concat(h,"__label"),_="".concat(h,"__threshold-config"),m={base:_,valueLabel:"".concat(_,"__value-label")},g="".concat(h,"__duration-config"),f={base:g,radioGroup:"".concat(g,"__radio-group")},y={base:"".concat(h,"__discrete-config")},w="".concat(h,"__tooltip"),b={base:w,content:"".concat(w,"__content")};var M;!function(e){e.Disabled="disabled",e.Ready="ready"}(M||(M={}));var C=i(69539),T=i(91967),P=i(18690),k=i(98773),A=i(50346),S=i(76931),D=i(9392),O=i(3136),Z=i(30338),z=i(50578),x=i(19276),E=i(3975);let V=class extends T.A{constructor(){super({}),this.color=new C.A([50,50,50,.7]),this.intervalOptions=new x.A([(0,r.t)(15,"minutes","milliseconds"),(0,r.t)(30,"minutes","milliseconds"),(0,r.t)(1,"hours","milliseconds"),(0,r.t)(2,"hours","milliseconds"),(0,r.t)(3,"hours","milliseconds")]),this.interval=this.intervalOptions.at(0)}set intervalOptions(e){this._set("intervalOptions",(0,E.V)(e,this._get("intervalOptions")))}};(0,o._)([(0,a.MZ)({type:C.A})],V.prototype,"color",void 0),(0,o._)([(0,a.MZ)()],V.prototype,"interval",void 0),(0,o._)([(0,a.MZ)({type:x.A})],V.prototype,"intervalOptions",null),V=(0,o._)([(0,l.$)("esri.widgets.ShadowCast.DiscreteOptions")],V);const I=V;var R;!function(e){e.Continuous="continuous",e.Hourly="hourly"}(R||(R={}));let K=class extends T.A{constructor(){super(...arguments),this.color=new C.A([0,0,255,.7]),this.mode=R.Continuous}};(0,o._)([(0,a.MZ)({type:C.A})],K.prototype,"color",void 0),(0,o._)([(0,a.MZ)()],K.prototype,"mode",void 0),K=(0,o._)([(0,l.$)("esri.widgets.ShadowCast.DurationOptions")],K);const N=K;var H,L=i(54901),U=i(79468);!function(e){e.PointerMove="pointer-move",e.Main="main"}(H||(H={}));let F=class extends T.A{constructor(e){super(e),this._screenPoint=null,this._accumulatedShadowTime=null,this._shadowTimeTask=null,this._updateAccumulatedShadowTime=(e,t)=>{this._shadowTimeTask=(0,n.DC)(this._shadowTimeTask),this._shadowTimeTask=(0,k.UT)((async i=>{const{results:o,ground:n}=await e.hitTest(t);if(0===o.length&&!n.mapPoint)return void(this._accumulatedShadowTime=null);const s=await this.getDuration(t,i);this._accumulatedShadowTime=s}))},this._throttledUpdateAccumulatedShadowTime=(0,U.n)(this._updateAccumulatedShadowTime,300)}initialize(){this.addHandles((0,s.watch)((()=>({enabled:this.enabled,view:this.view})),(e=>{let{enabled:t,view:i}=e;t&&null!=i?this._startTracking(i):this._stopTracking()}),s.syncAndInitial))}get screenPoint(){return this.enabled?this._screenPoint:null}get accumulatedShadowTime(){return this.enabled?this._accumulatedShadowTime:null}get testData(){return{setThrottleDelay:e=>{this._throttledUpdateAccumulatedShadowTime.remove(),this._throttledUpdateAccumulatedShadowTime=(0,U.n)(this._updateAccumulatedShadowTime,e)}}}_startTracking(e){if(this.hasHandles(H.Main))return;const t=()=>{this.hasHandles(H.PointerMove)||this.addHandles(e.on("pointer-move",(t=>{const i=(0,S.tc)(t.x,t.y);this._screenPoint=i,this._throttledUpdateAccumulatedShadowTime(e,i)})),H.PointerMove)},i=()=>{this.removeHandles(H.PointerMove),this._screenPoint=null,this._accumulatedShadowTime=null};this.addHandles([this._throttledUpdateAccumulatedShadowTime,e.on("pointer-enter",t),e.on("pointer-leave",i),e.on("pointer-down",i),e.on("pointer-drag",i),e.on("pointer-up",t),e.on("click",(t=>{const i=(0,S.tc)(t.x,t.y);this._screenPoint=i,this._updateAccumulatedShadowTime(e,i)})),(0,L.hA)((()=>{this._shadowTimeTask=(0,n.DC)(this._shadowTimeTask)}))],H.Main),t()}_stopTracking(){this.removeHandles(H.Main)}};var G;(0,o._)([(0,a.MZ)()],F.prototype,"getDuration",void 0),(0,o._)([(0,a.MZ)()],F.prototype,"view",void 0),(0,o._)([(0,a.MZ)()],F.prototype,"enabled",void 0),(0,o._)([(0,a.MZ)()],F.prototype,"screenPoint",null),(0,o._)([(0,a.MZ)()],F.prototype,"accumulatedShadowTime",null),(0,o._)([(0,a.MZ)()],F.prototype,"_screenPoint",void 0),(0,o._)([(0,a.MZ)()],F.prototype,"_accumulatedShadowTime",void 0),(0,o._)([(0,a.MZ)()],F.prototype,"_shadowTimeTask",void 0),F=(0,o._)([(0,l.$)("esri.widgets.ShadowCast.ShadowTooltipViewModel")],F),function(e){e.Threshold="threshold",e.Duration="duration",e.Discrete="discrete"}(G||(G={}));G.Threshold,G.Duration,G.Discrete;let B=class extends T.A{constructor(){super(...arguments),this.color=new C.A([255,0,0,.7]),this.value=(0,r.t)(4,"hours","milliseconds"),this.minValue=0,this.maxValue=(0,r.t)(8,"hours","milliseconds")}};(0,o._)([(0,a.MZ)({type:C.A})],B.prototype,"color",void 0),(0,o._)([(0,a.MZ)()],B.prototype,"value",void 0),(0,o._)([(0,a.MZ)()],B.prototype,"minValue",void 0),(0,o._)([(0,a.MZ)()],B.prototype,"maxValue",void 0),B=(0,o._)([(0,l.$)("esri.widgets.ShadowCast.ThresholdOptions")],B);const $=B;var W=i(71587);const q=[],Y=(0,D.vt)(),j=[],J=(0,r.t)(1,"hours","milliseconds");let Q=class extends T.A{constructor(e){super(e),this.view=null,this.tooltip=new F({getDuration:(e,t)=>this.getDuration(e,t)}),this.startTimeOfDay=(0,r.t)(10,"hours","milliseconds"),this.endTimeOfDay=(0,r.t)(16,"hours","milliseconds"),this.visualizationType=G.Threshold,this.thresholdOptions=new $,this.durationOptions=new N,this.discreteOptions=new I,this._running=!0,this._stopPreviewingTask=null,this._forcePreview=!1,this._autoRestoreForcePreviewEnabled=!0,this._utcOffset=null,this.date=new Date}initialize(){this.addHandles([(0,s.watch)((()=>({view:this.view,tooltipEnabled:this._tooltipEnabled})),(e=>{let{view:t,tooltipEnabled:i}=e;this.tooltip.view=t,this.tooltip.enabled=i}),s.syncAndInitial),(0,s.watch)((()=>this._forcePreviewDependencies),(()=>{(0,n.DC)(this._stopPreviewingTask),this._forcePreview=!0,this._autoRestoreForcePreviewEnabled&&(this._stopPreviewingTask=(0,k.UT)((async e=>{await(0,A.Pl)(500,e),(0,A.Te)(e),this._forcePreview=!1})))}),s.syncAndInitial),(0,s.watch)((()=>({renderer:this.renderer,parameters:this._visualizationParameters})),(e=>X(e.renderer,e.parameters)),s.syncAndInitial),(0,s.watch)((()=>({renderer:this.renderer,parameters:{lightDirections:this._lightDirections}})),(e=>X(e.renderer,e.parameters)),s.syncAndInitial),(0,s.watch)((()=>({renderer:this.renderer,parameters:{enabled:this._running}})),(e=>X(e.renderer,e.parameters)),s.syncAndInitial),(0,s.watch)((()=>({renderer:this.renderer,parameters:{previewing:this._previewing}})),(e=>X(e.renderer,e.parameters)),s.syncAndInitial)])}destroy(){this.stop(),X(this.renderer,{enabled:!1}),(0,n.pR)(this.tooltip)}get state(){return null!=this.view&&this.view.ready&&null!=this._referencePosition?M.Ready:M.Disabled}set date(e){const t=new Date(e);t.setHours(0,0,0,0),this._set("date",t)}get utcOffset(){var e;return null!==(e=this._utcOffset)&&void 0!==e?e:this._utcOffsetAuto}set utcOffset(e){this._utcOffset=e}get testData(){return{setAutoRestoreForcedPreviewEnabled:e=>{this._autoRestoreForcePreviewEnabled=e},setForcedPreview:e=>{this._forcePreview=e},isPreviewing:()=>this._previewing}}get _previewing(){const{view:e}=this;return null==(null===e||void 0===e?void 0:e.allLayerViews)||this._forcePreview||!e.stationary||e.allLayerViews.some((e=>ee(e)&&e.updating))}get _utcOffsetAuto(){const e=this._referencePosition;return null!=e?(0,O.uu)(e[0],!1):0}get _dateUTCOffset(){let e=this.date;return e=(0,r.mi)(e,-e.getTimezoneOffset(),"minutes"),e=(0,r.mi)(e,-this.utcOffset,"hours"),e}get _startDateTimeUTC(){return(0,r.mi)(this._dateUTCOffset,this.startTimeOfDay)}get _endDateTimeUTC(){return(0,r.mi)(this._dateUTCOffset,this.endTimeOfDay)}get _referencePosition(){var e;return null===(e=this.view)||void 0===e||null===(e=e.environmentManager)||void 0===e?void 0:e.referencePositionWGS84Comparable}get _interval(){const e=this._duration>0?Math.floor(this._duration/255):255,t=this.discreteOptions.interval;switch(this.visualizationType){case G.Threshold:case G.Duration:return e;case G.Discrete:return t>0?t:e}}get _sampleCount(){return this._lightDirections.length}get _duration(){return this.endTimeOfDay-this.startTimeOfDay}get _lightDirections(){const{view:e}=this;if(null==e)return q;const t="global"===e.viewingMode?Y:this._referencePosition;if(null==t)return q;const i=this._interval,o=(0,Z.ld)(this._startDateTimeUTC,this._endDateTimeUTC,i,t,e.state.viewingMode),n=o.length;j.length=0;const s=(0,W.s)(0,n,j),r=new Array(n);for(let a=0;a<n;++a)r[a]=o[s[a]];return r}get _tooltipEnabled(){return this.state===M.Ready&&this.visualizationType!==G.Discrete&&this._running&&!this._previewing}get _visualizationParameters(){if(!this._running)return null;switch(this.visualizationType){case G.Threshold:return this._thresholdVisualizationParameters;case G.Duration:return this._durationVisualizationParameters;case G.Discrete:return this._discreteVisualizationParameters}}get _thresholdVisualizationParameters(){const{value:e,color:t}=this.thresholdOptions,i=this._duration;return{visualization:z.o.Threshold,color:C.A.toUnitRGBA(t),threshold:i>0?e/this._duration:0}}get _durationVisualizationParameters(){const{color:e,mode:t}=this.durationOptions,i=this._duration,o=i>0&&t===R.Hourly?J/i:0;return{color:C.A.toUnitRGBA(e),visualization:z.o.Gradient,bandsEnabled:o>0,bandSize:o}}get _discreteVisualizationParameters(){return{color:C.A.toUnitRGBA(this.discreteOptions.color),visualization:z.o.Gradient,bandsEnabled:!1,bandSize:0}}get _forcePreviewDependencies(){const{view:e}=this;if(null==e)return null;const t=e.slicePlane,i=e.allLayerViews.toArray().filter(ee),o=i.map((e=>e.layer)).filter(P.Ru),n=i.map((e=>e.visible)),s=o.map((e=>e.visible)),r=o.map((e=>e.opacity)),a=o.filter((e=>"definitionExpression"in e)).map((e=>e.definitionExpression)),l=i.filter((e=>"filter"in e)).map((e=>e.filter));return{slicePlane:t,startDateUTC:this._startDateTimeUTC,endDateUTC:this._endDateTimeUTC,layerViewVisibilities:n,layerVisibilities:s,layerOpacities:r,filters:l,definitionExpressions:a}}get renderer(){const{view:e}=this;if(null==e)return null;const t=e._stage;return null==t?null:t.renderer}start(){this.setRunning(!0)}stop(){this.setRunning(!1)}setRunning(e){this._running=e}async getDuration(e,t){const{view:i,renderer:o}=this;if(null==i||null==o)return 0;const n=i.state.camera.screenToRender((0,S.gs)(e.x,e.y),(0,S.QG)()),s=o.readAccumulatedShadow(n),r=this._sampleCount;return 0===r?0:s*r*(this._duration/r)}};function X(e,t){null!=e&&null!=t&&e.setParameters({shadowCastOptions:t})}function ee(e){if(e.suspended)return!1;switch(e.type){case"building-scene-3d":case"csv-3d":case"elevation-3d":case"feature-3d":case"geojson-3d":case"graphics-3d":case"integrated-mesh-3d":case"integrated-mesh-3dtiles":case"ogc-feature-3d":case"route-3d":case"scene-layer-3d":case"scene-layer-graphics-3d":case"stream-3d":case"wms-3d":return!0;case"base-dynamic-3d":case"dimension-3d":case"imagery-3d":case"imagery-tile-3d":case"line-of-sight-3d":case"map-image-3d":case"point-cloud-3d":case"tile-3d":case"vector-tile-3d":case"voxel-3d":case"wfs-3d":case"wmts-3d":case"media-3d":default:return!1;case"group":return e.layerViews.toArray().some((e=>ee(e)))}}(0,o._)([(0,a.MZ)()],Q.prototype,"state",null),(0,o._)([(0,a.MZ)()],Q.prototype,"view",void 0),(0,o._)([(0,a.MZ)()],Q.prototype,"tooltip",void 0),(0,o._)([(0,a.MZ)({nonNullable:!0})],Q.prototype,"date",null),(0,o._)([(0,a.MZ)({nonNullable:!0})],Q.prototype,"utcOffset",null),(0,o._)([(0,a.MZ)({nonNullable:!0})],Q.prototype,"startTimeOfDay",void 0),(0,o._)([(0,a.MZ)({nonNullable:!0})],Q.prototype,"endTimeOfDay",void 0),(0,o._)([(0,a.MZ)({nonNullable:!0})],Q.prototype,"visualizationType",void 0),(0,o._)([(0,a.MZ)({type:$,nonNullable:!0})],Q.prototype,"thresholdOptions",void 0),(0,o._)([(0,a.MZ)({type:N,nonNullable:!0})],Q.prototype,"durationOptions",void 0),(0,o._)([(0,a.MZ)({type:I,nonNullable:!0})],Q.prototype,"discreteOptions",void 0),(0,o._)([(0,a.MZ)()],Q.prototype,"_running",void 0),(0,o._)([(0,a.MZ)()],Q.prototype,"_stopPreviewingTask",void 0),(0,o._)([(0,a.MZ)()],Q.prototype,"_forcePreview",void 0),(0,o._)([(0,a.MZ)()],Q.prototype,"_autoRestoreForcePreviewEnabled",void 0),(0,o._)([(0,a.MZ)()],Q.prototype,"_previewing",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_utcOffset",void 0),(0,o._)([(0,a.MZ)()],Q.prototype,"_utcOffsetAuto",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_dateUTCOffset",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_startDateTimeUTC",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_endDateTimeUTC",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_referencePosition",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_interval",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_sampleCount",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_duration",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_lightDirections",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_tooltipEnabled",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_visualizationParameters",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_thresholdVisualizationParameters",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_durationVisualizationParameters",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_discreteVisualizationParameters",null),(0,o._)([(0,a.MZ)()],Q.prototype,"_forcePreviewDependencies",null),(0,o._)([(0,a.MZ)()],Q.prototype,"renderer",null),Q=(0,o._)([(0,l.$)("esri.widgets.ShadowCast.ShadowCastViewModel")],Q);const te=Q;let ie=class extends T.A{constructor(){super(...arguments),this.timeRangeSlider=!0,this.timezone=!0,this.datePicker=!0,this.visualizationOptions=!0,this.colorPicker=!0,this.tooltip=!0}};(0,o._)([(0,a.MZ)()],ie.prototype,"timeRangeSlider",void 0),(0,o._)([(0,a.MZ)()],ie.prototype,"timezone",void 0),(0,o._)([(0,a.MZ)()],ie.prototype,"datePicker",void 0),(0,o._)([(0,a.MZ)()],ie.prototype,"visualizationOptions",void 0),(0,o._)([(0,a.MZ)()],ie.prototype,"colorPicker",void 0),(0,o._)([(0,a.MZ)()],ie.prototype,"tooltip",void 0),ie=(0,o._)([(0,l.$)("esri.widgets.ShadowCast.ShadowCastVisibleElements")],ie);const oe=ie;var ne=i(49723),se=i(38042),re=i(24241);function ae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"milliseconds",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o={locale:"bs"===(0,se.Z0)()?"hr":(0,se.JK)(),numberingSystem:"latn"};let n;return n=e?re.dw.fromMillis((0,r.t)(e,t,"milliseconds"),o).rescale():re.dw.fromObject({seconds:0},o),n.toHuman({listStyle:"narrow",unitDisplay:"long",...i})}var le=i(76099),ce=i(54761);function de(e,t){const{for:i,label:o,tabIndex:n,...s}=e;return(0,ce.K)("div",{class:(0,le.Ly)(v,null===s||void 0===s?void 0:s.class),key:i,...s},(0,ce.K)("calcite-label",{for:i,scale:"s",tabIndex:n},o),t)}var ue=i(52394),he=i(77666),pe=i(78765),ve=i(63582);const _e="esri-color-picker",me={base:_e,backgroundPattern:"".concat(_e,"__bg-pattern"),toggleButton:"".concat(_e,"__toggle-button"),popover:"".concat(_e,"__popover"),opacitySliderContainer:"".concat(_e,"__opacity-slider-container"),opacitySlider:"".concat(_e,"__opacity-slider"),calciteColorPicker:"".concat(_e,"__calcite-color-picker")};var ge;!function(e){e.ColorPickerFocus="hex-input-poll-timeout",e.ButtonFocusTimeout="button-focus-timeout"}(ge||(ge={}));let fe=class extends u.A{constructor(e,t){super(e,t),this.value=new C.A,this.alphaEnabled=!0,this._containerElement=null,this._popover=null,this._popoverElement=null,this._buttonElement=null,this._colorPickerCreated=!1}initialize(){this.addHandles((0,s.watch)((()=>({container:this._containerElement,value:this.value})),(e=>{let{container:t,value:i}=e;null===t||void 0===t||t.style.setProperty("--esri-color-picker-value",i.toCss(!0))}),s.syncAndInitial))}loadDependencies(){return(0,he.W)({button:()=>Promise.all([i.e(39879),i.e(62785),i.e(95203),i.e(75151),i.e(11309)]).then(i.bind(i,11309)),"color-picker":()=>Promise.all([i.e(39879),i.e(62785),i.e(95203),i.e(75151),i.e(79671),i.e(88012),i.e(93073),i.e(11816),i.e(72227),i.e(88774)]).then(i.bind(i,88774)),label:()=>Promise.all([i.e(39879),i.e(65423)]).then(i.bind(i,65423)),slider:()=>Promise.all([i.e(39879),i.e(62785),i.e(95203),i.e(28225)]).then(i.bind(i,28225))})}destroy(){this._destroyPopover(),this._buttonElement=null}render(){const e=this._messages,t=null!=this._popover&&this._popover.open?e.close:e.open;return(0,ce.K)("div",{afterCreate:this._onContainerAfterCreate,bind:this,class:this.classes(me.base,this.class)},(0,ce.K)("div",{class:me.backgroundPattern}),(0,ce.K)("calcite-button",{afterCreate:this._onButtonAfterCreate,appearance:"transparent",bind:this,class:me.toggleButton,id:this.id,kind:"neutral",label:t,onclick:this._togglePopover,scale:"s",tabIndex:-1,title:t}))}_onContainerAfterCreate(e){this._containerElement=e}_onButtonAfterCreate(e){this._destroyPopover(),this._buttonElement=e,this._popover=new pe.A({owner:this,anchorElement:e,placement:"bottom-start",renderContentFunction:this._renderPopoverContent})}_destroyPopover(){this.removeHandles(ge.ColorPickerFocus),this._popover=(0,n.pR)(this._popover),this._popoverElement=null}_renderPopoverContent(){const e=this.value,t=this._messages;return(0,ce.K)("div",{afterCreate:this._onPopoverAfterCreate,bind:this,class:me.popover,onfocusout:this._onPopoverFocusOut,onkeydown:this._onPopoverKeyDown,tabIndex:-1},(0,ce.K)("calcite-color-picker",{afterCreate:this._onColorPickerAfterCreate,afterRemoved:()=>this._colorPickerCreated=!1,bind:this,class:me.calciteColorPicker,hideChannels:!0,hideSaved:!0,scale:"m",value:this._colorPickerCreated?e.toCss():null,onCalciteColorPickerInput:this._onColorInput}),this.alphaEnabled?(0,ce.K)("section",{class:me.opacitySliderContainer},(0,ce.K)("calcite-label",{scale:"s"},t.opacity,(0,ce.K)("calcite-slider",{bind:this,class:me.opacitySlider,labelHandles:!0,max:1,min:0,step:.01,value:e.a,onCalciteSliderInput:this._onOpacityChange}))):null)}_onColorInput(e){const t=e.target.value,i="string"==typeof t?new C.A(t):new C.A;i.a=this.value.a,this._onChange(i)}_onOpacityChange(e){const t=this.value.clone();t.a=e.target.value,this._onChange(t)}_onChange(e){this.value=e,null!=this.onChange&&this.onChange(e)}_onColorPickerAfterCreate(e){this.removeHandles(ge.ColorPickerFocus);const t=(0,k.UT)((async t=>{e.componentOnReady&&await e.componentOnReady(),(0,A.Te)(t),this._colorPickerCreated=!0,await(0,ue.$m)(),(0,A.Te)(t),e.setFocus()}));this.addHandles((0,L.hA)((()=>{t.abort(),this._colorPickerCreated=!1})),ge.ColorPickerFocus)}_togglePopover(e){null!=this._popover&&this._popover.open?this._closePopover():this._openPopover()}_openPopover(){const e=this._popover;e&&(e.open=!0)}_closePopover(){this.removeHandles(ge.ColorPickerFocus);const e=this._popover;e&&(e.open=!1),this._setFocusOnButton()}_setFocusOnButton(){this.removeHandles(ge.ButtonFocusTimeout),this.addHandles(function(e,t){const i=setTimeout(e,t);return(0,L.hA)((()=>clearTimeout(i)))}((()=>{var e;return null===(e=this._buttonElement)||void 0===e?void 0:e.setFocus()})),ge.ButtonFocusTimeout)}_onPopoverAfterCreate(e){this._popoverElement=e}_onPopoverFocusOut(e){const t=this._popoverElement;if(null==t)return;const i=e.relatedTarget;if(i&&i instanceof Node){if(t.contains(i))return;if(i===this._buttonElement||this._isAssociatedLabel(i))return}this._closePopover()}_isAssociatedLabel(e){var t;const i=this.id,o=null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase();return"calcite-label"===o&&e.for===i||"label"===o&&e.htmlFor===i}_onPopoverKeyDown(e){"Escape"!==e.key&&"Enter"!==e.key||(e.stopPropagation(),this._closePopover())}};function ye(e){return(0,ce.K)(de,{for:e.id,label:e.label,tabIndex:-1},(0,ce.K)(fe,{id:e.id,value:e.value,onChange:e.onChange}))}(0,o._)([(0,a.MZ)()],fe.prototype,"class",void 0),(0,o._)([(0,a.MZ)()],fe.prototype,"value",void 0),(0,o._)([(0,a.MZ)()],fe.prototype,"alphaEnabled",void 0),(0,o._)([(0,a.MZ)()],fe.prototype,"onChange",void 0),(0,o._)([(0,a.MZ)()],fe.prototype,"_containerElement",void 0),(0,o._)([(0,a.MZ)()],fe.prototype,"_popover",void 0),(0,o._)([(0,a.MZ)()],fe.prototype,"_popoverElement",void 0),(0,o._)([(0,a.MZ)()],fe.prototype,"_buttonElement",void 0),(0,o._)([(0,a.MZ)(),(0,ve.G)("esri/widgets/support/t9n/ColorPicker")],fe.prototype,"_messages",void 0),(0,o._)([(0,a.MZ)()],fe.prototype,"_colorPickerCreated",void 0),fe=(0,o._)([(0,l.$)("esri.widgets.support.ColorPicker")],fe);let we=class extends u.A{constructor(e){super(e),this.colorPickerVisible=!0,this._selectId="select-".concat((0,ne.lk)()),this._colorPickerId="color-picker-".concat((0,ne.lk)()),this._onColorChange=e=>{this.options.color=e}}loadDependencies(){return(0,he.W)({label:()=>Promise.all([i.e(39879),i.e(65423)]).then(i.bind(i,65423)),option:()=>i.e(70383).then(i.bind(i,92764)),select:()=>Promise.all([i.e(39879),i.e(95203),i.e(81381)]).then(i.bind(i,81381))})}render(){const e=this._messages.discrete,t=e.intervalLabel,{color:i,interval:o,intervalOptions:n}=this.options;return(0,ce.K)("div",{class:y.base},(0,ce.K)(de,{for:this._selectId,label:t},(0,ce.K)("calcite-select",{bind:this,id:this._selectId,label:t,onCalciteSelectChange:this._onIntervalChange},n.toArray().map((e=>(0,ce.K)("calcite-option",{key:e,selected:e===o,value:String(e)},ae(e)))))),this.colorPickerVisible?(0,ce.K)(ye,{id:this._colorPickerId,label:e.colorLabel,value:i,onChange:this._onColorChange}):null)}_onIntervalChange(e){var t;const i=parseInt(null===(t=e.target.selectedOption)||void 0===t?void 0:t.value,10);Number.isFinite(i)&&(this.options.interval=i)}};(0,o._)([(0,a.MZ)()],we.prototype,"options",void 0),(0,o._)([(0,a.MZ)()],we.prototype,"colorPickerVisible",void 0),(0,o._)([(0,a.MZ)(),(0,ve.G)("esri/widgets/ShadowCast/t9n/ShadowCast")],we.prototype,"_messages",void 0),we=(0,o._)([(0,l.$)("esri.widgets.ShadowCast.components.DiscreteConfigurator")],we);let be=class extends u.A{constructor(e){super(e),this.colorPickerVisible=!0,this._modeSelectorId="mode-selector-".concat((0,ne.lk)()),this._colorPickerId="color-picker-".concat((0,ne.lk)()),this._onColorChange=e=>{this.options.color=e},this._setContinuous=()=>{this.options.mode=R.Continuous},this._setHourly=()=>{this.options.mode=R.Hourly}}loadDependencies(){return(0,he.W)({button:()=>Promise.all([i.e(39879),i.e(62785),i.e(95203),i.e(75151),i.e(11309)]).then(i.bind(i,11309)),label:()=>Promise.all([i.e(39879),i.e(65423)]).then(i.bind(i,65423))})}render(){const e=this._messages.duration,{color:t,mode:i}=this.options;return(0,ce.K)("div",{class:f.base},(0,ce.K)(de,{for:this._modeSelectorId,label:e.modeLabel},(0,ce.K)("div",{class:f.radioGroup},(0,ce.K)(Me,{active:i===R.Continuous,label:e.continuousLabel,onclick:this._setContinuous}),(0,ce.K)(Me,{active:i===R.Hourly,label:e.hourlyLabel,onclick:this._setHourly}))),this.colorPickerVisible?(0,ce.K)(ye,{id:this._colorPickerId,label:e.colorLabel,value:t,onChange:this._onColorChange}):null)}};function Me(e){let{active:t,label:i,...o}=e;return(0,ce.K)("calcite-button",{alignment:"center",appearance:t?"solid":"outline",scale:"s",width:"half",...o},i)}(0,o._)([(0,a.MZ)()],be.prototype,"options",void 0),(0,o._)([(0,a.MZ)()],be.prototype,"colorPickerVisible",void 0),(0,o._)([(0,a.MZ)(),(0,ve.G)("esri/widgets/ShadowCast/t9n/ShadowCast")],be.prototype,"_messages",void 0),be=(0,o._)([(0,l.$)("esri.widgets.ShadowCast.components.DurationConfigurator")],be);var Ce=i(15941);const Te=(0,r.t)(1,"minutes","milliseconds"),Pe=(0,r.t)(15,"minutes","milliseconds");let ke=class extends u.A{constructor(e,t){super(e,t),this.accumulatedShadowTime=null,this._messages=null}render(){const e=this._formattedContent;return(0,ce.K)("div",{class:b.base},e?(0,ce.K)("div",{class:b.content},e):null)}get _formattedContent(){const e=this._messages,t=this.accumulatedShadowTime;if(null==e||null==t)return null;const i=(0,Ce.wx)(t,t<Pe?Te:Pe);return(0,c.V)(e.timeInShadow,{duration:ae(i)})}};(0,o._)([(0,a.MZ)()],ke.prototype,"accumulatedShadowTime",void 0),(0,o._)([(0,a.MZ)()],ke.prototype,"view",void 0),(0,o._)([(0,a.MZ)(),(0,ve.G)("esri/widgets/ShadowCast/t9n/ShadowCast")],ke.prototype,"_messages",void 0),(0,o._)([(0,a.MZ)({readOnly:!0})],ke.prototype,"_formattedContent",null),ke=(0,o._)([(0,l.$)("esri.widgets.ShadowCast.components.ShadowTooltipContent")],ke);let Ae=class extends T.A{constructor(e){super(e),this._updateHandle=null,this._contentContainer=this._createContainer()}initialize(){this.container.appendChild(this._contentContainer),this._contentWidget=new ke({},this._contentContainer),this._updateHandle=(0,s.watch)((()=>{const e=this._contentContainer,{screenPoint:t,accumulatedShadowTime:i}=this.viewModel.tooltip;return{contentContainer:e,screenPoint:t,accumulatedShadowTime:i}}),(e=>this._update(e)),s.syncAndInitial)}destroy(){this._updateHandle=(0,n.xt)(this._updateHandle),this._contentWidget=(0,n.pR)(this._contentWidget),this.container.contains(this._contentContainer)&&this.container.removeChild(this._contentContainer)}get testData(){var e;return{displayedValue:"none"===this._contentContainer.style.display?null:null===(e=this._contentWidget.container)||void 0===e?void 0:e.innerText}}_update(e){let{contentContainer:t,screenPoint:i,accumulatedShadowTime:o}=e;const{style:n}=t;null!=i?(n.display="block",n.transform="translate(".concat(i.x,"px, ").concat(i.y,"px)"),this._contentWidget.accumulatedShadowTime=o):n.display="none"}_createContainer(){const e=document.createElement("div"),{style:t}=e;return t.position="absolute",t.top="0",t.left="0",e}};(0,o._)([(0,a.MZ)()],Ae.prototype,"viewModel",void 0),(0,o._)([(0,a.MZ)()],Ae.prototype,"container",void 0),(0,o._)([(0,a.MZ)()],Ae.prototype,"_contentContainer",void 0),(0,o._)([(0,a.MZ)()],Ae.prototype,"_contentWidget",void 0),Ae=(0,o._)([(0,l.$)("esri.widgets.ShadowCast.components.ShadowTooltip")],Ae);var Se=i(50265);let De=class extends u.A{constructor(e){super(e),this.colorPickerVisible=!0,this._valueSliderId="value-slider-".concat((0,ne.lk)()),this._colorPickerId="color-picker-".concat((0,ne.lk)()),this._valueSlider=new d.default({visibleElements:{labels:!1,rangeLabels:!1},steps:(0,r.t)(30,"minutes","milliseconds"),labelFormatFunction:(e,t)=>{const i=(0,r.t)(e,"milliseconds","hours");return"tick"===t?(0,Se.ZV)(i,{maximumFractionDigits:0}):""}}),this._onColorChange=e=>{this.options.color=e}}initialize(){const e=e=>{let{value:t}=e;this.options.value=t};this.addHandles([(0,s.watch)((()=>{const{value:e,minValue:t,maxValue:i}=this.options;return{value:e,minValue:t,maxValue:i}}),(e=>{let{value:t,minValue:i,maxValue:o}=e;const n=this._valueSlider;n.min=i,n.max=o,n.values=[t];const s=o-i,a=Math.floor((0,r.t)(s,"milliseconds","hours"));n.tickConfigs=[{mode:"count",values:2*a+1,labelsVisible:!1},{mode:"count",values:a+1,labelsVisible:!0}]}),s.syncAndInitial),this._valueSlider.on("thumb-change",e),this._valueSlider.on("thumb-drag",e)])}loadDependencies(){return(0,he.W)({label:()=>Promise.all([i.e(39879),i.e(65423)]).then(i.bind(i,65423))})}destroy(){this._valueSlider=(0,n.pR)(this._valueSlider)}render(){const e=this._messages.threshold,{color:t}=this.options;return(0,ce.K)("div",{class:m.base},(0,ce.K)(de,{class:m.valueLabel,for:this._valueSliderId,label:e.valueLabel},this._valueSlider.render()),this.colorPickerVisible?(0,ce.K)(ye,{id:this._colorPickerId,label:e.colorLabel,value:t,onChange:this._onColorChange}):null)}get testData(){return{valueSlider:this._valueSlider}}};(0,o._)([(0,a.MZ)()],De.prototype,"options",void 0),(0,o._)([(0,a.MZ)()],De.prototype,"colorPickerVisible",void 0),(0,o._)([(0,a.MZ)()],De.prototype,"testData",null),(0,o._)([(0,a.MZ)()],De.prototype,"_valueSlider",void 0),(0,o._)([(0,a.MZ)(),(0,ve.G)("esri/widgets/ShadowCast/t9n/ShadowCast")],De.prototype,"_messages",void 0),De=(0,o._)([(0,l.$)("esri.widgets.ShadowCast.components.ThresholdConfigurator")],De);var Oe,Ze=i(21510),ze=i(98108),xe=i(87540),Ee=i(24992),Ve=i(35529),Ie=i(65256);!function(e){e.Slider="slider"}(Oe||(Oe={}));const Re={hour:"2-digit",minute:"2-digit",timeZone:"UTC"},Ke=/(.*)\s(.*)/,Ne={labelFormatFunction:Ee.fG,min:0,max:1439,steps:15,rangeLabelInputsEnabled:!1,visibleElements:{labels:!1,rangeLabels:!1},tickConfigs:[{mode:"position",values:[0,360,720,1080,1439],labelsVisible:!0,tickCreatedFunction:(e,t,i)=>{t.classList.add(ze.D.primaryTick),i.classList.add(ze.D.primaryTickLabel);const o=i.innerText.match(Ke);o&&(i.innerHTML="".concat(o[1],'<br><div class="').concat(ze.D.primaryTickAmPm,'">').concat(o[2],"</div>"))}},{mode:"position",values:[120,240,480,600,840,960,1200,1320],tickCreatedFunction:(e,t)=>{t.classList.add(ze.D.secondaryTick)}}]};let He=class extends u.A{constructor(e,t){super(e,t),this.viewModel=null,this.headingLevel=4,this.iconClass=p.widgetIcon,this.icon=null,this.visibleElements=new oe,this._defaultViewModel=null,this._timeSlider=new d.default({...Ne,container:document.createElement("div")}),this._tooltip=null,this._onTimezoneChange=e=>{this.viewModel.utcOffset=e},this._onDateChange=e=>{this.viewModel.date=e},(null===e||void 0===e?void 0:e.viewModel)||(this._defaultViewModel=new te({view:null===e||void 0===e?void 0:e.view}),this.viewModel=this._defaultViewModel)}initialize(){this.addHandles([(0,s.watch)((()=>({viewModel:this.viewModel,slider:this._timeSlider})),(e=>this._connectTimeSlider(e)),s.syncAndInitial),(0,s.watch)((()=>{var e;return{container:null===(e=this.view)||void 0===e?void 0:e.surface,viewModel:this.viewModel,tooltipVisible:this.visibleElements.tooltip}}),(e=>{let{container:t,viewModel:i,tooltipVisible:o}=e;this._tooltip=(0,n.pR)(this._tooltip),null!=t&&o&&(this._tooltip=new Ae({viewModel:i,container:t}))}),s.syncAndInitial),(0,s.watch)((()=>({viewModel:this.viewModel,visible:this.visible})),(e=>{let{viewModel:t,visible:i}=e;return t.setRunning(i)}),s.syncAndInitial)])}destroy(){this._timeSlider=(0,n.pR)(this._timeSlider),null!=this._defaultViewModel&&this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()}loadDependencies(){return(0,he.W)({select:()=>Promise.all([i.e(39879),i.e(95203),i.e(81381)]).then(i.bind(i,81381)),option:()=>i.e(70383).then(i.bind(i,92764))})}render(){const{visibleElements:e,viewModel:t}=this,i=t.state===M.Disabled;return(0,ce.K)("div",{class:this.classes(p.base,ze.D.widget,ze.D.panel,{[ze.D.widgetDisabled]:i}),key:this},this._renderTimeRangeSection(),e.visualizationOptions?this._renderVisualizationOptionsSection():null)}get view(){var e;return null===(e=this.viewModel)||void 0===e?void 0:e.view}set view(e){this.viewModel&&(this.viewModel.view=e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get testData(){return{tooltip:this._tooltip}}_connectTimeSlider(e){let{viewModel:t,slider:i}=e;if(this.removeHandles(Oe.Slider),null==i)return;const o=e=>(0,r.t)(e,"milliseconds","minutes"),n=e=>(0,r.t)(e,"minutes","milliseconds"),a=e=>{let{index:i,value:o}=e;0===i?t.startTimeOfDay=n(o):t.endTimeOfDay=n(o)};this.addHandles([(0,s.watch)((()=>[t.startTimeOfDay,t.endTimeOfDay]),(e=>{i.values=e.map(o)}),s.syncAndInitial),i.on("thumb-change",a),i.on("thumb-drag",a),i.on("segment-drag",(()=>{[t.startTimeOfDay,t.endTimeOfDay]=i.values.map(n)}))],Oe.Slider)}_renderTimeRangeSection(){const{visibleElements:e}=this;return e.timeRangeSlider||e.datePicker?(0,ce.K)("section",{class:p.timeRange,key:"time-range"},(0,ce.K)(xe.D,{level:this.headingLevel},this.messages.timeLabel),e.timeRangeSlider?this._renderTimeRange():null,e.datePicker?this._renderDatePicker():null):null}_renderTimeRange(){const{messages:e,viewModel:t,visibleElements:i}=this,{startTimeOfDay:o,endTimeOfDay:n}=t,[s,r]=[o,n].map((e=>(0,Ie.Yq)(new Date(e),Re)));return[(0,ce.K)("div",{class:p.timeRangeIndicator,key:"time-range-indicator"},(0,c.V)(e.timeRange,{start:s,end:r}),i.timezone?(0,ce.K)(Ve.G,{value:t.utcOffset,onChange:this._onTimezoneChange}):null),(0,ce.K)("div",{afterCreate:this._timeSliderContainerAfterCreate,afterRemoved:this._timeSliderContainerAfterRemoved,bind:this,key:"time-slider-container"})]}_timeSliderContainerAfterCreate(e){var t;const i=null===(t=this._timeSlider)||void 0===t?void 0:t.container;i&&e.appendChild(i)}_timeSliderContainerAfterRemoved(e){var t;const i=null===(t=this._timeSlider)||void 0===t?void 0:t.container;i&&e.removeChild(i)}_renderDatePicker(){return(0,ce.K)("div",{class:p.datePickerContainer,key:"date-picker"},(0,ce.K)(Ze.A,{value:this.viewModel.date,onChange:this._onDateChange}))}_renderVisualizationOptionsSection(){const{headingLevel:e,messages:t,viewModel:i,visibleElements:o}=this,n=o.colorPicker,s=e=>this.classes(i.visualizationType===e?null:p.visualizationConfigHidden);return(0,ce.K)("section",{class:p.visualization,key:"visualization"},(0,ce.K)(xe.D,{level:e},t.visualizationLabel),this._renderVisualizationSelect(),(0,ce.K)("div",{class:s(G.Threshold),key:"threshold-configurator"},(0,ce.K)(De,{colorPickerVisible:n,options:i.thresholdOptions})),(0,ce.K)("div",{class:s(G.Duration),key:"duration-configurator"},(0,ce.K)(be,{colorPickerVisible:n,options:i.durationOptions})),(0,ce.K)("div",{class:s(G.Discrete),key:"discrete-configurator"},(0,ce.K)(we,{colorPickerVisible:n,options:i.discreteOptions})))}_renderVisualizationSelect(){const e=this.messages,t=this.viewModel.visualizationType;return(0,ce.K)("calcite-select",{bind:this,class:p.visualizationSelect,key:"visualization-select",label:e.visualizationLabel,onCalciteSelectChange:this._onVisualizationTypeChange},[{type:G.Threshold,label:e.threshold.label},{type:G.Duration,label:e.duration.label},{type:G.Discrete,label:e.discrete.label}].map((e=>{let{type:i,label:o}=e;return(0,ce.K)("calcite-option",{selected:i===t,value:i},o)})))}_onVisualizationTypeChange(e){var t;const i=null===(t=e.target.selectedOption)||void 0===t?void 0:t.value;this.viewModel.visualizationType=null!==i&&void 0!==i?i:G.Threshold}};(0,o._)([(0,a.MZ)()],He.prototype,"viewModel",void 0),(0,o._)([(0,a.MZ)()],He.prototype,"view",null),(0,o._)([(0,a.MZ)()],He.prototype,"headingLevel",void 0),(0,o._)([(0,a.MZ)()],He.prototype,"iconClass",void 0),(0,o._)([(0,a.MZ)()],He.prototype,"icon",void 0),(0,o._)([(0,a.MZ)()],He.prototype,"label",null),(0,o._)([(0,a.MZ)({type:oe,nonNullable:!0})],He.prototype,"visibleElements",void 0),(0,o._)([(0,a.MZ)(),(0,ve.G)("esri/widgets/ShadowCast/t9n/ShadowCast")],He.prototype,"messages",void 0),(0,o._)([(0,a.MZ)()],He.prototype,"_defaultViewModel",void 0),(0,o._)([(0,a.MZ)()],He.prototype,"_timeSlider",void 0),(0,o._)([(0,a.MZ)()],He.prototype,"_tooltip",void 0),He=(0,o._)([(0,l.$)("esri.widgets.ShadowCast")],He);const Le=He},71587:(e,t,i)=>{function o(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e>=t)return i;if(i.push(e),t-e<2)return i;const o=t-1;i.push(o);const s=n(e+1,o);for(;;){const e=s.next();if(e.done)break;i.push(e.value)}return i}function*n(e,t){if(e>=t)return;const i=e+Math.floor((t-e)/2);yield i;const o=n(e,i),s=n(i+1,t);for(;;){const e=o.next(),t=s.next();if(e.done&&t.done)break;e.done||(yield e.value),t.done||(yield t.value)}}i.d(t,{s:()=>o})}}]);
//# sourceMappingURL=4219.1d6c8fa8.chunk.js.map