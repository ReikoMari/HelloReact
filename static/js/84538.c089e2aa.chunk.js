"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[84538],{60008:(e,t,o)=>{o.d(t,{A6:()=>g,B8:()=>h,Xd:()=>d,Xr:()=>v,Yc:()=>A,hZ:()=>M,lw:()=>u,t2:()=>S,x8:()=>c});var i=o(44680),n=o(4336),s=o(9392),l=o(53494),r=o(20664),a=o(43047);function c(e,t,o){o*=.5;const i=Math.sin(o);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(o),e}function d(e,t){const o=2*Math.acos(t[3]),i=Math.sin(o/2);return i>(0,l.FD)()?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),o}function u(e,t,o){const i=t[0],n=t[1],s=t[2],l=t[3],r=o[0],a=o[1],c=o[2],d=o[3];return e[0]=i*d+l*r+n*c-s*a,e[1]=n*d+l*a+s*r-i*c,e[2]=s*d+l*c+i*a-n*r,e[3]=l*d-i*r-n*a-s*c,e}function p(e,t,o,i){const n=t[0],s=t[1],r=t[2],a=t[3];let c,d,u,p,h,v=o[0],y=o[1],g=o[2],_=o[3];return d=n*v+s*y+r*g+a*_,d<0&&(d=-d,v=-v,y=-y,g=-g,_=-_),1-d>(0,l.FD)()?(c=Math.acos(d),u=Math.sin(c),p=Math.sin((1-i)*c)/u,h=Math.sin(i*c)/u):(p=1-i,h=i),e[0]=p*n+h*v,e[1]=p*s+h*y,e[2]=p*r+h*g,e[3]=p*a+h*_,e}function h(e,t){const o=t[0],i=t[1],n=t[2],s=t[3],l=o*o+i*i+n*n+s*s,r=l?1/l:0;return e[0]=-o*r,e[1]=-i*r,e[2]=-n*r,e[3]=s*r,e}function v(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function y(e,t){const o=t[0]+t[4]+t[8];let i;if(o>0)i=Math.sqrt(o+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{let o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);const n=(o+1)%3,s=(o+2)%3;i=Math.sqrt(t[3*o+o]-t[3*n+n]-t[3*s+s]+1),e[o]=.5*i,i=.5/i,e[3]=(t[3*n+s]-t[3*s+n])*i,e[n]=(t[3*n+o]+t[3*o+n])*i,e[s]=(t[3*s+o]+t[3*o+s])*i}return e}function g(e,t,o,i){const n=.5*Math.PI/180;t*=n,o*=n,i*=n;const s=Math.sin(t),l=Math.cos(t),r=Math.sin(o),a=Math.cos(o),c=Math.sin(i),d=Math.cos(i);return e[0]=s*a*d-l*r*c,e[1]=l*r*d+s*a*c,e[2]=l*a*c-s*r*d,e[3]=l*a*d+s*r*c,e}const _=a.c,M=a.s,m=a.f,f=u,w=a.b,b=a.g,T=a.l,x=a.i,O=x,C=a.j,Z=C,k=a.n,S=a.a,R=a.e;function A(e,t,o){const i=(0,r.k)(t,o);return i<-.999999?((0,r.b)(E,I,t),(0,r.H)(E)<1e-6&&(0,r.b)(E,N,t),(0,r.n)(E,E),c(e,E,Math.PI),e):i>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,r.b)(E,t,o),e[0]=E[0],e[1]=E[1],e[2]=E[2],e[3]=1+i,k(e,e))}const E=(0,s.vt)(),I=(0,s.fA)(1,0,0),N=(0,s.fA)(0,1,0);const B=(0,n.vt)(),K=(0,n.vt)();const D=(0,i.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:m,calculateW:function(e,t){const o=t[0],i=t[1],n=t[2];return e[0]=o,e[1]=i,e[2]=n,e[3]=Math.sqrt(Math.abs(1-o*o-i*i-n*n)),e},conjugate:v,copy:_,dot:b,equals:R,exactEquals:S,fromEuler:g,fromMat3:y,getAxisAngle:d,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:h,len:O,length:x,lerp:T,mul:f,multiply:u,normalize:k,random:function(e){const t=l.Ov,o=t(),i=t(),n=t(),s=Math.sqrt(1-o),r=Math.sqrt(o);return e[0]=s*Math.sin(2*Math.PI*i),e[1]=s*Math.cos(2*Math.PI*i),e[2]=r*Math.sin(2*Math.PI*n),e[3]=r*Math.cos(2*Math.PI*n),e},rotateX:function(e,t,o){o*=.5;const i=t[0],n=t[1],s=t[2],l=t[3],r=Math.sin(o),a=Math.cos(o);return e[0]=i*a+l*r,e[1]=n*a+s*r,e[2]=s*a-n*r,e[3]=l*a-i*r,e},rotateY:function(e,t,o){o*=.5;const i=t[0],n=t[1],s=t[2],l=t[3],r=Math.sin(o),a=Math.cos(o);return e[0]=i*a-s*r,e[1]=n*a+l*r,e[2]=s*a+i*r,e[3]=l*a-n*r,e},rotateZ:function(e,t,o){o*=.5;const i=t[0],n=t[1],s=t[2],l=t[3],r=Math.sin(o),a=Math.cos(o);return e[0]=i*a+n*r,e[1]=n*a-i*r,e[2]=s*a+l*r,e[3]=l*a-s*r,e},rotationTo:A,scale:w,set:M,setAxes:function(e,t,o,i){const n=D;return n[0]=o[0],n[3]=o[1],n[6]=o[2],n[1]=i[0],n[4]=i[1],n[7]=i[2],n[2]=-t[0],n[5]=-t[1],n[8]=-t[2],k(e,y(e,n))},setAxisAngle:c,slerp:p,sqlerp:function(e,t,o,i,n,s){return p(B,t,n,s),p(K,o,i,s),p(e,B,K,2*s*(1-s)),e},sqrLen:Z,squaredLength:C,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))},8203:(e,t,o)=>{o.d(t,{A:()=>g});var i,n=o(35143),s=o(35238),l=o(82111),r=o(45802),a=o(42553),c=o(53084),d=o(46053),u=(o(81806),o(76460),o(85842)),p=o(68295);const h=new r.J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),v=new r.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let y=i=class extends a.oY{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{where:t,geometry:o,spatialRelationship:i,timeExtent:n,objectIds:s,units:l,distance:r}=this;return new p.A({geometry:(0,c.o8)(o),objectIds:(0,c.o8)(s),spatialRelationship:i,timeExtent:(0,c.o8)(n),where:t,units:l,distance:r,...e})}clone(){const{where:e,geometry:t,spatialRelationship:o,timeExtent:n,objectIds:s,units:l,distance:r}=this;return new i({geometry:(0,c.o8)(t),objectIds:(0,c.o8)(s),spatialRelationship:o,timeExtent:(0,c.o8)(n),where:e,units:l,distance:r})}};(0,n._)([(0,d.MZ)({type:String,json:{write:!0}})],y.prototype,"where",void 0),(0,n._)([(0,d.MZ)({types:s.yR,json:{write:!0}})],y.prototype,"geometry",void 0),(0,n._)([(0,d.MZ)({type:h.apiValues,json:{name:"spatialRel",read:{reader:h.read},write:{allowNull:!1,writer:h.write,overridePolicy(){return{enabled:null!=this.geometry}}}}})],y.prototype,"spatialRelationship",void 0),(0,n._)([(0,d.MZ)({type:Number,json:{write:{overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],y.prototype,"distance",void 0),(0,n._)([(0,d.MZ)({type:[Number],json:{write:!0}})],y.prototype,"objectIds",void 0),(0,n._)([(0,d.MZ)({type:v.apiValues,json:{read:v.read,write:{writer:v.write,overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],y.prototype,"units",void 0),(0,n._)([(0,d.MZ)({type:l.A,json:{write:!0}})],y.prototype,"timeExtent",void 0),y=i=(0,n._)([(0,u.$)("esri.layers.support.FeatureFilter")],y);const g=y},14185:(e,t,o)=>{o.d(t,{GF:()=>w,LZ:()=>m,N6:()=>f,_T:()=>b,eq:()=>M,zV:()=>k,zd:()=>S});o(35238);var i=o(18690),n=o(53084),s=o(31633),l=o(20664),r=o(9392),a=o(70961),c=o(63391),d=o(5262),u=o(80963),p=o(42151),h=o(13904),v=o(66388),y=o(23701),g=o(65215);function _(e,t){const o=new h.A({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(o.z=e[2]),o}function M(e,t){return new v.A({points:e,spatialReference:t})}function m(e,t,o){const i=new y.A({paths:e,spatialReference:t});return o&&(0,d._7)(i),i}function f(e,t,o){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const l=(0,n.o8)(e);l.forEach((e=>{const t=e[0],o=e[e.length-1];(0,i.aI)(t,o)&&1!==e.length||e.push(e[0])}));let r=new g.A({rings:l,spatialReference:t});return r.rings.forEach((e=>{(0,d.$3)(e)||e.reverse()})),o&&(0,d._7)(r),s&&r.isSelfIntersecting&&(0,u.fn)(t)&&(r=(0,c.simplify)(r)),r}function w(e,t,o){const n=t.mapToLocalMultiple(e),s=[],l={x:n[0].x,y:n[0].y},r=n[1].x,a=n[1].y,c=Math.round(r-l.x),d=Math.round(a-l.y),u=Math.max(Math.abs(c),Math.abs(d));if(o){const e={x:l.x+u,y:l.y+u},t={x:l.x-u,y:l.y-u};s.push((0,p.E5)(e.x,t.y),(0,p.E5)(t.x,t.y),(0,p.E5)(t.x,e.y),(0,p.E5)(e.x,e.y))}else{const e={x:c>0?l.x+u:l.x-u,y:d>0?l.y+u:l.y-u};s.push((0,p.E5)(l.x,l.y),(0,p.E5)(e.x,l.y),(0,p.E5)(e.x,e.y),(0,p.E5)(l.x,e.y))}return T(f([s.map((e=>t.localToMap(e))).filter(i.Ru)],t.spatialReference,t.doUnnormalization,!0),s,t)}function b(e,t,o){let n=t.mapToLocalMultiple(e);if(1===n.length){const e=48,t=n[0];n=[(0,p.E5)(t.x-e,t.y+e),(0,p.E5)(t.x+e,t.y-e),(0,p.E5)(t.x+e,t.y-e),(0,p.E5)(t.x-e,t.y+e)]}const s=[],l={x:n[0].x,y:n[0].y},r={x:n[1].x,y:n[1].y};if(o){const e=Math.round(r.x-l.x),t=Math.round(r.y-l.y);s.push((0,p.E5)(l.x-e,l.y-t),(0,p.E5)(r.x,l.y-t),(0,p.E5)(r.x,r.y),(0,p.E5)(l.x-e,r.y))}else s.push((0,p.E5)(l.x,l.y),(0,p.E5)(r.x,l.y),(0,p.E5)(r.x,r.y),(0,p.E5)(l.x,r.y));return T(f([s.map((e=>t.localToMap(e))).filter(i.Ru)],t.spatialReference,t.doUnnormalization,!0),s,t)}function T(e,t,o){const i=x(t[3],t[2],o),n=x(t[1],t[2],o),s=x(t[0],t[1],o),l=x(t[0],t[3],o);return{geometry:e,midpoints:null!=i&&null!=n&&null!=s&&null!=l?{top:i,right:n,bottom:s,left:l}:null}}function x(e,t,o){C[0]=e.x,C[1]=e.y,C[2]=0,Z[0]=t.x,Z[1]=t.y,Z[2]=0,(0,l.m)(C,C,Z,.5),O.x=C[0],O.y=Z[1],O.z=Z[2];const i=o.localToMap(O);return null!=i?_(i,o.spatialReference):null}const O=(0,p.E5)(0,0,0),C=(0,r.vt)(),Z=(0,r.vt)();function k(e,t,o,i){const n=t.mapToLocalMultiple(e);let l=null,r=null;if(o)l=n[0],r=n[1];else{const e=n[0],t=n[1],o=Math.round(t.x-e.x),i=Math.round(t.y-e.y),s=Math.max(Math.abs(o),Math.abs(i));l=(0,p.E5)(o>0?e.x+s/2:e.x-s/2,i>0?e.y+s/2:e.y-s/2),r=(0,p.E5)(Math.abs(o)>Math.abs(i)?l.x-s/2:l.x,Math.abs(o)>Math.abs(i)?l.y:l.y-s/2)}const h=t.localToMap(l),v=t.localToMap(r);if(null==h||null==v)return null;t.doUnnormalization&&(0,d.JM)([[h,v]],t.spatialReference);const y=_(h,t.spatialReference),g=_(v,t.spatialReference),M=(0,s.GA)(t.spatialReference);let m=0;if((0,u.fn)(t.spatialReference))m=M*(0,c.distance)(y,g,null);else{const e=l.x-r.x,t=l.y-r.y;m=M*Math.sqrt(e*e+t*t)*(i||1)}const w=new a.A({center:y,radius:m,radiusUnit:"meters",spatialReference:t.spatialReference});return{geometry:f(w.rings,w.spatialReference,!1),center:y,edge:g}}function S(e,t,o){const n=t.mapToLocalMultiple(e),s=n[0],l=n[1],r=Math.round(l.x-s.x),a=Math.round(l.y-s.y),c=(0,p.E5)(o?s.x:s.x+r/2,o?s.y:s.y+a/2),d=o?r:r/2,u=o?a:a/2,h=[],v=2*Math.PI/60;function y(e){const t=Math.cos(e),o=Math.sin(e);return(0,p.E5)(d*t+c.x,u*o+c.y)}for(let i=0;i<60;i++)h.push(y(i*v));h.push(h[0]);const{spatialReference:g,doUnnormalization:M}=t,m=f([h.map((e=>t.localToMap(e))).filter(i.Ru)],g,M,!1),w=t.localToMap(y(Math.PI/2)),b=t.localToMap(y(0)),T=t.localToMap(y(-Math.PI/2)),x=t.localToMap(y(Math.PI));return{geometry:m,midpoints:null!=w&&null!=b&&null!=T&&null!=x?{top:_(w,g),right:_(b,g),bottom:_(T,g),left:_(x,g)}:null}}},26519:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ce});var i=o(35143),n=(o(11265),o(54901)),s=o(30726),l=o(68134),r=o(46053),a=(o(81806),o(76460)),c=(o(47249),o(85842)),d=o(28506),u=o(25329),p=o(11337),h=o(91967),v=o(61750);let y=class extends h.A{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0}};(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"point",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"polyline",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"polygon",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"rectangle",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"circle",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"multipoint",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],y.prototype,"mesh",void 0),y=(0,i._)([(0,c.$)("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],y);let g=class extends h.A{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};(0,i._)([(0,r.MZ)({nonNullable:!0})],g.prototype,"rectangle-selection",void 0),(0,i._)([(0,r.MZ)({nonNullable:!0})],g.prototype,"lasso-selection",void 0),(0,i._)([(0,r.MZ)({nonNullable:!0})],g.prototype,"custom-selection",void 0),g=(0,i._)([(0,c.$)("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],g);let _=class extends h.A{constructor(e){super(e),this.createTools=new y,this.directionModePicker=!1,this.duplicateButton=!0,this.labelsToggle=!0,this.selectionTools=new g,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new v.A,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};(0,i._)([(0,r.MZ)({type:y,nonNullable:!0})],_.prototype,"createTools",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"directionModePicker",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"duplicateButton",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"labelsToggle",void 0),(0,i._)([(0,r.MZ)({type:g,nonNullable:!0})],_.prototype,"selectionTools",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"settingsMenu",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"snappingControls",void 0),(0,i._)([(0,r.MZ)({type:v.A,nonNullable:!0})],_.prototype,"snappingControlsElements",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"tooltipsToggle",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"undoRedoMenu",void 0),_=(0,i._)([(0,c.$)("esri.widgets.Sketch.VisibleElements")],_);const M=_;var m=o(77666),f=o(98108),w=o(15062),b=o(63241),T=o(21403),x=o(76099),O=o(63582),C=o(54761),Z=o(54099),k=o(31933),S=o(69120),R=o(90992),A=(o(35238),o(98773)),E=o(19276),I=o(50346),N=o(76931),B=o(5262),K=o(99809),D=o(35384),P=o(66812),G=o(14185),U=o(42151),V=o(56829),H=o(2413);let z=class extends h.A{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")")}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")")}get _fillStyle(){const e=this.fillColor;return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")")}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:H.qv};const t=(0,H.eV)((0,H.Jf)((0,H.vt)(H.qv),this.coordinates),2*this.strokeWidth);t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]+.5),t[3]=Math.ceil(t[3]+.5);for(const o of this.coordinates)e.push([Math.floor(o[0]-t[0])+.5,Math.floor(o[1]-t[1])+.5]);return e.reverse(),{coordinates:e,rect:t}}render(){const{coordinates:e,rect:t}=this._renderCoordinates,o=(0,H.VL)(t),i=(0,H.uJ)(t);return(0,C.K)("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:t[0]+"px",top:t[1]+"px",width:o+"px",height:i+"px",visibility:this.visible?"visible":"hidden"}},(0,C.K)("svg",{height:i,styles:{display:"block"},width:o},(0,C.K)("polygon",{fill:this._fillStyle,points:e.map((e=>{let[t,o]=e;return"".concat(t,",").concat(o)})).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),(0,C.K)("polygon",{fill:"transparent",points:e.map((e=>{let[t,o]=e;return"".concat(t,",").concat(o)})).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};(0,i._)([(0,r.MZ)()],z.prototype,"coordinates",void 0),(0,i._)([(0,r.MZ)()],z.prototype,"strokeDash",void 0),(0,i._)([(0,r.MZ)()],z.prototype,"strokeWidth",void 0),(0,i._)([(0,r.MZ)()],z.prototype,"strokeColor",void 0),(0,i._)([(0,r.MZ)()],z.prototype,"strokeDashColor",void 0),(0,i._)([(0,r.MZ)()],z.prototype,"fillColor",void 0),(0,i._)([(0,r.MZ)()],z.prototype,"visible",void 0),(0,i._)([(0,r.MZ)()],z.prototype,"isDecoration",void 0),(0,i._)([(0,r.MZ)({readOnly:!0})],z.prototype,"_strokeStyle",null),(0,i._)([(0,r.MZ)({readOnly:!0})],z.prototype,"_strokeBackgroundStyle",null),(0,i._)([(0,r.MZ)({readOnly:!0})],z.prototype,"_fillStyle",null),(0,i._)([(0,r.MZ)({readOnly:!0})],z.prototype,"_renderCoordinates",null),z=(0,i._)([(0,c.$)("esri.views.overlay.OutlineOverlayItem")],z);const L=z;let j=class extends(Z.A.EventedMixin(V.g)){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=e=>this.drawOperation.on(e,(t=>{this._updateVisuals(),this.emit(e,t)}));this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=(0,s.pR)(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){var e,t;return null!==(e=null===(t=this.drawOperation)||void 0===t?void 0:t.updating)&&void 0!==e&&e}get cursor(){return"point"===this.geometryType?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new D.O0({view:e,manipulators:this.manipulators,geometryType:F(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new P.Sl,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){const{drawOperation:e}=this;if(null===e||void 0===e||!e.geometryIncludingUncommittedVertices.length)return[];const{coordinateHelper:t}=e,o=e.committableVertex,i=e.committedVertices.slice();null!=o&&i.push(t.pointToArray(o));const n=i.length;switch(this.geometryType){case"circle":case"rectangle":{const t=new U.vz(K.zK,P.Sl.spatialReference),o="circle"===this.geometryType?G.zV:G.GF,d="circle"===this.geometryType?G.zd:G._T;if(1===n&&e.isCompleted){var s,l;const e=i[0];return null!==(s=null===(l=o([e,t.makeMapPoint(e[0]+q,e[1])],t,!0))||void 0===l?void 0:l.geometry.rings[0])&&void 0!==s?s:[]}if(2===n){var r,a,c;const e="rectangle"!==this.geometryType,n=this.centeredToggled!==e,s="rectangle"!==this.geometryType;return null!==(r=this.uniformSizeToggled!==s?null===(a=o(i,t,n))||void 0===a?void 0:a.geometry.rings[0]:null===(c=d(i,t,n))||void 0===c?void 0:c.geometry.rings[0])&&void 0!==r?r:[]}return[]}}return i}_updateVisuals(){if(!this._overlayItem){var e;const t=new L({strokeDash:[5],strokeDashColor:[255,255,255,255]});null!==(e=this.view.overlay)&&void 0!==e&&e.addItem(t),this.addHandles((0,n.hA)((()=>{var e;null!==(e=this.view.overlay)&&void 0!==e&&e.removeItem(t),null!==t&&void 0!==t&&t.destroy(),this._overlayItem=void 0}))),this._overlayItem=t}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function F(e){switch(e){case"polygon":case"point":return e;case"circle":case"rectangle":return"segment"}}(0,i._)([(0,r.MZ)({value:!1})],j.prototype,"centeredToggled",null),(0,i._)([(0,r.MZ)()],j.prototype,"drawOperation",void 0),(0,i._)([(0,r.MZ)({value:!0})],j.prototype,"enabled",null),(0,i._)([(0,r.MZ)({value:!1})],j.prototype,"uniformSizeToggled",null),(0,i._)([(0,r.MZ)({constructOnly:!0})],j.prototype,"geometryType",void 0),(0,i._)([(0,r.MZ)({constructOnly:!0})],j.prototype,"mode",void 0),(0,i._)([(0,r.MZ)({readOnly:!0})],j.prototype,"type",void 0),(0,i._)([(0,r.MZ)({readOnly:!0})],j.prototype,"updating",null),(0,i._)([(0,r.MZ)({constructOnly:!0,nonNullable:!0})],j.prototype,"view",void 0),(0,i._)([(0,r.MZ)()],j.prototype,"cursor",null),j=(0,i._)([(0,c.$)("esri.views.draw.DrawScreenTool")],j);const q=48;var $=o(82307),W=o(53430),Q=o(4955),J=o(55754);async function X(){return async function(){return o.e(24050).then(o.bind(o,1669))}().then((e=>{let{contains:t,intersects:o,overlaps:i,simplify:n}=e;return{contains:t,intersects:o,overlaps:i,simplify:n}}))}async function Y(e){const{currentSelection:t,selector:o,signal:i,sources:n,view:s}=e;if(null===n||void 0===n||!n.length)return{added:[],removed:[]};const{layers:l,layerViews:r,graphicsLayers:a}=function(e){const t=[],o=[],i=[];return e.forEach((e=>{var n,s;(0,k.yZ)(e)?t.push(e):((0,k.cM)(e)||(0,k.Qz)(e))&&null!==(n=e.layers)&&void 0!==n&&n.length?t.push(...e.layers.toArray()):(0,k.Rv)(e)&&null!==(s=e.sublayers)&&void 0!==s&&s.length?i.push(...e.sublayers.toArray()):(0,k.V0)(e)?i.push(e):(0,R.lO)(e)&&o.push(e)})),{layers:t,layerViews:o,graphicsLayers:i}}(n),c=(await(0,I.qr)(Promise.all([te(o,l,s,i),oe(o,r,s,i),ee(o,a,s)]),i)).flat();if(!t)return{added:c,removed:[]};const d=t.toArray(),u=c.filter((e=>!ne(d,e))),p=d.filter((e=>!ne(c,e)));return t.removeMany(p),t.addMany(u),{added:u,removed:p}}const ee=async(e,t,o)=>{var i;return async function(e){const{selector:t,candidates:o,view:i}=e;if(null===o||void 0===o||!o.length||!t)return[];const{spatialReference:n}=i,s=t,l=await X();return o.filter((e=>l.intersects(n,s,e.geometry)))}({candidates:null!==(i=t.flatMap((e=>e.graphics.toArray())))&&void 0!==i?i:[],selector:e,view:o})},te=async(e,t,o,i)=>{const n=await(0,I.QZ)(async function(e){const{layers:t,selector:o,signal:i,view:n}=e;return(0,I.qr)(Promise.allSettled(t.map((async e=>e.queryFeatures(function(e,t,o,i){const{outFields:n,geometry:s}=se(t,o,i);return e.outFields=n,e.geometry=s,e.returnGeometry=!0,e.outSpatialReference=i.spatialReference,e}(e.createQuery(),o,e,n),{signal:i}).then((e=>{let{features:t}=e;return t}))))),i)}({selector:e,signal:i,layers:t,view:o}));return n?ie(n):[]},oe=async(e,t,o,i)=>{const n=await(0,I.QZ)(async function(e){const{layerViews:t,selector:o,signal:i,view:n}=e;return(0,I.qr)(Promise.allSettled(t.map((async e=>{const t=e.createQuery(),{geometry:s}=se(o,e.layer,n);return t.outFields=["*"],t.geometry=s,t.returnGeometry=!0,t.outSpatialReference=n.spatialReference,e.queryFeatures(t,{signal:i}).then((e=>{let{features:t}=e;return t}))}))),i)}({selector:e,signal:i,layerViews:t,view:o}));return n?ie(n):[]};function ie(e){const t=[];for(let o=0;o<e.length;o++){const i=e[o];"fulfilled"===i.status&&t.push(...i.value)}return t}function ne(e,t){if(e.includes(t))return!0;const o=t.getObjectId(),i=null!=o,{layer:n,uid:s}=t;return i?e.some((e=>{if(n===e.layer)return o===e.getObjectId()})):e.some((e=>{if(n===e.layer)return s===e.uid}))}function se(e,t,o){const i="displayField"in t?t.displayField:null,n=(0,W.mB)({displayField:i,fields:t.fields}),s=[t.objectIdField];null!=n&&t.fieldsIndex.has(n)&&s.push(n);const l="renderer"in t?(0,Q.o)({renderer:t.renderer}):0;return{geometry:"point"===e.type?(0,J.V)(e,l,o):e,outFields:s}}var le=o(13904),re=o(65215);let ae=class extends Z.A.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new E.A,this.sources=null,this._process=(0,I.sg)((async(e,t)=>{const{callback:o,selector:i,completed:n}=e,s=(0,A.UT)((async e=>{const{sources:t,selection:s,view:l}=this;if((null!==t&&void 0!==t&&t.length||null!==l&&void 0!==l&&l.selectionManager.sources.length)&&l){if(i&&null!=t){var r;const o=await Y({currentSelection:s,selector:i,signal:e,sources:t,view:l});n&&(null===(r=l.selectionManager)||void 0===r||r.updateSelection({current:s.toArray(),...o}))}o&&o()}else s.removeAll()}));return(0,I.u7)(t,(()=>s.abort())),this._processTask=s,s.promise}),100)}initialize(){this._setup()}cancel(){var e;this.removeAllHandles(),null===(e=this._processTask)||void 0===e||e.abort()}async _setup(){var e,t;const{view:o}=this;if(await o.whenReady(),this.destroyed)return;const i=this.options,s=null!==(e=null===i||void 0===i?void 0:i.createTool)&&void 0!==e?e:"rectangle",l=null!==(t=null===i||void 0===i?void 0:i.mode)&&void 0!==t?t:"polygon"===s?"click":"hybrid",r=Symbol();this._tool=new j({view:o,mode:l,geometryType:s}),null!==i&&void 0!==i&&i.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],(()=>(0,I.QZ)(this._process({selector:this._selectionArea})))),r),this.addHandles([o.on("key-down",(e=>{if(!e.repeat)switch(e.key){case $.NE.constraint:this._tool.uniformSizeToggled=!0,e.stopPropagation();break;case $.NE.center:this._tool.centeredToggled=!0,e.stopPropagation()}})),o.on("key-up",(e=>{switch(e.key){case $.NE.constraint:this._tool.uniformSizeToggled=!1,e.stopPropagation();break;case $.NE.center:this._tool.centeredToggled=!1,e.stopPropagation()}})),this._tool.on("complete",(async e=>{this.removeHandles(r);const t=()=>{this.removeAllHandles(),this.emit("complete",{aborted:e.aborted,selection:this.selection.toArray()})};e.aborted?(this.cancel(),this.selection.removeAll(),t()):await this._process({selector:this._selectionArea,callback:t,completed:!0})}))],r),this.addHandles((0,n.hA)((()=>o.tools.remove(this._tool)))),o.addAndActivateTool(this._tool)}get _selectionArea(){const e=(0,N.tc)(),t=this._tool.coordinates,o=this.view.spatialReference,i=t=>{e.x=t[0],e.y=t[1];const{x:o,y:i}=this.view.toMap(e);return[o,i]};if(1===t.length){const[e,n]=i(t[0]);return new le.A({x:e,y:n,spatialReference:o})}const n=this._tool.coordinates.map(i);if(0!==n.length)return(0,B.$3)(n)||n.reverse(),new re.A({spatialReference:o,rings:[n]})}};(0,i._)([(0,r.MZ)()],ae.prototype,"options",void 0),(0,i._)([(0,r.MZ)({readOnly:!0})],ae.prototype,"selection",void 0),(0,i._)([(0,r.MZ)()],ae.prototype,"sources",void 0),(0,i._)([(0,r.MZ)({constructOnly:!0})],ae.prototype,"view",void 0),ae=(0,i._)([(0,c.$)("esri.widgets.support.Selector2D.SelectionOperation2D")],ae);const ce=ae;let de=class extends Z.A.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.sources=null}initialize(){this.addHandles([(0,l.watch)((()=>this._sources),(e=>{this.activeOperation&&(this.activeOperation.sources=e)}))])}destroy(){this._operationHandlesGroup=(0,s.xt)(this._operationHandlesGroup)}get _sources(){const{sources:e,view:t}=this;return t&&null!==e&&void 0!==e&&e.length?e.flatMap((e=>{if((0,R.lO)(e))return e;if((0,k.cM)(e)||(0,k.Qz)(e)){const o=e.layers||[],i=o.map((e=>{const o=(0,S.i)(t,e)||void 0;return(0,R.lO)(o)?o:e}));return i.length?i.toArray():o.length?o.toArray():e}const o=(0,S.i)(t,e)||void 0;return(0,R.lO)(o)?o:e})):[]}get layers(){return(0,b.Lx)(a.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){(0,b.Lx)(a.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){const{_sources:e,view:t}=this,o=!(null!==e&&void 0!==e&&e.length)&&!(null!==t&&void 0!==t&&t.selectionManager.sources.length);return this.activeOperation?"active":null!==t&&void 0!==t&&t.ready&&!o?"ready":"disabled"}cancel(){var e;"active"===this.state&&(null!==(e=this.activeOperation)&&void 0!==e&&e.cancel(),this._set("activeOperation",null))}activate(e){const{_sources:t,state:o,view:i}=this,s=!(null!==t&&void 0!==t&&t.length)&&!(null!==i&&void 0!==i&&i.selectionManager.sources.length);if("disabled"===o||s||!this.view)return;"active"===o&&this.cancel();const l=new ce({view:this.view,sources:t,options:e});return this._operationHandlesGroup=(0,n.vE)([l.selection.on("change",(e=>this.emit("selection-change",e))),l.once("complete",(e=>this._onOperationComplete(e)))]),this._set("activeOperation",l),l}_onOperationComplete(e){this._operationHandlesGroup=(0,s.xt)(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};(0,i._)([(0,r.MZ)()],de.prototype,"_sources",null),(0,i._)([(0,r.MZ)({readOnly:!0})],de.prototype,"activeOperation",void 0),(0,i._)([(0,r.MZ)()],de.prototype,"layers",null),(0,i._)([(0,r.MZ)()],de.prototype,"sources",void 0),(0,i._)([(0,r.MZ)({readOnly:!0})],de.prototype,"state",null),(0,i._)([(0,r.MZ)()],de.prototype,"view",void 0),de=(0,i._)([(0,c.$)("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],de);const ue=de,pe={lassoTool:!0,rectangleTool:!0},he={createTool:"polygon",mode:"freehand"},ve={createTool:"rectangle"},ye="esri-selection-toolbar",ge={base:ye,widgetIcon:w.T.vertexGps,container:"".concat(ye,"__container"),toolButton:"".concat(ye,"__tool-button")};let _e=class extends u.A{constructor(e,t){super(e,t),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.messages=null,this.toolConfigs=[],this.viewModel=new ue,this.visibleElements={...pe},this._viewModelHandlesGroup=(0,n.vE)([this.viewModel.on("complete",(e=>{this._set("activeToolInfo",null),this.emit("complete",e)}))])}destroy(){this._viewModelHandlesGroup=(0,s.xt)(this._viewModelHandlesGroup)}loadDependencies(){return(0,m.W)({action:()=>Promise.all([o.e(39879),o.e(62785),o.e(48897),o.e(37918)]).then(o.bind(o,92111)),icon:()=>Promise.all([o.e(39879),o.e(95012)]).then(o.bind(o,95012))})}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get layers(){return(0,b.Lx)(a.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){(0,b.Lx)(a.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...pe,...e}}get visibleToolCount(){var e;const{view:t,toolConfigs:o,visibleElements:i}=this;return(null!==(e=null===o||void 0===o?void 0:o.length)&&void 0!==e?e:0)+("2d"===(null===t||void 0===t?void 0:t.type)?(i.lassoTool?1:0)+(i.rectangleTool?1:0):0)}activate(e){if(this.cancel(),"disabled"!==this.viewModel.state)switch(e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return(0,C.K)("div",{"aria-label":this.label,class:this.classes(ge.base,f.D.widget)},(0,C.K)("div",{class:ge.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){var e;if("2d"===(null===(e=this.view)||void 0===e?void 0:e.type))return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){var e;if(null!==(e=this.toolConfigs)&&void 0!==e&&e.length)return this.toolConfigs.map((e=>{var t;return(0,C.K)("calcite-action",{active:(null===(t=this.activeToolInfo)||void 0===t?void 0:t.toolName)===e.toolName,bind:this,class:ge.toolButton,disabled:"disabled"===this.viewModel.state,label:e.toolName,onclick:()=>this._onCustomToolClick(e.toolName),scale:"s",text:e.toolName,title:e.toolName},(0,C.K)("calcite-icon",{icon:e.icon||"selection",scale:"s"}))}))}_renderLassoTool(){const{activeToolInfo:e,messages:t,visibleElements:o}=this;if(o.lassoTool)return(0,C.K)("calcite-action",{active:"lasso"===(null===e||void 0===e?void 0:e.toolName),bind:this,disabled:"disabled"===this.viewModel.state,label:t.selectByLasso,onclick:this._onLassoToolClick,scale:"s",text:t.selectByLasso,title:t.selectByLasso},(0,C.K)("calcite-icon",{icon:"lasso-select",scale:"s"}))}_renderRectangleTool(){const{activeToolInfo:e,messages:t,visibleElements:o}=this;if(o.rectangleTool)return(0,C.K)("calcite-action",{active:"rectangle"===(null===e||void 0===e?void 0:e.toolName),bind:this,disabled:"disabled"===this.viewModel.state,label:t.selectByRectangle,onclick:this._onRectangleToolClick,scale:"s",text:t.selectByRectangle,title:t.selectByRectangle},(0,C.K)("calcite-icon",{icon:"cursor-marquee",scale:"s"}))}_onCustomToolClick(e){this._toggleTool(e)}_onLassoToolClick(){this._toggleTool("lasso")}_onRectangleToolClick(){this._toggleTool("rectangle")}_activateTool(e){const t=this._getToolOptions(e);if(!t)return;const o=this.viewModel.activate(t);o&&this._set("activeToolInfo",{toolName:e,operation:o})}_toggleTool(e){if(this.activeToolInfo){const t=this.activeToolInfo.toolName;if(this.cancel(),t===e)return}this._activateTool(e)}_getToolOptions(e){return"lasso"===e?he:"rectangle"===e?ve:this.toolConfigs.find((t=>t.toolName===e))}};(0,i._)([(0,r.MZ)({readOnly:!0})],_e.prototype,"activeToolInfo",void 0),(0,i._)([(0,r.MZ)()],_e.prototype,"label",null),(0,i._)([(0,r.MZ)()],_e.prototype,"layers",null),(0,i._)([(0,r.MZ)(),(0,O.G)("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],_e.prototype,"messages",void 0),(0,i._)([(0,r.MZ)()],_e.prototype,"sources",null),(0,i._)([(0,r.MZ)()],_e.prototype,"toolConfigs",void 0),(0,i._)([(0,r.MZ)()],_e.prototype,"view",null),(0,i._)([(0,r.MZ)()],_e.prototype,"viewModel",void 0),(0,i._)([(0,r.MZ)()],_e.prototype,"visibleElements",void 0),(0,i._)([(0,T.w)("visibleElements")],_e.prototype,"castVisibleElements",null),(0,i._)([(0,r.MZ)()],_e.prototype,"visibleToolCount",null),_e=(0,i._)([(0,c.$)("esri.widgets.support.SelectionToolbar")],_e);const Me=_e;var me=o(78431),fe=o(76137),we=o(12254),be=o(39348);const Te="esri-sketch",xe={base:Te,widgetIcon:w.T.edit,verticalLayout:"".concat(Te,"--vertical"),panel:"".concat(Te,"__panel"),infoPanel:"".concat(Te,"__info-panel"),section:"".concat(Te,"__section"),toolSection:"".concat(Te,"__tool-section"),infoSection:"".concat(Te,"__info-section"),infoCountSection:"".concat(Te,"__info-count-section"),menuContainer:"".concat(Te,"__menu-container"),menuHeader:"".concat(Te,"__menu-header"),menuTitle:"".concat(Te,"__menu-title"),featureCountBadge:"".concat(Te,"__feature-count-badge"),featureCountText:"".concat(Te,"__feature-count-text"),featureCountNumber:"".concat(Te,"__feature-count-number"),actionToggle:"".concat(Te,"__action-toggle"),actionToggleOn:"".concat(Te,"__action-toggle--on"),actionTitle:"".concat(Te,"__item-action-title"),actionIcon:"".concat(Te,"__item-action-icon")};let Oe=class extends u.A{constructor(e,t){super(e,t),this._activeCreateOptions=null,this._menuOpen=!1,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.creationMode="continuous",this.iconClass=xe.widgetIcon,this.icon=null,this.layout="horizontal",this.messages=null,this.messagesCommon=null,this.visibleElements=new M,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=(null===e||void 0===e?void 0:e.viewModel)||new p.A}initialize(){const{layer:e,view:t}=this,o=new Me({view:"2d"===(null===t||void 0===t?void 0:t.type)?t:null,sources:e?[e]:null});this.addHandles([(0,l.watch)((()=>this.viewModel),(e=>{this._viewModelHandlesGroup=(0,s.xt)(this._viewModelHandlesGroup),e&&(this._viewModelHandlesGroup=(0,n.vE)([e.on("create",(e=>{this.scheduleRender(),this._onCreateOperation(e)})),e.on("update",(()=>this.scheduleRender())),e.on("delete",(e=>this.emit("delete",e))),e.on("undo",(()=>this.scheduleRender())),e.on("redo",(()=>this.scheduleRender())),(0,l.watch)((()=>e.layer),(e=>{this._selectionToolbar&&(this._selectionToolbar.sources=e?[e]:null)})),(0,l.watch)((()=>e.view),(e=>{this._selectionToolbar&&(this._selectionToolbar.view="2d"===(null===e||void 0===e?void 0:e.type)?e:null)})),(0,l.watch)((()=>e.state),(()=>this.notifyChange("state")))]))}),l.syncAndInitial),(0,l.when)((()=>o.activeToolInfo),(()=>this.viewModel.cancel())),o.on("complete",(e=>this._onSelectionOperationComplete(e))),(0,l.watch)((()=>{const{selectionTools:e}=this.visibleElements;return{lassoTool:!(null===e||void 0===e||!e["lasso-selection"]),rectangleTool:!(null===e||void 0===e||!e["rectangle-selection"])}}),(e=>{Object.assign(o.visibleElements,e)}),l.syncAndInitial)]),this._selectionToolbar=o}loadDependencies(){return(0,m.W)({action:()=>Promise.all([o.e(39879),o.e(62785),o.e(48897),o.e(37918)]).then(o.bind(o,92111)),icon:()=>Promise.all([o.e(39879),o.e(95012)]).then(o.bind(o,95012))})}destroy(){var e;null!==(e=this._selectionToolbar)&&void 0!==e&&e.destroy(),this._viewModelHandlesGroup=(0,s.xt)(this._viewModelHandlesGroup)}get activeTool(){var e;const t=null===(e=this._selectionToolbar)||void 0===e?void 0:e.activeToolInfo;if(t)switch(t.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}return this.viewModel.activeTool}get createGraphic(){return this.viewModel.createGraphic}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){var e;return null!==(e=this._selectionToolbar)&&void 0!==e&&e.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){const t=this._get("viewModel");e!==t&&(t&&(0,s.pR)(t),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){const{availableCreateTools:e,visibleElements:t}=this;return null===e||void 0===e?void 0:e.filter((e=>{var o;return!(null===(o=t.createTools)||void 0===o||!o[e])}))}create(e,t){this._activeCreateOptions=t||null,this.viewModel.create(e,t)}update(e,t){return this.viewModel.update(e,t)}complete(){this.viewModel.complete()}cancel(){var e;null!==(e=this._selectionToolbar)&&void 0!==e&&e.cancel(),this.viewModel.cancel()}undo(){var e;this.viewModel.undo(),null===(e=this.view)||void 0===e||e.focus()}redo(){var e;this.viewModel.redo(),null===(e=this.view)||void 0===e||e.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}render(){const{label:e,layout:t,viewModel:{state:o}}=this;return(0,C.K)("div",{"aria-label":e,class:this.classes(xe.base,f.D.widget,{[f.D.disabled]:"disabled"===o,[xe.verticalLayout]:"vertical"===t})},(0,C.K)("div",{class:xe.panel,role:"toolbar"},this._renderTopPanelContents()),(0,C.K)("div",{class:this.classes(xe.panel,xe.infoPanel)},this._renderInfoPanelContents()))}_renderTopPanelContents(){var e;const t=this.classes(xe.section,xe.toolSection),{_effectiveAvailableCreateTools:o,visibleElements:i,viewModel:n}=this;return[n.updateOnGraphicClick||null!==(e=this._selectionToolbar)&&void 0!==e&&e.visibleToolCount?(0,C.K)("div",{class:t,key:"selection-button-container",role:"menu"},this._renderDefaultSelectionButton(),this._renderSelectionToolbar()):null,null!==o&&void 0!==o&&o.length?(0,C.K)("div",{class:t,role:"menu"},this._renderDrawActions()):null,i.undoRedoMenu?(0,C.K)("div",{class:t,key:"undo-redo-menu-button-container",role:"menu"},this._renderUndoRedoMenuButtons()):null,i.settingsMenu?(0,C.K)("div",{class:xe.section,key:"settings-menu-button-container"},this._renderSettingsMenuButton()):null]}_renderInfoPanelContents(){return this._menuOpen?this._renderSettingsMenu():this.updateGraphics.length?[(0,C.K)("div",{class:this.classes(xe.section,xe.infoSection,xe.infoCountSection),key:"feature-count-container"},this._renderFeatureCount()),(0,C.K)("div",{class:this.classes(xe.section,xe.infoSection),key:"delete-button-container"},this._renderDuplicateButton(),this._renderDeleteButton())]:void 0}_renderSettingsMenu(){const{messagesCommon:e,snappingOptions:t,view:o,viewModel:i,visibleElements:n}=this,s={directionModePicker:n.directionModePicker,labelsToggle:n.labelsToggle,tooltipsToggle:n.tooltipsToggle};return(0,C.K)("div",{class:xe.menuContainer,"data-testid":"menu",key:"settings-menu-container",role:"menu"},(0,C.K)("header",{class:xe.menuHeader,key:"settings-menu-header"},(0,C.K)("span",{class:xe.menuTitle},e.settings)),(0,x.Mb)(s)?(0,C.K)(me.A,{sketchOptions:i.sketchOptions,viewType:null===o||void 0===o?void 0:o.type,visibleElements:s}):void 0,n.snappingControls&&o&&t?(0,C.K)(fe.A,{snappingOptions:t,view:o,visibleElements:n.snappingControlsElements}):void 0)}_renderFeatureCount(){const{layout:e,messages:t,updateGraphics:{length:o}}=this,i=(0,be.V)(t.selectedCount,{count:o});return(0,C.K)("div",{"aria-label":i,class:xe.featureCountBadge},(0,C.K)("span",{class:xe.featureCountNumber},"vertical"===e?o:i))}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return;const e=this.messages,t=this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature;return(0,C.K)("calcite-action",{bind:this,onclick:this._onDuplicateSelect,scale:"s",text:t,title:t},(0,C.K)("calcite-icon",{icon:"copy",scale:"s"}))}_renderDeleteButton(){const e=this.messages,t=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return(0,C.K)("calcite-action",{bind:this,onclick:this.delete,scale:"s",text:t,title:t},(0,C.K)("calcite-icon",{icon:"trash",scale:"s"}))}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;const{messages:{selectFeature:e},state:t}=this;return(0,C.K)("calcite-action",{active:"ready"===t,bind:this,disabled:"disabled"===t,onclick:this._activateDefaultSelectTool,scale:"s",text:e,title:e},(0,C.K)("calcite-icon",{icon:"cursor",scale:"s"}))}_renderSelectionToolbar(){var e;if("2d"===(null===(e=this.view)||void 0===e?void 0:e.type)&&this._selectionToolbar)return this._selectionToolbar.render()}_renderDrawActions(){var e;const{messages:t}=this;return null===(e=this._effectiveAvailableCreateTools)||void 0===e?void 0:e.map((e=>{switch(e){case"point":return this._renderAction(e,t.drawPoint,"pin");case"polyline":return this._renderAction(e,t.drawPolyline,"line");case"polygon":return this._renderAction(e,t.drawPolygon,"polygon");case"rectangle":return this._renderAction(e,t.drawRectangle,"rectangle");case"circle":return this._renderAction(e,t.drawCircle,"circle");default:return}}))}_renderAction(e,t,o){return(0,C.K)("calcite-action",{active:this.activeTool===e,bind:this,disabled:"disabled"===this.state,onclick:()=>this._activateCreateTool(e),scale:"s",text:t,title:t},(0,C.K)("calcite-icon",{icon:o,scale:"s"}))}_renderUndoRedoMenuButtons(){return[this._renderUndoButton(),this._renderRedoButton()]}_renderUndoButton(){const e=this.messages.undo;return(0,C.K)("calcite-action",{bind:this,disabled:!this.viewModel.canUndo()||"disabled"===this.state,onclick:this.undo,scale:"s",text:e,title:e},(0,C.K)("calcite-icon",{icon:(0,x.V8)(this.container)?"redo":"undo",scale:"s"}))}_renderRedoButton(){const e=this.messages.redo;return(0,C.K)("calcite-action",{bind:this,disabled:!this.viewModel.canRedo()||"disabled"===this.state,onclick:this.redo,scale:"s",text:e,title:e},(0,C.K)("calcite-icon",{icon:(0,x.V8)(this.container)?"undo":"redo",scale:"s"}))}_renderSettingsMenuButton(){const e=this.messagesCommon.settings;return(0,C.K)("calcite-action",{active:this._menuOpen,bind:this,"data-testid":"settings-menu-action",disabled:"disabled"===this.state,onclick:this._toggleMenu,scale:"s",text:e,title:e},(0,C.K)("calcite-icon",{icon:"gear",scale:"s"}))}_activateCreateTool(e){var t;this.activeTool!==e?(null!==(t=this._selectionToolbar)&&void 0!==t&&t.cancel(),this.create(e)):this.cancel()}_onCreateOperation(e){if("complete"!==e.state)return;const{creationMode:t}=this,{type:o}=e;if("create"===o){const{tool:o,graphic:i}=e,n=this._activeCreateOptions;this._activeCreateOptions=null,"continuous"===t?this.create(o,n):"update"===t&&this.update([i])}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_onDuplicateSelect(){const e=this.duplicate(),t=this.viewModel.activeTool;"transform"!==t&&"reshape"!==t||this.update(e,{tool:t})}_onSelectionOperationComplete(e){const{viewModel:{defaultUpdateOptions:t}}=this,{selection:o}=e;if(!e.aborted&&o.length){const e=t.tool,i=o.length>1&&"reshape"===e?"transform":e;this.update(o,{...t,tool:i})}this.notifyChange("state")}_activateDefaultSelectTool(){var e;this.cancel(),null===(e=this.view)||void 0===e||e.focus()}};(0,i._)([(0,r.MZ)()],Oe.prototype,"activeTool",null),(0,i._)([(0,r.MZ)({cast:e=>{if(null===e||void 0===e||!e.length)return null;const t=new Set(["point","polyline","polygon","rectangle","circle"]);return e.filter((e=>t.has(e)))}})],Oe.prototype,"availableCreateTools",void 0),(0,i._)([(0,r.MZ)({readOnly:!0})],Oe.prototype,"createGraphic",null),(0,i._)([(0,r.MZ)()],Oe.prototype,"creationMode",void 0),(0,i._)([(0,r.MZ)()],Oe.prototype,"defaultCreateOptions",null),(0,i._)([(0,r.MZ)()],Oe.prototype,"defaultUpdateOptions",null),(0,i._)([(0,r.MZ)()],Oe.prototype,"iconClass",void 0),(0,i._)([(0,r.MZ)()],Oe.prototype,"icon",void 0),(0,i._)([(0,r.MZ)()],Oe.prototype,"label",null),(0,i._)([(0,r.MZ)()],Oe.prototype,"labelOptions",null),(0,i._)([(0,r.MZ)()],Oe.prototype,"layer",null),(0,i._)([(0,r.MZ)({type:["horizontal","vertical"]})],Oe.prototype,"layout",void 0),(0,i._)([(0,r.MZ)(),(0,O.G)("esri/widgets/Sketch/t9n/Sketch")],Oe.prototype,"messages",void 0),(0,i._)([(0,r.MZ)(),(0,O.G)("esri/t9n/common")],Oe.prototype,"messagesCommon",void 0),(0,i._)([(0,r.MZ)()],Oe.prototype,"snappingOptions",null),(0,i._)([(0,r.MZ)()],Oe.prototype,"state",null),(0,i._)([(0,r.MZ)()],Oe.prototype,"tooltipOptions",null),(0,i._)([(0,r.MZ)({readOnly:!0})],Oe.prototype,"updateGraphics",null),(0,i._)([(0,r.MZ)({type:d.A,nonNullable:!0})],Oe.prototype,"valueOptions",null),(0,i._)([(0,r.MZ)()],Oe.prototype,"view",null),(0,i._)([(0,r.MZ)(),(0,we.U)(["create","update","undo","redo"])],Oe.prototype,"viewModel",null),(0,i._)([(0,r.MZ)({type:M,nonNullable:!0})],Oe.prototype,"visibleElements",void 0),(0,i._)([(0,r.MZ)()],Oe.prototype,"_effectiveAvailableCreateTools",null),Oe=(0,i._)([(0,c.$)("esri.widgets.Sketch")],Oe);const Ce=Oe}}]);
//# sourceMappingURL=84538.c089e2aa.chunk.js.map