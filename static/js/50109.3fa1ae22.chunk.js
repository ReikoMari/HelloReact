"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[50109],{53596:(e,t,r)=>{r.d(t,{DS:()=>o,J7:()=>i,w$:()=>n});const i="updating";function n(e){return"updating"===e?null:e}function o(e){return"updating"===e}},10252:(e,t,r)=>{r.d(t,{A:()=>g});var i,n=r(35143),o=r(50076),s=r(42553),l=r(48611),a=r(46053),u=(r(81806),r(76460),r(47249),r(85842)),d=r(44081),c=r(8203);const p={read:{reader:d.LF},write:{writer:d.M9,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}},f={read:{reader:d.LF},write:{writer:d.M9,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}},h={name:"showExcludedLabels",default:!0};let y=i=class extends s.oY{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const r=super.write(e,t);if(null!==t&&void 0!==t&&t.origin){var i;if(r.filter){var n;const e=Object.keys(r.filter);if(e.length>1||"where"!==e[0])return null!==(n=t.messages)&&void 0!==n&&n.push(new o.A("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return null!==(i=t.messages)&&void 0!==i&&i.push(new o.A("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new i({filter:null!=this.filter?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};(0,n._)([(0,a.MZ)({type:c.A,json:{write:{allowNull:!0,writer(e,t,r,i){const n=null===e||void 0===e?void 0:e.write({},i);n&&0!==Object.keys(n).length?(0,l.sM)(r,n,t):(0,l.sM)(r,null,t)}}}})],y.prototype,"filter",void 0),(0,n._)([(0,a.MZ)({json:{write:!0,origins:{"web-map":p,"portal-item":p}}})],y.prototype,"includedEffect",void 0),(0,n._)([(0,a.MZ)({json:{write:!0,origins:{"web-map":f,"portal-item":f}}})],y.prototype,"excludedEffect",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":h,"portal-item":h}}})],y.prototype,"excludedLabelsVisible",void 0),y=i=(0,n._)([(0,u.$)("esri.layers.support.FeatureEffect")],y);const g=y},8203:(e,t,r)=>{r.d(t,{A:()=>g});var i,n=r(35143),o=r(35238),s=r(82111),l=r(45802),a=r(42553),u=r(53084),d=r(46053),c=(r(81806),r(76460),r(85842)),p=r(68295);const f=new l.J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),h=new l.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let y=i=class extends a.oY{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{where:t,geometry:r,spatialRelationship:i,timeExtent:n,objectIds:o,units:s,distance:l}=this;return new p.A({geometry:(0,u.o8)(r),objectIds:(0,u.o8)(o),spatialRelationship:i,timeExtent:(0,u.o8)(n),where:t,units:s,distance:l,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:n,objectIds:o,units:s,distance:l}=this;return new i({geometry:(0,u.o8)(t),objectIds:(0,u.o8)(o),spatialRelationship:r,timeExtent:(0,u.o8)(n),where:e,units:s,distance:l})}};(0,n._)([(0,d.MZ)({type:String,json:{write:!0}})],y.prototype,"where",void 0),(0,n._)([(0,d.MZ)({types:o.yR,json:{write:!0}})],y.prototype,"geometry",void 0),(0,n._)([(0,d.MZ)({type:f.apiValues,json:{name:"spatialRel",read:{reader:f.read},write:{allowNull:!1,writer:f.write,overridePolicy(){return{enabled:null!=this.geometry}}}}})],y.prototype,"spatialRelationship",void 0),(0,n._)([(0,d.MZ)({type:Number,json:{write:{overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],y.prototype,"distance",void 0),(0,n._)([(0,d.MZ)({type:[Number],json:{write:!0}})],y.prototype,"objectIds",void 0),(0,n._)([(0,d.MZ)({type:h.apiValues,json:{read:h.read,write:{writer:h.write,overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],y.prototype,"units",void 0),(0,n._)([(0,d.MZ)({type:s.A,json:{write:!0}})],y.prototype,"timeExtent",void 0),y=i=(0,n._)([(0,c.$)("esri.layers.support.FeatureFilter")],y);const g=y},74438:(e,t,r)=>{r.d(t,{SE:()=>n,qM:()=>o});var i=r(68295);async function n(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=s(e));const i=o(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let l=null;for(;;){const o=await e.source.queryFeaturesJSON(t,r);if(null==l?l=o:l.features=l.features.concat(o.features),l.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;t.start+=i}return l}function o(e){return s(e)*function(e){return e.capabilities.query.maxRecordCount||2e3}(e)}function s(e){return e.capabilities.query.supportsMaxRecordCountFactor?i.A.MAX_MAX_RECORD_COUNT_FACTOR:1}},74294:(e,t,r)=>{r.d(t,{Eu:()=>p,bh:()=>u,r0:()=>f,ry:()=>h});var i=r(98773),n=r(53084),o=r(74438);const s={setAttribute(){},rollback(){},commit(){}};var l,a;function u(e,t){const r=t.attributes[e.objectIdField];if(null==r)return s;const i=e.sessions.get(r);if(i)return i;const o=(0,n.o8)(t.attributes),a=new Set,u=e.i3sOverrides.createInteractiveEditSession(r),d=new Map,c=(e,t)=>{const i=d.get(e);if(null==i){const i=t.indexOf(r);return d.set(e,i),i}return i};let p=l.EDITING;const f={setAttribute(r,i){if(p!==l.EDITING)return;const n=e.fieldsIndex.get(r);if(!n)return;const s=e.attributeStorageInfo.findIndex((e=>e.name===n.name));if(s<0)return;if(!(r in o))throw new Error('Attribute "'.concat(r,'" is not an attribute of the edited feature.'));u.setAttribute(s,i);const d=e.attributeStorageInfo[s];let f=!1;a.add(r),e.forEachNode(((r,n)=>{const o=c(r,n);if(-1===o)return;const s=e.getAttributeData(r.index);if(s){const n=s[d.name];n&&(n[o]=i,e.setAttributeData(r.index,s,t),f=!0)}})),f&&e.clearMemCache()},rollback(){if(p===l.EDITING){for(const e of a)this.setAttribute(e,o[e]);u.remove(),p=l.ROLLED_BACK,e.sessions.delete(r)}},commit(){p===l.EDITING&&(u.remove(),p=l.COMMITTED,e.sessions.delete(r))}};return e.sessions.set(r,f),f}function d(e,t,r){var i;const{gidToFeatureInfo:n,oidToFeatureInfo:o,fieldsIndex:s,objectIdField:l,globalIdField:a,featureOrIdentifierList:u}=r;if(!r.featuresResolved&&null!=u){for(const e of u){var d;const t={feature:null,oid:-1,gid:null};if("attributes"in e){t.feature=e;const r=e.attributes;if(null!=r)for(const e in r){var c;if(-1!==t.oid&&null!=t.gid)break;const i=s.normalizeFieldName(e);i===l&&(t.oid=null!==(c=r[e])&&void 0!==c?c:-1),i===a&&(t.gid=r[e])}}else t.oid=null!==(d=e.objectId)&&void 0!==d?d:-1,t.gid=e.globalId;null!=t.gid&&n.set(t.gid,t),-1!==t.oid&&o.set(t.oid,t)}r.featuresResolved=!0}return null!==(i=-1!==e?o.get(e):null)&&void 0!==i?i:null!=t?n.get(t):null}function c(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const s=[],l={gidToFeatureInfo:new Map,oidToFeatureInfo:new Map,featuresResolved:null==r,fieldsIndex:e.fieldsIndex,objectIdField:e.objectIdField,globalIdField:e.globalIdField,featureOrIdentifierList:r};for(const p of t){var a,u,c;if(null!=p.error)continue;const e=null!==(a=p.objectId)&&void 0!==a?a:-1,t=p.globalId,r=null!==(u=-1===e||o?d(e,t,l):null)&&void 0!==u?u:{feature:null,oid:e,gid:t},f={oid:-1===e?r.oid:e,gid:null!==t&&void 0!==t?t:r.gid,feature:r.feature,result:p};if(s.push(f),-1===f.oid&&null!=f.gid&&null!=n&&(f.oid=null!==(c=n.get(f.gid))&&void 0!==c?c:-1),-1===f.oid&&null!=f.gid){let e=i.get(f.gid);null==e&&(e=[],i.set(f.gid,e)),e.push(f)}}return s}async function p(e,t){var r,n,s;const l=new Map,a=c(e,t.addedFeatures,null===(r=t.edits)||void 0===r?void 0:r.addFeatures,l),u=c(e,t.updatedFeatures,null===(n=t.edits)||void 0===n?void 0:n.updateFeatures,l),d=c(e,t.deletedFeatures,null===(s=t.edits)||void 0===s?void 0:s.deleteFeatures,l,t.globalIdToObjectId,!1);return l.size>0&&await async function(e,t){const r=e.i3sOverrides.layer.associatedLayer;if(null==(null===r||void 0===r?void 0:r.globalIdField))return;const n=r.createQuery(),{objectIdField:s,globalIdField:l}=r;n.where=Array.from(t.keys()).map((e=>"".concat(l,"='").concat(e,"'"))).join(" OR "),n.returnGeometry=!1,n.outFields=[s,l],n.cacheHint=!1;const a=await(0,i.DZ)((0,o.SE)(r,n));if(!a.ok)return;const u=a.value.features;for(const i of u){const e=i.attributes[l],r=i.attributes[s];if(null==e||null==r||-1===r)continue;const n=t.get(e);if(null!=n)for(const t of n)t.oid=r}}(e,l),{adds:a.filter((e=>-1!==e.oid)),updates:u.filter((e=>-1!==e.oid)),deletes:d.filter((e=>-1!==e.oid))}}function f(e,t){const r=new Map,i=t.adds,n=t.updates,o=t.deletes;if(i.length>0)for(const a of i){var s;const e=a.oid,t=a.feature;"mesh"===(null===t||void 0===t||null===(s=t.geometry)||void 0===s?void 0:s.type)&&r.set(e,t.geometry)}if(n.length>0)for(const a of n){var l;const e=a.oid,t=a.feature;"mesh"===(null===t||void 0===t||null===(l=t.geometry)||void 0===l?void 0:l.type)&&r.set(e,t.geometry)}if(o.length>0)for(const a of o)r.set(a.oid,null);for(const[a,u]of r)e.i3sOverrides.updateGeometry(a,u)}function h(e,t){var r;const i=function(e,t){const r=t.updates;if(!r||0===r.length)return new m;const i=new m,n=new Map;for(let o=0;o<e.attributeStorageInfo.length;o++)n.set(e.attributeStorageInfo[o].name,o);return e.forEachNode(((t,n)=>{for(const o of r){if(null==o.feature)continue;const r=o.feature,s=o.oid,l=n.indexOf(s);for(const n in r.attributes){const o=e.fieldsIndex.normalizeFieldName(n),a=y(i,t.index,o),u=r.attributes[n];a.push({featureIndex:l,featureId:s,value:u})}}})),i}(e,t),n=function(e,t){const r=new Map,i=t.adds;if(!i||0===i.length||null==e.globalIdField)return r;for(const o of i){var n;const e=o.oid,t=o.feature;"mesh"===(null===t||void 0===t||null===(n=t.geometry)||void 0===n?void 0:n.type)&&r.set(e,t)}return r}(e,t);if(0===i.size&&0===n.size)return;const o=new Map;for(let f=0;f<e.attributeStorageInfo.length;f++)o.set(e.attributeStorageInfo[f].name,f);let s=!1;i.forEach(((t,r)=>{const i=e.getAttributeData(r);let n=!1;t.forEach(((t,r)=>{const l=null!=i?i[r]:null,a=o.get(r);for(const{featureIndex:i,value:o,featureId:u}of t)l&&(l[i]=o,n=!0,s=!0),e.i3sOverrides.updateAttributeValue(u,a,o)})),n&&e.setAttributeData(r,i,null)})),s&&e.clearMemCache();const{fieldsIndex:l,i3sOverrides:a,objectIdField:u,globalIdField:d}=e,c=null===(r=a.layer.associatedLayer)||void 0===r?void 0:r.infoFor3D,p=new Set(c?[...Object.values(c.assetMapFieldRoles),...Object.values(c.transformFieldRoles)]:[]);for(const[f,h]of n){a.featureAdded(f);const{attributes:e}=h;for(const t in e){if(t!==u&&t!==d&&p.has(t))continue;const r=l.normalizeFieldName(t),i=null!=r?o.get(r):null;if(null==i)continue;const n=e[t];a.updateAttributeValue(f,i,n)}}}function y(e,t,r){const i=function(e,t){const r=e.get(t);if(r)return r;const i=new g;return e.set(t,i),i}(e,t),n=null!=r&&i.get(r);if(n)return n;const o=new Array;return i.set(r,o),o}(a=l||(l={}))[a.EDITING=0]="EDITING",a[a.ROLLED_BACK=1]="ROLLED_BACK",a[a.COMMITTED=2]="COMMITTED";const g=Map,m=Map},39097:(e,t,r)=>{r.d(t,{E:()=>u});var i=r(35143),n=r(76460),o=r(46053),s=(r(81806),r(47249),r(85842)),l=r(97216),a=r(74279);const u=e=>{let t=class extends e{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=e=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&n.A.getLogger(this).error("Error while evaluating definitionExpression: "+e),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&n.A.getLogger(this).error("Further errors are ignored")}}get parsedDefinitionExpression(){var e;if(null===(e=this.i3slayer)||void 0===e||!e.definitionExpression)return null;try{const e=l.WhereClause.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!e.isStandardized)return n.A.getLogger(this).error("definitionExpression is using non standard function"),null;const t=[],r=e.fieldNames;return(0,a.W)(r,this.i3slayer.fields,{missingFields:t}),t.length>0?(n.A.getLogger(this).error("definitionExpression references unknown fields: ".concat(t.join(", "))),null):(this._definitionExpressionErrors=0,e)}catch(t){return n.A.getLogger(this).error("Failed to parse definitionExpression: "+t),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:[]}_evaluateClause(e,t){try{return e.testFeature(t)}catch(r){return this.logError(r),!1}}_addDefinitionExpressionToQuery(e){if(!this.parsedDefinitionExpression)return e;const t=this.i3slayer.definitionExpression,r=e.clone();return r.where?r.where="(".concat(t,") AND (").concat(r.where,")"):r.where=t,r}};return(0,i._)([(0,o.MZ)({readOnly:!0})],t.prototype,"parsedDefinitionExpression",null),(0,i._)([(0,o.MZ)({readOnly:!0})],t.prototype,"definitionExpressionFields",null),t=(0,i._)([(0,s.$)("esri.views.3d.layers.support.DefinitionExpressionSceneLayerView")],t),t}},58698:(e,t,r)=>{r.d(t,{R:()=>a});var i=r(35143),n=r(50076),o=(r(76460),r(81806),r(47249),r(85842)),s=r(53430),l=r(2257);const a=e=>{let t=class extends e{_validateFetchPopupFeatures(e){const{layer:t}=this,{popupEnabled:r}=t;if(!r)throw new n.A("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:t});if(!(0,l.D8)(t,e))throw new n.A("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:t})}async prepareFetchPopupFeatures(e){}async fetchPopupFeaturesFromGraphics(e,t){if(this._validateFetchPopupFeatures(t),0===e.length)return[];const r="scene"===this.layer.type&&null!=this.layer.associatedLayer?this.layer.associatedLayer:this.layer;let i=[];"fieldsIndex"in this.layer&&(i=(0,s.hL)(this.layer.fieldsIndex,await(0,l.TO)(r,(0,l.D8)(this.layer,t)))),await this.prepareFetchPopupFeatures(i);const n=new Set,o=[],a=[];for(const l of e)(0,s.Q1)(i,l,n)?a.push(l):o.push(l);if(0===a.length)return o;const u=new Map;for(let s=0;s<e.length;s++){var d;u.set(null!==(d=e[s].getObjectId())&&void 0!==d?d:0,s)}const c=await this.whenGraphicAttributes(a,[...n]).catch((()=>a)).then((e=>o.concat(e)));return c.sort(((e,t)=>{var r,i,n,o;const s=null!==(r=e.getObjectId())&&void 0!==r?r:0,l=null!==(i=u.get(s))&&void 0!==i?i:0,a=null!==(n=t.getObjectId())&&void 0!==n?n:0;return l-(null!==(o=u.get(a))&&void 0!==o?o:0)})),c}};return t=(0,i._)([(0,o.$)("esri.views.3d.layers.support.PopupSceneLayerView")],t),t}},33680:(e,t,r)=>{r.d(t,{z:()=>h});var i=r(35143),n=r(91967),o=r(76460),s=r(50346),l=r(68134),a=r(46053),u=r(85842);const d=e=>{let t=class extends e{constructor(){super(...arguments),this._numUpdating=0}get updating(){return this._numUpdating>0}autoUpdateAsync(e,t){const r=(0,s.sg)((async t=>{++this._numUpdating;try{const r=await t;this.destroyed||this._set(e,r)}catch(r){o.A.getLogger(this).warn('Async update of "'.concat(String(e),'" failed. Async update functions should not throw exceptions.'))}--this._numUpdating}));return(0,l.watch)(t,r,l.initial)}};return(0,i._)([(0,a.MZ)({readOnly:!0})],t.prototype,"updating",null),(0,i._)([(0,a.MZ)()],t.prototype,"_numUpdating",void 0),t=(0,i._)([(0,u.$)("esri.core.AsyncUpdate")],t),t};let c=class extends(d(n.A)){};c=(0,i._)([(0,u.$)("esri.core.AsyncUpdate")],c);r(81806),r(47249);var p=r(53430);const f="esri.views.3d.layers.support.SceneLayerViewRequiredFields";let h=class extends(d(n.A)){get layer(){return this.layerView.layer}get requiredFields(){const{layerView:{layer:{fieldsIndex:e},definitionExpressionFields:t},rendererFields:r,labelingFields:i,viewFilterFields:n}=this;return(0,p.DB)(e,[...null!==t&&void 0!==t?t:[],...null!==r&&void 0!==r?r:[],...null!==i&&void 0!==i?i:[],...null!==n&&void 0!==n?n:[]])}constructor(e){super(e)}initialize(){this.addHandles([this.autoUpdateAsync("rendererFields",(async()=>{const{fieldsIndex:e,renderer:t}=this.layer;return t?y((r=>t.collectRequiredFields(r,e))):null})),this.autoUpdateAsync("labelingFields",(async()=>{const{layer:e}=this;return e.labelsVisible?y((t=>(0,p.Im)(t,e))):null})),this.autoUpdateAsync("viewFilterFields",(()=>{const{layer:e,mergedFilter:t}=this.layerView;return y((r=>(0,p.o)(r,e,t)))}))])}};async function y(e){const t=new Set;try{return await e(t),Array.from(t).sort()}catch(r){return o.A.getLogger(f).error(r),null}}(0,i._)([(0,a.MZ)()],h.prototype,"layerView",void 0),(0,i._)([(0,a.MZ)()],h.prototype,"layer",null),(0,i._)([(0,a.MZ)()],h.prototype,"requiredFields",null),(0,i._)([(0,a.MZ)()],h.prototype,"rendererFields",void 0),(0,i._)([(0,a.MZ)()],h.prototype,"labelingFields",void 0),(0,i._)([(0,a.MZ)()],h.prototype,"viewFilterFields",void 0),h=(0,i._)([(0,u.$)(f)],h)},50532:(e,t,r)=>{r.d(t,{P:()=>d});var i=r(35143),n=r(46053),o=(r(81806),r(76460),r(47249),r(85842)),s=r(23478),l=r(95363),a=r(8203),u=r(74279);const d=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null}get mergedFilter(){var e,t,r;const{filter:i,timeExtent:n}=this;if(null==n)return i;const o=null!==(e=null===i||void 0===i?void 0:i.clone())&&void 0!==e?e:new a.A;return null!=n&&(o.timeExtent=null!==(t=null===(r=o.timeExtent)||void 0===r?void 0:r.intersection(n))&&void 0!==t?t:n),o}getTimeFilterDependencies(){const{timeInfo:e}=this.i3slayer;if(null==e)return[];const{startField:t,endField:r}=e;return[t,r]}addTimeFilter(e,t){if(null==t)return;const{timeInfo:r}=this.i3slayer;if(null==r)return;const{startField:i,endField:n,useTime:o}=r;if(!o||null==i&&null==n)return;const s=r.toJSON(),l=t.toJSON();e.push(((e,t)=>this._timeFilter(e,t,s,l)))}_timeFilter(e,t,r,i){var n;const o=null===(n=t.attributeInfo)||void 0===n?void 0:n.attributeData;if(null==o)return;const{startTimeField:l,endTimeField:a}=r;if(null!=l&&null==o[l]||null!=a&&null==o[a])return;const d=(0,s.I)(r,i,new c(o));if(null==d)return;const{featureIds:p}=t;(0,u.$i)(e,p,d)}};return(0,i._)([(0,n.MZ)(l.ui)],t.prototype,"timeExtent",void 0),(0,i._)([(0,n.MZ)()],t.prototype,"mergedFilter",null),t=(0,i._)([(0,o.$)("esri.views.3d.layers.support.TemporalSceneLayerView")],t),t};class c{constructor(e){this.attributeData=e}getAttribute(e,t){return(0,u.E5)(this.attributeData[t],e)}getAttributeAsTimestamp(e,t){const r=this.getAttribute(e,t);return"string"==typeof r?new Date(r).getTime():"number"==typeof r||null==r?r:null}}},38229:(e,t,r)=>{r.d(t,{p:()=>n});var i=r(53430);function n(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return e.outFields?(0,i.DB)(t,[...(0,i.hL)(t,e.outFields),...r]):(0,i.DB)(t,r)}}}}},82558:(e,t,r)=>{r.d(t,{A:()=>y});var i=r(35143),n=r(18690),o=r(76460),s=r(30726),l=r(53596),a=r(50346),u=r(68134),d=r(46053),c=(r(81806),r(85842)),p=r(9624),f=r(91196);let h=class extends f.A{constructor(){super(...arguments),this.layer=null,this.filter=null,this._geometryEngine=null,this._projectionEngineLoaded=!1,this._abortController=new AbortController}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){throw new Error("Not implemented")}get maximumNumberOfFeaturesExceeded(){return!1}get layerFilter(){return(0,l.w$)(this._layerFilter)}get _layerFilter(){var e;const t=null===(e=this.layer)||void 0===e?void 0:e.filter;if(null==t||t.geometries.length<1)return null;const r=this._geometryEngine;if(null==r||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)return l.J7;const i=t.geometries.at(0).spatialReference,s=t.geometries.toArray().map((e=>{try{e=r.simplify(e)}catch(t){return o.A.getLogger(this).warnOncePerTick("Failed to simplify scene filter mask polygon. Polygon will be ignored."),null}if(null==e)return null;if(e.spatialReference.equals(i))return e;try{return(0,p.project)(e,i)}catch(t){return o.A.getLogger(this).warnOncePerTick("Failed to project scene filter mask polygon. Polygon will be ignored."),null}})).filter(n.Ru).sort(((e,t)=>e.extent.xmin-t.extent.xmin)),a=new Set,u=new Array,d=new Array;for(let n of s){const e=n.extent.xmin;if(u.length=0,a.forEach((t=>{if(e>=t.extent.xmax)return d.push(t),void a.delete(t);n.extent.ymin<=t.extent.ymax&&n.extent.ymax>=t.extent.ymin&&r.intersects(n,t)&&u.push(t)})),u.length>0){u.push(n);try{n=r.union(u)}catch(c){o.A.getLogger(this).warnOncePerTick("Failed to unify filter mask polygons. Polygon will be ignored.");continue}u.pop(),u.forEach((e=>a.delete(e)))}a.add(n)}return a.forEach((e=>d.push(e))),d.length>0?{spatialRelationship:t.spatialRelationship,geometries:d}:null}get _filterNeedsProjectionEngine(){const e=this.layer.filter;if(null==e||e.geometries.length<=1)return!1;const t=e.geometries.at(0).spatialReference;return e.geometries.some((e=>{let{spatialReference:r}=e;return!r.equals(t)&&!(0,p.canProjectWithoutEngine)(r,t)}))}get layerFilterUpdating(){return(0,l.DS)(this._layerFilter)}initialize(){const{signal:e}=this._abortController;(0,u.whenOnce)((()=>{var e;return this.destroyed||!this._geometryEngine&&(null===(e=this.layer)||void 0===e||null===(e=e.filter)||void 0===e||null===(e=e.geometries)||void 0===e?void 0:e.length)}),e).then((async()=>{(0,a.QP)(e),this._geometryEngine=await Promise.all([r.e(52612),r.e(63391)]).then(r.bind(r,63391))})).catch(a.jH),this._projectionEngineLoaded=(0,p.isLoaded)(),(0,u.whenOnce)((()=>this.destroyed||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine),e).then((async()=>{(0,a.QP)(e),await(0,p.load)(),this._projectionEngineLoaded=!0})).catch(a.jH)}destroy(){this._abortController=(0,s.DC)(this._abortController)}highlight(e){throw new Error("Not implemented")}queryFeatures(e,t){throw new Error("Not implemented")}queryObjectIds(e,t){throw new Error("Not implemented")}queryFeatureCount(e,t){throw new Error("Not implemented")}createQuery(){throw new Error("Not implemented")}queryExtent(e,t){throw new Error("Not implemented")}};(0,i._)([(0,d.MZ)()],h.prototype,"layer",void 0),(0,i._)([(0,d.MZ)()],h.prototype,"availableFields",null),(0,i._)([(0,d.MZ)()],h.prototype,"maximumNumberOfFeatures",null),(0,i._)([(0,d.MZ)({readOnly:!0})],h.prototype,"maximumNumberOfFeaturesExceeded",null),(0,i._)([(0,d.MZ)()],h.prototype,"filter",void 0),(0,i._)([(0,d.MZ)({readOnly:!0})],h.prototype,"layerFilter",null),(0,i._)([(0,d.MZ)({readOnly:!0})],h.prototype,"_layerFilter",null),(0,i._)([(0,d.MZ)()],h.prototype,"_geometryEngine",void 0),(0,i._)([(0,d.MZ)()],h.prototype,"_projectionEngineLoaded",void 0),(0,i._)([(0,d.MZ)()],h.prototype,"_filterNeedsProjectionEngine",null),(0,i._)([(0,d.MZ)()],h.prototype,"layerFilterUpdating",null),h=(0,i._)([(0,c.$)("esri.views.layers.SceneLayerView")],h);const y=h}}]);
//# sourceMappingURL=50109.3fa1ae22.chunk.js.map