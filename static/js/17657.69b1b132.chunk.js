"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[17657],{9912:(e,t,n)=>{n.d(t,{A4:()=>A,AB:()=>N,Ao:()=>te,DU:()=>K,Fr:()=>oe,JF:()=>F,MK:()=>k,Tt:()=>E,Uu:()=>V,a$:()=>S,bG:()=>P,bV:()=>x,c3:()=>Y,cS:()=>re,gd:()=>U,kX:()=>Z,ld:()=>J,lm:()=>G,n1:()=>O,n_:()=>H,q6:()=>ne,s$:()=>$,sS:()=>D,u2:()=>M,x1:()=>B,xL:()=>C});var r=n(76460),i=n(88685),o=n(65256),l=n(50265),a=n(53430),u=n(31933),s=n(42633),f=n(98976),c=n(67478);const d=()=>r.A.getLogger("esri.widgets.Feature.support.featureUtils"),p=/href=(""|'')/gi,y=/(\{([^\{\r\n]+)\})/g,m=/\'/g,g=/^\s*expression\//i,v=/(\n)/gi,h=/[\u00A0-\u9999<>\&]/gim,I=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,b=/^(?:mailto:|tel:)/,w="relationships/",T=(0,o.J2)("short-date-short-time");function F(e){var t;if(null!=e)return null!==(t=e.sourceLayer||e.layer)&&void 0!==t?t:void 0}async function N(e,t){return"function"==typeof e?e(t):e}function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return!b.test(e.trim().toLowerCase())}function E(e){return!!e&&g.test(e)}function x(e,t){const n=function(e,t){if(!E(t)||!e)return;const n=t.replace(g,"").toLowerCase();return e.find((e=>{let{name:t}=e;return t.toLowerCase()===n}))}(t,null===e||void 0===e?void 0:e.fieldName);return n?n.title||null:e?e.label||e.fieldName:null}function A(e,t){const n=q(t,e);return n?n.name:e}function C(e,t){return e&&e.map((e=>A(e,t)))}function q(e,t){var n;return e&&"function"==typeof e.getField&&t&&null!==(n=e.getField(t))&&void 0!==n?n:null}function L(e){return"".concat(e).trim()}function M(e){let{attributes:t,globalAttributes:n,layer:r,text:i,expressionAttributes:o,fieldInfoMap:l}=e;return i?U({formattedAttributes:n,template:R(i,{...n,...o,...t},r),fieldInfoMap:l}):""}function U(e){let{formattedAttributes:t,template:n,fieldInfoMap:r}=e;return L(function(e){return e.replaceAll(p,"")}((0,i.HC)((0,i.HC)(n,(e=>function(e,t){const n=t.get(e.toLowerCase());return"{".concat((null===n||void 0===n?void 0:n.fieldName)||e,"}")}(e,r))),t)))}function j(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={...e};return Object.keys(n).forEach((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t[e];if("string"==typeof r){const i="%27",o=(n?encodeURIComponent(r):r).replaceAll(m,i);t[e]=o}}(e,n,t))),n}function k(e,t){return e.replaceAll(y,((e,n,r)=>{const i=q(t,r);return i?"{".concat(i.name,"}"):n}))}function R(e,t,n){const r=k(e,n);return r?r.replaceAll(I,((e,n,r)=>function(e,t,n){const r=(t=L(t))&&"{"!==t[0];return(0,i.HC)(e,j(n,r||!1))}(e,n||r,t))):r}function D(e){return function(e){return null!=e&&"object"==typeof e&&"fieldsIndex"in e&&"geometryType"in e&&"getField"in e&&"load"in e&&"loaded"in e&&"objectIdField"in e&&"spatialReference"in e&&"type"in e&&("feature"===e.type||"scene"===e.type)&&"when"in e}(e)&&function(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatureCount"in e&&"queryObjectIds"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e&&"relationships"in e}(e)}function O(e){return!!e&&"object"==typeof e&&"sourceLayer"in e&&D(e.sourceLayer)}function _(e,t){const{fieldInfos:n,fieldName:r,preventPlacesFormatting:i,layer:o,timeZone:u}=t,f=G(n,r),c=q(o,r);if(f&&!(0,a.JL)(r)){var d;const t=null===c||void 0===c?void 0:c.type,n=null===(d=f.format)||void 0===d?void 0:d.dateFormat;if("date"===t||"date-only"===t||"time-only"===t||"timestamp-offset"===t||n)return(0,s.i0)(e,{format:n,fieldType:t,timeZoneOptions:{layerTimeZone:o&&"preferredTimeZone"in o?o.preferredTimeZone:null,viewTimeZone:u,datesInUnknownTimezone:!(!o||!("datesInUnknownTimezone"in o))&&!!o.datesInUnknownTimezone}})}const p=null===f||void 0===f?void 0:f.format;return"string"==typeof e&&(0,a.JL)(r)&&p?function(e,t){return e=e.trim(),/\d{2}-\d{2}/.test(e)?e:e.includes(",")?z(e,",",", ",t):e.includes(";")?z(e,";","; ",t):e.includes(" ")?z(e," "," ",t):(0,l.ZV)(Number(e),(0,l.yx)(t))}(e,p):"string"==typeof(e=function(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){const t=Number(e);if(!isNaN(t))return t}return e}(e,p))||null==e||null==p?V(e):(0,l.ZV)(e,i?{...(0,l.yx)(p),minimumFractionDigits:0,maximumFractionDigits:20}:(0,l.yx)(p))}function z(e,t,n,r){return e.trim().split(t).map((e=>(0,l.ZV)(Number(e),(0,l.yx)(r)))).join(n)}function G(e,t){if(null!==e&&void 0!==e&&e.length&&t)return e.find((e=>{var n;return(null===(n=e.fieldName)||void 0===n?void 0:n.toLowerCase())===t.toLowerCase()}))}function S(e,t,n,r){const{creatorField:i,creationDateField:l,editorField:a,editDateField:u}=e;if(!t)return;const s=(0,c.hv)(r&&"preferredTimeZone"in r?r.preferredTimeZone:null,!(!r||!("datesInUnknownTimezone"in r))&&!!r.datesInUnknownTimezone,n,T,"date"),f={...T,...s},d=t[u];if("number"==typeof d){const e=t[a];return{type:"edit",date:(0,o.Yq)(d,f),user:e}}const p=t[l];if("number"==typeof p){const e=t[i];return{type:"create",date:(0,o.Yq)(p,f),user:e}}return null}function H(e,t){const n=new Map;return e?(e.forEach((e=>{const r=A(e.fieldName,t);e.fieldName=r,n.set(r.toLowerCase(),e)})),n):n}function J(e){const t=[];if(!e)return t;const{fieldInfos:n,content:r}=e;return n&&t.push(...n),r&&Array.isArray(r)?(r.forEach((e=>{if("fields"===e.type){const n=null===e||void 0===e?void 0:e.fieldInfos;n&&t.push(...n)}})),t):t}function P(e){return e.replaceAll(h,(e=>"&#".concat(e.charCodeAt(0),";")))}function V(e){return"string"==typeof e?e.replaceAll(v,'<br class="esri-text-new-line" />'):e}function Q(e){var t;const{value:n,fieldName:r,fieldInfos:i,fieldInfoMap:o,layer:l,graphic:u,timeZone:f}=e;if(null==n)return"";const c=function(e){let{fieldName:t,value:n,graphic:r,layer:i}=e;if($(t))return null;if(!i||"function"!=typeof i.getFieldDomain)return null;const o=r&&i.getFieldDomain(t,{feature:r});return o&&"coded-value"===o.type?o.getName(n):null}({fieldName:r,value:n,graphic:u,layer:l});if(c)return c;const d=function(e){let{fieldName:t,graphic:n,layer:r}=e;if($(t))return null;if(!r||"function"!=typeof r.getFeatureType)return null;const{typeIdField:i}=r;if(!i||t!==i)return null;const o=r.getFeatureType(n);return o?o.name:null}({fieldName:r,graphic:u,layer:l});if(d)return d;if(o.get(r.toLowerCase()))return _(n,{fieldInfos:i||Array.from(o.values()),fieldName:r,layer:l,timeZone:f});const p=null===l||void 0===l||null===(t=l.fieldsIndex)||void 0===t?void 0:t.get(r);return p&&((0,s.fs)(p)||(0,a.OH)(p))?(0,s.i0)(n,{fieldType:p.type,timeZoneOptions:{layerTimeZone:l&&"preferredTimeZone"in l?l.preferredTimeZone:null,viewTimeZone:f,datesInUnknownTimezone:!(!l||!("datesInUnknownTimezone"in l))&&!!l.datesInUnknownTimezone}}):V(n)}function B(e){let{fieldInfos:t,attributes:n,layer:r,graphic:i,fieldInfoMap:o,relatedInfos:l,timeZone:a}=e;const u={};return null!==l&&void 0!==l&&l.forEach((e=>function(e){var t,n;let{attributes:r,relatedInfo:i,fieldInfoMap:o,fieldInfos:l,layer:a,timeZone:u}=e;r&&i&&(null!==(t=i.relatedFeatures)&&void 0!==t&&t.forEach((e=>X({attributes:r,graphic:e,relatedInfo:i,fieldInfoMap:o,fieldInfos:l,layer:a,timeZone:u}))),null===(n=i.relatedStatsFeatures)||void 0===n||n.forEach((e=>X({attributes:r,graphic:e,relatedInfo:i,fieldInfoMap:o,fieldInfos:l,layer:a,timeZone:u}))))}({attributes:u,relatedInfo:e,fieldInfoMap:o,fieldInfos:t,layer:r,timeZone:a}))),n&&Object.keys(n).forEach((e=>{const l=n[e];u[e]=Q({fieldName:e,fieldInfos:t,fieldInfoMap:o,layer:r,value:l,graphic:i,timeZone:a})})),u}async function K(e,t){var n;const{layer:r,graphic:i,outFields:o,objectIds:l,returnGeometry:a,spatialReference:s}=e,f=l[0];if("number"!=typeof f&&"string"!=typeof f){const e="Could not query required fields for the specified feature. The feature's ID is invalid.",t={layer:r,graphic:i,objectId:f,requiredFields:o};return d().warn(e,t),null}if(null===(n=(0,u.BR)(r))||void 0===n||null===(n=n.operations)||void 0===n||!n.supportsQuery){const e="The specified layer cannot be queried. The following fields will not be available.",t={layer:r,graphic:i,requiredFields:o,returnGeometry:a};return d().warn(e,t),null}const c=r.createQuery();return c.objectIds=l,c.outFields=null!==o&&void 0!==o&&o.length?o:[r.objectIdField],c.returnGeometry=!!a,c.returnZ=!!a,c.returnM=!!a,c.outSpatialReference=s,(await r.queryFeatures(c,t)).features[0]}async function Y(e,t){let{graphic:n,popupTemplate:r,layer:i,spatialReference:o}=e;if(!i||!r)return;if("function"==typeof i.load&&await i.load(t),!n.attributes)return;const l=n.attributes[i.objectIdField];if(null==l)return;const u=[l],s=await r.getRequiredFields(i.fieldsIndex),c=(0,a.Kl)(s,n),d=c?[]:s,p=r.returnGeometry||await async function(e){var t;if(null===(t=e.expressionInfos)||void 0===t||!t.length)return!1;const n=await(0,f.lw)(),{arcadeUtils:{hasGeometryFunctions:r}}=n;return r(e)}(r);if(c&&!p)return;const y=await K({layer:i,graphic:n,outFields:d,objectIds:u,returnGeometry:p,spatialReference:o},t);y&&(y.geometry&&(n.geometry=y.geometry),y.attributes&&(n.attributes={...n.attributes,...y.attributes}))}function $(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!e&&e.includes(w)}function X(e){let{attributes:t,graphic:n,relatedInfo:r,fieldInfos:i,fieldInfoMap:o,layer:l,timeZone:a}=e;t&&n&&r&&Object.keys(n.attributes).forEach((e=>{const u=function(e){return e?"".concat(w).concat(e.layerId,"/").concat(e.fieldName):""}({layerId:r.relation.id.toString(),fieldName:e}),s=n.attributes[e];t[u]=Q({fieldName:u,fieldInfos:i,fieldInfoMap:o,layer:l,value:s,graphic:n,timeZone:a})}))}const W=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},ee=e=>{var t;let{layer:n,method:r,query:i,definitionExpression:o}=e;if(null===(t=n.capabilities)||void 0===t||null===(t=t.query)||void 0===t||!t.supportsCacheHint||"attachments"===r)return;const l=null!=i.where?i.where:null,a=null!=i.geometry?i.geometry:null;W(o)||W(l)||"extent"===(null===a||void 0===a?void 0:a.type)||"tile"===i.resultType||(i.cacheHint=!0)},te=e=>{let{query:t,layer:n,method:r}=e;ee({layer:n,method:r,query:t,definitionExpression:"".concat(n.definitionExpression," ").concat(n.serviceDefinitionExpression)})},ne=e=>{let{queryPayload:t,layer:n,method:r}=e;ee({layer:n,method:r,query:t,definitionExpression:"".concat(n.definitionExpression," ").concat(n.serviceDefinitionExpression)})};function re(e,t,n){return e&&t&&n?ie(e.allLayers,t,n)||ie(e.allTables,t,n):null}function ie(e,t,n){let{relatedTableId:r}=n;const i="scene"===t.type&&t.associatedLayer?t.associatedLayer.url:t.url;return e.filter(D).find((e=>e!==t&&e.url===i&&e.layerId===r))}function oe(e){const t=e.getObjectId();return null!=t?"oid:".concat(t):"uid:".concat(e.uid)}},12254:(e,t,n)=>{function r(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const n=t._delegatedEventNames,r=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);n.push(...r)}}n.d(t,{U:()=>r})}}]);
//# sourceMappingURL=17657.69b1b132.chunk.js.map