"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[16028],{16028:(t,e,o)=>{o.r(e),o.d(e,{default:()=>P});var i=o(35143),n=o(68134),s=o(46053),r=(o(81806),o(76460),o(47249),o(85842)),a=o(25329),l=o(87404);const d=[-45,0,45,-90,90,-135,180,135],v=[...d,-180],c={0:{label:"north",iconName:"chevron-up"},45:{label:"northEast",iconName:"chevron-up-right"},90:{label:"east",iconName:"chevron-right"},135:{label:"southEast",iconName:"chevron-down-right"},180:{label:"south",iconName:"chevron-down"},"-135":{label:"southWest",iconName:"chevron-down-left"},"-90":{label:"west",iconName:"chevron-left"},"-45":{label:"northWest",iconName:"chevron-up-left"}};const h="esri-directional-pad",u={base:h,widgetIcon:o(15062).T.pan,buttonsContainer:"".concat(h,"__buttons-container"),button:"".concat(h,"__button"),compassButton:"".concat(h,"__compass"),rotationContainer:"".concat(h,"__rotation-container"),rotationSliderContainer:"".concat(h,"__rotation-slider-container"),rotationReset:"".concat(h,"__rotation-reset-button"),error:"".concat(h,"__error")};var _=o(54099),p=o(15941);function m(t){const e=function(t){let{x:e,y:o}=t;const i=Math.atan2(e,o);return(0,p.KJ)(i)}(t),o=v.map((t=>({angle:t,offset:Math.abs(t-e)}))).sort(((t,e)=>t.offset-e.offset)),i=o[0].angle;return-180===i?180:i}function b(t){const e=(0,p.kU)(t);return{x:Math.sin(e),y:Math.cos(e)}}var g=o(79535);let M=class extends((0,g.R)(_.A.EventedAccessor)){constructor(t){super(t),this._initialAngle=void 0,this._movementVector=void 0,this._widgetCenter=void 0,this._anyAngleMovementEnabled=!1,this._movementTimeout=void 0,this._disabled=!1,this._moveOnceDuration=200,this.angle=void 0,this.speed=1,this.beginFollowingPointer=(t,e)=>{if(this.disabled)return;this._widgetCenter=e;const o=this._pointerLocationToVector(t);if(void 0===o)return;const i=this._resolveClosestAngle(t,o);void 0!==i&&(this._emitMove(b(i)),this.angle=i,this._initialAngle=i,this._setMovementTimeout((()=>{void 0===this._widgetCenter&&this._stopMovement()})),document.addEventListener("pointermove",this._onPointerMove,{passive:!0}),document.addEventListener("pointerup",this._onPointerUp,{passive:!0,once:!0}))},this.moveOnce=t=>{const e=b(t);this._emitMove(e),this._setMovementTimeout(this._stopMovement)},this._pointerLocationToVector=t=>{if(void 0===this._widgetCenter)return;const{x:e,y:o}=function(t,e){const o=e.y-t.y,i=e.x-t.x,n=Math.sqrt(i*i+o*o);return{x:i/n,y:o/n}}(this._widgetCenter,t);return{x:e,y:-o}},this._resolveClosestAngle=(t,e)=>{var o,i;const n=t.target,s=null===n||void 0===n||null===(o=n.getAttribute)||void 0===o?void 0:o.call(n,"data-angle");if(null===n||void 0===n||null===(i=n.classList)||void 0===i?void 0:i.contains(u.compassButton))return;const r=Number.parseInt(null!==s&&void 0!==s?s:"",10);return Number.isNaN(r)?m(e):r},this._onPointerMove=t=>{var e,o;if(0===t.buttons)return void this._stopMovement();const i=this._pointerLocationToVector(t);if(void 0===i)return;this._setMovementTimeout(void 0);const n=this._resolveClosestAngle(t,i);if(void 0===n)return void this._emitStop();const s=b(n),r=null!=this._initialAngle&&this._initialAngle!==n;this._anyAngleMovementEnabled||(this._anyAngleMovementEnabled=r);const a=this._anyAngleMovementEnabled?i:s;(a.x!==(null===(e=this._movementVector)||void 0===e?void 0:e.x)||a.y!==(null===(o=this._movementVector)||void 0===o?void 0:o.y))&&(this.angle=n,this._emitMove(a))},this._onPointerUp=()=>{void 0===this._movementTimeout?this._stopMovement():this._widgetCenter=void 0},this._stopMovement=()=>{this._emitStop(),this._widgetCenter=void 0,this._initialAngle=void 0,this._anyAngleMovementEnabled=!1,document.removeEventListener("pointermove",this._onPointerMove),document.removeEventListener("pointerup",this._stopMovement),this._setMovementTimeout(void 0)},this.on("move-start",(()=>{var t;return null===(t=this.view)||void 0===t?void 0:t.mapViewNavigation.begin()})),this.on("move-direction-change",(t=>{var e;let{vector:{x:o,y:i}}=t;return null===(e=this.view)||void 0===e?void 0:e.mapViewNavigation.continuousPanVector({x:o*this.speed,y:i*this.speed})})),this.on("move-stop",(()=>{var t;return null===(t=this.view)||void 0===t?void 0:t.mapViewNavigation.stop()}))}destroy(){this._stopMovement()}get disabled(){const{view:t,_disabled:e,supported:o}=this;return!1===(null===t||void 0===t?void 0:t.ready)||e||!o}set disabled(t){this._disabled=t}get rotation(){var t,e,o;return null!==(t=null!==(e=null===(o=this.view)||void 0===o?void 0:o.rotation)&&void 0!==e?e:this._get("rotation"))&&void 0!==t?t:0}set rotation(t){this.view?this.view.constraints.rotationEnabled&&this.callGoTo({target:{rotation:t},options:{animate:0===t}}):this._set("rotation",t)}get supported(){return null==this.view||"2d"===this.view.type}get state(){const{disabled:t,angle:e}=this;return t?"disabled":null!=e?"moving":"ready"}_setMovementTimeout(t){clearTimeout(this._movementTimeout),this._movementTimeout=void 0===t?void 0:setTimeout((()=>{this._movementTimeout=void 0,t()}),this._moveOnceDuration)}_emitMove(t){null==this._movementVector&&this._emitMoveStartEvent({vector:t});const e=this._movementVector;this._movementVector=t,this._emitMoveDirectionChangeEvent({vector:t,oldVector:e})}_emitStop(){this.angle=void 0,void 0!==this._movementVector&&(this._emitMoveStopEvent({oldVector:this._movementVector}),this._movementVector=void 0)}_emitMoveStartEvent(t){this.emit("move-start",{...t,type:"move-start"})}_emitMoveDirectionChangeEvent(t){this.emit("move-direction-change",{...t,type:"move-direction-change"})}_emitMoveStopEvent(t){this.emit("move-stop",{...t,type:"move-stop"})}};(0,i._)([(0,s.MZ)()],M.prototype,"_initialAngle",void 0),(0,i._)([(0,s.MZ)()],M.prototype,"_movementVector",void 0),(0,i._)([(0,s.MZ)()],M.prototype,"_widgetCenter",void 0),(0,i._)([(0,s.MZ)()],M.prototype,"_anyAngleMovementEnabled",void 0),(0,i._)([(0,s.MZ)()],M.prototype,"_movementTimeout",void 0),(0,i._)([(0,s.MZ)()],M.prototype,"_disabled",void 0),(0,i._)([(0,s.MZ)()],M.prototype,"_moveOnceDuration",void 0),(0,i._)([(0,s.MZ)()],M.prototype,"disabled",null),(0,i._)([(0,s.MZ)()],M.prototype,"angle",void 0),(0,i._)([(0,s.MZ)({type:Number,range:{min:0,max:100}})],M.prototype,"speed",void 0),(0,i._)([(0,s.MZ)()],M.prototype,"rotation",null),(0,i._)([(0,s.MZ)()],M.prototype,"supported",null),(0,i._)([(0,s.MZ)({readOnly:!0})],M.prototype,"state",null),(0,i._)([(0,s.MZ)()],M.prototype,"view",void 0),M=(0,i._)([(0,r.$)("esri.widgets.DirectionalPad.DirectionalPadViewModel")],M);const w=M;var y=o(91967);let C=class extends y.A{constructor(t){super(t),this.directionalButtons=!0,this.rotationSlider=!1,this.rotationResetButton=!1}};(0,i._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],C.prototype,"directionalButtons",void 0),(0,i._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],C.prototype,"rotationSlider",void 0),(0,i._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],C.prototype,"rotationResetButton",void 0),C=(0,i._)([(0,r.$)("esri.widgets.DirectionalPad.VisibleElements")],C);const f=C;var E=o(77666),B=o(98108),Z=o(76099),x=o(63582),R=o(54761);let S=class extends a.A{constructor(t,e){super(t,e),this._buttonsContainer=null,this._buttons={},this.iconClass=u.widgetIcon,this.icon=null,this.messages=null,this.visibleElements=new f,this.viewModel=new w,this.visualScale="s",this._rotateIcon=t=>({"--rotation":"rotate(".concat(t,"deg)")}),this._afterButtonContainerCreate=t=>{this._buttonsContainer=t,this._buttonsContainer.addEventListener("contextmenu",this._onContextMenu,{capture:!0})},this._afterButtonContainerRemoved=()=>{var t;null!==(t=this._buttonsContainer)&&void 0!==t&&t.removeEventListener("contextmenu",this._onContextMenu,{capture:!0}),this._buttonsContainer=null},this._afterButtonCreate=(t,e)=>{this._buttons[t]=e},this._afterButtonRemoved=t=>{this._buttons[t]=void 0},this._onContextMenu=t=>t.preventDefault(),this._onButtonPointerDown=t=>{var e;if(null===this._buttonsContainer)return;const o=t.target,i=null===o||void 0===o||null===(e=o.shadowRoot)||void 0===e?void 0:e.querySelector("button");(null===i||void 0===i?void 0:i.hasPointerCapture(t.pointerId))&&i.releasePointerCapture(t.pointerId);const n=function(t){const{x:e,y:o,width:i,height:n}=t.getBoundingClientRect();return{x:e+i/2,y:o+n/2}}(this._buttonsContainer);this.viewModel.beginFollowingPointer(t,n)},this._onKeyDown=(t,e)=>{let{key:o}=e;(0,Z.OU)(o)&&this.viewModel.moveOnce(t)},this._onSliderInput=t=>{let{target:e}=t;"number"==typeof e.value&&(this.viewModel.rotation=e.value)},this._onRotationReset=()=>{this.viewModel.rotation=0}}loadDependencies(){return(0,E.W)({action:()=>Promise.all([o.e(39879),o.e(62785),o.e(48897),o.e(37918)]).then(o.bind(o,92111)),"action-group":()=>Promise.all([o.e(39879),o.e(62785),o.e(48347),o.e(60731),o.e(48897),o.e(53794),o.e(24706),o.e(67689)]).then(o.bind(o,67689)),"action-pad":()=>Promise.all([o.e(39879),o.e(62785),o.e(48347),o.e(60731),o.e(48897),o.e(53794),o.e(24706),o.e(21415)]).then(o.bind(o,43796)),icon:()=>Promise.all([o.e(39879),o.e(95012)]).then(o.bind(o,95012)),slider:()=>Promise.all([o.e(39879),o.e(62785),o.e(95203),o.e(28225)]).then(o.bind(o,28225))})}initialize(){this.addHandles((0,n.watch)((()=>this.viewModel.angle),(()=>{var t,e,o;(null===(t=this._buttonsContainer)||void 0===t?void 0:t.contains(document.activeElement))&&(null==this.viewModel.angle?null===(e=this.container)||void 0===e||e.focus():null===(o=this._buttons[this.viewModel.angle])||void 0===o||o.setFocus())})))}get disabled(){return this.viewModel.disabled}set disabled(t){this.viewModel.disabled=t}get label(){var t,e;return null!==(t=null===(e=this.messages)||void 0===e?void 0:e.widgetLabel)&&void 0!==t?t:""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get speed(){return this.viewModel.speed}set speed(t){this.viewModel.speed=t}get _rotationEnabled(){var t;return!(null!==(t=this.view)&&void 0!==t&&t.ready)||this.view.constraints.rotationEnabled}render(){const{label:t,disabled:e,viewModel:o}=this,i=this.classes(u.base,B.D.widget,e?B.D.disabled:null);return(0,R.K)("div",{"aria-label":t,class:i,tabIndex:-1},o.supported?this._renderContent():this._renderUnsupportedMessage())}_renderUnsupportedMessage(){return(0,R.K)("section",{class:u.error,key:"unsupported"},(0,R.K)("p",null,this.messages.unsupported))}_renderContent(){return[this.visibleElements.directionalButtons?this._renderDirectionalButtons():void 0,this.visibleElements.rotationSlider?this._renderRotation():void 0]}_renderDirectionalButtons(){return(0,R.K)("calcite-action-pad",{expandDisabled:!0,key:"directional-buttons-container",layout:"grid"},(0,R.K)("calcite-action-group",{afterCreate:this._afterButtonContainerCreate,afterRemoved:this._afterButtonContainerRemoved,class:u.buttonsContainer,dir:"ltr"},d.slice(0,4).map((t=>this._renderButton(t))),this._renderCompass(),d.slice(4).map((t=>this._renderButton(t)))))}_renderButton(t){const{label:e,iconName:o}=c[t];return(0,R.K)("calcite-action",{active:this.viewModel.angle===t,afterCreate:e=>this._afterButtonCreate(t,e),afterRemoved:()=>this._afterButtonRemoved(t),alignment:"center",class:u.button,"data-angle":t.toString(),disabled:this.disabled,key:t,onkeydown:this._onKeyDown.bind(void 0,t),onpointerdown:this._onButtonPointerDown,scale:this.visualScale,text:this.messages[e]},(0,R.K)("calcite-icon",{icon:o,scale:this.visualScale}))}_renderCompass(){const t=this.disabled||(0,l.P)(this.view)?"compass-needle":"arrow-up",e=0===this.viewModel.rotation;return(0,R.K)("calcite-action",{alignment:"center",class:u.compassButton,disabled:this.disabled||!this._rotationEnabled||e,key:"compass",onclick:this._onRotationReset,scale:this.visualScale,styles:this._rotateIcon(this.viewModel.rotation),text:this.messages.resetHeading},!e&&(0,R.K)("calcite-icon",{icon:t,scale:this.visualScale}))}_renderRotation(){return(0,R.K)("calcite-action-pad",{expandDisabled:!0,key:"slider-container",layout:"horizontal"},(0,R.K)("calcite-action-group",{class:u.rotationContainer},this.visibleElements.rotationResetButton?this._renderRotationResetButton():null,this._renderRotationSlider()))}_renderRotationResetButton(){return(0,R.K)("calcite-action",{alignment:"center",class:u.rotationReset,disabled:this.disabled||!this._rotationEnabled,onclick:this._onRotationReset,scale:this.visualScale,text:this.messages.resetHeading},(0,R.K)("calcite-icon",{flipRtl:!0,icon:"rotate",scale:this.visualScale}))}_renderRotationSlider(){return(0,R.K)("div",{class:u.rotationSliderContainer},(0,R.K)("calcite-slider",{"aria-label":this.messages.heading,disabled:this.disabled||!this._rotationEnabled,labelHandles:!0,max:360,min:0,required:!0,scale:this.visualScale,value:Math.round(this.viewModel.rotation),onCalciteSliderInput:this._onSliderInput}))}};(0,i._)([(0,s.MZ)()],S.prototype,"_buttonsContainer",void 0),(0,i._)([(0,s.MZ)()],S.prototype,"_buttons",void 0),(0,i._)([(0,s.MZ)()],S.prototype,"disabled",null),(0,i._)([(0,s.MZ)()],S.prototype,"iconClass",void 0),(0,i._)([(0,s.MZ)()],S.prototype,"icon",void 0),(0,i._)([(0,s.MZ)()],S.prototype,"label",null),(0,i._)([(0,s.MZ)(),(0,x.G)("esri/widgets/DirectionalPad/t9n/DirectionalPad")],S.prototype,"messages",void 0),(0,i._)([(0,s.MZ)({type:f,nonNullable:!0})],S.prototype,"visibleElements",void 0),(0,i._)([(0,s.MZ)()],S.prototype,"view",null),(0,i._)([(0,s.MZ)()],S.prototype,"viewModel",void 0),(0,i._)([(0,s.MZ)()],S.prototype,"visualScale",void 0),(0,i._)([(0,s.MZ)()],S.prototype,"speed",null),(0,i._)([(0,s.MZ)({readOnly:!0})],S.prototype,"_rotationEnabled",null),S=(0,i._)([(0,r.$)("esri.widgets.DirectionalPad")],S);const P=S}}]);
//# sourceMappingURL=16028.d5a72fbc.chunk.js.map