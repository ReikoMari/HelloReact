"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[81738],{994:(e,t,o)=>{o.d(t,{o:()=>d});var i,n=o(35143),a=o(42553),l=o(46053),r=(o(81806),o(76460),o(47249),o(85842)),s=o(68897);let d=i=class extends a.oY{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return(0,s.z3)(this.url)}get isDataURI(){return(0,s.zL)(this.url)}clone(){return new i({url:this.url})}};(0,n._)([(0,l.MZ)({type:String,json:{write:{isRequired:!0}}})],d.prototype,"url",void 0),(0,n._)([(0,l.MZ)()],d.prototype,"isSecureUrl",null),(0,n._)([(0,l.MZ)()],d.prototype,"isDataURI",null),d=i=(0,n._)([(0,r.$)("esri.webdoc.support.SlideThumbnail")],d)},59909:(e,t,o)=>{o.d(t,{A:()=>w});var i,n=o(35143),a=o(82111),l=o(48053),r=o(50076),s=o(5632),d=o(42553),u=o(53084),m=o(76460),c=o(46053),k=o(21403),h=o(28379),v=o(85842),p=o(17707),b=o(40565),_=o(994);let g=i=class extends((0,s.sA)(d.oY)){constructor(e){super(e),this.name=null,this.thumbnail=new _.o,this.timeExtent=null}castThumbnail(e){return"string"==typeof e?new _.o({url:e}):(0,b.dp)(_.o,e)}set viewpoint(e){const{targetGeometry:t,scale:o}=e;null!=t&&"point"===t.type&&null==o&&m.A.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:o,viewpoint:i}=t;return l.A.fromJSON(i||{targetGeometry:o})}writeViewpoint(e,t,o,i){if(!e)return;const{targetGeometry:n}=e;if(null==n||"extent"===n.type)null!=n&&(t.extent=n.toJSON()),t[o]=e.toJSON();else{const e="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!==i&&void 0!==i&&i.messages?i.messages.push(new r.A("property:unsupported",e)):m.A.getLogger(this).error(e)}}clone(){return new i((0,u.o8)({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};(0,n._)([(0,c.MZ)({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],g.prototype,"name",void 0),(0,n._)([(0,c.MZ)({type:_.o,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],g.prototype,"thumbnail",void 0),(0,n._)([(0,k.w)("thumbnail")],g.prototype,"castThumbnail",null),(0,n._)([(0,c.MZ)({type:a.A,json:{write:!0}})],g.prototype,"timeExtent",void 0),(0,n._)([(0,c.MZ)({type:l.A,nonNullable:!0,json:{write:!0}})],g.prototype,"viewpoint",null),(0,n._)([(0,h.w)("viewpoint",["extent","viewpoint"])],g.prototype,"readViewpoint",null),(0,n._)([(0,p.K)("viewpoint")],g.prototype,"writeViewpoint",null),g=i=(0,n._)([(0,v.$)("esri.webmap.Bookmark")],g);const w=g},81738:(e,t,o)=>{o.r(t),o.d(t,{default:()=>G});var i=o(35143),n=o(18690),a=o(63241),l=o(76460),r=o(46053),s=(o(81806),o(85842)),d=o(65256),u=o(67478),m=o(994),c=o(25329),k=o(91967);o(47249);let h=class extends k.A{constructor(e){super(e)}get editedBookmark(){const{bookmark:e}=this;return e?this._get("editedBookmark")||e.clone():null}get customUrl(){var e,t;return null!==(e=this.editedBookmark)&&void 0!==e&&null!==(e=e.thumbnail)&&void 0!==e&&e.isSecureUrl?null===(t=this.editedBookmark)||void 0===t||null===(t=t.thumbnail)||void 0===t?void 0:t.url:null}set customUrl(e){this._override("customUrl",e)}get screenshotUrl(){var e,t;return null!==(e=this.editedBookmark)&&void 0!==e&&null!==(e=e.thumbnail)&&void 0!==e&&e.isDataURI?null===(t=this.editedBookmark)||void 0===t||null===(t=t.thumbnail)||void 0===t?void 0:t.url:null}set screenshotUrl(e){this._override("screenshotUrl",e)}get state(){return this._get("state")}set state(e){this.validationState=void 0,this.loading=void 0,this._set("state",e)}get thumbnailState(){var e,t;return null!==(e=this.editedBookmark)&&void 0!==e&&null!==(e=e.thumbnail)&&void 0!==e&&e.url?null!==(t=this.editedBookmark)&&void 0!==t&&null!==(t=t.thumbnail)&&void 0!==t&&t.isSecureUrl?"url":"screenshot":"none"}set thumbnailState(e){this._overrideIfSome("thumbnailState",e)}};(0,i._)([(0,r.MZ)()],h.prototype,"bookmark",void 0),(0,i._)([(0,r.MZ)({readOnly:!0})],h.prototype,"editedBookmark",null),(0,i._)([(0,r.MZ)()],h.prototype,"customUrl",null),(0,i._)([(0,r.MZ)()],h.prototype,"screenshotUrl",null),(0,i._)([(0,r.MZ)()],h.prototype,"state",null),(0,i._)([(0,r.MZ)()],h.prototype,"thumbnailState",null),(0,i._)([(0,r.MZ)()],h.prototype,"validationState",void 0),(0,i._)([(0,r.MZ)()],h.prototype,"loading",void 0),h=(0,i._)([(0,s.$)("esri.widgets.Bookmarks.UserState")],h);const v=h;var p=o(48053),b=o(19276),_=o(50076),g=o(54099),w=o(21403),B=o(59909),f=o(79535);const E=b.A.ofType(B.A),y={width:128,height:128,format:"png"},S={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0,captureTimeExtent:!0},I={time:!0};let M=class extends((0,f.R)(g.A.EventedAccessor)){constructor(e){super(e),this.capabilities={...I},this.activeBookmark=null,this.view=null}destroy(){this.view=null,this._set("activeBookmark",null)}get abilities(){return(0,a.Lx)(l.A.getLogger(this),"abilities",{replacement:"capabilities",version:"4.27"}),this.capabilities}set abilities(e){(0,a.Lx)(l.A.getLogger(this),"abilities",{replacement:"capabilities",version:"4.27"}),this.capabilities=e}castAbilities(e){return{...I,...e}}castCapabilities(e){return{...I,...e}}get bookmarks(){var e,t;return null!==(e=null===(t=this.view)||void 0===t||null===(t=t.map)||void 0===t?void 0:t.bookmarks)&&void 0!==e?e:new E}set bookmarks(e){this._overrideIfSome("bookmarks",e)}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...S,...e})}get defaultCreateOptions(){return S}set defaultEditOptions(e){this._set("defaultEditOptions",{...S,...e})}get defaultEditOptions(){return S}get state(){const{view:e}=this;return e&&!e.ready?"loading":"ready"}async createBookmark(e){const{view:t,defaultCreateOptions:o,capabilities:i}=this;if(!t)throw new _.A("create-bookmark:invalid-view","Cannot create a bookmark without a view.");const{takeScreenshot:n,screenshotSettings:a,captureViewpoint:l,captureRotation:r,captureScale:s,captureTimeExtent:d}={...o,...e},u=n?await this._createThumbnail(a):void 0,m=i.time&&d&&null!=t.timeExtent?t.timeExtent.clone():void 0;return new B.A({...u&&{thumbnail:u},...d&&{timeExtent:m},...l&&{viewpoint:this._createViewpoint({view:t,captureScale:s,captureRotation:r})}})}async editBookmark(e,t){if(!e)return e;const{view:o,defaultEditOptions:i}=this;if(!o)throw new _.A("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");const{takeScreenshot:n,screenshotSettings:a,captureViewpoint:l,captureRotation:r,captureScale:s,captureTimeExtent:d}={...i,...t},u=n?await this._createThumbnail(a):void 0;return u&&(e.thumbnail=u),l&&(e.viewpoint=this._createViewpoint({view:o,captureScale:s,captureRotation:r})),d&&null!=o.timeExtent&&(e.timeExtent=o.timeExtent.clone()),this.emit("bookmark-edit",{bookmark:e}),e}goTo(e){const{capabilities:t,view:o}=this;if(!o)throw new _.A("go-to:invalid-view","Cannot go to a bookmark without a view");const i=null===e||void 0===e?void 0:e.viewpoint;if(!i)throw new _.A("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:e});this._set("activeBookmark",e);const n={target:i},a=this.callGoTo(n),l=null===e||void 0===e?void 0:e.timeExtent;return t.time&&l&&(o.timeExtent=l),this.emit("bookmark-select",{bookmark:e}),a.catch((()=>{})).then((()=>this._set("activeBookmark",null))),a}async _createThumbnail(e){const{view:t}=this;if(!t)throw new _.A("bookmark:invalid-view","Cannot create slide thumbnail without a view");const o=await t.takeScreenshot({...y,...e});return new m.o({url:o.dataUrl})}_createViewpoint(e){var t,o,i,n;let{view:a,captureRotation:l,captureScale:r}=e;const s=null===(t=a.viewpoint)||void 0===t?void 0:t.clone();return new p.A({targetGeometry:null===(o=a.extent)||void 0===o?void 0:o.clone(),rotation:null!==(i=l?null===s||void 0===s?void 0:s.rotation:null)&&void 0!==i?i:0,scale:null!==(n=r?null===s||void 0===s?void 0:s.scale:null)&&void 0!==n?n:0})}};(0,i._)([(0,r.MZ)()],M.prototype,"abilities",null),(0,i._)([(0,w.w)("abilities")],M.prototype,"castAbilities",null),(0,i._)([(0,r.MZ)()],M.prototype,"capabilities",void 0),(0,i._)([(0,w.w)("capabilities")],M.prototype,"castCapabilities",null),(0,i._)([(0,r.MZ)({readOnly:!0})],M.prototype,"activeBookmark",void 0),(0,i._)([(0,r.MZ)({type:E})],M.prototype,"bookmarks",null),(0,i._)([(0,r.MZ)()],M.prototype,"defaultCreateOptions",null),(0,i._)([(0,r.MZ)()],M.prototype,"defaultEditOptions",null),(0,i._)([(0,r.MZ)({readOnly:!0})],M.prototype,"state",null),(0,i._)([(0,r.MZ)()],M.prototype,"view",void 0),M=(0,i._)([(0,s.$)("esri.widgets.Bookmarks.BookmarksViewModel")],M);const C=M;let T=class extends k.A{constructor(){super(...arguments),this.addBookmarkButton=!1,this.closeButton=!1,this.collapseButton=!1,this.editBookmarkButton=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.thumbnail=!0,this.time=!0}get addBookmark(){return(0,a.Lx)(l.A.getLogger(this),"addBookmark",{replacement:"addBookmarkButton",version:"4.29",warnOnce:!0}),this.addBookmarkButton}set addBookmark(e){(0,a.Lx)(l.A.getLogger(this),"addBookmark",{replacement:"addBookmarkButton",version:"4.29",warnOnce:!0}),this.addBookmarkButton=e}};(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],T.prototype,"addBookmark",null),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],T.prototype,"addBookmarkButton",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],T.prototype,"closeButton",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],T.prototype,"collapseButton",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],T.prototype,"editBookmarkButton",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],T.prototype,"filter",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],T.prototype,"flow",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],T.prototype,"heading",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],T.prototype,"thumbnail",void 0),(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],T.prototype,"time",void 0),T=(0,i._)([(0,s.$)("esri.widgets.Bookmarks.BookmarksVisibleElements")],T);const x=T;var A=o(68897),Z=o(15062);const K="esri-bookmarks",U="".concat(K,"__authoring"),D="".concat(K,"__bookmark"),N={base:K,widgetIcon:Z.T.bookmark,noBookmarksHeader:"".concat(K,"__no-bookmarks-heading"),noBookmarksDescription:"".concat(K,"__no-bookmarks-description"),form:"".concat(K,"__form"),list:"".concat(K,"__list"),loader:"".concat(K,"__loader"),filterNoResults:"".concat(K,"__filter-no-results"),formContent:"".concat(K,"__form-content"),addBookmarkButton:"".concat(K,"__add-bookmark-button"),editBookmarkInput:"".concat(K,"__edit-bookmark-input"),addBookmarkInput:"".concat(K,"__add-bookmark-input"),dragEnabled:"".concat(K,"--drag-enabled"),bookmarkImage:"".concat(K,"__image"),bookmarkImageContainer:"".concat(D,"-image-container"),bookmarkContent:"".concat(D,"-content"),bookmarkContentLabel:"".concat(D,"-content-label"),authoring:U,authoringImageContainer:"".concat(U,"-image-container"),authoringRefreshThumbnailButton:"".concat(U,"-refresh-thumbnail-button")};var F=o(77666),L=o(98108),O=o(87540),R=(o(76099),o(63582)),P=o(12254),q=o(54761);let V=class extends c.A{constructor(e,t){super(e,t),this._addInputNode=null,this._editInputNode=null,this._urlEditInputNode=null,this._lastDragDetail=null,this._selectedDragBookmarkUid=null,this._editIncludeTimeExtent=void 0,this._userState=null,this._focusRootFlowItem=!1,this._focusAddFlowItem=!1,this._focusEditFlowItem=!1,this.disabled=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterText="",this.headingLevel=2,this.iconClass=N.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.viewModel=new C,this.visibleElements=new x,this._onCalciteListOrderChange=e=>{const{_lastDragDetail:t,bookmarks:o}=this,{toEl:i,fromEl:n,dragEl:a,newIndex:l}=e;if(!o.length)return;if(!n||!i||(null===t||void 0===t?void 0:t.newIndex)===l&&(null===t||void 0===t?void 0:t.dragEl)===a&&(null===t||void 0===t?void 0:t.toEl)===i&&(null===t||void 0===t?void 0:t.fromEl)===n)return;this._lastDragDetail=e;const r=Array.from(n.children).filter((e=>null===e||void 0===e?void 0:e.matches("calcite-list-item"))).map((e=>e.value));o.sort(((e,t)=>{const o=r.indexOf(e.uid),i=r.indexOf(t.uid);return o>i?1:o<i?-1:0}))}}normalizeCtorArgs(e){return null!=(null===e||void 0===e?void 0:e.editingEnabled)&&null!=e.visibleElements?{...e,visibleElements:new x({...e.visibleElements,addBookmarkButton:e.editingEnabled,editBookmarkButton:e.editingEnabled})}:e}loadDependencies(){return(0,F.W)({action:()=>Promise.all([o.e(39879),o.e(62785),o.e(48897),o.e(37918)]).then(o.bind(o,92111)),button:()=>Promise.all([o.e(39879),o.e(62785),o.e(95203),o.e(75151),o.e(11309)]).then(o.bind(o,11309)),"chip-group":()=>Promise.all([o.e(39879),o.e(70473)]).then(o.bind(o,70473)),chip:()=>Promise.all([o.e(39879),o.e(62785),o.e(28847)]).then(o.bind(o,28847)),fab:()=>Promise.all([o.e(39879),o.e(62785),o.e(95203),o.e(75151),o.e(62580)]).then(o.bind(o,62580)),flow:()=>o.e(14961).then(o.bind(o,14961)),"flow-item":()=>Promise.all([o.e(39879),o.e(62785),o.e(48347),o.e(60731),o.e(48897),o.e(53794),o.e(24706),o.e(46269),o.e(40661)]).then(o.bind(o,40661)),icon:()=>Promise.all([o.e(39879),o.e(95012)]).then(o.bind(o,95012)),input:()=>Promise.all([o.e(39879),o.e(62785),o.e(95203),o.e(79545),o.e(56685)]).then(o.bind(o,29625)),"input-message":()=>Promise.all([o.e(39879),o.e(61047)]).then(o.bind(o,61047)),label:()=>Promise.all([o.e(39879),o.e(65423)]).then(o.bind(o,65423)),list:()=>Promise.all([o.e(39879),o.e(62785),o.e(95203),o.e(13859),o.e(79545),o.e(58838)]).then(o.bind(o,58838)),"list-item":()=>Promise.all([o.e(39879),o.e(62785),o.e(48897),o.e(3732)]).then(o.bind(o,84661)),loader:()=>o.e(76454).then(o.bind(o,76454)),notice:()=>Promise.all([o.e(39879),o.e(62785),o.e(81985)]).then(o.bind(o,81985)),scrim:()=>Promise.all([o.e(39879),o.e(62785),o.e(3735)]).then(o.bind(o,3735)),switch:()=>Promise.all([o.e(39879),o.e(95203),o.e(97813)]).then(o.bind(o,97813)),table:()=>Promise.all([o.e(39879),o.e(62785),o.e(95203),o.e(75151),o.e(6890)]).then(o.bind(o,6890)),"table-cell":()=>Promise.all([o.e(39879),o.e(62785),o.e(53666)]).then(o.bind(o,31285)),"table-header":()=>Promise.all([o.e(39879),o.e(62785),o.e(29489),o.e(72635)]).then(o.bind(o,72635)),"table-row":()=>Promise.all([o.e(39879),o.e(62785),o.e(29489),o.e(75932)]).then(o.bind(o,75932))})}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultEditOptions(){return this.viewModel.defaultEditOptions}set defaultEditOptions(e){this.viewModel.defaultEditOptions=e}get bookmarks(){return this.viewModel.bookmarks}set bookmarks(e){this.viewModel.bookmarks=e}get editingEnabled(){return(0,a.Lx)(l.A.getLogger(this),"editingEnabled",{replacement:"dragEnabled, visibleElements.editBookmarkButton, visibleElements.addBookmarkButton",version:"4.29",warnOnce:!0}),this.dragEnabled&&this.visibleElements.editBookmarkButton&&this.visibleElements.addBookmarkButton}set editingEnabled(e){(0,a.Lx)(l.A.getLogger(this),"editingEnabled",{replacement:"dragEnabled, visibleElements.editBookmarkButton, visibleElements.addBookmarkButton",version:"4.29",warnOnce:!0}),this.dragEnabled=e,this.visibleElements.editBookmarkButton=e,this.visibleElements.addBookmarkButton=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}endAddBookmark(){this._userState=null}goTo(e){return this.viewModel.goTo(e)}render(){return(0,q.K)("div",{class:this.classes(N.base,L.D.widget,L.D.panel)},this._renderBookmarksContainer())}startAddBookmark(){this._userState=new v({state:"add"}),this._focusAddFlowItem=!0}_renderNoBookmarksContainer(e){const{messages:t,viewModel:{state:o}}=this;return e.length||"loading"===o?null:(0,q.K)("div",{class:L.D.empty,key:"no-bookmarks"},(0,q.K)("calcite-icon",{icon:"bookmark",scale:"l"}),(0,q.K)(O.D,{class:this.classes(L.D.heading,N.noBookmarksHeader),level:this.headingLevel},null===t||void 0===t?void 0:t.noBookmarksHeading),(0,q.K)("p",{class:N.noBookmarksDescription},t.noBookmarksDescription))}_renderEditBookmarkFlowItems(){const{_userState:e}=this,t=null===e||void 0===e?void 0:e.editedBookmark;return t&&"edit"===(null===e||void 0===e?void 0:e.state)?this._renderEditingBookmark(t):[]}_renderBookmarkItems(e){return e?e.toArray().map((e=>this._renderBookmark(e))):[]}_handleCalciteListDragEnd(e){const{fromEl:t,dragEl:o,oldIndex:i}=e;t.insertBefore(o,t.children[i])}_renderBookmarksContainer(){const{viewModel:{state:e,bookmarks:t},dragEnabled:o,messages:i,disabled:a,filterPlaceholder:l,filterText:r,visible:s,headingLevel:d,visibleElements:{closeButton:u,collapseButton:m,filter:c,heading:k,flow:h}}=this,v=t.filter(n.Ru),p=v.length?(0,q.K)("calcite-list",{class:N.list,dragEnabled:o,filterEnabled:c,filterPlaceholder:l,filterText:r,group:"root-bookmarks",key:"bookmark-list",label:i.widgetLabel,selectionAppearance:"border",selectionMode:"none",onCalciteListDragEnd:e=>this._handleCalciteListDragEnd(e.detail),onCalciteListFilter:e=>{var t,o;return this.filterText=null!==(t=null===(o=e.target)||void 0===o?void 0:o.filterText)&&void 0!==t?t:""},onCalciteListOrderChange:e=>this._onCalciteListOrderChange(e.detail)},this._renderBookmarkItems(v),c?(0,q.K)("div",{class:N.filterNoResults,slot:"filter-no-results"},(0,q.K)("calcite-notice",{kind:"info",open:!0,width:"full"},(0,q.K)("div",{slot:"message"},i.noBookmarksHeading),";")):null):null,b=[(0,q.K)("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:u,closed:!s,collapsible:m,disabled:a,heading:k?i.widgetLabel:void 0,headingLevel:d,loading:"loading"===e,onCalciteFlowItemClose:()=>this.visible=!1},this._renderNoBookmarksContainer(v),p,this._renderAddBookmarkButton()),this._renderAddingBookmark(),this._renderEditBookmarkFlowItems()];return s?h?(0,q.K)("calcite-flow",{key:"root-flow"},b):b:null}_renderAddBookmarkButton(){var e;const{messages:t,_userState:o,disabled:i,viewModel:{view:n,state:a},visibleElements:{addBookmarkButton:l}}=this,r=null!==(e=null===o||void 0===o?void 0:o.loading)&&void 0!==e&&e;return n&&"loading"!==a&&l?(0,q.K)("calcite-fab",{appearance:"outline-fill",bind:this,class:N.addBookmarkButton,disabled:i||r,icon:"plus",key:"add-bookmark-item",kind:"neutral",loading:r,onclick:this.startAddBookmark,slot:"fab",text:t.addBookmark,textEnabled:!0,title:t.addBookmark,type:"button"}):null}_renderEditContainer(e){const{messagesCommon:t,visibleElements:{editBookmarkButton:o}}=this,i=this._getBookmarkTitle(e);return o?(0,q.K)("calcite-action",{appearance:"transparent",icon:"pencil",key:"edit-action",onclick:()=>this._showEditBookmarkForm(e),slot:"actions-end",text:"".concat(t.edit," ").concat(i),title:"".concat(t.edit," ").concat(i)}):null}_renderBookmarkImage(e,t){var o;return t?(0,q.K)("img",{alt:"",class:N.bookmarkImage,key:"bookmark-image",src:null===(o=e.thumbnail)||void 0===o?void 0:o.url}):null}_renderBookmarkTimeSwitch(e){var t;const{messages:o,viewModel:{view:i}}=this,{timeExtent:n}=e;return(null!==(t=null===i||void 0===i?void 0:i.timeExtent)&&void 0!==t?t:n)?(0,q.K)("calcite-label",{layout:"inline-space-between"},o.includeTimeExtent,(0,q.K)("calcite-switch",{checked:!!n,onCalciteSwitchChange:e=>{this._editIncludeTimeExtent=!!e.target.checked}})):null}_renderEditBookmarkTimeExtent(e){return this._editIncludeTimeExtent?this._renderBookmarkTimeExtent(e):null}_getTimeExtentStrings(e){const{visibleElements:t}=this,{timeExtent:o}=e;if(!o)return{};const{start:i,end:n}=o,a=null!=n&&(null==i||i.getTime()!==n.getTime()),l=i?this._formatDate(i):"",r=i&&t.time?this._formatTime(i):"";return a?{startDate:l,startTime:r,endDate:this._formatDate(n),endTime:t.time?this._formatTime(n):""}:{startDate:l,startTime:r}}_renderTimeExtentDescription(e){const{startDate:t,startTime:o,endDate:i,endTime:n}=this._getTimeExtentStrings(e);if(!t)return"";const a="".concat(t," ").concat(o);return i?"".concat(a," - ","".concat(i," ").concat(n)):a}_renderBookmarkTimeExtent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{messages:o}=this,{startDate:i,startTime:n,endDate:a,endTime:l}=this._getTimeExtentStrings(e),r=t?null:(0,q.K)("calcite-table-row",{slot:"table-header"},(0,q.K)("calcite-table-header",{heading:o.startDate}),a?(0,q.K)("calcite-table-header",{heading:o.endDate}):null);return i?(0,q.K)("calcite-table",{caption:o.timeExtent,scale:"s"},r,(0,q.K)("calcite-table-row",null,(0,q.K)("calcite-table-cell",null,i," ",n?[(0,q.K)("br",null),n]:null),a?(0,q.K)("calcite-table-cell",null,a,l?[(0,q.K)("br",null),l]:null):null)):null}_renderBookmarkActiveScrim(e,t){return this.viewModel.activeBookmark===e&&t?(0,q.K)("calcite-scrim",{key:"bookmark-active-scrim",loading:!0}):null}_renderBookmarkActiveLoader(e,t){return this.viewModel.activeBookmark!==e||t?null:(0,q.K)("calcite-loader",{class:N.loader,inline:!0,key:"bookmark-active-loader",label:this.messagesCommon.loading,scale:"m"})}_renderBookmarkImageIcon(e,t){return this.viewModel.activeBookmark===e||t?null:(0,q.K)("calcite-icon",{icon:"bookmark",key:"bookmark-icon",scale:"s"})}_renderBookmarkThumbnail(e){var t;const o=this.visibleElements.thumbnail&&!(null===(t=e.thumbnail)||void 0===t||!t.url);return(0,q.K)("div",{class:N.bookmarkImageContainer,slot:"content-start"},this._renderBookmarkActiveScrim(e,o),this._renderBookmarkImage(e,o),this._renderBookmarkActiveLoader(e,o),this._renderBookmarkImageIcon(e,o))}_focusSelectedDragEl(e,t){this._selectedDragBookmarkUid===t.uid&&requestAnimationFrame((()=>null===e||void 0===e?void 0:e.setFocus()))}_handleCalciteListItemDragHandleChange(e,t){e.stopPropagation();const o=e.target.dragSelected;this._selectedDragBookmarkUid=o?t.uid:null}_renderBookmark(e){return(0,q.K)("calcite-list-item",{afterCreate:t=>this._focusSelectedDragEl(t,e),afterUpdate:t=>this._focusSelectedDragEl(t,e),class:this.classes({[N.dragEnabled]:this.dragEnabled}),description:this._renderTimeExtentDescription(e),dragSelected:e.uid===this._selectedDragBookmarkUid,key:e.uid,label:this._getBookmarkTitle(e),value:e.uid,onCalciteListItemDragHandleChange:t=>this._handleCalciteListItemDragHandleChange(t,e),onCalciteListItemSelect:()=>this._goToBookmark(e)},this._renderBookmarkThumbnail(e),this._renderBookmarkContent(e),this._renderEditContainer(e))}_renderBookmarkContent(e){return(0,q.K)("div",{class:N.bookmarkContent,slot:"content"},(0,q.K)("span",{class:N.bookmarkContentLabel},this._getBookmarkTitle(e)),this._renderBookmarkTimeExtent(e,!0))}_renderEditingBookmarkName(e){const{messages:t,_userState:o}=this,i="name-required"===(null===o||void 0===o?void 0:o.validationState);return(0,q.K)("calcite-label",null,t.title,(0,q.K)("calcite-input",{afterCreate:this._storeEditInput,bind:this,class:N.editBookmarkInput,name:"bookmark-name",placeholder:t.titlePlaceholder,required:!0,type:"text",value:e.name}),i?(0,q.K)("calcite-input-message",{icon:"exclamation-mark-triangle",status:"invalid"},t.invalidTitle):null)}_renderEditingBookmarkActions(){const{messagesCommon:e,_userState:t}=this,o=null===t||void 0===t?void 0:t.bookmark;return[(0,q.K)("calcite-button",{appearance:"transparent",kind:"danger",onclick:()=>this._deleteBookmark(o),slot:"footer",type:"button",width:"full"},e.delete),(0,q.K)("calcite-button",{appearance:"outline",bind:this,onclick:this._closeEditBookmarkForm,slot:"footer",type:"button",width:"full"},e.cancel),(0,q.K)("calcite-button",{slot:"footer",type:"submit",width:"full"},e.save)]}_handleUrlEditInputChange(){var e,t;const{_userState:o,_urlEditInputNode:i}=this,n=null===i||void 0===i?void 0:i.value;if(null===o||void 0===o||!o.editedBookmark||!n)return;o.validationState=void 0,(null===(e=o.editedBookmark.thumbnail)||void 0===e?void 0:e.isDataURI)&&(o.screenshotUrl=null===(t=o.editedBookmark.thumbnail)||void 0===t?void 0:t.url);const a=new m.o({url:n});a.isSecureUrl&&(o.customUrl=n,o.editedBookmark.thumbnail=a)}_renderEditingTimeExtent(e){var t;const{capabilities:o,view:i}=this.viewModel,{timeExtent:n}=e;return o.time&&(null!==(t=null===i||void 0===i?void 0:i.timeExtent)&&void 0!==t?t:n)?(0,q.K)("div",{key:"edit-bookmark-time-container"},this._renderBookmarkTimeSwitch(e),this._renderEditBookmarkTimeExtent(e)):null}_renderEditingBookmarkImage(e){var t,o;const{_userState:i}=this,n=null===i||void 0===i?void 0:i.thumbnailState,a=null!==(t=e.thumbnail)&&void 0!==t&&t.isSecureUrl?"url"===n:null!==(o=e.thumbnail)&&void 0!==o&&o.isDataURI?"screenshot"===n:null;if(a)return this._renderBookmarkImage(e,a)}_renderEditingThumbnail(e){const{_userState:t,visibleElements:o}=this,i=null===t||void 0===t?void 0:t.thumbnailState;return o.thumbnail&&"none"!==i?(0,q.K)("div",{class:N.authoringImageContainer},this._renderEditingBookmarkImage(e)):null}_renderUpdateThumbnailButton(){const{visibleElements:e,messages:t,_userState:o}=this,i=null===o||void 0===o?void 0:o.thumbnailState;return e.thumbnail&&"screenshot"===i?(0,q.K)("calcite-button",{appearance:"outline",class:N.authoringRefreshThumbnailButton,iconStart:"refresh",key:"update-thumbnail",kind:"neutral",onclick:()=>{this._updateThumbnail()},width:"half"},t.updateThumbnail):null}_renderEditingBookmarkUrlInput(e){var t,o;const{messages:i,_userState:n}=this,a=null===(t=e.thumbnail)||void 0===t?void 0:t.url,l=null!==(o=e.thumbnail)&&void 0!==o&&o.isSecureUrl?a:void 0,r=a&&"absolute-url-required"===(null===n||void 0===n?void 0:n.validationState);return"url"===(null===n||void 0===n?void 0:n.thumbnailState)?(0,q.K)("calcite-label",{key:"thumbnail-url-input"},(0,q.K)("calcite-input",{afterCreate:this._storeUrlEditInput,bind:this,name:"bookmark-thumbnail-url",pattern:A.jR,placeholder:i?"https://<".concat(i.imageUrlPlaceholder,">"):void 0,required:!0,title:i.imageUrlTooltip,type:"text",value:l,onCalciteInputChange:this._handleUrlEditInputChange,onCalciteInputInput:this._handleUrlEditInputChange}),r?(0,q.K)("calcite-input-message",{icon:"exclamation-mark-triangle",status:"invalid"},i.invalidImageUrl):null):null}_renderThumbnailSelector(){const{visibleElements:e,messages:t,_userState:o}=this,i=null===o||void 0===o?void 0:o.thumbnailState;return e.thumbnail?(0,q.K)("calcite-label",{key:"thumbnail-chip-group"},t.thumbnail,(0,q.K)("calcite-chip-group",{label:t.thumbnail,selectionMode:"single-persist",onCalciteChipGroupSelect:e=>this._handleThumbnailTypeSelect(e.target.selectedItems[0].value)},(0,q.K)("calcite-chip",{selected:"screenshot"===i,value:"screenshot"},t.screenshot),(0,q.K)("calcite-chip",{selected:"url"===i,value:"url"},t.url),(0,q.K)("calcite-chip",{selected:"none"===i,value:"none"},t.none))):null}_renderEditingBookmark(e){const{disabled:t,messagesCommon:o,headingLevel:i}=this;return e?(0,q.K)("form",{bind:this,class:N.form,disabled:this.disabled,onsubmit:this._editBookmarkSubmit},(0,q.K)("calcite-flow-item",{afterCreate:this._focusEditFlowItemNode,afterUpdate:this._focusEditFlowItemNode,bind:this,disabled:t,heading:o.edit,headingLevel:i,key:"edit-bookmark-form",onCalciteFlowItemBack:e=>{e.preventDefault(),this._closeEditBookmarkForm()}},(0,q.K)("div",{class:N.formContent},(0,q.K)("div",{class:N.authoring},this._renderEditingBookmarkName(e),this._renderThumbnailSelector(),this._renderEditingThumbnail(e),this._renderEditingBookmarkUrlInput(e),this._renderUpdateThumbnailButton(),this._renderEditingTimeExtent(e))),this._renderEditingBookmarkActions())):null}_renderAddingBookmarkName(){const{_userState:e,messages:t}=this,o="name-required"===(null===e||void 0===e?void 0:e.validationState);return(0,q.K)("calcite-label",null,t.title,(0,q.K)("calcite-input",{afterCreate:this._storeAddInput,bind:this,class:N.addBookmarkInput,name:"bookmark-name",placeholder:t.titlePlaceholder,required:!0,type:"text",value:""}),o?(0,q.K)("calcite-input-message",{icon:"exclamation-mark-triangle",status:"invalid"},t.invalidTitle):null)}_renderAddingBookmarkActions(){const{messagesCommon:e}=this;return[(0,q.K)("calcite-button",{appearance:"outline",bind:this,onclick:this._endAddBookmark,slot:"footer",type:"button",width:"half"},e.cancel),(0,q.K)("calcite-button",{slot:"footer",type:"submit",width:"half"},e.add)]}_renderAddingBookmark(){const{disabled:e,messages:t,headingLevel:o,_userState:i}=this;return"add"===(null===i||void 0===i?void 0:i.state)?(0,q.K)("form",{bind:this,class:N.form,disabled:e,onsubmit:this._addBookmarkSubmitClick},(0,q.K)("calcite-flow-item",{afterCreate:this._focusAddFlowItemNode,afterUpdate:this._focusAddFlowItemNode,bind:this,disabled:e,heading:t.addBookmark,headingLevel:o,key:"add-bookmark-form",onCalciteFlowItemBack:e=>{e.preventDefault(),this._endAddBookmark()}},(0,q.K)("div",{class:N.formContent},this._renderAddingBookmarkName()),this._renderAddingBookmarkActions())):null}_getBookmarkTitle(e){return(null===e||void 0===e?void 0:e.name)||this.messagesCommon.untitled}_formatDate(e){var t,o;return e?(0,d.Yq)(e,{...(0,d.J2)("short-date"),timeZone:null!==(t=null===(o=this.viewModel.view)||void 0===o?void 0:o.timeZone)&&void 0!==t?t:u.qU}):""}_formatTime(e){var t,o;return e?(0,d.Yq)(e,{...(0,d.J2)("long-time"),timeZone:null!==(t=null===(o=this.viewModel.view)||void 0===o?void 0:o.timeZone)&&void 0!==t?t:u.qU}):""}_endAddBookmark(){this.endAddBookmark(),this._focusRootFlowItem=!0}_showEditBookmarkForm(e){e&&(this._editIncludeTimeExtent=!!e.timeExtent,this._userState=new v({bookmark:e,state:"edit"}),this._focusEditFlowItem=!0,this.viewModel.goTo(e))}async _createNewScreenshotUrl(){var e,t;return null!==(e=null===(t=(await this.viewModel.createBookmark()).thumbnail)||void 0===t?void 0:t.url)&&void 0!==e?e:null}_storeCurrentUrl(){var e,t,o;const{_userState:i}=this,n=null===i||void 0===i||null===(e=i.editedBookmark)||void 0===e||null===(e=e.thumbnail)||void 0===e?void 0:e.url;n&&(null!==i&&void 0!==i&&null!==(t=i.editedBookmark)&&void 0!==t&&null!==(t=t.thumbnail)&&void 0!==t&&t.isSecureUrl?i.customUrl=n:(null===i||void 0===i||null===(o=i.editedBookmark)||void 0===o||null===(o=o.thumbnail)||void 0===o?void 0:o.isDataURI)&&(i.screenshotUrl=n))}async _handleThumbnailTypeSelect(e){const{_userState:t}=this;if(!t)return;const{screenshotUrl:o,customUrl:i,editedBookmark:n}=t,a="screenshot"===e?null!==o&&void 0!==o?o:await this._createNewScreenshotUrl():"url"===e&&i?i:null;this._storeCurrentUrl(),n&&a&&(n.thumbnail=new m.o({url:a})),t.validationState=void 0,t.thumbnailState=e}_closeEditBookmarkForm(){this._userState=null,this._focusRootFlowItem=!0}_addBookmarkSubmitClick(e){e.preventDefault(),this._addBookmarkSubmit()}async _addBookmarkSubmit(){const{_addInputNode:e,_userState:t,viewModel:o,viewModel:{bookmarks:i}}=this;if(!t)return;const n=e?e.value.trim():null;if(!n)return void(t.validationState="name-required");t.loading=!0;const a=await o.createBookmark();a.name=n,i.add(a),this._endAddBookmark()}async _editBookmarkAndClose(e,t){const{viewModel:o,viewModel:{defaultEditOptions:i}}=this;await o.editBookmark(e,{...i,...t}),this._closeEditBookmarkForm()}_editBookmarkSubmit(e){e.preventDefault();const{_editInputNode:t,_userState:o,_editIncludeTimeExtent:i,_urlEditInputNode:n}=this;if(null===o||void 0===o||!o.bookmark||!o.editedBookmark)return;o.validationState=void 0,o.customUrl=void 0,o.screenshotUrl=void 0;const a=t&&t.value.trim();if(!a)return void(o.validationState="name-required");o.bookmark.name=a,o.bookmark.thumbnail=o.editedBookmark.thumbnail,i||(o.bookmark.timeExtent=null);const l=o.thumbnailState;if("url"===l&&n){const e=n.value,t=new m.o({url:e});if(!t.isSecureUrl)return void(o.validationState="absolute-url-required");o.bookmark.thumbnail=t}else"none"===l&&(o.bookmark.thumbnail=null);this._editBookmarkAndClose(o.bookmark,{takeScreenshot:!1,captureTimeExtent:i})}_storeEditInput(e){this._editInputNode=e}_storeAddInput(e){this._addInputNode=e}_storeUrlEditInput(e){this._urlEditInputNode=e}_deleteBookmark(e){this._closeEditBookmarkForm(),e&&this.viewModel.bookmarks.remove(e)}_goToBookmark(e){e&&(this.endAddBookmark(),this.viewModel.goTo(e))}async _updateThumbnail(){const{_userState:e,viewModel:t}=this;e&&(e.validationState=void 0,await t.editBookmark(e.editedBookmark,{takeScreenshot:!0,captureViewpoint:!1,captureRotation:!1,captureScale:!1,captureTimeExtent:!1}))}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,requestAnimationFrame((()=>null===e||void 0===e?void 0:e.setFocus())))}_focusEditFlowItemNode(e){this._focusEditFlowItem&&(this._focusEditFlowItem=!1,requestAnimationFrame((()=>null===e||void 0===e?void 0:e.setFocus())))}_focusAddFlowItemNode(e){this._focusAddFlowItem&&(this._focusAddFlowItem=!1,requestAnimationFrame((()=>null===e||void 0===e?void 0:e.setFocus())))}};(0,i._)([(0,r.MZ)()],V.prototype,"_editIncludeTimeExtent",void 0),(0,i._)([(0,r.MZ)({type:v})],V.prototype,"_userState",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"_focusRootFlowItem",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"_focusAddFlowItem",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"_focusEditFlowItem",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"defaultCreateOptions",null),(0,i._)([(0,r.MZ)()],V.prototype,"defaultEditOptions",null),(0,i._)([(0,r.MZ)()],V.prototype,"bookmarks",null),(0,i._)([(0,r.MZ)()],V.prototype,"disabled",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"dragEnabled",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"editingEnabled",null),(0,i._)([(0,r.MZ)()],V.prototype,"filterPlaceholder",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"filterText",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"headingLevel",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"goToOverride",null),(0,i._)([(0,r.MZ)()],V.prototype,"iconClass",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"icon",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"label",null),(0,i._)([(0,r.MZ)(),(0,R.G)("esri/widgets/Bookmarks/t9n/Bookmarks")],V.prototype,"messages",void 0),(0,i._)([(0,r.MZ)(),(0,R.G)("esri/t9n/common")],V.prototype,"messagesCommon",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"uiStrings",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"view",null),(0,i._)([(0,r.MZ)({type:C}),(0,P.U)(["select-bookmark","bookmark-edit","bookmark-select"])],V.prototype,"viewModel",void 0),(0,i._)([(0,r.MZ)({type:x,nonNullable:!0})],V.prototype,"visibleElements",void 0),(0,i._)([(0,r.MZ)()],V.prototype,"endAddBookmark",null),(0,i._)([(0,r.MZ)()],V.prototype,"startAddBookmark",null),V=(0,i._)([(0,s.$)("esri.widgets.Bookmarks")],V);const G=V},68897:(e,t,o)=>{o.d(t,{jR:()=>i,z3:()=>n,zL:()=>a});const i="https://.*";function n(e){return!!e&&/^https:\/\/.*/i.test(e)}function a(e){return!!e&&/data:([-\w]+\/[-+\w.]+)?(;?\w+=[-\w]+)*(;base64)?,.*/gu.test(e)}},12254:(e,t,o)=>{function i(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const o=t._delegatedEventNames,i=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);o.push(...i)}}o.d(t,{U:()=>i})}}]);
//# sourceMappingURL=81738.53bf6886.chunk.js.map