"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[56878],{70836:(e,t,r)=>{r.d(t,{s:()=>W});var i=r(69539),n=r(59784),s=(r(81806),r(54901)),o=r(20664),a=r(9392),l=r(14487),c=r(12482),u=r(75655),d=r(68134),h=r(76931),p=r(19555),_=r(72745),m=r(43047),g=r(28608),f=r(18117),v=r(85746),R=r(33169),O=r(62577),S=r(45463),y=r(442),D=r(66470),x=r(425);class b extends v.X{constructor(e){super(e),this._location=(0,a.vt)(),this._direction=(0,a.fA)(1,0,0),this._width=1,this._offset=1,this._length=18,this._color=(0,g.fA)(1,0,1,1),this._renderOccluded=S.m$.OccludeAndTransparent,this.applyProperties(e)}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:e=>this._destroyObject3DResources(e),recreateGeometry:(e,t)=>this._recreateObject3DGeometry(e,t),cameraChanged:()=>this._updateGeometry()}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:e=>this._destroyDrapedResources(e),recreateGeometry:e=>this._recreateDrapedGeometry(e)}}get location(){return this._location}set location(e){(0,o.j)(this._location,e)||((0,o.c)(this._location,e),this._updateGeometry())}get direction(){return this._direction}set direction(e){(0,o.j)(this._direction,e)||((0,o.c)(this._direction,e),this._updateGeometry())}setDirectionFromPoints(e,t){(0,o.n)(this._direction,(0,o.f)(this._direction,t,e)),this._updateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get offset(){return this._offset}set offset(e){e!==this._offset&&(this._offset=e,this._updateGeometry())}get length(){return this._length}set length(e){e!==this._length&&(this._length=e,this._updateGeometry())}get color(){return this._color}set color(e){(0,m.a)(e,this._color)||((0,m.c)(this._color,e),this._updateMaterial())}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}_createObject3DResources(e){const t=new x.W(this.materialParameters),r=new Array;return this._createObject3DGeometry(t,e,r),{material:t,geometries:r,forEach:e=>{e(t),r.forEach(e)}}}_destroyObject3DResources(e){e.geometries.length=0}_recreateObject3DGeometry(e,t){e.geometries.length=0,this._createObject3DGeometry(e.material,t,e.geometries)}_createObject3DGeometry(e,t,r){const[i,n]=this._createGeometries(e);t.addGeometry(i),t.addGeometry(n),r.push(i),r.push(n),this._updateVerticesObject3D(t)}_createDrapedResources(){const e=new x.W(this.materialParameters),t=(0,d.watch)((()=>this.view.state.contentPixelRatio),(()=>{this.drapedResources.recreateGeometry()}));return{material:e,geometries:this._createDrapedGeometry(e),pixelRatioHandle:t}}_destroyDrapedResources(e){e.pixelRatioHandle.remove(),e.geometries=[]}_recreateDrapedGeometry(e){e.geometries=this._createDrapedGeometry(e.material)}_createDrapedGeometry(e){const t=this._createGeometries(e);return this._updateVerticesDraped(t),t.map((e=>new y.$(e)))}_createGeometries(e){return[(0,O.Z8)(e,[(0,a.vt)(),(0,a.vt)()]),(0,O.Z8)(e,[(0,a.vt)(),(0,a.vt)()])]}_updateMaterial(){var e,t;const{materialParameters:r}=this;null!==(e=this.object3dResources.resources)&&void 0!==e&&e.material.setParameters(r),null===(t=this.drapedResources.resources)||void 0===t||t.material.setParameters(r)}get materialParameters(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateGeometry(){if(this.isDraped)this.drapedResources.recreateGeometry();else{const e=this.object3dResources.object;e&&this._updateVerticesObject3D(e)}}_updateVerticesObject3D(e){const t=this.view.state.camera;t.projectToScreen(this.location,G),(0,o.g)(w,this.location,this.direction),t.projectToScreen(w,C),(0,p.S8)(C,(0,p.Re)(C,C,G)),this._updateVertexAttributesObject3D(t,e,0,G,C,1),this._updateVertexAttributesObject3D(t,e,1,G,C,-1)}_updateVertexAttributesObject3D(e,t,r,i,n,s){var o;const a=t.geometries[r],l=null===(o=a.getMutableAttribute(D.r.POSITION))||void 0===o?void 0:o.data;if(!l)return;const{start:c,end:u}=this._computeStartEnd(n,i,s,this.offset,this.width,this.length);e.unprojectFromScreen((0,h.PR)(c),w),l[0]=w[0],l[1]=w[1],l[2]=w[2],e.unprojectFromScreen((0,h.PR)(u),w),l[3]=w[0],l[4]=w[1],l[5]=w[2],t.geometryVertexAttributeUpdated(a,D.r.POSITION)}_updateVerticesDraped(e){const{view:{basemapTerrain:{overlayManager:t},state:{contentPixelRatio:r}}}=this,{location:i,width:n,length:s,offset:o}=this,a=A;a.spatialReference=t.renderer.spatialReference,a.x=i[0],a.y=i[1];const l=this.view.overlayPixelSizeInMapUnits(a)*r,c=n*l,u=s*l,d=o*l;this._updateVertexAttributesDraped(e[0],c,u,d,-1),this._updateVertexAttributesDraped(e[1],c,u,d,1)}_updateVertexAttributesDraped(e,t,r,i,n){var s;const o=null===(s=e.getMutableAttribute(D.r.POSITION))||void 0===s?void 0:s.data;if(!o)return;const{location:a,direction:l}=this,{start:c,end:u}=this._computeStartEnd(l,a,n,i,t,r);o[0]=c[0],o[1]=c[1],o[2]=R.bi,o[3]=u[0],o[4]=u[1],o[5]=R.bi,e.invalidateBoundingInfo()}_computeStartEnd(e,t,r,i,n,s){const o=(0,p.hs)(z,(0,p.hZ)(z,e[1]*r,e[0]*-r),i+n/2),a=(0,p.WQ)(E,(0,p.WQ)(E,(0,p.WQ)(E,t,(0,p.hs)(E,e,s/2)),o),o);return{start:a,end:(0,p.WQ)(P,a,(0,p.hs)(P,e,-s))}}}const w=(0,a.vt)(),z=(0,_.vt)(),E=(0,_.vt)(),P=(0,_.vt)(),G=(0,h.gs)(),C=(0,h.gs)(),A=(0,f.T)(0,0,void 0,null);var M=r(83574),T=r(47996),j=r(57662),H=r(23862),I=r(63078),q=r(99791),N=r(70330),F=r(14727),U=r(23543),V=r(17072);class W extends F.b{sortUniqueHints(e){return e.sort(((e,t)=>(t instanceof U.c?t.length:0)-(e instanceof U.c?e.length:0)))}visualizeIntersectionPoint(e,t){const{spatialReference:r,view:i}=t,n=Q(t);return(0,s.DQ)(new M.l({view:i,primitive:"circle",geometry:(0,H.io)(e.intersectionPoint,r),elevationInfo:e.isDraped?c.Tq:c.qt,size:20,outlineSize:2,color:n.intersectionPointColor,outlineColor:n.intersectionPointOutlineColor,pixelSnappingEnabled:!1,isDecoration:!0,attached:!0}))}visualizePoint(e,t){const{view:r,spatialReference:i}=t,n=Q(t),o=k(e.point,e.domain,t);return(0,s.DQ)(new M.l({view:r,primitive:"circle",geometry:(0,H.io)(o,i),elevationInfo:$(e,t),size:20,outlineSize:2,color:n.pointColor,outlineColor:n.pointOutlineColor,pixelSnappingEnabled:!1,isDecoration:!0,attached:!0}))}visualizeLine(e,t){const{view:r,spatialReference:i}=t,n=Q(t),o=k(e.lineStart,e.domain,t),a=k(e.lineEnd,e.domain,t);return(0,s.DQ)(this._createLineSegmentHint(e.type,o,a,i,$(e,t),r,n,e.isDraped,e.fadeLeft,e.fadeRight))}visualizeParallelSign(e,t){const{view:r,spatialReference:i}=t,n=Q(t),{isDraped:a}=e,l=$(e,t),c=k(e.lineStart,e.domain,t),u=k(e.lineEnd,e.domain,t),d=Z(c,i,l,r,a),h=Z(u,i,l,r,a),p=(0,o.m)(h,d,h,.5),_=new b({view:r,attached:!1,offset:I.N.parallelLineHintOffset,length:I.N.parallelLineHintLength,width:I.N.parallelLineHintWidth,color:n.parallelSignColor,location:p,renderOccluded:a?S.m$.OccludeAndTransparent:S.m$.Opaque,isDraped:a,renderGroup:j.O7.SnappingHint,isDecoration:!0});return _.setDirectionFromPoints(d,p),_.attached=!0,(0,s.DQ)(_)}visualizeRightAngleQuad(e,t){const{view:r,spatialReference:i}=t,n=Q(t),o=$(e,t),{isDraped:a}=e,l=k(e.previousVertex,e.domain,t),c=k(e.centerVertex,e.domain,t),u=k(e.nextVertex,e.domain,t),d=Z(l,i,o,r,a),h=Z(c,i,o,r,a),p=Z(u,i,o,r,a);return(0,s.DQ)(new T.n({view:r,attached:!0,color:a?n.rightAngleColorDraped:n.rightAngleColor,renderOccluded:a?S.m$.OccludeAndTransparent:S.m$.Transparent,outlineRenderOccluded:a?S.m$.OccludeAndTransparent:S.m$.Opaque,outlineColor:n.rightAngleOutlineColor,outlineSize:I.N.rightAngleHintOutlineSize,size:I.N.rightAngleHintSize,isDraped:a,geometry:{previous:d,center:h,next:p},renderGroup:j.O7.SnappingHint,isDecoration:!0}))}_createLineSegmentHint(e,t,r,i,n,s,o){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];const d=Z(t,i,n,s,a),h=Z(r,i,n,s,a),p=new u.U({view:s,extensionType:u.A.FADED,start:d,end:h,isDraped:a,color:o.lineColor,renderOccluded:a?S.m$.OccludeAndTransparent:S.m$.Opaque,renderGroup:j.O7.SnappingHint,isDecoration:!0});switch(e){case N.H3.TARGET:p.width=I.N.lineHintWidthTarget,p.fadedExtensions={start:0,end:I.N.lineHintFadedExtensions};break;case N.H3.REFERENCE_EXTENSION:p.width=I.N.lineHintWidthReference,p.fadedExtensions={start:0,end:0};break;case N.H3.REFERENCE:p.width=I.N.lineHintWidthReference,p.fadedExtensions={start:l?I.N.lineHintFadedExtensions:0,end:c?I.N.lineHintFadedExtensions:0}}return p.attached=!0,p}}function Q(e){const{effectiveTheme:t}=e.view,r=i.A.toUnitRGBA(t.accentColor),s=[0,0,0,0];return{intersectionPointColor:s,intersectionPointOutlineColor:r,pointColor:s,pointOutlineColor:r,lineColor:r,lineOutlineColor:void 0,parallelSignColor:r,rightAngleColor:r,rightAngleColorDraped:i.A.toUnitRGBA((0,n._L)(t.accentColor,.5)),rightAngleOutlineColor:r}}function k(e,t,r){const i=L(t,r);return null==i?e:(0,H.vt)(e[0],e[1],i)}function $(e,t){return null!=L(e.domain,t)?t.selfSnappingZ.elevationInfo:e.isDraped?c.Tq:c.qt}function L(e,t){let{selfSnappingZ:r}=t;return e===q.n.SELF&&null!=r?r.value:null}function Z(e,t,r,i,n){const s=(0,a.vt)();if(n){const r=i.basemapTerrain.overlayManager.renderer.spatialReference;(0,l.F)(e,t,s,r)}else(0,V.XG)(e,t,r,i,s);return s}},7947:(e,t,r)=>{r.d(t,{AA:()=>O,OW:()=>b,Og:()=>i,PW:()=>D,U0:()=>S,gw:()=>x,iv:()=>w,mg:()=>z,xk:()=>P,z7:()=>E});r(35238);var i,n,s=r(76931),o=r(20664),a=r(9392),l=r(9624),c=r(13927),u=r(95925),d=r(96190),h=r(75762),p=r(12482),_=r(37431),m=r(29808),g=r(3112),f=r(97974),v=r(17046),R=r(13904);function O(e,t){return y(e,(()=>t))}function S(e){return y(e,(e=>e.plane))}function y(e,t){const r=(0,a.vt)(),i=(0,a.vt)();let n=!1;return o=>{const a=t(o);if("start"===o.action){const t=(0,s.WA)(o.screenStart,(0,s.PR)(h.oG.get())),i=(0,_.Z4)(e.state.camera,t,A);null!=i&&(n=(0,c.Ui)(a,i,r))}if(!n)return null;const l=(0,s.WA)(o.screenEnd,(0,s.PR)(h.oG.get())),u=(0,_.Z4)(e.state.camera,l,A);return null==u?null:(0,c.Ui)(a,u,i)?{...o,renderStart:r,renderEnd:i,plane:a,ray:u}:null}}function D(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=null;return a=>{if("start"===a.action&&(o=e.sceneIntersectionHelper.intersectElevationFromScreen((0,s.gs)(a.screenStart.x,a.screenStart.y),t,r,n),null!=o&&null!=i&&!(0,l.projectPoint)(o,o,i)))return null;if(null==o)return null;const c=e.sceneIntersectionHelper.intersectElevationFromScreen((0,s.gs)(a.screenEnd.x,a.screenEnd.y),t,r,n);return null==c||null!=i&&!(0,l.projectPoint)(c,c,i)?null:{...a,mapStart:o,mapEnd:c}}}(e,r,(0,p.id)(t,e,r),i,n)}function x(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return D(e,r,(0,p.bh)(t),i,n)}function b(e,t,r,i){const n=t.toMap(e.screenStart,{include:[r]});return null!=n?x(t,r,n,i):null}function w(e,t,r){let i=null;const n=new v.rh;return n.next(O(e,function(e,t){const r=G,i=C,n=(0,c.vt)();e.renderCoordsHelper.worldUpAtPosition(t,r);const s=(0,o.b)((0,c.Qj)(n),r,(0,o.f)(i,t,e.state.camera.eye));return(0,o.b)(s,s,r),(0,c.O_)(t,s,n)}(e,t))).next(function(e,t){const r=(0,a.vt)(),i=(0,o.l)(t);e.renderCoordsHelper.worldUpAtPosition(t,r);const n=(0,a.vt)(),s=(0,a.vt)(),l=n=>((0,o.f)(n,n,t),(0,d._I)(r,n,n),"global"===e.viewingMode&&(0,o.l)(n)*Math.sign((0,o.k)(r,n))<.001-i&&(0,o.f)(n,(0,o.h)(n,r,.001),t),(0,o.g)(n,n,t),n);return e=>(e.renderStart=l((0,o.c)(n,e.renderStart)),e.renderEnd=l((0,o.c)(s,e.renderEnd)),e)}(e,t)).next(z(e,r)).next((e=>{e.mapEnd.x=e.mapStart.x,e.mapEnd.y=e.mapStart.y,i=e})),e=>(i=null,n.execute(e),i)}function z(e,t){const r=e.renderCoordsHelper;return e=>{const i=r.fromRenderCoords(e.renderStart,new R.A({spatialReference:t})),n=r.fromRenderCoords(e.renderEnd,new R.A({spatialReference:t}));return null!=i&&null!=n?{...e,mapStart:i,mapEnd:n}:null}}function E(e){let t=null;return r=>{switch(r.action){case"start":t=e.disableDisplay();break;case"end":case"cancel":null!=t&&(t.remove(),t=null)}return r}}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=(0,m.hz)(e.state.viewingMode);r.options.selectionMode=!0,r.options.store=g.oH.MIN,r.options.hud=!1;const n=(0,s.gs)(),o={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},l=(0,a.vt)(),c=null!==t&&void 0!==t?t:e.spatialReference,u=t=>{e.map.ground&&e.map.ground.opacity<1?o.exclude.add(f.fo):o.exclude.delete(f.fo),e.sceneIntersectionHelper.intersectIntersectorScreen((0,s.WA)(t,n),r,o);const a=r.results.min;let u;if(a.getIntersectionPoint(l))u=a.intersector===g.dz.TERRAIN?i.GROUND:i.OTHER;else{if(!r.results.ground.getIntersectionPoint(l))return null;u=i.GROUND}return{location:e.renderCoordsHelper.fromRenderCoords(l,new R.A({spatialReference:c})),surfaceType:u}};let d;return e=>{if("start"===e.action){const t=u(e.screenStart);d=null!=t?t.location:null}if(null==d)return null;const t=u(e.screenEnd);return null!=(null===t||void 0===t?void 0:t.location)?{...e,mapStart:d,mapEnd:t.location,surfaceType:t.surfaceType}:null}}(n=i||(i={}))[n.GROUND=0]="GROUND",n[n.OTHER=1]="OTHER";const G=(0,a.vt)(),C=(0,a.vt)(),A=(0,u.vt)()},83574:(e,t,r)=>{r.d(t,{l:()=>v});var i=r(15941),n=r(20664),s=r(9392),o=r(43047),a=r(55855),l=r(14487),c=r(42294),u=r(75762),d=r(32314),h=r(67425),p=r(49296),_=r(72900),m=r(62577),g=r(66470),f=r(84248);class v extends d.X{constructor(e){super(e),this._material=null,this._texture=null,this._geometry=null,this._size=3,this._color=(0,a.fA)(1,0,1,1),this._pixelSnappingEnabled=!0,this._primitive="square",this._outlineSize=1,this._outlineColor=(0,a.fA)(1,1,1,1),this._elevationInfo=null,this.applyProperties(e)}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get size(){return this._size}set size(e){if(e!==this._size){const t=this._preferredTextureSize;this._size=e,t<this._preferredTextureSize?this.recreate():this._updateSizeAttribute()}}get color(){return this._color}set color(e){(0,o.a)(e,this._color)||((0,o.c)(this._color,e),this._updateMaterial())}get pixelSnappingEnabled(){return this._pixelSnappingEnabled}set pixelSnappingEnabled(e){this._pixelSnappingEnabled!==e&&(this._pixelSnappingEnabled=e,this._updateMaterial())}get primitive(){return this._primitive}set primitive(e){this._primitive!==e&&(this._primitive=e,this.recreate())}get outlineSize(){return this._outlineSize}set outlineSize(e){e!==this._outlineSize&&(this._outlineSize=e,this._updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,o.a)(e,this._outlineColor)||((0,o.c)(this._outlineColor,e),this._updateMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}_updateMaterial(){this._material&&this._material.setParameters(this._materialParameters)}_updateSizeAttribute(){const e=this.object;if(null==e)return;const t=e.geometries[0];if(null==t)return;const r=t.getMutableAttribute(g.r.SIZE).data,i=this._geometrySize;r[0]=i,r[1]=i,e.geometryVertexAttributeUpdated(e.geometries[0],g.r.SIZE)}get _materialParameters(){var e;return{color:this._color,textureIsSignedDistanceField:!0,sampleSignedDistanceFieldTexelCenter:(0,_.ny)(this._primitive),distanceFieldBoundingBox:O,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:null===(e=this._texture)||void 0===e?void 0:e.id,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled,isDecoration:this.isDecoration}}get _geometrySize(){return this._size/R}createExternalResources(){this._texture=(0,_.sZ)(this._primitive,this._preferredTextureSize),this._material=new f.R(this._materialParameters);const e=this.view._stage;this._texture.load(e.renderView.renderingContext),e.add(this._texture)}destroyExternalResources(){this._texture&&(this.view._stage.remove(this._texture),this._texture.dispose(),this._texture=null),this._material=null}createGeometries(e){const t=this._createRenderGeometry();null!=t&&e.addGeometry(t)}forEachExternalMaterial(e){this._material&&e(this._material)}get _preferredTextureSize(){return(0,i.qE)(2*this._geometrySize,16,128)}calculateMapBounds(e){var t;const r=null===(t=this.object)||void 0===t?void 0:t.geometries[0];if(!r)return!1;const i=r.attributes.get(g.r.POSITION).data;return(0,l.F)(i,this.view.renderCoordsHelper.spatialReference,S,this.view.spatialReference),(0,c.Hq)(e,S),!0}_createRenderGeometry(){const{geometry:e,_material:t}=this;if(null==e||null==t)return null;const{renderCoordsHelper:r,elevationProvider:i}=this.view,s=(0,h.nG)(e,i,p.F.fromElevationInfo(this.elevationInfo),r),o=(0,n.s)(u.rq.get(),e.x,e.y,s),a=u.rq.get();(0,l.F)(o,e.spatialReference,a,r.spatialReference);const c=this._geometrySize;return(0,m.DJ)(t,null,a,null,[c,c],[0,0,0,1])}}const R=_.CN,O=[R/2,R/2,1-R/2,1-R/2],S=(0,s.vt)()},47996:(e,t,r)=>{r.d(t,{n:()=>y});var i=r(68134),n=r(34761),s=r(13191),o=r(20664),a=r(9392),l=r(43047),c=r(55855),u=r(75762),d=r(18117),h=r(85746),p=r(33169),_=r(50468),m=r(51799),g=r(62577),f=r(45463),v=r(442),R=r(66470),O=r(76956),S=r(425);class y extends h.X{constructor(e){super(e),this._maxSize=0,this._position=(0,a.vt)(),this._up=(0,a.vt)(),this._right=(0,a.vt)(),this._renderOccluded=f.m$.OccludeAndTransparent,this._color=(0,c.fA)(1,0,0,1),this._outlineColor=(0,c.fA)(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=f.m$.Opaque,this.applyProperties(e)}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:()=>{},cameraChanged:()=>this._updateTransformObject3D()}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:e=>this._destroyDrapedResources(e)}}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){(0,l.c)(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,l.c)(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry(e){let{previous:t,center:r,next:i}=e;this._maxSize=Math.min((0,o.q)(r,t),(0,o.q)(r,i))/3,(0,o.n)(this._up,(0,o.f)(this._up,t,r)),(0,o.n)(this._right,(0,o.f)(this._right,i,r)),(0,o.c)(this._position,r),this.recreateGeometry()}_createObject3DResources(e){const t=new O.v(this._quadMaterialParameters),r=0===this._outlineSize?void 0:new S.W(this._outlineMaterialParameters);return this._createObject3DGeometries(e,t,r),{quadMaterial:t,outlineMaterial:r,forEach:e=>{e(t),r&&e(r)}}}_createObject3DGeometries(e,t,r){if((0,o.j)(this._up,a.uY)&&(0,o.j)(this._right,a.uY))return;const i=this._createGeometries(t,r);for(const n of i)e.addGeometry(n);this._updateTransformObject3D(e)}_createDrapedResources(){const e=new O.v(this._quadMaterialParameters),t=0===this._outlineSize?void 0:new S.W(this._outlineMaterialParameters),r=this._createGeometries(e,t).map((e=>new v.$(e)));return this._setTransformDraped(r),{quadMaterial:e,outlineMaterial:t,geometries:r,pixelRatioHandle:(0,i.watch)((()=>this.view.state.contentPixelRatio),(()=>{this.drapedResources.recreateGeometry()}))}}_destroyDrapedResources(e){e.pixelRatioHandle.remove(),e.geometries=[]}_createGeometries(e,t){const{up:r,right:i,corner:n}=this._getVertices(),s=this._quadGeometryData(r,i,n,e);return t?[s,(0,g.Z8)(t,[r,n,i])]:[s]}_getVertices(){let e=this._up,t=this._right;const r=(0,o.g)(u.rq.get(),e,t);return this.isDraped&&(e=(0,o.c)(u.rq.get(),e),t=(0,o.c)(u.rq.get(),t),e[2]=0,t[2]=0,r[2]=0),{up:e,right:t,corner:r}}_updateTransform(){this.isDraped?this.drapedResources.recreateGeometry():this._updateTransformObject3D()}_updateTransformObject3D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.object3dResources.object;if(!e)return;const t=this.view.state.camera,r=this._size*t.computeScreenPixelSizeAt(this._position),i=Math.min(this._maxSize,r);(0,n.kN)(D,this._position),(0,n.hs)(D,D,[i,i,i]),e.transformation=D}_setTransformDraped(e){if(0===e.length)return;const{view:{basemapTerrain:{overlayManager:t},state:{contentPixelRatio:r}}}=this,{_position:i,_size:s}=this,a=(0,o.c)(u.rq.get(),i);a[2]=p.bi;const l=x;l.spatialReference=t.renderer.spatialReference,l.x=a[0],l.y=a[1];const c=s*(this.view.overlayPixelSizeInMapUnits(l)*r),d=Math.min(this._maxSize,c);(0,n.kN)(D,a),(0,n.hs)(D,D,[d,d,1]);for(const n of e)n.transformation=D}_quadGeometryData(e,t,r,i){return new m.V(i,[[R.r.POSITION,new _.n([0,0,0,...t,...e,...r],[0,1,2,1,2,3],3,!0)]])}get _quadMaterialParameters(){return{color:this._color,forceTransparentMode:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateQuadMaterial(){var e,t;null!==(e=this.object3dResources.resources)&&void 0!==e&&e.quadMaterial.setParameters(this._quadMaterialParameters),null===(t=this.drapedResources.resources)||void 0===t||t.quadMaterial.setParameters(this._quadMaterialParameters)}get _outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded,isDecoration:this.isDecoration}}_updateOutlineMaterial(){var e,t;null!==(e=this.object3dResources.resources)&&void 0!==e&&null!==(e=e.outlineMaterial)&&void 0!==e&&e.setParameters(this._outlineMaterialParameters),null===(t=this.drapedResources.resources)||void 0===t||null===(t=t.outlineMaterial)||void 0===t||t.setParameters(this._outlineMaterialParameters)}}const D=(0,s.vt)(),x=(0,d.T)(0,0,void 0,null)},14727:(e,t,r)=>{r.d(t,{b:()=>c});var i=r(54901),n=r(30484),s=r(23543),o=r(20578),a=r(23241),l=r(56572);class c{draw(e,t){const r=this._getUniqueHints(e),c=this.sortUniqueHints(r),u=[];for(const i of c)i instanceof n.v&&u.push(this.visualizeIntersectionPoint(i,t)),i instanceof s.c&&u.push(this.visualizeLine(i,t)),i instanceof o.r&&u.push(this.visualizeParallelSign(i,t)),i instanceof l.l&&u.push(this.visualizeRightAngleQuad(i,t)),i instanceof a._&&u.push(this.visualizePoint(i,t));return(0,i.vE)(u)}sortUniqueHints(e){return e}_getUniqueHints(e){const t=[];for(const r of e){let e=!0;for(const i of t)if(r.equals(i)){e=!1;break}e&&t.push(r)}return t}}},23241:(e,t,r)=>{r.d(t,{_:()=>s});var i=r(20664),n=r(64753);class s extends n.m{constructor(e,t,r){super(t,r),this.point=e}equals(e){return e instanceof s&&(0,i.j)(this.point,e.point)}}}}]);
//# sourceMappingURL=56878.48f3676e.chunk.js.map