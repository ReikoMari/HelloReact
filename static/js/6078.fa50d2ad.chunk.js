"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[6078,58289,80528,10290],{84397:(e,t,r)=>{r.r(t),r.d(t,{default:()=>te});var i=r(35143),o=r(3825),n=r(69098),s=r(19276),a=r(50076),l=r(77717),u=r(50346),d=r(90534),c=r(46053),p=(r(81806),r(76460)),y=(r(47249),r(85842)),h=r(25515),f=r(54901),m=r(53521),v=r(87663),w=r(65624),g=r(5682),b=r(95363),_=r(62487),M=r(51162),I=r(65308),j=r(70652),A=r(72003);class x{constructor(e,t){this.objectId=e,this.itemSource=t,this.count=0,this.layer=null,this.sortValue=void 0}}const F=new m.q(20,(e=>e.destroy()));let S=class extends((0,g.j)((0,w.d)((0,l.P)(h.A)))){constructor(e){super(e),this._oidToReference=new Map,this._layerToReference=new Map,this._portals=new Map,this.layers=new s.A,this.maximumVisibleSublayers=10,this.opacity=1,this.title="Layers In View",this.type="catalog-dynamic-group",this.visible=!0}load(e){return this.addResolvingPromise(this.parent.load()),Promise.resolve(this)}get _orderBy(){var e,t;return null!==(e=null===(t=this.parent.orderBy)||void 0===t?void 0:t.find((e=>!e.valueExpression&&e.field)))&&void 0!==e?e:new M.A({field:this.parent.objectIdField})}get _referenceComparator(){const e=this._orderBy,t=this.parent.fieldsIndex.get(e.field),r=(0,A.FM)(null===t||void 0===t?void 0:t.toJSON().type,"descending"===e.order);return(e,t)=>r(e.sortValue,t.sortValue)||e.objectId-e.objectId}acquireLayer(e){const t=e.getObjectId(),r=(0,v.tE)(this._oidToReference,t,(()=>this._createLayerReference(e)));return r.count++,(0,f.hA)((()=>{r.count--,r.count||this._disposeLayerReference(r)}))}_createLayerReference(e){const t=e.getObjectId(),r=e.getAttribute(this.parent.itemSourceField),i=new x(t,r);if(F.get(r))return this._addLayer(F.pop(r),i,e),i;let o;try{o=JSON.parse(r)}catch(n){return p.A.getLogger(this).error(n),i}return this._createLayer(o).then((t=>{this.destroyed||0===i.count?(F.get(r)||F.put(i.itemSource,t),i.layer=null):this._addLayer(t,i,e)})).catch((()=>{})),i}_addLayer(e,t,r){this._layerToReference.set(e,t),t.sortValue=r.getAttribute(this._orderBy.field),t.layer=e,e.parent=this,this.layers.add(e),this.layers.sort(((e,t)=>this._referenceComparator(this._layerToReference.get(e),this._layerToReference.get(t))))}_disposeLayerReference(e){e.layer&&(this._layerToReference.delete(e.layer),this.layers.remove(e.layer),F.put(e.itemSource,e.layer)),this._oidToReference.delete(e.objectId)}async _createLayer(e){if(!function(e){return"object"==typeof e&&null!=e&&"itemId"in e&&"portalUrl"in e}(e))return new(await _.S.UnsupportedLayer());const{itemId:t,portalUrl:r}=e,i=(0,v.tE)(this._portals,r,(()=>new I.A({url:r})));return h.A.fromPortalItem(new j.default({id:t,portal:i}))}};(0,i._)([(0,c.MZ)()],S.prototype,"_orderBy",null),(0,i._)([(0,c.MZ)()],S.prototype,"_referenceComparator",null),(0,i._)([(0,c.MZ)({readOnly:!0})],S.prototype,"layers",void 0),(0,i._)([(0,c.MZ)()],S.prototype,"maximumVisibleSublayers",void 0),(0,i._)([(0,c.MZ)(b.ke)],S.prototype,"opacity",void 0),(0,i._)([(0,c.MZ)({type:String,json:{name:"title",write:!0}})],S.prototype,"title",void 0),(0,i._)([(0,c.MZ)({json:{read:!1}})],S.prototype,"type",void 0),(0,i._)([(0,c.MZ)({type:Boolean,json:{name:"visibility",write:!0}})],S.prototype,"visible",void 0),S=(0,i._)([(0,y.$)("esri.layers.catalog.CatalogDynamicGroupLayer")],S);const R=S;var Z=r(16868),E=(r(63844),r(14873),r(47662),r(72690),r(86946),r(71832),r(5766),r(35039),r(86616),r(31382)),L=r(74440),O=r(71401),P=r(27937),q=r(30973);let T=class extends((0,g.j)((0,L.F)((0,w.d)((0,l.P)(h.A))))){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.opacity=1,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.type="catalog-footprint",this.visible=!0}load(e){return this.addResolvingPromise(this.parent.load()),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}get fields(){return this.parent.fields}get fieldsIndex(){return this.parent.fieldsIndex}get geometryType(){return this.parent.geometryType}get objectIdField(){return this.parent.objectIdField}get orderBy(){return this.parent.orderBy}createPopupTemplate(e){const t={fields:this.parent.fields,objectIdField:this.parent.objectIdField,title:this.title};return(0,q.tn)(t,e)}createQuery(){return this.parent.createQuery()}queryFeatures(e,t){return this.parent.queryFeatures(e,t)}};(0,i._)([(0,c.MZ)({readOnly:!0})],T.prototype,"defaultPopupTemplate",null),(0,i._)([(0,c.MZ)({type:[O.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:P.w,write:!0}})],T.prototype,"labelingInfo",void 0),(0,i._)([(0,c.MZ)(b.kF)],T.prototype,"labelsVisible",void 0),(0,i._)([(0,c.MZ)(b.fV)],T.prototype,"legendEnabled",void 0),(0,i._)([(0,c.MZ)(b.ke)],T.prototype,"opacity",void 0),(0,i._)([(0,c.MZ)(b.M6)],T.prototype,"popupEnabled",void 0),(0,i._)([(0,c.MZ)({type:Z.A,json:{name:"popupInfo",write:!0}})],T.prototype,"popupTemplate",void 0),(0,i._)([(0,c.MZ)({types:E.H,json:{name:"layerDefinition.drawingInfo.renderer"}})],T.prototype,"renderer",void 0),(0,i._)([(0,c.MZ)({json:{read:!1}})],T.prototype,"type",void 0),(0,i._)([(0,c.MZ)({type:Boolean,json:{name:"visibility",write:!0}})],T.prototype,"visible",void 0),T=(0,i._)([(0,y.$)("esri.layers.catalog.CatalogFootprintLayer")],T);const C=T;var V=r(14148),N=r(40296),D=r(12406),G=r(19502),B=r(31362),Q=r(42040),U=r(11270),J=r(37534),k=r(94729),$=r(21617),H=r(78817),K=r(91447),X=r(76350),Y=r(38278),z=r(68295);const W=(0,X.p)();let ee=class extends((0,Q.j)((0,w.d)((0,J.f)((0,H.e)((0,g.j)((0,$.J)((0,G.b)((0,U.q)((0,k.A)((0,l.P)((0,B.d)((0,D.p)((0,n.O)(h.A)))))))))))))){constructor(e){super(e),this.dynamicGroupLayer=new R({parent:this}),this.fields=null,this.fieldsIndex=null,this.footprintLayer=new C({parent:this}),this.itemSourceField="cd_itemsource",this.itemTypeField="cd_itemtype",this.layers=new s.A([this.dynamicGroupLayer,this.footprintLayer]),this.source=new V.default({layer:this}),this.type="catalog"}load(e){const t=null!=e?e.signal:null,r=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(u.QP).then((async()=>{var e;if(!this.url)throw new a.A("catalog-layer:missing-url","Catalog layer must be created with a url");if(this.url&&null==this.layerId){const e=await this._fetchFirstValidLayerId(t);if(null==e)throw new a.A("catalog-layer:missing-layerId","There is no Catalog Layer in the service",{service:this.url});this.layerId=e}await this.source.load(),this.source.sourceJSON&&(this.sourceJSON=this.source.sourceJSON,this.read(this.source.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:null===(e=this.portalItem)||void 0===e?void 0:e.portal,url:this.parsedUrl}))})).then((()=>(0,K.VA)(this,"load",e)));return this.addResolvingPromise(r),Promise.resolve(this)}get createQueryVersion(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(null!==(e=this._get("createQueryVersion"))&&void 0!==e?e:0)+1}get parsedUrl(){const e=(0,d.An)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,d.fj)(e.path,this.layerId.toString())),e}createQuery(){var e;const t=new z.A,r=null===(e=this.capabilities)||void 0===e?void 0:e.query;t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),t.outFields=["*"];const{timeOffset:i,timeExtent:o}=this;return t.timeExtent=null!=i&&null!=o?o.offset(-i.value,i.unit):o||null,t}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){var r;return null===(r=this.fieldsIndex.get(e))||void 0===r?void 0:r.domain}async queryFeatures(e,t){var r;const i=await this.load(),o=await i.source.queryFeatures(null!==(r=z.A.from(e))&&void 0!==r?r:i.createQuery(),t);if(null!==o&&void 0!==o&&o.features)for(const n of o.features)n.layer=n.sourceLayer=i.footprintLayer;return o}async queryObjectIds(e,t){var r;return(await this.load()).source.queryObjectIds(null!==(r=z.A.from(e))&&void 0!==r?r:this.createQuery(),t)}async queryFeatureCount(e,t){var r;return(await this.load()).source.queryFeatureCount(null!==(r=z.A.from(e))&&void 0!==r?r:this.createQuery(),t)}async queryExtent(e,t){var r;return(await this.load()).source.queryExtent(null!==(r=z.A.from(e))&&void 0!==r?r:this.createQuery(),t)}serviceSupportsSpatialReference(e){return this.loaded&&(0,Y.D)(this,e)}read(e,t){super.read(e,t);let r=e.footprintLayer;r||"service"!==(null===t||void 0===t?void 0:t.origin)||(r={layerDefinition:{drawingInfo:(0,N.F0)(e.geometryType)}}),this.footprintLayer.read(r,t)}_fetchFirstValidLayerId(e){return(0,o.A)(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((e=>{var t;const r=e.data;if(r)return Array.isArray(r.layers)?null===(t=r.layers.find((e=>"Catalog Layer"===e.type)))||void 0===t?void 0:t.id:void 0}))}};(0,i._)([(0,c.MZ)({readOnly:!0})],ee.prototype,"createQueryVersion",null),(0,i._)([(0,c.MZ)({...W.fields,json:{origins:{service:{name:"fields"}}}})],ee.prototype,"fields",void 0),(0,i._)([(0,c.MZ)(W.fieldsIndex)],ee.prototype,"fieldsIndex",void 0),(0,i._)([(0,c.MZ)({json:{read:!1,write:!1}})],ee.prototype,"footprintLayer",void 0),(0,i._)([(0,c.MZ)()],ee.prototype,"itemSourceField",void 0),(0,i._)([(0,c.MZ)()],ee.prototype,"itemTypeField",void 0),(0,i._)([(0,c.MZ)()],ee.prototype,"layers",void 0),(0,i._)([(0,c.MZ)({value:"CatalogLayer",type:["CatalogLayer"]})],ee.prototype,"operationalLayerType",void 0),(0,i._)([(0,c.MZ)()],ee.prototype,"outFields",void 0),(0,i._)([(0,c.MZ)({readOnly:!0})],ee.prototype,"parsedUrl",null),(0,i._)([(0,c.MZ)()],ee.prototype,"source",void 0),(0,i._)([(0,c.MZ)({json:{read:!1}})],ee.prototype,"type",void 0),ee=(0,i._)([(0,y.$)("esri.layers.CatalogLayer")],ee);const te=ee},74440:(e,t,r)=>{r.d(t,{F:()=>l});var i=r(35143),o=r(46053),n=(r(81806),r(76460),r(47249),r(85842)),s=r(10252);const a={write:{allowNull:!0}},l=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return(0,i._)([(0,o.MZ)({type:s.A,json:{origins:{"web-map":a,"portal-item":a}}})],t.prototype,"featureEffect",void 0),t=(0,i._)([(0,n.$)("esri.layers.mixins.FeatureEffectLayer")],t),t}},37534:(e,t,r)=>{r.d(t,{f:()=>d});var i=r(35143),o=r(48611),n=r(46053),s=(r(81806),r(76460),r(47249),r(85842)),a=r(51162);function l(e,t,r){if(!e)return null;const i=e.find((e=>!!e.field));if(!i)return null;const o=new a.A;return o.read(i,r),[o]}function u(e,t,r,i){const n=e.find((e=>!!e.field));n&&(0,o.sM)(r,[n.toJSON()],t)}const d=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,i._)([(0,n.MZ)({type:[a.A],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:l},write:{target:"layerDefinition.orderBy",writer:u}}})],t.prototype,"orderBy",void 0),t=(0,i._)([(0,s.$)("esri.layers.mixins.OrderedLayer")],t),t}},10252:(e,t,r)=>{r.d(t,{A:()=>m});var i,o=r(35143),n=r(50076),s=r(42553),a=r(48611),l=r(46053),u=(r(81806),r(76460),r(47249),r(85842)),d=r(44081),c=r(8203);const p={read:{reader:d.LF},write:{writer:d.M9,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}},y={read:{reader:d.LF},write:{writer:d.M9,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}},h={name:"showExcludedLabels",default:!0};let f=i=class extends s.oY{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const r=super.write(e,t);if(null!==t&&void 0!==t&&t.origin){var i;if(r.filter){var o;const e=Object.keys(r.filter);if(e.length>1||"where"!==e[0])return null!==(o=t.messages)&&void 0!==o&&o.push(new n.A("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return null!==(i=t.messages)&&void 0!==i&&i.push(new n.A("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new i({filter:null!=this.filter?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};(0,o._)([(0,l.MZ)({type:c.A,json:{write:{allowNull:!0,writer(e,t,r,i){const o=null===e||void 0===e?void 0:e.write({},i);o&&0!==Object.keys(o).length?(0,a.sM)(r,o,t):(0,a.sM)(r,null,t)}}}})],f.prototype,"filter",void 0),(0,o._)([(0,l.MZ)({json:{write:!0,origins:{"web-map":p,"portal-item":p}}})],f.prototype,"includedEffect",void 0),(0,o._)([(0,l.MZ)({json:{write:!0,origins:{"web-map":y,"portal-item":y}}})],f.prototype,"excludedEffect",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":h,"portal-item":h}}})],f.prototype,"excludedLabelsVisible",void 0),f=i=(0,o._)([(0,u.$)("esri.layers.support.FeatureEffect")],f);const m=f},8203:(e,t,r)=>{r.d(t,{A:()=>m});var i,o=r(35143),n=r(35238),s=r(82111),a=r(45802),l=r(42553),u=r(53084),d=r(46053),c=(r(81806),r(76460),r(85842)),p=r(68295);const y=new a.J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),h=new a.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let f=i=class extends l.oY{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{where:t,geometry:r,spatialRelationship:i,timeExtent:o,objectIds:n,units:s,distance:a}=this;return new p.A({geometry:(0,u.o8)(r),objectIds:(0,u.o8)(n),spatialRelationship:i,timeExtent:(0,u.o8)(o),where:t,units:s,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:o,objectIds:n,units:s,distance:a}=this;return new i({geometry:(0,u.o8)(t),objectIds:(0,u.o8)(n),spatialRelationship:r,timeExtent:(0,u.o8)(o),where:e,units:s,distance:a})}};(0,o._)([(0,d.MZ)({type:String,json:{write:!0}})],f.prototype,"where",void 0),(0,o._)([(0,d.MZ)({types:n.yR,json:{write:!0}})],f.prototype,"geometry",void 0),(0,o._)([(0,d.MZ)({type:y.apiValues,json:{name:"spatialRel",read:{reader:y.read},write:{allowNull:!1,writer:y.write,overridePolicy(){return{enabled:null!=this.geometry}}}}})],f.prototype,"spatialRelationship",void 0),(0,o._)([(0,d.MZ)({type:Number,json:{write:{overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],f.prototype,"distance",void 0),(0,o._)([(0,d.MZ)({type:[Number],json:{write:!0}})],f.prototype,"objectIds",void 0),(0,o._)([(0,d.MZ)({type:h.apiValues,json:{read:h.read,write:{writer:h.write,overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],f.prototype,"units",void 0),(0,o._)([(0,d.MZ)({type:s.A,json:{write:!0}})],f.prototype,"timeExtent",void 0),f=i=(0,o._)([(0,c.$)("esri.layers.support.FeatureFilter")],f);const m=f},51162:(e,t,r)=>{r.d(t,{A:()=>c});var i,o=r(35143),n=r(45802),s=r(42553),a=r(46053),l=(r(81806),r(76460),r(47249),r(85842));const u=new n.J({asc:"ascending",desc:"descending"});let d=i=class extends s.oY{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new i({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,o._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"field",void 0),(0,o._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0),(0,o._)([(0,a.MZ)({type:u.apiValues,json:{read:u.read,write:u.write}})],d.prototype,"order",void 0),d=i=(0,o._)([(0,l.$)("esri.layers.support.OrderByInfo")],d);const c=d},91447:(e,t,r)=>{r.d(t,{$4:()=>q,B5:()=>S,C$:()=>V,GA:()=>B,PD:()=>D,S2:()=>Z,VA:()=>C,VZ:()=>L,WP:()=>j,Xl:()=>w,Ye:()=>F,Zm:()=>P,bt:()=>b,ct:()=>_,hM:()=>R,iX:()=>v,jD:()=>O,jp:()=>E,lV:()=>A,mm:()=>I,rn:()=>M,sg:()=>x,tG:()=>G});var i=r(55171),o=r(95444),n=r(98773),s=r(50076),a=r(45802),l=r(34154),u=r(7982),d=r(74438),c=r(31933),p=r(5766),y=r(35039),h=r(9708),f=r(68295),m=r(58289);const v=new a.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function w(e,t,r,i){const o=await T(e);if(await g(e,t,i),!o.addAttachment)throw new s.A(i,"Layer source does not support addAttachment capability");return o.addAttachment(t,r)}function g(e,t,r){var i;const{attributes:o}=t,{objectIdField:n}=e;return null!==(i=e.capabilities)&&void 0!==i&&null!==(i=i.data)&&void 0!==i&&i.supportsAttachment?t?o?n&&o[n]?Promise.resolve():Promise.reject(new s.A(r,"feature is missing the identifying attribute ".concat(n))):Promise.reject(new s.A(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new s.A(r,"A feature is required to add/delete/update attachments")):Promise.reject(new s.A(r,"this layer doesn't support attachments"))}async function b(e,t,r,i,o){const n=await T(e);if(await g(e,t,o),!n.updateAttachment)throw new s.A(o,"Layer source does not support updateAttachment capability");return n.updateAttachment(t,r,i)}async function _(e,t,i){const{applyEdits:o}=await r.e(54610).then(r.bind(r,54610)),n=await e.load(),{source:s,globalIdField:a}=n;let l=i;return("feature"===n.type?n.infoFor3D:null)&&null!=t.deleteFeatures&&null!=a&&(l={...l,globalIdToObjectId:await B(e,t.deleteFeatures,a)}),o(n,s,t,i)}async function M(e,t,i){const{uploadAssets:o}=await r.e(54610).then(r.bind(r,54610)),n=await e.load();return o(n,n.source,t,i)}async function I(e,t,r,i){const o=await T(e);if(await g(e,t,i),!o.deleteAttachments)throw new s.A(i,"Layer source does not support deleteAttachments capability");return o.deleteAttachments(t,r)}async function j(e,t,r){const i=(await e.load({signal:null===t||void 0===t?void 0:t.signal})).source;if(!i.fetchRecomputedExtents)throw new s.A(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function A(e,t,r,i){var o,n;t=h.A.from(t),await e.load();const a=e.source,l=e.capabilities;if(null===l||void 0===l||null===(o=l.data)||void 0===o||!o.supportsAttachment)throw new s.A(i,"this layer doesn't support attachments");const{attachmentTypes:u,objectIds:d,globalIds:c,num:p,size:y,start:f,where:m}=t;if((null===l||void 0===l||null===(n=l.operations)||void 0===n||!n.supportsQueryAttachments)&&((null===u||void 0===u?void 0:u.length)>0||(null===c||void 0===c?void 0:c.length)>0||(null===y||void 0===y?void 0:y.length)>0||p||f||m))throw new s.A(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(null!==d&&void 0!==d&&d.length||null!==c&&void 0!==c&&c.length||m))throw new s.A(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!a.queryAttachments)throw new s.A(i,"Layer source does not support queryAttachments capability",t);return a.queryAttachments(t)}async function x(e,t,r,i){var o;const n=await T(e);if(!n.queryObjectIds)throw new s.A(i,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(null!==(o=f.A.from(t))&&void 0!==o?o:e.createQuery(),r)}async function F(e,t,r,i){var o;const n=await T(e);if(!n.queryFeatureCount)throw new s.A(i,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(null!==(o=f.A.from(t))&&void 0!==o?o:e.createQuery(),r)}async function S(e,t,r,i){var o;const n=await T(e);if(!n.queryExtent)throw new s.A(i,"Layer source does not support queryExtent capability");return n.queryExtent(null!==(o=f.A.from(t))&&void 0!==o?o:e.createQuery(),r)}async function R(e,t,r,i){const o=await T(e);if(!o.queryRelatedFeatures)throw new s.A(i,"Layer source does not support queryRelatedFeatures capability");return o.queryRelatedFeatures(m.default.from(t),r)}async function Z(e,t,r,i){const o=await T(e);if(!o.queryRelatedFeaturesCount)throw new s.A(i,"Layer source does not support queryRelatedFeaturesCount capability");return o.queryRelatedFeaturesCount(m.default.from(t),r)}async function E(e){const t=e.source;if(null!==t&&void 0!==t&&t.refresh)try{const{dataChanged:r,updates:i}=await t.refresh();if(null!=i&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await(0,l.G)(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function L(e){var t,r;const i=new f.A,o=null===(t=e.capabilities)||void 0===t?void 0:t.data,n=null===(r=e.capabilities)||void 0===r?void 0:r.query;i.historicMoment=e.historicMoment,i.gdbVersion=e.gdbVersion,i.returnGeometry=!0,n&&(i.compactGeometryEnabled=n.supportsCompactGeometry,i.defaultSpatialReferenceEnabled=n.supportsDefaultSpatialReference),o&&(o.supportsZ&&null!=e.returnZ&&(i.returnZ=e.returnZ),o.supportsM&&null!=e.returnM&&(i.returnM=e.returnM)),i.outFields=["*"];const{timeOffset:s,timeExtent:a}=e;return i.timeExtent=null!=s&&null!=a?a.offset(-s.value,s.unit):a||null,i.multipatchOption="multipatch"===e.geometryType?"xyFootprint":null,i}function O(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r)for(const i of r)if("esriFieldTypeGlobalID"===i.type)return i.name}function P(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r)for(const i of r)if("esriFieldTypeOID"===i.type)return i.name}function q(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}async function T(e){return(await e.load()).source}async function C(e,t,r){var o;const n=null===(o=e.parsedUrl)||void 0===o?void 0:o.path;n&&e.authenticationTriggerEvent===t&&await async function(e,t){if(!i.id)return;if(i.id.findCredential(e))return;let r;try{const o=await(0,c.wI)(e,t);o&&(r=await i.id.checkSignInStatus("".concat(o,"/sharing")))}catch(o){}if(r)try{const r=null!=t?t.signal:null;await i.id.getCredential(e,{signal:r})}catch(o){}}(n,r)}function V(e){var t;return!(null!==(t=e.sourceJSON)&&void 0!==t&&t.isMultiServicesView)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const N=(0,u.C)({types:o.xK});function D(e,t){var r;if(e.defaultSymbol)return null!==(r=e.types)&&void 0!==r&&r.length?new y.A({defaultSymbol:N(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map((e=>({id:e.id,symbol:N(e.symbol,e,t)})))}):new p.A({symbol:N(e.defaultSymbol,e,t)})}function G(e){var t,r;let i=null===(t=e.sourceJSON)||void 0===t?void 0:t.cacheMaxAge;if(!i)return!1;const o=null===(r=e.editingInfo)||void 0===r||null===(r=r.lastEditDate)||void 0===r?void 0:r.getTime();return null==o||(i*=1e3,Date.now()-o<i)}async function B(e,t,r){if(null==t)return null;const i=[],{objectIdField:o}=e;if(t.forEach((e=>{let t=null;if("attributes"in e){const{attributes:i}=e;t={globalId:i[r],objectId:null!=i[o]&&-1!==i[o]?i[o]:null}}else t={globalId:e.globalId,objectId:null!=e.objectId&&-1!==e.objectId?e.objectId:null};null!=t.globalId&&(null!=t.objectId&&-1!==t.objectId||i.push(t.globalId))})),0===i.length)return null;const s=e.createQuery();s.where=i.map((e=>"".concat(r,"='").concat(e,"'"))).join(" OR "),s.returnGeometry=!1,s.outFields=[o,r],s.cacheHint=!1;const a=await(0,n.DZ)((0,d.SE)(e,s));if(!a.ok)return null;const l=new Map,u=a.value.features;for(const n of u){const e=n.attributes[r],t=n.attributes[o];null!=e&&null!=t&&-1!==t&&l.set(e,t)}return l}},74438:(e,t,r)=>{r.d(t,{SE:()=>o,qM:()=>n});var i=r(68295);async function o(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=s(e));const i=n(e),o=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let a=null;for(;;){const n=await e.source.queryFeaturesJSON(t,r);if(null==a?a=n:a.features=a.features.concat(n.features),a.exceededTransferLimit=n.exceededTransferLimit,!o||!n.exceededTransferLimit)break;t.start+=i}return a}function n(e){return s(e)*function(e){return e.capabilities.query.maxRecordCount||2e3}(e)}function s(e){return e.capabilities.query.supportsMaxRecordCountFactor?i.A.MAX_MAX_RECORD_COUNT_FACTOR:1}},76350:(e,t,r)=>{r.d(t,{p:()=>l});var i=r(81806),o=r(76460),n=r(44135),s=r(1900),a=r(53430);function l(){return{fields:{type:[n.A],value:null,set:function(e){if(e&&(0,i.A)("big-integer-warning-enabled")){const i=e.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(i.length){var t,r;const e=i.map((e=>"'".concat(e.name,"'"))).join(", ");o.A.getLogger(this).warn("#fields","Layer (title: '".concat(null!==(t=this.title)&&void 0!==t?t:"no title","', id: '").concat(null!==(r=this.id)&&void 0!==r?r:"no id","') references big-integer field(s): ").concat(e,", support for which is experimental. Only integers less than ").concat(Number.MAX_SAFE_INTEGER," (Number.MAX_SAFE_INTEGER) are supported."))}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return s.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(null===e||void 0===e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const r of e){var t;(null===(t=this.fieldsIndex)||void 0===t?void 0:t.has(r))||o.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field","Invalid field ".concat(r," found in outFields"),{layer:this,outFields:e})}return(0,a.DB)(this.fieldsIndex,e)}}}}},10290:(e,t,r)=>{r.d(t,{u:()=>s});var i=r(31633),o=r(80963);function n(e,t,r){if(null==e.hasM||e.hasZ)for(const i of t)for(const e of i)e.length>2&&(e[2]*=r)}function s(e,t,r){if(!e&&!t||!r)return;const o=(0,i.G9)(r);a(e,r,o),a(t,r,o)}function a(e,t,r){if(e)for(const i of e)l(i.geometry,t,r)}function l(e,t,r){if(null===e||void 0===e||!e.spatialReference||(0,o.aI)(e.spatialReference,t))return;const s=(0,i.G9)(e.spatialReference)/r;if(1!==s)if("x"in e)null!=e.z&&(e.z*=s);else if("rings"in e)n(e,e.rings,s);else if("paths"in e)n(e,e.paths,s);else if("points"in e&&(null==e.hasM||e.hasZ))for(const i of e.points)i.length>2&&(i[2]*=s)}},58289:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h});var i,o=r(35143),n=(r(35238),r(42553)),s=r(53084),a=r(46053),l=r(40565),u=r(85842),d=r(17707),c=r(89551),p=r(13312);let y=i=class extends n.oY{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(t.definitionExpression="1=1")}clone(){return new i((0,s.o8)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,o._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"cacheHint",void 0),(0,o._)([(0,a.MZ)({type:c.L,json:{write:!0}})],y.prototype,"dynamicDataSource",void 0),(0,o._)([(0,a.MZ)({type:String,json:{write:!0}})],y.prototype,"gdbVersion",void 0),(0,o._)([(0,a.MZ)({type:Number,json:{write:!0}})],y.prototype,"geometryPrecision",void 0),(0,o._)([(0,a.MZ)({type:Date})],y.prototype,"historicMoment",void 0),(0,o._)([(0,d.K)("historicMoment")],y.prototype,"_writeHistoricMoment",null),(0,o._)([(0,a.MZ)({type:Number,json:{write:!0}})],y.prototype,"maxAllowableOffset",void 0),(0,o._)([(0,a.MZ)({type:[Number],json:{write:!0}})],y.prototype,"objectIds",void 0),(0,o._)([(0,a.MZ)({type:[String],json:{write:!0}})],y.prototype,"orderByFields",void 0),(0,o._)([(0,a.MZ)({type:[String],json:{write:!0}})],y.prototype,"outFields",void 0),(0,o._)([(0,a.MZ)({type:p.A,json:{read:{source:"outSR"},write:{target:"outSR"}}})],y.prototype,"outSpatialReference",void 0),(0,o._)([(0,a.MZ)({json:{write:!0}})],y.prototype,"relationshipId",void 0),(0,o._)([(0,a.MZ)({type:Number,json:{read:{source:"resultOffset"}}})],y.prototype,"start",void 0),(0,o._)([(0,d.K)("start"),(0,d.K)("num")],y.prototype,"writeStart",null),(0,o._)([(0,a.MZ)({type:Number,json:{read:{source:"resultRecordCount"}}})],y.prototype,"num",void 0),(0,o._)([(0,a.MZ)({json:{write:!0}})],y.prototype,"returnGeometry",void 0),(0,o._)([(0,a.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"returnM",void 0),(0,o._)([(0,a.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"returnZ",void 0),(0,o._)([(0,a.MZ)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],y.prototype,"where",void 0),y=i=(0,o._)([(0,u.$)("esri.rest.support.RelationshipQuery")],y),y.from=(0,l.dp)(y);const h=y}}]);
//# sourceMappingURL=6078.fa50d2ad.chunk.js.map