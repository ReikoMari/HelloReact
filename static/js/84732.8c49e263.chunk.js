"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[84732],{20481:(t,e,i)=>{i.d(e,{B:()=>c,GP:()=>a,ZY:()=>r,qg:()=>d});var n=i(88685),o=i(38042);const s={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.JK)(),e=(t=t.toLowerCase())in s;if(!e){const i=t.split("-");i.length>1&&i[0]in s&&(t=i[0],e=!0),e||(t="en")}const[i,n,r="#,##0.###"]=s[t];return{decimal:i,group:n,pattern:r}}function a(t,e){const i=r((e={...e}).locale);e.customs=i;const n=e.pattern||i.pattern;return isNaN(t)||Math.abs(t)===1/0?null:function(t,e,i){const n=(i=i||{}).customs.group,o=i.customs.decimal,s=e.split(";"),r=s[0];if((e=s[t<0?1:0]||"-"+r).includes("%"))t*=100;else if(e.includes("\u2030"))t*=1e3;else{if(e.includes("\xa4"))throw new Error("currency notation not supported");if(e.includes("E"))throw new Error("exponential notation not supported")}const a=l,c=r.match(a);if(!c)throw new Error("unable to find a number expression in pattern: "+e);return!1===i.fractional&&(i.places=0),e.replace(a,function(t,e,i){!0===(i=i||{}).places&&(i.places=0),i.places===1/0&&(i.places=6);const n=e.split("."),o="string"==typeof i.places&&i.places.indexOf(",");let s=i.places;o?s=i.places.substring(o+1):+s>=0||(s=(n[1]||[]).length),i.round<0||(t=Number(t.toFixed(Number(s))));const r=String(Math.abs(t)).split("."),a=r[1]||"";if(n[1]||i.places){o&&(i.places=i.places.substring(0,o));const t=void 0!==i.places?i.places:n[1]&&n[1].lastIndexOf("0")+1;+t>a.length&&(r[1]=a.padEnd(Number(t),"0")),+s<a.length&&(r[1]=a.substr(0,Number(s)))}else r[1]&&r.pop();const l=n[0].replace(",","");let c=l.indexOf("0");-1!==c&&(c=l.length-c,c>r[0].length&&(r[0]=r[0].padStart(c,"0")),l.includes("#")||(r[0]=r[0].substr(r[0].length-c)));let d,u,p=n[0].lastIndexOf(",");if(-1!==p){d=n[0].length-p-1;const t=n[0].substr(0,p);p=t.lastIndexOf(","),-1!==p&&(u=t.length-p-1)}const h=[];for(let v=r[0];v;){const t=v.length-d;h.push(t>0?v.substr(t):v),v=t>0?v.slice(0,t):"",u&&(d=u,u=void 0)}return r[0]=h.reverse().join(i.group||","),r.join(i.decimal||".")}(t,c[0],{decimal:o,group:n,places:i.places,round:i.round}))}(t,n,e)}const l=/[#0,]*[#0](?:\.0*#*)?/;function c(t){const e=r((t=t||{}).locale),i=t.pattern||e.pattern,o=e.group,s=e.decimal;let a=1;if(i.includes("%"))a/=100;else if(i.includes("\u2030"))a/=1e3;else if(i.includes("\xa4"))throw new Error("currency notation not supported");const c=i.split(";");1===c.length&&c.push("-"+c[0]);const d=p(c,(e=>(e="(?:"+(0,n.Cj)(e,".")+")").replace(l,(e=>{const i={signed:!1,separator:t.strict?o:[o,""],fractional:t.fractional,decimal:s,exponent:!1},n=e.split(".");let r=t.places;1===n.length&&1!==a&&(n[1]="###"),1===n.length||0===r?i.fractional=!1:(void 0===r&&(r=t.pattern?n[1].lastIndexOf("0")+1:1/0),r&&null==t.fractional&&(i.fractional=!0),!t.places&&+r<n[1].length&&(r+=","+n[1].length),i.places=r);const l=n[0].split(",");return l.length>1&&(i.groupSize=l.pop().length,l.length>1&&(i.groupSize2=l.pop().length)),"("+function(t){"places"in(t=t||{})||(t.places=1/0),"string"!=typeof t.decimal&&(t.decimal="."),"fractional"in t&&!String(t.places).startsWith("0")||(t.fractional=[!0,!1]),"exponent"in t||(t.exponent=[!0,!1]),"eSigned"in t||(t.eSigned=[!0,!1]);const e=u(t),i=p(t.fractional,(e=>{let i="";return e&&0!==t.places&&(i="\\"+t.decimal,t.places===1/0?i="(?:"+i+"\\d+)?":i+="\\d{"+t.places+"}"),i}),!0);let n=e+i;return i&&(n="(?:(?:"+n+")|(?:"+i+"))"),n+p(t.exponent,(e=>e?"([eE]"+u({signed:t.eSigned})+")":""))}(i)+")"}))),!0);return{regexp:d.replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:o,decimal:s,factor:a}}function d(t,e){const i=c(e),n=new RegExp("^"+i.regexp+"$").exec(t);if(!n)return NaN;let o=n[1];if(!n[1]){if(!n[2])return NaN;o=n[2],i.factor*=-1}return o=o.replaceAll(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(o)*i.factor}function u(t){return"signed"in(t=t||{})||(t.signed=[!0,!1]),"separator"in t?"groupSize"in t||(t.groupSize=3):t.separator="",p(t.signed,(t=>t?"[-+]":""),!0)+p(t.separator,(e=>{if(!e)return"(?:\\d+)";" "===(e=(0,n.Cj)(e))?e="\\s":"\xa0"===e&&(e="\\s\\xa0");const i=t.groupSize,o=t.groupSize2;if(o){const t="(?:0|[1-9]\\d{0,"+(o-1)+"}(?:["+e+"]\\d{"+o+"})*["+e+"]\\d{"+i+"})";return i-o>0?"(?:"+t+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":t}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+e+"]\\d{"+i+"})*)"}),!0)}const p=(t,e,i)=>{if(!(t instanceof Array))return e(t);const n=[];for(let o=0;o<t.length;o++)n.push(e(t[o]));return h(n.join("|"),Boolean(i))},h=(t,e)=>"("+(e?"?:":"")+t+")"},84732:(t,e,i)=>{i.r(e),i.d(e,{default:()=>ft});var n=i(35143),o=i(76460),s=i(30726),r=i(46053),a=i(21403),l=(i(47249),i(81806),i(85842)),c=i(25329),d=i(28899),u=i(39356),p=(i(11265),i(19276)),h=i(50076),v=i(54099),g=i(68134),_=i(13904),m=i(9624),b=i(27410),f=i(91967);let w=class extends f.A{constructor(t){super(t),this.format=null,this.position={coordinate:null,location:null}}get displayCoordinate(){var t,e;return null===(t=this.format)||void 0===t?void 0:t.getDisplayCoordinate(null===(e=this.position)||void 0===e?void 0:e.coordinate)}};(0,n._)([(0,r.MZ)({readOnly:!0})],w.prototype,"displayCoordinate",null),(0,n._)([(0,r.MZ)()],w.prototype,"format",void 0),(0,n._)([(0,r.MZ)()],w.prototype,"position",void 0),w=(0,n._)([(0,l.$)("esri.widgets.CoordinateConversion.support.Conversion")],w);const y=w;i(35238);var C=i(13312);function P(t){return t>=500?6:t<500&&t>=50?7:t<50&&t>=5?8:9}function M(t){return"number"==typeof t&&isFinite(t)}function S(t){return!!t&&M(t.x)&&M(t.y)}function x(t,e){if(t.spatialReference.isGeographic&&e){const[i,n]=function(t,e){const i=P(e);return[t[0].toFixed(i),t[1].toFixed(i)]}([t.x,t.y],e);return"".concat(i,", ").concat(n)}return"".concat(t.x.toFixed(3),", ").concat(t.y.toFixed(3))}const E=["dd","dms","ddm","mgrs","usng","utm"];var T=i(20481),D=i(38042),A=i(7724);function I(t){let e=null;if(t||(t=C.A.WGS84),t.wkid){if(e=A.P.geogcs(t.wkid),!e)throw new h.A("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!t.wkt2&&!t.wkt)throw new h.A("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(e=A.P.fromString(A.a.PE_TYPE_GEOGCS,t.wkt2||t.wkt),!e)throw new h.A("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return e}function k(t){let e=-1;switch(t){case"automatic":e=A.d.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":e=A.d.PE_MGRS_STYLE_NEW|A.d.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":e=A.d.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":e=A.d.PE_MGRS_STYLE_OLD|A.d.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":e=A.d.PE_MGRS_STYLE_OLD}return e}function K(t){let e=-1;switch(t){case"latitude-band-indicators":e=A.f.PE_UTM_OPTS_NONE;break;case"north-south-indicators":e=A.f.PE_UTM_OPTS_NS}return e}var R=i(80963),L=i(45417);let F=class extends f.A{constructor(t){super(t),this.conversionInfo=null,this.coordinateSegments=null,this._currentPattern=void 0,this.defaultPattern=null,this.name=null,this.viewModel=null}get currentPattern(){var t;return null!==(t=this._currentPattern||this.defaultPattern)&&void 0!==t?t:""}set currentPattern(t){this._currentPattern=t}get label(){var t;return null!==(t=this.name)&&void 0!==t?t:""}set label(t){this._overrideIfSome("label",t)}get hasDisplayProperties(){return!(!this.defaultPattern||!this.coordinateSegments)}get spatialReference(){var t,e;return"basemap"===this.name?this._viewSpatialReference:null!==(t=null===(e=this.conversionInfo)||void 0===e?void 0:e.spatialReference)&&void 0!==t?t:C.A.WGS84}set spatialReference(t){this._overrideIfSome("spatialReference",t)}get _viewSpatialReference(){var t,e;return null!==(t=null===(e=this.viewModel)||void 0===e||null===(e=e.view)||void 0===e?void 0:e.spatialReference)&&void 0!==t?t:C.A.WGS84}get _additionalCharactersPattern(){const t=this.coordinateSegments;if(!t)return null;const e=t.map((t=>t.alias)),i=this.currentPattern.replaceAll(new RegExp('["nsew'.concat(e.join(),"]"),"gi"),"").replaceAll(" ","");return new RegExp("[".concat(i,"]"),"g")}get test(){return{additionalCharactersPattern:this._additionalCharactersPattern}}async convert(t){var e;if(!S(t))throw new h.A("format:invalid-point","Could not convert invalid point.",{point:t});const i=null===(e=this.conversionInfo)||void 0===e?void 0:e.convert;if(i)return Promise.resolve().then((()=>i(t)));const n=await this._project(t,this.spatialReference);return{location:n,coordinate:await this._getCoordinate(n)}}getConversionStrategy(){var t,e;const i=this._viewSpatialReference;return null!==(t=this.conversionInfo)&&void 0!==t&&t.convert||null!==(e=this.viewModel)&&void 0!==e&&e.formatterAvailable||"xy"===this.name&&(i.isWebMercator||i.isWGS84)||"basemap"===this.name?"client":"server"}getDisplayCoordinate(t){if(!t)return null;if(!this.coordinateSegments||!this.currentPattern)return t;let e=this.currentPattern;const i=this._getSegmentMatches(t,!1);for(let n=this.coordinateSegments.length-1;n>=0;n--){const t=this.coordinateSegments[n];e=e.replace(t.alias,i[n])}return e}parseUserInput(t){const{defaultPattern:e,_additionalCharactersPattern:i,coordinateSegments:n}=this;if(!e||!i)return"";let o=e.replace(i,"");t=t.replace(i,"");const s=this._getSegmentMatches(t,!0);if(n)for(let r=n.length-1;r>=0;r--){const t=n[r];o=o.replace(t.alias,s[r])}return o}_getSegmentMatches(t,e){const i=new Array,{coordinateSegments:n}=this;if(!n)return i;for(let o=0;o<n.length;o++){const s=n[o],r=t.match(s.searchPattern);if(!r){i.push("");continue}let a=r[0];if(t=t.replace(a,"").trim(),s.substitution){const t=e?s.substitution.input(a):s.substitution.output(a);t&&(a="".concat(t))}i.push(a)}return i}async reverseConvert(t){var e,i;const n=this.parseUserInput(t),o=null===(e=this.conversionInfo)||void 0===e?void 0:e.reverseConvert;let s;if(o)s=o(n);else if("xy"===this.name||"basemap"===this.name)s=function(t,e){const i=t.includes(",")?",":" ",[n,o,s]=t.split(i).map((t=>{const e=t.trim();return e?Number(e):null}));if(!M(n)||!M(o))return null;const r=new _.A({x:n,y:o,spatialReference:e||C.A.WGS84});return s&&(r.z=s,r.hasZ=!0),r}(n,this.spatialReference);else if(null!==(i=this.viewModel)&&void 0!==i&&i.formatterAvailable)switch(this.name){case"dd":case"ddm":case"dms":s=function(t,e){const i=[];t=(t=(t=t.replaceAll(/[\u00B0\u00BA]/g,"^")).replaceAll("\u2032","'")).replaceAll("\u2033",'"');const n=I(e);return A.c.dmsToGeog(n,1,[t],i)?new _.A(i[0][0],i[0][1],e||C.A.WGS84):null}(n,this.spatialReference);break;case"mgrs":{const t="automatic";s=function(t,e,i){const n=[],o=k(i);if(-1===o)return console.warn("invalid conversionMode: ".concat(i)),null;const s=I(e);return A.d.mgrsToGeogExtended(s,1,[t],o,n)?new _.A(n[0][0],n[0][1],e||C.A.WGS84):null}(n,this.spatialReference,t);break}case"utm":{const t="latitude-band-indicators";s=function(t,e,i){const n=[],o=K(i);if(-1===o)return console.warn("invalid conversionMode: ".concat(i)),null;const s=I(e);return A.f.utmToGeog(s,1,[t],o,n)?new _.A(n[0][0],n[0][1],e||C.A.WGS84):null}(n,this.spatialReference,t);break}case"usng":s=function(t,e){const i=[];!e&&/\(.+27/.test(t)&&(e=C.A.GCS_NAD_1927);const n=I(e);return A.e.usngToGeog(n,1,[t],i)?new _.A(i[0][0],i[0][1],e||C.A.WGS84):null}(n,this.spatialReference);break;default:s=null}if(!s)throw new h.A("format:invalid-input","Could not parse input into point.",{userInput:t});return this._project(s,this._viewSpatialReference)}async _getCoordinate(t){var e,i,n;const o=null!==(e=null===(i=this.viewModel)||void 0===i||null===(i=i.view)||void 0===i?void 0:i.scale)&&void 0!==e?e:0;if(!S(t))throw new h.A("format:invalid-point","Could not transform invalid point into coordinate.",{point:t});if(null!==(n=this.viewModel)&&void 0!==n&&n.formatterAvailable||"basemap"===this.name||"xy"===this.name)switch(this.name){case"dd":case"ddm":case"dms":{const e=P(o);return function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=[[t.x,t.y]],o=[],s=I(t.spatialReference);let r=0;switch(e){case"dd":r=A.c.geogToDd(s,1,n,i,o);break;case"ddm":r=A.c.geogToDdm(s,1,n,i,o);break;case"dms":r=A.c.geogToDms(s,1,n,i,o);break;default:return console.warn("invalid format: ".concat(e)),null}return r?o[0]:null}(t,this.name,e)}case"mgrs":return function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=[[t.x,t.y]],s=[],r=I(t.spatialReference);let a=k(e);return-1===a?(console.warn("invalid conversionMode: ".concat(e)),null):(n&&(a|=A.d.PE_MGRS_ADD_SPACES),A.d.geogToMgrsExtended(r,1,o,i,!1,a,s)?s[0]:null)}(t,"automatic",5,!1);case"usng":return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=[[t.x,t.y]],o=[],s=I(t.spatialReference);return A.e.geogToUsng(s,1,n,e,!1,i,o)?o[0]:null}(t,5,!1);case"utm":return function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=[[t.x,t.y]],o=[],s=I(t.spatialReference);let r=K(e);return-1===r?(console.warn("invalid conversionMode: ".concat(e)),null):(i&&(r|=A.f.PE_UTM_OPTS_ADD_SPACES),A.f.geogToUtm(s,1,n,r,o)?o[0]:null)}(t,"latitude-band-indicators",!0);default:return x(t,o)}return x(t,o)}async _project(t,e){var i,n;if((0,R.aI)(t.spatialReference,e)||!e)return t;if(null!==(i=this.viewModel)&&void 0!==i&&i.formatterAvailable&&(0,m.isLoaded)())return(0,m.project)(t,e);if(null===(n=this.viewModel)||void 0===n||!n.formatterAvailable){const i=(0,L.Cv)(t,e);if(null!=i)return i}return null}};(0,n._)([(0,r.MZ)()],F.prototype,"conversionInfo",void 0),(0,n._)([(0,r.MZ)()],F.prototype,"coordinateSegments",void 0),(0,n._)([(0,r.MZ)()],F.prototype,"currentPattern",null),(0,n._)([(0,r.MZ)()],F.prototype,"_currentPattern",void 0),(0,n._)([(0,r.MZ)()],F.prototype,"label",null),(0,n._)([(0,r.MZ)()],F.prototype,"defaultPattern",void 0),(0,n._)([(0,r.MZ)({readOnly:!0})],F.prototype,"hasDisplayProperties",null),(0,n._)([(0,r.MZ)()],F.prototype,"name",void 0),(0,n._)([(0,r.MZ)({type:C.A})],F.prototype,"spatialReference",null),(0,n._)([(0,r.MZ)()],F.prototype,"viewModel",void 0),(0,n._)([(0,r.MZ)({readOnly:!0})],F.prototype,"_viewSpatialReference",null),(0,n._)([(0,r.MZ)({readOnly:!0})],F.prototype,"_additionalCharactersPattern",null),F=(0,n._)([(0,l.$)("esri.widgets.CoordinateConversion.support.Format")],F);const Z=F,B=(0,T.ZY)().decimal,G={N:"north",S:"south",E:"east",W:"west"},V="\xb0".concat("\u200e"),O=new RegExp("-?\\d+[\\.|\\".concat(B,"]?\\d*")),N=/^[\\0]+(?=\d)/;function Y(t,e){const i="ar"===(0,D.JK)(),n=t.abbreviatedDirections.north,o=t.abbreviatedDirections.south,s=t.abbreviatedDirections.east,r=t.abbreviatedDirections.west,a=(0,T.ZY)().decimal,l={[n]:"N",[o]:"S",[s]:"E",[r]:"W"},c=new RegExp("-?\\d+[\\.|\\".concat(a,"]?\\d*")),d=new RegExp("N|S|".concat(n,"|").concat(o),"i"),u=new RegExp("E|W|".concat(s,"|").concat(r),"i"),p={ddm:"Y".concat(V," A'").concat(t.abbreviatedDirections.north,", X").concat(V," B'").concat(t.abbreviatedDirections.east),dms:"Y".concat(V," A' B\"").concat(t.abbreviatedDirections.north,", X").concat(V," C' D\"").concat(t.abbreviatedDirections.east),dd:"Y".concat(V).concat(t.abbreviatedDirections.north,", X").concat(V).concat(t.abbreviatedDirections.east),xy:"X".concat(V,", Y").concat(V),basemap:"X, Y"},h={ddm:"".concat(t.abbreviatedDirections.north).concat(V,"Y 'A ,").concat(t.abbreviatedDirections.east).concat(V,"X 'B"),dms:"".concat(t.abbreviatedDirections.north).concat(V,"Y 'A \"B ,").concat(t.abbreviatedDirections.east).concat(V,"X 'C \"D"),dd:"".concat(t.abbreviatedDirections.north).concat(V,"Y ,").concat(t.abbreviatedDirections.east).concat(V,"X"),xy:"X".concat(V," ,Y").concat(V),basemap:"X ,Y"},v=new RegExp("\\d{1,2}[\\.|\\".concat(a,"]?\\d*"),"i"),g=new RegExp("\\d{1,3}[\\.|\\".concat(a,"]?\\d*"),"i");e.forEach((e=>{const{name:n}=e;if("dd"===n?e.coordinateSegments=[{alias:"Y",description:"degrees latitude",searchPattern:v,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:t.abbreviatedDirections.north,description:"north/south indicator",searchPattern:d,substitution:{input:t=>l[t],output:e=>t.abbreviatedDirections[G[e]]}},{alias:"X",description:"degrees longitude",searchPattern:g,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:t.abbreviatedDirections.east,description:"east/west indicator",searchPattern:u,substitution:{input:t=>l[t],output:e=>t.abbreviatedDirections[G[e]]}}]:"ddm"===n?e.coordinateSegments=[{alias:"Y",description:"degrees latitude",searchPattern:v,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"A",description:"minutes latitude",searchPattern:v,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:t.abbreviatedDirections.north,description:"north/south indicator",searchPattern:d,substitution:{input:t=>l[t],output:e=>t.abbreviatedDirections[G[e]]}},{alias:"X",description:"degrees longitude",searchPattern:g,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"B",description:"minutes longitude",searchPattern:v,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:t.abbreviatedDirections.east,description:"east/west indicator",searchPattern:u,substitution:{input:t=>l[t],output:e=>t.abbreviatedDirections[G[e]]}}]:"dms"===n?e.coordinateSegments=[{alias:"Y",description:"degrees latitude",searchPattern:v,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"A",description:"minutes latitude",searchPattern:v,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"B",description:"seconds latitude",searchPattern:v,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:t.abbreviatedDirections.north,description:"north/south indicator",searchPattern:d,substitution:{input:t=>l[t],output:e=>t.abbreviatedDirections[G[e]]}},{alias:"X",description:"degrees longitude",searchPattern:g,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"C",description:"minutes longitude",searchPattern:v,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"D",description:"seconds longitude",searchPattern:v,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:t.abbreviatedDirections.east,description:"east/west indicator",searchPattern:u,substitution:{input:t=>l[t],output:e=>t.abbreviatedDirections[G[e]]}}]:("xy"===e.name||"basemap"===e.name)&&(e.coordinateSegments=[{alias:"X",description:"easting",searchPattern:c,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"Y",description:"northing",searchPattern:c,substitution:{input:t=>X(t),output:t=>W(t)}}]),(t=>null!=t&&Object.keys(p).includes(t))(n)){const t=i?h[n]:p[n];e.defaultPattern=t,e.currentPattern=t}}))}function W(t){const e=t.match(N),i=e?e[0]:"",n=t.includes(".")?t.split(".")[1].length:0;return i+(0,T.GP)(Number(t),{pattern:"###0.###",places:n,round:-1})}function X(t){return(0,T.qg)(t)}var z=i(79535),U=i(63860);const $="default",H="crosshair",j=new _.A([0,0,500]),J=["mgrs","utm","usng","dd","dms","ddm"],q="esri__coordinateConversionWidgetState",Q="conversions",tt="formats",et="view",it="view-change";let nt=class extends((0,z.R)(v.A.EventedAccessor)){constructor(t){super(t),this._conversionPromise=null,this._locationGraphic=null,this._pointerCount=0,this.conversions=new p.A,this.formats=new p.A,this.formatterAvailable=!1,this.messages=null,this.filteredFormats=new p.A,this.locationSymbol=new b.A({url:(0,d.s)("esri/images/search/search-symbol-32.png"),width:24,height:24}),this.storageEnabled=!0,this.storageType="session",this.view=null,this._saveWidgetState=this._saveWidgetState.bind(this),this._handleFormatChange=this._handleFormatChange.bind(this),this._handleConversionChange=this._handleConversionChange.bind(this),this._handleViewChange=this._handleViewChange.bind(this),this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerUp=this._onPointerUp.bind(this)}initialize(){const t=async()=>this.messages=await(0,U.ud)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion");this.formats.addMany(function(){const t=new RegExp("N|S","i"),e=new RegExp("E|W","i");return[new Z({name:"basemap",coordinateSegments:[{alias:"X",description:"easting",searchPattern:O,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"Y",description:"northing",searchPattern:O,substitution:{input:t=>X(t),output:t=>W(t)}}],defaultPattern:"X, Y",viewModel:null}),new Z({name:"dd",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp("\\d{1,2}[\\.|\\".concat(B,"]?\\d*(?=\\D*?[N|S])"),"i"),substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"N",description:"north/south indicator",searchPattern:t},{alias:"X",description:"degrees longitude",searchPattern:new RegExp("\\d{1,3}[\\.|\\".concat(B,"]?\\d*(?=\\D*?[E|W|])"),"i"),substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"E",description:"east/west indicator",searchPattern:e}],defaultPattern:"Y".concat(V,"N, X").concat(V,"E"),viewModel:null}),new Z({name:"ddm",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp("\\d{1,2}(?=.*?\\s+.*?[N|S])","i"),substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp("\\d{1,2}[\\.\\".concat(B,"]?\\d*(?=.*?[N|S])"),"i"),substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"N",description:"north/south indicator",searchPattern:t},{alias:"X",description:"degrees longitude",searchPattern:new RegExp("\\d{1,3}(?=\\D*?\\s+.*?[E|W])","i"),substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"B",description:"minutes longitude",searchPattern:new RegExp("\\d{1,2}[\\.|\\|".concat(B,"]?\\d*(?=.*?[E|W])"),"i"),substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"E",description:"east/west indicator",searchPattern:e}],defaultPattern:"Y".concat(V," A'N, X").concat(V," B'E"),viewModel:null}),new Z({name:"dms",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp("\\d{1,2}(?=.*?\\s+.*?[N|S])","i"),substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp("\\d{1,2}(?=.*?[N|S])","i"),substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"B",description:"seconds latitude",searchPattern:new RegExp("\\d{1,2}[\\.|\\".concat(B,"]?\\d*(?=.*?[N|S])"),"i"),substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"N",description:"north/south indicator",searchPattern:t},{alias:"X",description:"degrees longitude",searchPattern:new RegExp("\\d{1,3}(?=.*?\\s+.*?[E|W])","i"),substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"C",description:"minutes longitude",searchPattern:new RegExp("\\d{1,2}(?=.*?[E|W])","i"),substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"D",description:"seconds longitude",searchPattern:new RegExp("\\d{1,2}[\\.|\\".concat(B,"]?\\d*(?=.*?[E|W])"),"i"),substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"E",description:"east/west indicator",searchPattern:e}],defaultPattern:"Y".concat(V," A' B\"N, X").concat(V," C' D\"E"),viewModel:null}),new Z({name:"xy",coordinateSegments:[{alias:"X",description:"longitude",searchPattern:O,substitution:{input:t=>X(t),output:t=>W(t)}},{alias:"Y",description:"latitude",searchPattern:O,substitution:{input:t=>X(t),output:t=>W(t)}}],defaultPattern:"X".concat(V,", Y").concat(V),viewModel:null}),new Z({name:"mgrs",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new Z({name:"usng",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new Z({name:"utm",coordinateSegments:[{alias:"Z",description:"zone number",searchPattern:/\d{1,2}|[abyz]/i},{alias:"B",description:"latitude band",searchPattern:/^\D/},{alias:"X",description:"easting",searchPattern:/\d{1,7}(?=\s*\d{7}$)/},{alias:"Y",description:"northing",searchPattern:/\d{1,7}/}],defaultPattern:"ZB X Y",viewModel:null})]}()),t().then((()=>{if(!this.destroyed&&(Y(this.messages,this.formats),this.storageEnabled&&this._loadWidgetState(),this.formats.forEach((t=>{var e;t.viewModel=this,this.addHandles((0,g.watch)((()=>t.currentPattern),this._saveWidgetState),null!==(e=t.name)&&void 0!==e?e:"unnamed-format")})),this.addHandles(this.conversions.on("change",this._handleConversionChange),Q),this.addHandles(this.formats.on("change",this._handleFormatChange),tt),this.addHandles((0,D.oQ)((()=>{t().then((()=>{Y(this.messages,this.formats)}))}))),(0,m.load)().then((()=>{this.formatterAvailable=!0})).catch((t=>{o.A.getLogger(this).error(new h.A("coordinate-conversion:projection-load-failed","Failed to load the projection module.",{error:t})),this.formatterAvailable=!1,this._filterFormatsAndConversions()})).then((()=>this.addHandles((0,g.watch)((()=>this.view),this._handleViewChange,g.initial),it))),0===this.conversions.length)){const t=this.formats.find((t=>"xy"===t.name))||this.formats.at(0);this.conversions.add(new y({format:t}))}}))}destroy(){this.removeHandles(),this._cleanUpView(this.view),this.view=null}castConversions(t){return this._castToConversions(t)}set currentLocation(t){this._set("currentLocation",t),this._updateConversions()}get currentLocation(){return this._get("currentLocation")||null}set mode(t){switch(t){case"capture":this.currentLocation=null,this._startCaptureMode(),this._set("mode",t);break;case"live":this._startLiveMode(),this._set("mode",t)}}get mode(){return this._get("mode")||"live"}get state(){const{messages:t,view:e}=this,i=null===e||void 0===e?void 0:e.ready;return t?i?"ready":e?"loading":"disabled":"disabled"}get storage(){const{storageType:t}=this;return"session"===t?sessionStorage:localStorage}get waitingForConversions(){return null!=this._conversionPromise}setLocation(t){var e,i;if(this._locationGraphic&&null!==(e=this.view)&&void 0!==e&&e.graphics.remove(this._locationGraphic),!t)return;const n=t.clone();n.hasZ&&(n.z=void 0),this._locationGraphic=new u.A({geometry:n,symbol:this.locationSymbol}),null===(i=this.view)||void 0===i||i.graphics.add(this._locationGraphic)}async convert(t,e){if(!S(e))throw new h.A("coordinate-conversion:invalid-point","Invalid point cannot be converted.",{point:e});return Promise.resolve().then((()=>t.convert(e)))}async goToLocation(t){var e;const{view:i}=this;if(!i)throw new h.A("coordinate-conversion:go-to-failed","no view");const n="3d"===i.type?i.clippingArea:null,o=null===(e=i.map)||void 0===e||null===(e=e.basemap)||void 0===e?void 0:e.baseLayers;if(n||(null===o||void 0===o?void 0:o.length)>0){var s;const e=null!==n&&void 0!==n?n:null===(s=o.at(0))||void 0===s?void 0:s.fullExtent;if(null!=e&&!e.contains(t))throw new h.A("coordinate-conversion:go-to-failed","Point outside basemap extent.",{point:t})}return this.callGoTo({target:t})}pause(){this.currentLocation=null,this.removeHandles(et),this.view&&(this.view.cursor=$,this._locationGraphic&&this.view.graphics.remove(this._locationGraphic))}async previewConversion(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentLocation||j;return(await ot(t,e)).displayCoordinate}resume(){"capture"===this.mode?this._startCaptureMode():this._startLiveMode()}reverseConvert(t,e){return e.reverseConvert(t)}async updateConversions(t,e){if("point"!==(null===e||void 0===e?void 0:e.type))throw this._clearConversions(this.conversions),new h.A("coordinate-conversion:invalid-input-point","Point is invalid, conversions cannot be updated.",{point:e});return this._convertMany(t,e)}_castToConversions(t){const e=new p.A;return t.forEach((t=>{let i=null;if(t instanceof y)i=t;else if("string"==typeof t){const e=this.formats.find((e=>e.name===t));e&&(i=new y({format:e}))}i&&e.add(i)})),e}_cleanUpView(t){t&&(this._locationGraphic&&t.graphics.remove(this._locationGraphic),this.removeHandles(et),t.cursor=$)}_clearConversions(t){t.forEach((t=>{t.position={location:null,coordinate:null}}))}async _convertMany(t,e){return Promise.all(t.map((t=>ot(t,e))))}_handleConversionChange(t){for(const e of t.added){const{format:t}=e;t&&(t.viewModel=this,this.currentLocation&&(this._set("waitingForConversions",!0),this.convert(t,this.currentLocation).then((t=>{e.position=t,this._set("waitingForConversions",!1)}))))}this._saveWidgetState()}_handleFormatChange(t){t.added.forEach((t=>{var e;this.addHandles((0,g.watch)((()=>t.currentPattern),this._saveWidgetState),null!==(e=t.name)&&void 0!==e?e:"unnamed-format"),t.viewModel=this})),t.removed.forEach((t=>{t.viewModel=null;const e=this.conversions.filter((e=>e.format===t));this.conversions.removeMany(e),t.name&&this.removeHandles(t.name)}))}_loadWidgetState(){try{const t=JSON.parse(this.storage.getItem(q));t&&this._setWidgetState(t)}catch(t){o.A.getLogger(this).error(new h.A("coordinate-conversion:invalid-session-storage-json","Could not read from storage.",{error:t}))}}_startCaptureMode(){this.removeHandles(et),this.view&&(this.view.cursor=H,this.currentLocation&&this.setLocation(this.currentLocation),this.addHandles(this.view.on("click",this._onClick),et))}_startLiveMode(){this._pointerCount=0,this.removeHandles(et),this.view&&(this.view.cursor=$,this._locationGraphic&&this.view.graphics.remove(this._locationGraphic),this.addHandles([this.view.on("pointer-down",this._onPointerDown),this.view.on("pointer-up",this._onPointerUp),this.view.on("pointer-move",this._onPointerMove)],et))}_handleViewChange(t,e){e&&e!==t&&this._cleanUpView(e),t&&("capture"===this.mode?this._startCaptureMode():this._startLiveMode(),e&&this._filterFormatsAndConversions())}_onClick(t){if(0===t.button){var e;const i=null===(e=this.view)||void 0===e?void 0:e.toMap(t),n=null===i||void 0===i?void 0:i.normalize();this.setLocation(n),this.currentLocation=n}}_onPointerDown(t){const{pointerType:e}=t;if(this._pointerCount++,("touch"===e||"pen"===e)&&1===this._pointerCount){var i;const e=null===(i=this.view)||void 0===i?void 0:i.toMap(t);this.currentLocation=null===e||void 0===e?void 0:e.normalize()}}_onPointerMove(t){const{pointerType:e}=t;if("mouse"===e||1===this._pointerCount){var i;const e=null===(i=this.view)||void 0===i?void 0:i.toMap(t);this.currentLocation=null===e||void 0===e?void 0:e.normalize()}}_onPointerUp(){this._pointerCount--}_setWidgetState(t){try{t.formats.forEach((e=>{const i=this.formats.find((t=>t.name===e.name));i&&t.locale===(0,D.JK)()&&e.currentPattern&&(i.currentPattern=e.currentPattern),i&&e.index>=0&&this.conversions.add(new y({format:i}))}))}catch(e){o.A.getLogger(this).warn(new h.A("coordinate-conversion:session-storage-read-error","Could not get widget state from stored JSON.",{error:e}))}}_saveWidgetState(){if(!this.storageEnabled)return;const t=this._toJSON();try{this.storage.setItem(q,JSON.stringify({formats:t,locale:(0,D.JK)()}))}catch(e){o.A.getLogger(this).error(new h.A("coordinate-conversion:local-storage-write-error","Could not write to localStorage.",{error:e}))}}async _updateConversions(){try{await this.updateConversions(this.conversions.toArray(),this.currentLocation)}catch{}}_toJSON(){return this.formats.filter((t=>{const e=t.name;return"xy"===e||"basemap"===e||function(t){return E.includes(t)}(e)})).map((t=>({name:t.name,currentPattern:t.currentPattern,defaultPattern:t.defaultPattern,index:this.conversions.findIndex((e=>e.format===t))}))).sort(((t,e)=>t.index-e.index)).toArray()}_filterFormatsAndConversions(){const{formatterAvailable:t,conversions:e,formats:i}=this;t||this.addHandles((0,g.when)((()=>{var t;return null===(t=this.view)||void 0===t?void 0:t.spatialReference}),(t=>{const n=t.isWebMercator||t.isWGS84,o=i.filter((t=>{const{name:e}=t;return!!function(t){return J.includes(t)}(e)||"xy"===e&&!n})),s=this.filteredFormats.filter((t=>"xy"===t.name&&n&&!this.formats.includes(t))),r=e.filter((t=>o.includes(t.format)));i.removeMany(o),e.removeMany(r),this.filteredFormats.addMany(o.filter((t=>!this.filteredFormats.includes(t)))),i.addMany(s)}),{once:!0,initial:!0}),et)}};async function ot(t,e){try{var i;t.position=await(null===(i=t.format)||void 0===i?void 0:i.convert(e))}catch(n){t.position=null}return t}(0,n._)([(0,r.MZ)()],nt.prototype,"conversions",void 0),(0,n._)([(0,a.w)("conversions")],nt.prototype,"castConversions",null),(0,n._)([(0,r.MZ)({type:_.A})],nt.prototype,"currentLocation",null),(0,n._)([(0,r.MZ)()],nt.prototype,"formats",void 0),(0,n._)([(0,r.MZ)()],nt.prototype,"messages",void 0),(0,n._)([(0,r.MZ)()],nt.prototype,"mode",null),(0,n._)([(0,r.MZ)()],nt.prototype,"filteredFormats",void 0),(0,n._)([(0,r.MZ)({readOnly:!0})],nt.prototype,"state",null),(0,n._)([(0,r.MZ)()],nt.prototype,"locationSymbol",void 0),(0,n._)([(0,r.MZ)({readOnly:!0,dependsOn:["storageType"]})],nt.prototype,"storage",null),(0,n._)([(0,r.MZ)()],nt.prototype,"storageEnabled",void 0),(0,n._)([(0,r.MZ)()],nt.prototype,"storageType",void 0),(0,n._)([(0,r.MZ)({readOnly:!0})],nt.prototype,"waitingForConversions",null),(0,n._)([(0,r.MZ)()],nt.prototype,"view",void 0),nt=(0,n._)([(0,l.$)("esri.widgets.CoordinateConversion.CoordinateConversionViewModel")],nt);const st=nt;var rt=i(98108),at=i(87540),lt=i(15062),ct=i(20459),dt=i(63582),ut=i(54761),pt=i(76099);const ht="esri-coordinate-conversion",vt={base:ht,captureMode:"".concat(ht,"--capture-mode"),noBasemap:"".concat(ht,"--no-basemap"),popup:"".concat(ht,"__popup"),clipboardPopup:"".concat(ht,"__clipboard-popup"),conversionList:"".concat(ht,"__conversion-list"),conversionRow:"".concat(ht,"__row"),coordDisplay:"".concat(ht,"__display"),expanded:"".concat(ht,"__conversions-view--expanded"),expandDown:"".concat(ht,"__conversions-view--expand-down"),expandUp:"".concat(ht,"__conversions-view--expand-up"),conversionsView:"".concat(ht,"__conversions-view"),primarySelect:"".concat(ht,"__select-primary"),rowSelect:"".concat(ht,"__select-row"),toolDisplay:"".concat(ht,"__tools"),modeToggle:"".concat(ht,"__mode-toggle"),rowButton:"".concat(ht,"__row-button"),backButton:"".concat(ht,"__back-button"),convertButton:"".concat(ht,"__button"),convertButtonSpan:"".concat(ht,"__convert-button-span"),coordinateInput:"".concat(ht,"__input-coordinate"),inputForm:"".concat(ht,"__input-form"),inputFormGroup:"".concat(ht,"__input-group"),rejectInput:"".concat(ht,"__input-coordinate--rejected"),sectionHeading:"".concat(ht,"__heading"),patternInput:"".concat(ht,"__pattern-input"),settings:"".concat(ht,"__settings"),settingsFormGroup:"".concat(ht,"__settings-group"),settingsFormGroupHorizontal:"".concat(ht,"__settings-group-horizontal"),previewCoordinate:"".concat(ht,"__preview-coordinate")},gt={settingsButton:!0,inputButton:!0,captureButton:!0,expandButton:!0};let _t=class extends c.A{constructor(t,e){super(t,e),this._popupMessage=null,this._popupTimeoutId=void 0,this._clipboardPopupTimeoutId=void 0,this._coordinateInput=null,this._badInput=!1,this._goToEnabled=!1,this._conversionFormat=null,this._settingsFormat=null,this._previewConversion=null,this._expanded=!1,this._clipboardPopupVisible=!1,this._popupVisible=!1,this._settingsVisible=!1,this._inputVisible=!1,this.headingLevel=4,this.messages=null,this.messagesCommon=null,this.orientation="auto",this.viewModel=new st,this.visibleElements={...gt}}get conversions(){return this.viewModel.conversions}set conversions(t){this.viewModel.conversions=t}get currentLocation(){return this.viewModel.currentLocation}set currentLocation(t){this.viewModel.currentLocation=t}get formats(){return this.viewModel.formats}set formats(t){this.viewModel.formats=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get label(){var t,e;return null!==(t=null===(e=this.messages)||void 0===e?void 0:e.widgetLabel)&&void 0!==t?t:""}set label(t){this._overrideIfSome("label",t)}get mode(){return this.viewModel.mode}set mode(t){this.viewModel.mode=t}set multipleConversions(t){!1===t&&(this._expanded=!1,this.conversions.splice(1,this.conversions.length-1)),this._set("multipleConversions",t)}get multipleConversions(){const t=this._get("multipleConversions");return"boolean"!=typeof t||t}get locationSymbol(){return this.viewModel.locationSymbol}set locationSymbol(t){this.viewModel.locationSymbol=t}get storageEnabled(){return this.viewModel.storageEnabled}set storageEnabled(t){this.viewModel.storageEnabled=t}get storageType(){return this.viewModel.storageType}set storageType(t){this.viewModel.storageType=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}castVisibleElements(t){return{...gt,...t}}reverseConvert(t,e){return this.viewModel.reverseConvert(t,e)}render(){var t,e;const i=null===(t=this.viewModel)||void 0===t?void 0:t.state,n="disabled"===i?(0,ut.K)("div",{key:"esri-coordinate__no-basemap"},null===(e=this.messages)||void 0===e?void 0:e.noBasemap):null,o=!n&&this._inputVisible?this._renderInputForm():null,s=!n&&this._settingsVisible?this._renderSettings():null,r=n||o||s?null:this._renderConversionsView(),a=this._popupVisible?this._renderPopup():null,l={[vt.captureMode]:"capture"===this.mode,[rt.D.disabled]:"loading"===i,[vt.noBasemap]:"disabled"===i};return(0,ut.K)("div",{class:this.classes(vt.base,rt.D.widget,l)},a,n,r,s,o)}_addConversion(t){const e=t.target,i=bt(e.options[e.options.selectedIndex]),n=mt(e);if(null==i||null==n)return;const o=new y({format:i});e.options.selectedIndex=0,n>=0?(this.conversions.removeAt(n),this.conversions.add(o,n)):this.conversions.add(o)}_findSettingsFormat(){return this._settingsFormat||this.conversions.reduceRight(((t,e)=>{const i=e.format;return null!==i&&void 0!==i&&i.hasDisplayProperties?i:t}),null)||this.formats.find((t=>t.hasDisplayProperties))}_hidePopup(){this._popupTimeoutId&&(clearTimeout(this._popupTimeoutId),this._popupTimeoutId=void 0),this._popupVisible=!1,this._popupMessage=null,this.scheduleRender()}_hideClipboardPopup(){this._clipboardPopupTimeoutId&&(clearTimeout(this._clipboardPopupTimeoutId),this._clipboardPopupTimeoutId=void 0),this._clipboardPopupVisible=!1,this.scheduleRender()}_onConvertComplete(){this._inputVisible=!1,this._coordinateInput.value=""}_onCopy(t){var e,i;const n=null===(e=function(t){return t["data-conversion"]}(t.currentTarget))||void 0===e?void 0:e.displayCoordinate;null!=n&&(null!==(i=t.clipboardData)&&void 0!==i&&i.setData("text/plain",n),this._showClipboardPopup(),t.preventDefault())}_processUserInput(t){const e=(0,s.eJ)(t,"key"),i=this.viewModel;if("Enter"!==e&&e)this._badInput&&(this._badInput=!1);else{const t=bt(this._coordinateInput);if(!t)return;const e=this._coordinateInput.value;this._reverseConvert(e,t).then((t=>{"capture"===this.mode?i.resume():this.mode="capture",this.currentLocation=t,i.setLocation(t),this._onConvertComplete()})).catch((t=>{var e;o.A.getLogger(this).error(t),this._showPopup(null===(e=this.messages)||void 0===e?void 0:e.invalidCoordinate),this._badInput=!0}))}}async _reverseConvert(t,e){const i=this.viewModel,n=await e.reverseConvert(t);return this._goToEnabled&&n&&i.goToLocation(n).catch((t=>{var e;o.A.getLogger(this).warn(t),this._showPopup(null===(e=this.messages)||void 0===e?void 0:e.locationOffBasemap)})),n}_setInputFormat(t){const e=t.target,i=bt(e[e.options.selectedIndex]);null!=i&&(this._conversionFormat=i)}_setPreviewConversion(){const t=this._findSettingsFormat(),e=this.viewModel;if(t){var i,n;const o=this.conversions.find((e=>e.format===t));this._previewConversion=new y({format:t,position:{location:this.currentLocation,coordinate:null===o||void 0===o||null===(i=o.position)||void 0===i?void 0:i.coordinate}}),(null===(n=this._previewConversion.position)||void 0===n?void 0:n.coordinate)||e.previewConversion(this._previewConversion)}}_setSettingsFormat(t){const e=t.target,i=bt(e[e.options.selectedIndex]);null!=i&&(this._settingsFormat=i,this._setPreviewConversion())}_showClipboardPopup(){this._clipboardPopupVisible?clearTimeout(this._clipboardPopupTimeoutId):this._clipboardPopupVisible=!0,this.scheduleRender(),this._popupTimeoutId=setTimeout((()=>{this._popupTimeoutId=void 0,this._hideClipboardPopup()}),750)}_showPopup(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;this._popupMessage=t,this._popupVisible?clearTimeout(this._popupTimeoutId):this._popupVisible=!0,this.scheduleRender(),this._popupTimeoutId=setTimeout((()=>{this._popupTimeoutId=void 0,this._hidePopup()}),e)}_toggleGoTo(){this._goToEnabled=!this._goToEnabled}_updateCurrentPattern(t){t.stopPropagation();const e=t.target,i=this._findSettingsFormat();i&&(i.currentPattern=e.value)}_renderConversion(t,e){var i;const{messages:n}=this;if(!n)return(0,ut.K)("li",null);const{format:o}=t,s=null!==(i=null===o||void 0===o?void 0:o.label)&&void 0!==i?i:"",r="".concat(this.id,"__list-item-").concat(e),a="".concat(s," ").concat(n.conversionOutputSuffix),l=0===e,c=l||this._expanded,d=l?this._renderFirstConversion(t):this._renderTools(e,t,r),u=l&&!t.displayCoordinate?n.noLocation:t.displayCoordinate,p=(0,ut.K)("div",{"aria-label":u,class:vt.coordDisplay,"data-conversion":t,role:"listitem",tabIndex:0,title:null!==u&&void 0!==u?u:""},u),h=this._renderOptions(this.formats.filter((t=>t!==o)));return c?(0,ut.K)("li",{"aria-label":a,class:vt.conversionRow,id:r,key:t,role:"group",tabIndex:0,title:a},(0,ut.K)("select",{"aria-controls":r,"aria-label":n.selectFormat,bind:this,class:this.classes(rt.D.select,vt.rowSelect),"data-index":e,onchange:this._addConversion,title:n.selectFormat},(0,ut.K)("option",{"aria-label":s,selected:!0,title:s},s.toUpperCase()),h),p,d):null}_renderCopyButton(t){const e=this._clipboardPopupVisible&&this._renderClipboardPopup(),{messagesCommon:i}=this;return i?(0,ut.K)("li",{"aria-label":i.copy,bind:this,class:this.classes(rt.D.widgetButton,vt.rowButton),"data-conversion":t,onclick:this._copyCoordinateOutput,oncopy:this._onCopy,onkeydown:this._copyCoordinateOutput,role:"button",tabIndex:0,title:i.copy},e,(0,ut.K)("span",{"aria-hidden":"true",class:lt.T.duplicate})):(0,ut.K)("li",null)}_renderFirstConversion(t){const e=this.id,i={[lt.T.down]:!this._expanded,[lt.T.up]:this._expanded},{messages:n,messagesCommon:o,multipleConversions:s,visibleElements:r}=this;if(!o||!n)return(0,ut.K)("ul",null);const a="live"===this.mode?n.captureMode:n.liveMode,l=this._expanded?o.collapse:o.expand,c=t.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(t):null,d=s&&r.expandButton&&(0,ut.K)("li",{"aria-controls":"".concat(e,"__").concat(vt.conversionList),"aria-label":l,bind:this,class:rt.D.widgetButton,key:"esri-coordinate-conversion__expand-button",onclick:this._toggleExpand,onkeydown:this._toggleExpand,role:"button",tabIndex:0,title:l},(0,ut.K)("span",{"aria-hidden":"true",class:this.classes(i)})),u=!s&&r.captureButton&&(0,ut.K)("li",{"aria-label":a,bind:this,class:this.classes(rt.D.widgetButton,vt.modeToggle),key:"esri-coordinate-conversion__mode-toggle",onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabIndex:0,title:a},(0,ut.K)("span",{"aria-hidden":"true",class:lt.T.mapPin}));return(0,ut.K)("ul",{class:vt.toolDisplay},c,d,u)}_renderInputForm(){const t=this._conversionFormat||this.conversions.at(0).format,e=this.formats.findIndex((e=>e.name===(null===t||void 0===t?void 0:t.name))),i=this.id,n="".concat(i,"__").concat(vt.coordinateInput),o="".concat(i,"__").concat(vt.coordinateInput,"__header"),s=this._renderOptions(this.formats,!0,e),r={[vt.rejectInput]:this._badInput},{messages:a,messagesCommon:l,headingLevel:c}=this;return l&&a?(0,ut.K)("div",{"aria-labelledby":o,class:vt.inputForm,key:"esri-coordinate-conversion__input-form",role:"search"},(0,ut.K)("div",{class:vt.sectionHeading},(0,ut.K)("div",{"aria-label":l.back,bind:this,class:this.classes(rt.D.widgetButton,vt.backButton),onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabIndex:0,title:l.back},this._renderBackIcon()),(0,ut.K)(at.D,{class:rt.D.heading,id:o,level:c},a.inputCoordTitle)),(0,ut.K)("div",{class:vt.inputFormGroup},(0,ut.K)("select",{"aria-controls":n,"aria-label":a.selectFormat,bind:this,class:this.classes(rt.D.select,vt.rowSelect),onchange:this._setInputFormat,title:a.selectFormat},s),(0,ut.K)("input",{afterCreate:pt.cA,"aria-labelledby":o,"aria-required":"true",bind:this,class:this.classes(vt.coordinateInput,rt.D.input,r),"data-format":t,"data-node-ref":"_coordinateInput",id:n,onkeydown:this._processUserInput,placeholder:a.inputCoordTitle,role:"textbox",spellcheck:!1,title:a.inputCoordTitle,type:"text"})),(0,ut.K)("div",{class:vt.inputFormGroup},(0,ut.K)("label",{"aria-label":a.goTo},(0,ut.K)("input",{bind:this,checked:this._goToEnabled,onclick:this._toggleGoTo,title:a.goTo,type:"checkbox"}),a.goTo),(0,ut.K)("button",{"aria-label":a.convert,bind:this,class:this.classes(vt.convertButton,rt.D.button),onclick:this._processUserInput,title:a.convert,type:"button"},(0,ut.K)("span",{class:vt.convertButtonSpan},a.convert)))):(0,ut.K)("div",null)}_renderConversionsView(){const{messages:t}=this;if(!t)return(0,ut.K)("div",null);const e="".concat(this.id,"__").concat(vt.conversionList),i=this._renderPrimaryTools(),n=this._renderOptions(this.formats),o=this.conversions.map(((t,e)=>this._renderConversion(t,e))).toArray(),s=this._expanded?(0,ut.K)("div",{class:vt.conversionRow},(0,ut.K)("select",{"aria-controls":e,"aria-label":t.addConversion,bind:this,class:this.classes(rt.D.select,vt.primarySelect),"data-index":-1,onchange:this._addConversion,title:t.addConversion},(0,ut.K)("option",{disabled:!0,selected:!0,value:""},t.addConversion),n),i):null,r={[vt.expanded]:this._expanded,[vt.expandUp]:"expand-up"===this.orientation,[vt.expandDown]:"expand-down"===this.orientation};return(0,ut.K)("div",{class:this.classes(vt.conversionsView,r),key:"esri-coordinate-conversion__main-view"},(0,ut.K)("ul",{"aria-expanded":this._expanded?"true":"false",class:vt.conversionList,id:e},o),s)}_renderOptions(t,e,i){var n;const o=this.conversions.at(0),s=null===(n=o.format)||void 0===n?void 0:n.name;return t.map(((t,n)=>{var r;const a=!(e||!o)&&(s===t.name||this.conversions.map((t=>{var e;return null===(e=t.format)||void 0===e?void 0:e.name})).includes(t.name));return(0,ut.K)("option",{"aria-label":t.label,"data-format":t,disabled:a,key:null!==(r=t.name)&&void 0!==r?r:"unnamed-format",selected:n===i,value:t.label},t.label.toUpperCase())})).toArray()}_renderPopup(){return(0,ut.K)("div",{class:vt.popup,role:"alert"},this._popupMessage)}_renderClipboardPopup(){const{messages:t}=this;return t?(0,ut.K)("div",{class:this.classes(vt.popup,vt.clipboardPopup),role:"alert"},t.copySuccessMessage):(0,ut.K)("div",null)}_renderPrimaryTools(){const{messages:t,visibleElements:e}=this;if(!t)return(0,ut.K)("ul",null);const i="live"===this.mode?t.captureMode:t.liveMode,n=e.inputButton&&(0,ut.K)("li",{bind:this,class:rt.D.widgetButton,onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabIndex:0,title:t.inputCoordTitle},(0,ut.K)("span",{"aria-hidden":"true",class:lt.T.edit})),o=e.captureButton&&(0,ut.K)("li",{bind:this,class:this.classes(rt.D.widgetButton,vt.modeToggle),onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabIndex:0,title:i},(0,ut.K)("span",{"aria-hidden":"true",class:lt.T.mapPin})),s=e.settingsButton&&(0,ut.K)("li",{bind:this,class:rt.D.widgetButton,onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabIndex:0,title:t.settingsTitle},(0,ut.K)("span",{"aria-hidden":"true",class:lt.T.settings2}));return(0,ut.K)("ul",{class:vt.toolDisplay},n,o,s)}_renderSettings(){var t;const e=this.id,i="".concat(e,"__").concat(vt.patternInput),n="".concat(e,"__").concat(vt.patternInput,"__header"),o="".concat(e,"__").concat(vt.previewCoordinate),s=this.formats.filter((t=>t.hasDisplayProperties)),r=this._findSettingsFormat(),a=r?s.indexOf(r):-1,l=this._renderOptions(s,!0,a),c=null===r||void 0===r?void 0:r.currentPattern,{messages:d,messagesCommon:u,headingLevel:p}=this;return u&&d?(0,ut.K)("div",{"aria-labelledby":n,class:vt.settings,key:vt.settings},(0,ut.K)("div",{class:vt.sectionHeading},(0,ut.K)("div",{bind:this,class:this.classes(rt.D.widgetButton,vt.backButton),onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabIndex:0,title:u.back},this._renderBackIcon()),(0,ut.K)(at.D,{class:rt.D.heading,id:n,level:p},d.settingsTitle)),(0,ut.K)("div",{class:vt.settingsFormGroup},(0,ut.K)("label",{for:i},d.changeCoordinateDisplay),(0,ut.K)("select",{"aria-label":d.selectFormat,bind:this,class:rt.D.select,onchange:this._setSettingsFormat,title:d.selectFormat},l),(0,ut.K)("div",{class:vt.settingsFormGroupHorizontal},(0,ut.K)("input",{"aria-controls":o,bind:this,class:this.classes(vt.patternInput,rt.D.input),id:i,oninput:this._updateCurrentPattern,spellcheck:!1,title:d.changeCoordinateDisplay,type:"text",value:c}),(0,ut.K)("div",{"aria-controls":i,bind:this,class:rt.D.widgetButton,onclick:this._setDefaultPattern,onkeydown:this._setDefaultPattern,role:"button",tabIndex:0,title:d.defaultPattern},(0,ut.K)("span",{"aria-hidden":"true",class:lt.T.refresh})))),(0,ut.K)("div",{class:vt.settingsFormGroup},(0,ut.K)("label",null,u.preview,(0,ut.K)("div",{class:vt.previewCoordinate,id:o,tabIndex:0},null===(t=this._previewConversion)||void 0===t?void 0:t.displayCoordinate)))):(0,ut.K)("div",null)}_renderBackIcon(){return(0,ut.K)("span",{"aria-hidden":"true",class:(0,pt.V8)(this.container)?lt.T.rightArrow:lt.T.leftArrows})}_renderTools(t,e,i){const n=e.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(e):null,{messages:o}=this;return o?(0,ut.K)("ul",{class:vt.toolDisplay,role:"listitem"},n,(0,ut.K)("li",{"aria-controls":i,"aria-label":o.removeConversion,bind:this,class:this.classes(rt.D.widgetButton,vt.rowButton),"data-index":t,key:"".concat(i,"__").concat(rt.D.widgetButton),onclick:this._removeConversion,onkeydown:this._removeConversion,role:"button",tabIndex:0,title:o.removeConversion},(0,ut.K)("span",{"aria-hidden":"true",class:lt.T.close}))):(0,ut.K)("ul",null)}_copyCoordinateOutput(t){const e=t.target;if(!("createTextRange"in document.body)){const t=window.getSelection(),i=document.createRange();i.selectNodeContents(e),null!==t&&void 0!==t&&t.removeAllRanges(),null===t||void 0===t||t.addRange(i)}document.execCommand("copy")}_removeConversion(t){const e=mt(t.currentTarget);null!=e&&this.conversions.removeAt(e)}_setDefaultPattern(t){t.stopPropagation();const e=this._findSettingsFormat();e&&(e.currentPattern=e.defaultPattern)}_toggleExpand(){this._expanded=!this._expanded}_toggleInputVisibility(){this._inputVisible=!this._inputVisible,this._popupVisible&&this._hidePopup(),this._inputVisible?this.viewModel.pause():this.viewModel.resume()}_toggleMode(){this.mode="live"===this.mode?"capture":"live"}_toggleSettingsVisibility(){this._settingsVisible=!this._settingsVisible,this._popupVisible&&this._hidePopup(),this._settingsVisible?(this._setPreviewConversion(),this.viewModel.pause()):this.viewModel.resume()}};function mt(t){return t["data-index"]}function bt(t){return t["data-format"]}(0,n._)([(0,r.MZ)()],_t.prototype,"conversions",null),(0,n._)([(0,r.MZ)()],_t.prototype,"currentLocation",null),(0,n._)([(0,r.MZ)()],_t.prototype,"formats",null),(0,n._)([(0,r.MZ)()],_t.prototype,"goToOverride",null),(0,n._)([(0,r.MZ)()],_t.prototype,"headingLevel",void 0),(0,n._)([(0,r.MZ)()],_t.prototype,"label",null),(0,n._)([(0,r.MZ)(),(0,dt.G)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion")],_t.prototype,"messages",void 0),(0,n._)([(0,r.MZ)(),(0,dt.G)("esri/t9n/common")],_t.prototype,"messagesCommon",void 0),(0,n._)([(0,r.MZ)()],_t.prototype,"mode",null),(0,n._)([(0,r.MZ)()],_t.prototype,"orientation",void 0),(0,n._)([(0,r.MZ)()],_t.prototype,"multipleConversions",null),(0,n._)([(0,r.MZ)()],_t.prototype,"locationSymbol",null),(0,n._)([(0,r.MZ)()],_t.prototype,"storageEnabled",null),(0,n._)([(0,r.MZ)()],_t.prototype,"storageType",null),(0,n._)([(0,r.MZ)()],_t.prototype,"view",null),(0,n._)([(0,r.MZ)({type:st})],_t.prototype,"viewModel",void 0),(0,n._)([(0,r.MZ)()],_t.prototype,"visibleElements",void 0),(0,n._)([(0,a.w)("visibleElements")],_t.prototype,"castVisibleElements",null),(0,n._)([(0,ct.$)()],_t.prototype,"_copyCoordinateOutput",null),(0,n._)([(0,ct.$)()],_t.prototype,"_removeConversion",null),(0,n._)([(0,ct.$)()],_t.prototype,"_setDefaultPattern",null),(0,n._)([(0,ct.$)()],_t.prototype,"_toggleExpand",null),(0,n._)([(0,ct.$)()],_t.prototype,"_toggleInputVisibility",null),(0,n._)([(0,ct.$)()],_t.prototype,"_toggleMode",null),(0,n._)([(0,ct.$)()],_t.prototype,"_toggleSettingsVisibility",null),_t=(0,n._)([(0,l.$)("esri.widgets.CoordinateConversion")],_t);const ft=_t}}]);
//# sourceMappingURL=84732.8c49e263.chunk.js.map