"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[76342],{32535:(e,t,n)=>{n.d(t,{EL:()=>w,RS:()=>f,gr:()=>h,wP:()=>d,wZ:()=>u});n(35238);var i=n(39356),s=(n(81806),n(53084)),o=n(78393),r=n(19902),a=n(18117),l=n(13312);function h(e){return"declaredClass"in e}function c(e){return"declaredClass"in e}function d(e,t){return e?"declaredClass"in e?e:new i.A({layer:t,sourceLayer:t,visible:e.visible,symbol:(0,s.o8)(e.symbol),attributes:(0,s.o8)(e.attributes),geometry:u(e.geometry)}):null}function u(e){return null==e?null:h(e)?e:(0,r.rS)(function(e){const{wkid:t,wkt:n,wkt2:i,latestWkid:s}=e.spatialReference,o={wkid:t,wkt:n,wkt2:i,latestWkid:s};switch(e.type){case"point":{const{x:t,y:n,z:i,m:s}=e;return{x:t,y:n,z:i,m:s,spatialReference:o}}case"polygon":{const{rings:t,hasZ:n,hasM:i}=e;return{rings:p(t),hasZ:n,hasM:i,spatialReference:o}}case"polyline":{const{paths:t,hasZ:n,hasM:i}=e;return{paths:p(t),hasZ:n,hasM:i,spatialReference:o}}case"extent":{const{xmin:t,xmax:n,ymin:i,ymax:s,zmin:r,zmax:a,mmin:l,mmax:h,hasZ:c,hasM:d}=e;return{xmin:t,xmax:n,ymin:i,ymax:s,zmin:r,zmax:a,mmin:l,mmax:h,hasZ:c,hasM:d,spatialReference:o}}case"multipoint":{const{points:t,hasZ:n,hasM:i}=e;return{points:m(t)?v(t):t,hasZ:n,hasM:i,spatialReference:o}}default:return}}(e))}function p(e){return function(e){for(const t of e)if(0!==t.length)return m(t);return!1}(e)?e.map((e=>v(e))):e}function v(e){return e.map((e=>Array.from(e)))}function m(e){return e.length>0&&((0,o.vZ)(e[0])||(0,o.aI)(e[0]))}function w(e,t){if(!e)return null;let n;if(c(e)){if(null==t)return e.clone();if(c(t))return t.copy(e)}return null!=t?(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=(0,a.T)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function f(e){const{wkid:t,wkt:n,wkt2:i,latestWkid:s}=e,o={wkid:t,wkt:n,wkt2:i,latestWkid:s};return l.A.fromJSON(o)}},41559:(e,t,n)=>{n.r(t),n.d(t,{ElevationProfileView3D:()=>M});var i=n(88321),s=n(30726),o=n(68134),r=n(54054),a=n(48975),l=n(98773),h=n(54901),c=n(50346),d=n(12482),u=n(14835),p=n(73074),v=n(52447),m=n(45463),w=n(90992);class f{constructor(e){this._params=e,this._highlightTask=null,this._highlightHandle=null,this._visualElementHandle=null,this._settings=new u.w({getTheme:()=>this._params.view.effectiveTheme})}destroy(){this.remove()}remove(){this._highlightTask=(0,s.DC)(this._highlightTask),this._highlightHandle=(0,s.xt)(this._highlightHandle),this._visualElementHandle=(0,s.xt)(this._visualElementHandle)}showHighlight(e){if(this.remove(),null==e||!y(e))return;const t=e.layer;this._highlightTask=(0,l.UT)((async n=>{const i=await this._params.view.whenLayerView(t);(0,c.Te)(n),(0,w.Of)(i)&&(this._highlightHandle=i.highlight(e))}))}showReshaping(e){if(this.remove(),null==e)return;const t=this._params.view,n=new p.P({view:t,geometry:y(e)?e.geometry:null,attached:!1,elevationInfo:(0,d.bh)(e),renderOccluded:m.m$.OccludeAndTransparentStencil,isDecoration:!0}),i=new v.y({graphic:e}),s=[(0,o.watch)((()=>i.isDraped),(e=>{n.isDraped=e})),i.on("changed",(()=>{n.geometry=y(e)?e.geometry:null})),t.trackGraphicState(i),t.maskOccludee(e),(0,h.DQ)(n)];this._settings.visualElements.lineGraphics.outline.apply(n),n.attached=!0,this._visualElementHandle=(0,h.vE)(s)}}function y(e){return null!=e.geometry&&"polyline"===e.geometry.type}var _=n(35143),g=n(69539),x=n(91967),b=n(79468),P=n(46053),E=(n(81806),n(76460),n(47249),n(85842)),k=n(55855),R=n(23701);let L=class extends x.A{constructor(e){super(e),this._chartData=null,this._visualElements=[]}initialize(){const e=(0,b.n)((e=>{this._update(e)}),100);this.addHandles([(0,o.watch)((()=>({spatialReference:this.view.spatialReference,chartData:this._chartData})),e,o.syncAndInitial),e])}destroy(){this._destroyVisualElements()}remove(){this._destroyVisualElements()}update(e){this._chartData=e}_update(e){const{chartData:t}=e;if(null==t)return this.remove();if(!t.refined)return;const n=this._visualElements,i=t.lines.filter((e=>e.viewVisualizationEnabled)),s=i.length;for(;n.length>s;)n.pop().destroy();const o=(0,r.zj)().profileLinesStyle3D;for(;n.length<s;){const e=new p.P({view:this.view,elevationInfo:{mode:"absolute-height",offset:0},innerWidth:o.width-o.outlineSize,width:o.width,falloff:o.falloff,color:o.outlineColor,renderOccluded:o.renderOccluded,isDecoration:!0});n.push(e)}const a=e.spatialReference;for(let r=0;r<s;++r){const e=n[r],t=i[s-1-r];e.geometry=this._createLineGeometry(t,a),e.innerColor=(0,k.ci)(g.A.toUnitRGBA(t.color))}}_createLineGeometry(e,t){var n;const i=null!==(n=e.samples)&&void 0!==n?n:[],s=i.length-1,o=[];let r=[];for(let a=0;a<=s;a++){const{x:e,y:t,z:n}=i[a];null!=n&&r.push([e,t,n]),a!==s&&null!=n||!r.length||(o.push(r),r=[])}return new R.A({paths:o,hasZ:!0,spatialReference:t})}_destroyVisualElements(){this._visualElements.forEach((e=>e.destroy())),this._visualElements.length=0}};(0,_._)([(0,P.MZ)()],L.prototype,"view",void 0),(0,_._)([(0,P.MZ)()],L.prototype,"_chartData",void 0),L=(0,_._)([(0,E.$)("esri.widgets.ElevationProfile.support.ProfileLines3D")],L);class M{constructor(e,t){this._handles=new i.A,this._inputRepresentation=new f({view:e}),this._hoveredPoints=new a.t({view:e}),this._profileLines=new L({view:e}),this._handles.add([(0,o.watch)((()=>t.viewModel.hoveredPoints),(e=>this._hoveredPoints.update(e)),o.syncAndInitial),(0,o.watch)((()=>{const{state:e,editable:n,highlightEnabled:i,viewModel:s}=t,o=s.input;return o&&(o.commitProperty("geometry"),o.commitProperty("layer")),{input:o,state:e,editable:n,highlightEnabled:i}}),(e=>this._updateInputRepresentation(e)),o.syncAndInitial),(0,o.watch)((()=>t.viewModel.chartData),(e=>this._profileLines.update(e)),o.syncAndInitial),(0,o.watch)((()=>{var e;return null===(e=t.viewModel.input)||void 0===e?void 0:e.geometry}),(()=>{this._profileLines.remove()}),o.syncAndInitial)])}destroy(){this._handles=(0,s.pR)(this._handles),this._inputRepresentation=(0,s.pR)(this._inputRepresentation),this._hoveredPoints=(0,s.pR)(this._hoveredPoints),this._profileLines=(0,s.pR)(this._profileLines)}_updateInputRepresentation(e){let{input:t,state:n,editable:i,highlightEnabled:s}=e;const o=this._inputRepresentation;if(!s)return o.remove();n===r.o8.Selected?o.showHighlight(t):n!==r.o8.Created||i?o.remove():o.showReshaping(t)}}},48975:(e,t,n)=>{n.d(t,{t:()=>d});var i=n(35143),s=n(91967),o=n(19276),r=n(68134),a=n(46053),l=(n(81806),n(76460),n(47249),n(85842)),h=n(54054),c=n(68999);let d=class extends s.A{constructor(e){super(e),this._hoveredPoints=new o.A}initialize(){this.addHandles((0,r.watch)((()=>this._hoveredPoints.toArray().map((e=>{let{anchor:t,element:n}=e;return{screenLocation:t.screenLocation,element:n}}))),(e=>{for(const{screenLocation:t,element:n}of e)t&&(n.style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px)"))}),r.syncAndInitial))}destroy(){this._hoveredPoints.drain((e=>this._destroyHoveredPoint(e)))}update(e){const t=this.view,n=this._hoveredPoints,i=e.length;for(;this._hoveredPoints.length>i;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<i;){var s;const e=this._makeHoveredPoint();n.push(e),null===(s=t.surface)||void 0===s||s.appendChild(e.element)}for(let o=0;o<i;++o){const t=n.at(i-1-o),s=e[o];this._updateHoveredPoint(t,s)}}_makeHoveredPoint(){const{size:e,borderStyle:t,borderColor:n,borderWidth:i,boxShadow:s}=(0,h.zj)().hoveredPointsStyle,o=this.view,r=new c.A({view:o,screenLocationEnabled:!0}),a=document.createElement("div"),l=a.style;return l.position="absolute",l.top="0",l.left="0",l.contain="strict",l.boxSizing="border-box",l.width="".concat(e,"px"),l.height="".concat(e,"px"),l.marginTop="-".concat(e/2,"px"),l.marginLeft="-".concat(e/2,"px"),l.border="".concat(t," ").concat(i,"px ").concat(n),l.borderRadius="".concat(e,"px"),l.boxShadow=s,{anchor:r,element:a}}_updateHoveredPoint(e,t){let{anchor:n,element:i}=e;n.screenLocationEnabled=!0,n.location=t.hoveredPoint;const s=i.style;s.display="block",s.background=t.color.toCss()}_destroyHoveredPoint(e){var t;let{anchor:n,element:i}=e;n.destroy(),null===(t=this.view.surface)||void 0===t||t.removeChild(i)}};(0,i._)([(0,a.MZ)()],d.prototype,"view",void 0),(0,i._)([(0,a.MZ)()],d.prototype,"_hoveredPoints",void 0),d=(0,i._)([(0,l.$)("esri.widgets.ElevationProfile.support.HoveredPoints")],d)},68999:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(35143),s=n(54099),o=n(68134),r=n(46053),a=(n(81806),n(76460),n(47249),n(85842)),l=n(9624);let h=class extends s.A.EventedAccessor{constructor(e){super(e),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([(0,o.when)((()=>{const e=this.screenLocationEnabled?this.view:null;return e?[e.size,"3d"===e.type?e.camera:e.viewpoint]:null}),(()=>this.notifyChange("screenLocation"))),(0,o.watch)((()=>this.screenLocation),((e,t)=>{null!=e&&null!=t&&this.emit("view-change")}))])}destroy(){this.view=null}get screenLocation(){const{location:e,view:t,screenLocationEnabled:n}=this,i=null===t||void 0===t?void 0:t.spatialReference,s=i?(0,l.projectOrLoad)(e,i).geometry:null;return n&&s&&null!==t&&void 0!==t&&t.ready?t.toScreen(s):null}};(0,i._)([(0,r.MZ)()],h.prototype,"location",void 0),(0,i._)([(0,r.MZ)()],h.prototype,"screenLocation",null),(0,i._)([(0,r.MZ)()],h.prototype,"screenLocationEnabled",void 0),(0,i._)([(0,r.MZ)()],h.prototype,"view",void 0),h=(0,i._)([(0,a.$)("esri.widgets.support.AnchorElementViewModel")],h);const c=h}}]);
//# sourceMappingURL=76342.9a8ef6fe.chunk.js.map