"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[38987],{64232:(e,t,n)=>{n.d(t,{W:()=>l,g:()=>o});var i=n(9392),r=n(9624),a=n(45308);function o(e,t,n,i){var o,l;if((0,r.canProjectWithoutEngine)(e.spatialReference,n)){var s;c[0]=e.x,c[1]=e.y;const r=e.z;return c[2]=null!==(s=null!==r&&void 0!==r?r:i)&&void 0!==s?s:0,(0,a.projectBuffer)(c,e.spatialReference,0,t,n,0,1)}const u=(0,r.tryProjectWithZConversion)(e,n);return!!u&&(t[0]=null===u||void 0===u?void 0:u.x,t[1]=null===u||void 0===u?void 0:u.y,t[2]=null!==(o=null!==(l=null===u||void 0===u?void 0:u.z)&&void 0!==l?l:i)&&void 0!==o?o:0,!0)}async function l(e,t,n,i,a){return await(0,r.initializeProjection)(e.spatialReference,n,null,a),o(e,t,n,i)}const c=(0,i.vt)()},14487:(e,t,n)=>{n.d(t,{F:()=>a});n(9624);var i=n(13312),r=n(64232);function a(e,t,n,i,a){return!(null==t||null==i||e.length<2)&&(o.x=e[0],o.y=e[1],o.z=e[2],o.spatialReference=t,(0,r.g)(o,n,i,a))}const o=(0,n(18117).T)(0,0,0,i.A.WGS84)},18117:(e,t,n)=>{function i(e,t,n,i){return{x:e,y:t,z:n,hasZ:null!=n,hasM:!1,spatialReference:i,type:"point"}}n.d(t,{T:()=>i})},84687:(e,t,n)=>{n.d(t,{HD:()=>c,Rt:()=>s,bZ:()=>u});var i=n(20664),r=n(9392),a=n(34111),o=n(2413),l=n(29808);function c(e,t,n,i){return null!=e.renderCoordsHelper.fromRenderCoords(t.eye,h,i)&&(0,o.Uc)(n,h)}function s(e,t){var n;return e.elevationProvider&&null!==(n=e.elevationProvider.getElevation(t[0],t[1],t[2],e.renderCoordsHelper.spatialReference,"ground"))&&void 0!==n?n:0}function u(e,t,n,r){const o=e.state.camera.clone();t&&n&&r&&(o.eye=t,o.center=n,o.up=r),function(e,t,n){let r=d[e.viewingMode];r||(r=(0,l.hz)(e.state.viewingMode),r.options.backfacesTerrain=!e.state.isGlobal,r.options.invisibleTerrain=!0,d[e.viewingMode]=r);const{isGlobal:o}=e.state;return!(!e.sceneIntersectionHelper.intersectRay(t,r,n)||f(e,t.origin,n))||!(!e.renderCoordsHelper.intersectManifold(t,0,n)||f(e,t.origin,n))||!!o&&function(e,t,n){const r=(0,i.k)(e.origin,e.origin)-n*n,a=r>0?Math.sqrt(r)/3:1;return(0,i.h)(t,e.direction,a/(0,i.l)(e.direction)),(0,i.g)(t,t,e.origin),!0}(t,n,(0,a.tO)(e.spatialReference).radius)}(e,o.ray,m)||(0,i.c)(m,o.center);const c=e.state.constraints,s=c.minimumPoiDistance;if((0,i.a)(o.eye,m)<s){const t=c.collision.enabled;(0,i.c)(p,o.viewForward),(0,i.h)(p,p,s),t?o.eye=(0,i.f)(h,m,p):(0,i.g)(m,o.eye,p);const n=e.renderCoordsHelper,r=n.getAltitude(o.eye),a=c.collision.elevationMargin;t&&r<a&&((0,i.f)(p,m,o.eye),o.eye=n.setAltitude(h,a,o.eye),(0,i.g)(m,o.eye,p))}return o.center=m,o}function f(e,t,n){if(!e.state.isGlobal||!e.stateManager.constraintsManager)return!1;const r=s(e,t),a=e.stateManager.constraintsManager.nearFarHeuristic,{far:o}=a.compute(t,n,e.renderDataExtent,r,g),l=o*o;return(0,i.a)(t,n)>l}const d={},h=(0,r.vt)(),m=(0,r.vt)(),p=(0,r.vt)(),g={near:0,far:0}},51004:(e,t,n)=>{n.d(t,{AO:()=>re,gx:()=>De,gn:()=>ve,Fj:()=>he,Cz:()=>se,V2:()=>ge,CA:()=>pe,gU:()=>me,F3:()=>ke,wI:()=>Ge,rW:()=>we,v2:()=>oe,ZC:()=>ce,dl:()=>fe,tv:()=>de,J9:()=>Pe,w1:()=>Fe,XM:()=>We});var i=n(30358),r=n(73582),a=n(76460),o=n(15941),l=n(50346),c=n(20664),s=n(9392),u=n(34111),f=n(13904),d=n(9624),h=n(13312),m=n(64232),p=n(60216),g=n(14487),v=n(64465),y=n(84687),w=n(34761),x=n(13191),M=n(76797),R=n(71372);const A=(0,s.fA)(0,1,0),T=(0,s.fA)(0,0,1),b=(0,x.vt)(),z=(0,s.vt)(),C=(0,s.vt)();function S(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,R.N)();const{direction:r,up:a}=i;return(0,w.N9)(b,-(0,o.kU)(t)),(0,w.eL)(b,b,(0,o.kU)(n)),(0,c.e)(r,T,b),(0,c.h)(r,r,-1),(0,c.e)(a,A,b),i}function k(e,t,n,i,r){const a=e.renderSpatialReference,o=e.map&&e.spatialReference||t.spatialReference;return(0,m.g)(t,z,a),(0,m.g)(t,C,a),z[0]-=n/2,C[0]+=n/2,z[1]-=i/2,C[1]+=i/2,(0,g.F)(z,a,z,o),(0,g.F)(C,a,C,o),r?(r.xmin=z[0],r.ymin=z[1],r.xmax=C[0],r.ymax=C[1],r.spatialReference=o):r=new M.A(z[0],z[1],C[0],C[1],o),r}const G=Object.freeze(Object.defineProperty({__proto__:null,directionToHeadingTilt:function(e,t,n,i){return(0,R.g)(t,n,i,T,A)},eyeForCenterWithHeadingTilt:function(e,t,n,i){const r=S(e,n,i),a=(0,s.vt)();return(0,c.h)(a,r.direction,-t),(0,c.g)(a,a,e),{up:r.up,eye:a,heading:n,tilt:i}},eyeTiltToLookAtTilt:function(e){return(0,o.kU)(e)},headingTiltToDirectionUp:S,lookAtTiltToEyeTilt:function(e){return(0,o.KJ)(e)},toExtent:k},Symbol.toStringTag,{value:"Module"}));var F=n(45417),U=n(3136);const O=(0,s.fA)(0,0,1),Z=(0,c.n)((0,s.vt)(),(0,s.fA)(1,1,1)),E=new r.hr(-180,180),j=(0,x.vt)(),P=(0,s.vt)(),W=(0,s.vt)();function D(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,R.N)();(0,c.b)(P,e,O),0===(0,c.k)(P,P)&&(0,c.b)(P,e,Z),(0,w.$0)(j,-(0,o.kU)(t),e),(0,w.e$)(j,j,-(0,o.kU)(n),P);const{up:r,direction:a}=i;return(0,c.b)(r,P,e),(0,c.n)(r,r),(0,c.e)(r,r,j),(0,c.n)(a,e),(0,c.F)(a,a),(0,c.e)(a,a,j),i}function J(e){const t=e[1];e[1]=-e[2],e[2]=t}function H(e,t){const n=D(t,e.heading,e.tilt);return e.up=n.up,e}function I(e,t,n,i,a){let l,c,s,f;const d=t.latitude,m=(0,u.tO)(e.spatialReference).radius,p=t.longitude,g=(0,U.cq)(d,n,m)/2;l=p-g,c=p+g;const v=(0,o.kU)(d),y=(1+Math.sin(v))/(1-Math.sin(v)),w=(y+1)*Math.tan(i/m/2),x=w*w;function R(e){const t=Math.PI/2;return(e=r.uC.normalize(e,-t))>t&&(e=Math.PI-e),e}if(s=1.5*Math.PI-2*Math.atan(.5*(w+Math.sqrt(4*y+x))),f=s+i/m,s=R(s),f=R(f),f<s){const e=f;f=s,s=e}if(s=Math.max((0,o.KJ)(s),-90),f=Math.min((0,o.KJ)(f),90),c=E.monotonic(l,c),c-l>180){const e=(c-l-180)/2;l+=e,c-=e}const A=e.spatialReference&&e.spatialReference.isGeographic?e.spatialReference:h.A.WGS84;return a?(a.xmin=l,a.ymin=s,a.xmax=c,a.ymax=f,a.spatialReference=A):a=new M.A(l,s,c,f,A),e.spatialReference&&e.spatialReference.isWebMercator&&(0,F.Gh)(a,!1,a),a}const q=Object.freeze(Object.defineProperty({__proto__:null,directionToHeadingTilt:function(e,t,n,i){const r=P,a=W;return(0,c.n)(r,e),(0,c.b)(W,r,O),0===(0,c.k)(W,W)&&(0,c.b)(W,r,Z),(0,c.b)(a,W,r),(0,R.g)(t,n,i,r,a)},eyeForCenterWithHeadingTilt:function(e,t,n,i){const r={eye:(0,s.vt)(),up:null,tilt:i,heading:n},a=P;a[0]=e[0],a[1]=e[2],a[2]=-e[1];const l=t,u=(0,o.kU)(n),f=(0,o.kU)(i),d=Math.sin(u),h=Math.cos(u),m=Math.sin(f),p=Math.cos(f),g=(0,c.l)(a);let v;if(Math.abs(f)<1e-8)v=l+g;else{const e=g/m,t=(0,o.YN)(l/e),n=Math.PI-f-t;v=e*Math.sin(n)}const y=p*l,w=l*l*(m*m),x=h*h*w,M=v-y,R=M*M,A=x*(x+R-a[1]*a[1]);if(A<0)return(0,c.h)(r.eye,a,v/g),r.tilt=0,H(r,e);const T=Math.sqrt(A),b=a[1]*M,z=x+R;let C;if(C=h>0?-T+b:T+b,Math.abs(z)<1e-8)return g<1e-8?(r.eye[0]=0,r.eye[1]=0,r.eye[2]=l):(0,c.h)(r.eye,a,v/g),r.tilt=0,J(r.eye),H(r,e);r.eye[1]=C/z;const S=d*d*w,k=m*l,G=h*k*r.eye[1],F=r.eye[1]*r.eye[1],U=1-F,O=Math.sqrt(U),Z=x*F+S-2*G*O*M+U*R;return Math.abs(Z)<1e-8?((0,c.h)(r.eye,a,v/g),r.tilt=0,J(r.eye),H(r,e)):(r.eye[0]=(U*(v*a[0]-y*a[0])-k*O*(a[0]*r.eye[1]*h+a[2]*d))/Z,r.eye[2]=(U*(v*a[2]-y*a[2])-k*O*(a[2]*r.eye[1]*h-a[0]*d))/Z,(0,c.h)(r.eye,r.eye,v),J(r.eye),H(r,e))},eyeTiltToLookAtTilt:function(e,t,n){const i=(0,o.kU)(e),r=(0,c.l)(t);return(0,o.YN)(n/(r/Math.sin(i)))+i},headingTiltToDirectionUp:D,lookAtTiltToEyeTilt:function(e,t,n){const i=(0,c.l)(t),r=Math.sqrt(n*n+i*i-2*n*i*Math.cos(Math.PI-e)),a=(0,o.YN)(n/(r/Math.sin(e)));return(0,o.KJ)(e-a)},toExtent:I},Symbol.toStringTag,{value:"Module"}));var K=n(80935),L=n(59801);const B=()=>a.A.getLogger("esri.views.3d.support.cameraUtils"),N=39.37,_=96,X=1,Y=8,V=5,$=1,Q=(0,s.vt)(),ee={heading:0,tilt:0},te=(0,s.vt)(),ne=new r.hr(-20037508.342788905,20037508.342788905),ie=new r.hr(-180,180);var re,ae;function oe(e){var t;return null!==(t=e.spatialReference)&&void 0!==t?t:h.A.WGS84}function le(e){return"global"===e.viewingMode?q:G}function ce(e,t,n,i,r){return le(e).headingTiltToDirectionUp(t,n,i,r)}function se(e,t){if(null==t)return null;const n=e.renderSpatialReference,i=le(e).headingTiltToDirectionUp,r=(0,s.vt)();if(!(0,m.g)(t.position,r,n))return null;const a=i(r,t.heading,t.tilt);(0,c.h)(a.direction,a.direction,e.state.camera.distance),(0,c.g)(a.direction,a.direction,r);const l=(0,y.bZ)(e,r,a.direction,a.up);return l.fov=(0,o.kU)(t.fov),l.row=t.layout.row,l.rows=t.layout.rows,l.column=t.layout.column,l.columns=t.layout.columns,l}(ae=re||(re={}))[ae.LOCKED=0]="LOCKED",ae[ae.ADJUST=1]="ADJUST";const ue=(0,s.vt)();function fe(e,t,n){const r=e.renderSpatialReference,a=ve(e,t.eye,t.viewForward,t.up,ee);let l=oe(e);return(0,g.F)(t.eye,r,ue,l)||(l=h.A.WGS84,(0,g.F)(t.eye,r,ue,l)),null==n?n=new i.A(new f.A(ue,l),a.heading,a.tilt,(0,o.KJ)(t.fov)):(n.position.x=ue[0],n.position.y=ue[1],n.position.z=ue[2],n.position.spatialReference=l,n.heading=a.heading,n.tilt=a.tilt,n.fov=(0,o.KJ)(t.fov)),n.layout.row=t.row,n.layout.rows=t.rows,n.layout.column=t.column,n.layout.columns=t.columns,n}function de(e,t,n){const i=e.state.camera,r=i.width/2/i.pixelRatio;return e.renderCoordsHelper.viewingMode===v.RT.Global&&null!=n&&(t*=Math.cos((0,o.kU)(n))),t/=e.renderCoordsHelper.unitInMeters,r/(_*N/t)/Math.tan(i.fovX/2)}function he(e,t,n){const i=e.state.camera,r=t*Math.tan(i.fovX/2),a=i.width/2/i.pixelRatio;let l=_*N/(a/r);return e.renderCoordsHelper.viewingMode===v.RT.Global&&null!=n&&(l/=Math.cos((0,o.kU)(n))),l*e.renderCoordsHelper.unitInMeters}async function me(e,t,n,i,r,a){return ge(e,t,de(e,n,t.latitude),i,r,a)}function pe(e,t,n,i,r,a){return Ee(e,we(e,i.heading,i.tilt,t,n,r),i.fov,a)}async function ge(e,t,n,i,r,a){const o=await xe(e,i.heading,i.tilt,t,n,r,a);return(0,l.Te)(a),je(e,o,i.fov,a)}function ve(e,t,n,i,r){return le(e).directionToHeadingTilt(t,n,i,r)}function ye(e,t){var n;return!!(e.basemapTerrain&&e.renderCoordsHelper.fromRenderCoords(t,te,e.spatialReference)&&e.elevationProvider&&(null!==(n=(0,K.R1)(e.elevationProvider,te))&&void 0!==n?n:0)>te[2]-$)}function we(e,t,n,i,r,a){return Me(e,t,n,i instanceof f.A?i:null,function(e,t){const n=(0,s.vt)();if(null==t)return(0,c.c)(n,e.state.camera.center);if(t instanceof f.A){if(!(0,m.g)(t,n,e.renderSpatialReference))return null;const{basemapTerrain:i,elevationProvider:r}=e;if(null==t.z&&null!=i&&null!=r){const i=(0,K.R1)(r,t);null!=i&&e.renderCoordsHelper.setAltitude(n,i)}return n}return(0,c.c)(n,t)}(e,i),r,a)}async function xe(e,t,n,i,r,a,o){const u=i instanceof f.A?i:null,d=await async function(e,t,n){const i=(0,s.vt)();if(null==t)return(0,c.c)(i,e.state.camera.center);if(t instanceof f.A){const{renderSpatialReference:a,basemapTerrain:o,elevationProvider:c}=e,s=t.spatialReference;if(await(0,m.W)(t,i,a,0,{signal:n}),(0,l.Te)(n),null==t.z&&null!=o&&null!=c){var r;const a=await c.queryElevation(t.x,t.y,null!==(r=t.z)&&void 0!==r?r:0,s,"ground",n);(0,l.Te)(n),null!=a&&e.renderCoordsHelper.setAltitude(i,a)}return i}return(0,c.c)(i,t)}(e,i,o);return(0,l.Te)(o),Re(e,t,n,u,d,r,a,o)}function Me(e,t,n,i,r,a,o){if(null==r)return null;if(!i&&(i=new f.A({spatialReference:oe(e)}),!(0,p.E)(r,e.renderSpatialReference,i)))return null;const l=Ae(e,t,n,r,a,o);if(Te(e,n,o)&&ye(e,l.eye)){const{tilt:o,mode:l}=be(e,n,r,a);return Me(e,t,o,i,r,a,l)}return ze(l,r)}async function Re(e,t,n,i,r,a,o,c){i||(i=new f.A({spatialReference:oe(e)}),await(0,p.C)(r,e.renderSpatialReference,i,{signal:c})||(i=null)),(0,l.Te)(c);const s=Ae(e,t,n,r,a,o);if(Te(e,n,o)&&await async function(e,t,n){var i;if(ye(e,t))return!0;const{elevationProvider:r,spatialReference:a,renderCoordsHelper:o}=e;if(null==r||!o.fromRenderCoords(t,te,a))return!1;const[c,s,u]=te,f=null!==(i=await r.queryElevation(c,s,u,a,"ground",n))&&void 0!==i?i:0;return(0,l.Te)(n),f>u-$}(e,s.eye,c)){(0,l.Te)(c);const{tilt:o,mode:s}=be(e,n,r,a);return Re(e,t,o,i,r,a,s,c)}return ze(s,r)}function Ae(e,t,n,i,r,a){const o=function(e,t,n,i,r,a){let o=0;return a===re.ADJUST&&function(e,t,n){const i=e.pointsOfInterest.centerOnSurfaceFrequent.distance;if(Math.log(n/i)/Math.LN2>Y)return!0;const r=e.renderSpatialReference,a=oe(e),o=new f.A({spatialReference:a});if(!(0,p.E)(t,r,o))return!1;const l=new f.A({spatialReference:a});if(!(0,p.E)(e.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,r,l))return!1;const c=Math.tan(.5*e.state.camera.fov)*i;return l.distance(o)/c>V}(e,i,r)?(t=0,o=function(e,t,n,i){const r=Ze(e,i,t,n);if(!e.state.constraints.tilt)return r;const a=e.state.constraints.tilt(t);a.max=Math.min(a.max,.5*Math.PI);const o=a.min*(1-Ue)+a.max*Ue;return Math.min(r,o)}(e,r,n,i)):o=Ze(e,i,r,n),o=e.state.constraints.clampTilt(r,o),{heading:t,tilt:n=Oe(e,i,r,o)}}(e,t,n,i,r=Math.max(r,e.state.constraints.minimumPoiDistance),a);return(0,le(e).eyeForCenterWithHeadingTilt)(i,r,o.heading,o.tilt)}function Te(e,t,n){const i=e.map.ground.navigationConstraint;return n===re.ADJUST&&"global"===e.viewingMode&&t>0&&(null==i||"stay-above"===i.type)}function be(e,t,n,i){const r=Oe(e,n,i,function(e,t,n,i){let r=Ze(e,i,t,n);if(!e.state.constraints.tilt)return r;const a=e.state.constraints.tilt(t);return r=Math.min(r,.5*Math.PI),a.min*(1-Ue)+r*Ue}(e,i,t,n));return{tilt:r,mode:t-r<1?re.LOCKED:re.ADJUST}}function ze(e,t){return{...e,center:(0,s.o8)(t)}}function Ce(e,t){const{state:n,spatialReference:i}=e,r=t.spatialReference;return n.isGlobal&&(0,L.M)(r,v.RT.Global)||n.isLocal&&i.equals(r)}function Se(e,t){let n,i,r;if(e.state.isGlobal){const e=new f.A(t.xmin,t.ymin,t.spatialReference),a=new f.A(t.xmax,t.ymax,t.spatialReference),o=t.spatialReference.isGeographic?ie:ne;n=new f.A({x:o.center(e.x,a.x),y:(a.y+e.y)/2,z:null!=t.zmax&&null!=t.zmin?(t.zmax+t.zmin)/2:void 0,spatialReference:t.spatialReference});const l=(0,u.tO)(t.spatialReference),c=(0,U.J_)(n,e,a);i=c.lon,r=c.lat,o.diff(e.x,a.x)>o.range/2&&(i+=l.halfCircumference),i=Math.min(i,l.halfCircumference),r=Math.min(r,l.halfCircumference)}else{var a;const o=null!==(a=e.renderSpatialReference)&&void 0!==a?a:t.spatialReference;o.equals(t.spatialReference)||(t=(0,d.project)(t,o)),i=t.xmax-t.xmin,r=t.ymax-t.ymin;const l=null!=t.zmax&&null!=t.zmin?(t.zmax+t.zmin)/2:void 0;n=new f.A({x:t.xmin+.5*i,y:t.ymin+.5*r,z:l,spatialReference:o})}const o=null!=t.zmax&&null!=t.zmin?t.zmax-t.zmin:0,l=e.state.camera,c=1/Math.tan(l.fovX/2),s=1/Math.tan(l.fovY/2),h=1/Math.tan(l.fov/2);return{center:n,distance:Math.max(.5*i*c,.5*r*s,.5*o*h)/X}}async function ke(e,t,n,i,r,a){const o=Ce(e,t)?t:await(0,d.projectWithZConversion)(t,e.spatialReference,{signal:a});(0,l.Te)(a);const{center:c,distance:s}=Se(e,o),u=await xe(e,n,i,c,s,r,a);return(0,l.Te)(a),je(e,u,e.camera.fov,a)}function Ge(e,t,n,i,r,a){let o;try{o=Ce(e,t)?t:(0,d.project)(t,e.spatialReference)}catch(u){return null}const{center:l,distance:c}=Se(e,o),s=we(e,n,i,l,c,r);return null==s?null:Ee(e,s,e.camera.fov,a)}function Fe(e,t,n){const i=e.renderSpatialReference,r=new f.A({spatialReference:oe(e)});if(!(0,p.E)(n,i,r))return null;const a=Math.tan(t.fovX/2),o=Math.tan(t.fovY/2),l=(0,c.o)(t.eye,n),s=2*l*a*X,u=2*l*o*X;return"global"===e.viewingMode?I(e,r,s,u):k(e,r,s,u)}const Ue=.7;function Oe(e,t,n,i){return le(e).lookAtTiltToEyeTilt(i,t,n)}function Ze(e,t,n,i){return le(e).eyeTiltToLookAtTilt(i,t,n)}function Ee(e,t,n,r){var a;if(null==t)return null;const o=e.renderSpatialReference,l=new f.A({spatialReference:oe(e)});return(0,p.E)(t.eye,o,l)?(null!==(a=r)&&void 0!==a||(r=new i.A),r.position=l,r.heading=t.heading,r.tilt=t.tilt,r.fov=n,r):null}async function je(e,t,n,r){const a=e.renderSpatialReference,o=new f.A({spatialReference:oe(e)});return await(0,p.C)(t.eye,a,o,{signal:r}),(0,l.Te)(r),new i.A(o,t.heading,t.tilt,n)}function Pe(e,t){var n;const i=null===(n=e.basemapTerrain)||void 0===n?void 0:n.tilingScheme;if(i)return i.levelAtScale(t);B().error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")}function We(e,t){var n;const i=null===(n=e.basemapTerrain)||void 0===n?void 0:n.tilingScheme;if(i)return i.scaleAtLevel(t);B().error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")}function De(e,t){return(0,g.F)(t.center,e.renderSpatialReference,Q,h.A.WGS84),he(e,t.distance,Q[1])}},71372:(e,t,n)=>{n.d(t,{N:()=>c,g:()=>s});var i=n(15941),r=n(20664),a=n(9392);const o=(0,a.vt)(),l=(0,a.vt)();function c(){return{direction:(0,a.vt)(),up:(0,a.vt)()}}function s(e,t,n,a,c){let s=(0,r.n)(o,e),u=(0,r.k)(s,a);const f=u>0;u=Math.abs(u),u>.99&&(u=Math.abs((0,r.k)(t,a)),u<.99?((0,r.c)(s,t),f&&(0,r.h)(s,s,-1)):s=null);let d=0;if(s){(0,r.h)(l,a,(0,r.k)(a,s)),(0,r.f)(s,s,l);const e=(0,r.k)(s,c)/((0,r.l)(s)*(0,r.l)(c));(0,r.b)(l,s,c),d=((0,r.k)(l,a)>0?1:-1)*(0,i.KJ)((0,i.XM)(e))}const h=(0,i.KJ)((0,i.XM)(-(0,r.k)(a,e)/(0,r.l)(e)));return n?(n.heading=d,n.tilt=h,n):{heading:d,tilt:h}}},3136:(e,t,n)=>{n.d(t,{J_:()=>l,aE:()=>u,cq:()=>c,uu:()=>s});var i=n(15941),r=n(34111),a=n(13904);function o(e,t,n){if(null==t.longitude||null==t.latitude||null==n.longitude||null==n.latitude)throw new Error("Invalid points: no lon/lat");return function(e,t,n,r,a){const o=(0,i.kU)(n),l=(0,i.kU)(a),c=o-l,s=(0,i.kU)(t)-(0,i.kU)(r),u=Math.sin(c/2),f=Math.sin(s/2),d=2*(0,i.YN)(Math.sqrt(u*u+Math.cos(o)*Math.cos(l)*f*f))*e;return Math.round(1e4*d)/1e4}(e,t.longitude,t.latitude,n.longitude,n.latitude)}function l(e,t,n){const i=t.spatialReference,l=(0,r.tO)(i),c=new a.A(t.x,e.y,i),s=new a.A(n.x,e.y,i),u=new a.A(e.x,t.y,i),f=new a.A(e.x,n.y,i);return{lon:o(l.radius,c,s),lat:o(l.radius,u,f)}}function c(e,t,n){const r=t/n,a=(0,i.kU)(e),o=Math.sin(r/2),l=Math.cos(a),c=2*(0,i.YN)(Math.sqrt(o*o/(l*l)));return(0,i.KJ)(c)}function s(e,t){let n=e/15;return t||(n=Math.round(n)),n}function u(e,t){const n=null===e||void 0===e?void 0:e[0];if(null==n)return null;t||(t={hours:0,minutes:0,seconds:0}),t.hours=s(n,!0);const i=t.hours%1;t.hours-=i,t.minutes=60*i;const r=t.minutes%1;return t.minutes-=r,t.seconds=Math.round(60*r),t}},38987:(e,t,n)=>{n.d(t,{Qq:()=>W,on:()=>E,toCameraAsync:()=>j,vt:()=>D});var i=n(30358),r=(n(35238),n(39356)),a=n(48053),o=n(98773),l=(n(81806),n(73582)),c=n(50076),s=n(50346),u=n(63919),f=n(44680),d=n(13191),h=n(20664),m=n(9392),p=n(9624),g=n(5809),v=n(64232),y=n(60216),w=n(14487),x=n(42294),M=n(2413),R=n(4763),A=n(68002),T=n(84687),b=n(51004),z=n(80935),C=n(13904),S=n(76797),k=n(13312),G=n(89189),F=n(66388);const U=.66;function O(e){return 360-l.ie.normalize(e)}function Z(e){return l.ie.normalize(360-e)}function E(e,t,n){const i=t.camera;if(null!=i)return function(e,t){const n=e.position;let i;try{i=(0,p.tryProjectWithZConversion)(n,t)}catch(a){return null}if(!i)return null;const r=e.clone();return r.position=i.clone(),r}(i,(0,b.v2)(e));const{targetGeometry:r}=t;if(null==r)return null;const{camera:a,mode:o}=P(e,t.rotation,n);if("point"===r.type)return function(e,t,n,i,r){const a=e.spatialReference;let o;try{o=(0,p.tryProjectWithZConversion)(n.clone(),a)}catch(c){return null}if(!o)return null;const l=null!=t.scale?(0,b.tv)(e,t.scale,o.latitude):e.state.camera.distance;return(0,b.CA)(e,o,l,i,r)}(e,t,r,a,o);const l=r.extent;return null==l?null:(0,b.wI)(e,l,a.heading,a.tilt,o)}async function j(e,t,n,i){const r=t.camera;if(null!=r)return async function(e,t,n){const i=e.position,r=await(0,p.projectWithZConversion)(i,t,{signal:n});(0,s.Te)(n);const a=e.clone();return a.position=r.clone(),a}(r,(0,b.v2)(e),i);const{targetGeometry:a}=t;if(null==a)throw new Error("Viewpoint has no targetGeometry!");const{camera:o,mode:l}=P(e,t.rotation,n);if("point"===a.type)return async function(e,t,n,i,r,a){const o=e.spatialReference,l=await(0,p.projectWithZConversion)(n.clone(),o,{signal:a});(0,s.Te)(a);const c=null!=t.scale?(0,b.tv)(e,t.scale,l.latitude):e.state.camera.distance;return(0,b.V2)(e,l,c,i,r,a)}(e,t,a,o,l,i);const c=a.extent;if(null==c)throw new Error("Target geometry has no extent!");return(0,b.F3)(e,c,o.heading,o.tilt,l,i)}function P(e,t,n){const i=(0,b.dl)(e,e.state.camera);let r=b.AO.ADJUST;return null!=t&&(i.heading=O(t),r=b.AO.LOCKED),null!=n&&(i.tilt=n),{camera:i,mode:r}}function W(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null==n&&(n=new a.A),I(e,null,t.clone(),n)}async function D(e,t,n){const r=function(e,t){if(!t||!e.spatialReference)return null;const n={target:void 0};return"declaredClass"in t||Array.isArray(t)?n.target=t:(Object.assign(n,t),t.center&&!n.target&&(n.target=t.center)),n}(e,t);if(!r)throw new c.A("viewpointutils-create:no-target","Missing target for creating viewpoint");const o=new i.A({fov:e.camera.fov}),l=new a.A({camera:o});if(r.target instanceof a.A)return N(await async function(e,t,n,i,r){if(null!=t.camera)return L(e,t.camera,i,r);r.scale=t.scale,r.rotation=t.rotation,r.targetGeometry=null!=t.targetGeometry?t.targetGeometry.clone():null,r.camera=null,null!=n.heading?r.rotation=Z(n.heading):null!=n.rotation&&(r.rotation=n.rotation);const a=J(e,n);return null!=a&&(r.scale=a),r.camera=await j(e,r,n.tilt,i),r}(e,r.target,r,n,l));if(r.target instanceof i.A)return N(await L(e,r.target,n,l));const s=null!=r.scale||null!=r.zoom;if(r.target instanceof S.A){const t=r.target.xmin===r.target.xmax||r.target.ymin===r.target.ymax;return N(s||t?await B(e,r,r.target.center,o,n,l):await async function(e,t,n,i,r,a){a.targetGeometry=n.clone();const o=(0,T.bZ)(e);(0,b.dl)(e,o,i);const l=H(i,t)?b.AO.LOCKED:b.AO.ADJUST;return a.camera=await(0,b.F3)(e,n,i.heading,i.tilt,l,r),a}(e,r,r.target,o,n,l))}const f={boundingBox:(0,x.Ie)(),hasZ:!1,screenSpaceObjects:[]},d=s?function(e,t){const n=J(e,t);return n?(0,A.j8)(n):void 0}(e,r):void 0;if(await K(e,r.target,d,f,n),isFinite(f.boundingBox[0])){let t;if((0,x.gX)(f.boundingBox,_),ie.x=_[0],ie.y=_[1],ie.z=_[2],ie.spatialReference=e.spatialReference,isFinite(ie.z)&&f.hasZ?t=(0,x.fT)(f.boundingBox):(ie.z=void 0,t=(0,M.ye)((0,x.ES)(f.boundingBox,$))),s||t)return N(await B(e,r,ie,o,n,l));const i=function(e,t){const n=U;if(!t.length)return n;let i=Number.NEGATIVE_INFINITY;for(let r=0;r<t.length;r++){const e=t[r].screenSpaceBoundingRect;i=Math.max(i,Math.abs(e[0]),Math.abs(e[1]),Math.abs(e[2]),Math.abs(e[3]))}return n-i/Math.min(e.width,e.height)*2}(e,f.screenSpaceObjects);return N(await async function(e,t,n,i,r,a,o,l){l.targetGeometry=n.clone();const c=(0,T.bZ)(e),s=function(e,t,n,i,r){let a=0;null!=n.z?a=n.z:e.basemapTerrain&&e.elevationProvider&&(a=(0,z.R1)(e.elevationProvider,n)),(0,h.s)(_,n.x,n.y,a),(0,g.l)(e.spatialReference,_,X,e.renderSpatialReference),(0,u.z0)(Y,X),(0,u.mg)(Y,Y),(0,x.Ie)(V);const o=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(let u=0;u<o.length;u++){const t=o[u];let n=i[t[2]];isFinite(n)||(n=a),(0,h.s)(_,i[t[0]],i[t[1]],n),(0,w.F)(_,e.spatialReference,_,e.renderSpatialReference),(0,x.iT)(V,(0,h.t)(_,_,Y))}const l=(0,x.VL)(V),c=(0,x.uJ)(V),s=(0,x.yr)(V),f=1/Math.tan(t.fovX/2),d=1/Math.tan(t.fovY/2),m=.5*Math.sqrt(l*l+s*s)*Math.max(d,f)+.5*c,p=.5*c*d+.5*Math.max(l,s);return Math.max(m,p)/r}(e,c,n,i,r);(0,b.dl)(e,c,a);const f=H(a,t)?b.AO.LOCKED:b.AO.ADJUST;return l.scale=(0,b.Fj)(e,s,l.targetGeometry.latitude),l.camera=await(0,b.gU)(e,l.targetGeometry,l.scale,a,f,o),l}(e,r,ie,f.boundingBox,i,o,n,l))}return r.position?N(await async function(e,t,n,i,r){const a=(0,T.bZ)(e);(0,h.c)(Q,a.viewForward),(0,b.gn)(e,a.eye,Q,a.up,ne);const o=e.spatialReference,{position:l}=t;if(l){const e=await(0,p.projectWithZConversion)(l,o,{signal:r});n.position=e}else n.position=new C.A;return n.heading=null!=t.heading?t.heading:ne.heading,n.tilt=null!=t.tilt?t.tilt:ne.tilt,I(e,null,n,i)}(e,r,o,l,n)):N(await async function(e,t,n,i,r){const a=(0,T.bZ)(e),{spatialReference:o,renderSpatialReference:l}=e,c=new C.A({spatialReference:o});return(0,y.E)(a.center,l,c)?B(e,t,c,n,i,r):B(e,t,null,n,i,r)}(e,r,o,n,l))}function J(e,t){return null==t.scale&&null!=t.zoom?(0,b.XM)(e,t.zoom):t.scale}function H(e,t){let n=!1;return null!=t.heading?(e.heading=t.heading,n=!0):null!=t.rotation&&(e.heading=O(t.rotation),n=!0),null!=t.tilt&&(e.tilt=t.tilt,n=!0),null!=t.fov&&(e.fov=t.fov),n}function I(e,t,n,i){const r=e.spatialReference||k.A.WGS84;if(null==(t=null!=t?t:(0,b.Cz)(e,n)))return i;const a=new C.A({spatialReference:r});return(0,y.E)(t.center,e.renderSpatialReference,a)?(i.targetGeometry=a,i.scale=(0,b.gx)(e,t),i.rotation=Z(n.heading),i.camera=n,i):i}async function q(e,t,n,i){var r;const a=()=>new c.A("viewpointutils:invalid-geometry","The target is missing a valid geometry");if(!t)throw a();"mesh"===t.type&&(t=t.extent);const o=t.spatialReference,l=e.spatialReference,s=e.basemapTerrain.spatialReference;if(!t.hasZ&&e.basemapTerrain){var u;let n;switch(t.type){case"point":n=t;break;case"multipoint":case"polyline":n=null===(r=t.extent)||void 0===r?void 0:r.center;break;case"extent":n=t.center;break;case"polygon":n=t.centroid}null!=n&&null!=s&&null!=e.elevationProvider?(n=await(0,p.projectWithZConversion)(n,s,{signal:i}),_[2]=null!==(u=(0,z.R1)(e.elevationProvider,n))&&void 0!==u?u:0):_[2]=0}const f=re[t.type],d=new Array;if(f(t,t.hasZ?e=>{d.push([e[0],e[1],e[2]])}:e=>{d.push([e[0],e[1]])},_),0===d.length)throw a();const h=await(0,p.projectWithZConversion)(new F.A({spatialReference:o,hasZ:t.hasZ,hasM:!1,points:d}),l,{signal:i});if(t.hasZ&&(n.hasZ=!0),t.hasZ)for(const[c,m,p]of h.points)_[0]=c,_[1]=m,_[2]=p,(0,x.iT)(n.boundingBox,_);else for(const[c,m]of h.points)_[0]=c,_[1]=m,(0,x.iT)(n.boundingBox,_)}async function K(e,t,n,i,a){if(Array.isArray(t)&&2===t.length){var l;const n=t[0],r=t[1];if("number"==typeof n&&"number"==typeof r)return ie.x=n,ie.y=r,ie.z=void 0,ie.spatialReference=null!==(l=e.spatialReference)&&void 0!==l&&l.isGeographic?e.spatialReference:k.A.WGS84,void await q(e,ie,i,a)}t&&"map"in t&&"function"==typeof t.map?await Promise.allSettled(t.map((t=>K(e,t,n,i,a)))):t instanceof G.A?await q(e,t,i,a):t instanceof r.A&&await async function(e,t,n,i,r){const a=await(0,o.Ke)(e.whenViewForGraphic(t));if(!1===a.ok||null==a.value||!("whenGraphicBounds"in a.value))return void await q(e,t.geometry,i,r);const l=a.value,c=await(0,o.Ke)(l.whenGraphicBounds(t,{minDemResolution:n}));if(!1===c.ok||!c.value)return void await q(e,t.geometry,i,r);const{screenSpaceObjects:s,boundingBox:u}=c.value;(0,x.RF)(i.boundingBox,u),s&&s.forEach((e=>{i.screenSpaceObjects.push(e)})),isFinite(u[2])&&(i.hasZ=!0)}(e,t,n,i,a)}async function L(e,t,n,i){const r=e.spatialReference,a=await(0,p.projectWithZConversion)(t.position,r,{signal:n});return(t=t.clone()).fov=e.camera.fov,t.position=a,I(e,null,t,i)}async function B(e,t,n,i,r,a){if(null==n)throw new c.A("createfromcenter","invalid point");a.targetGeometry=n.clone();const o=(0,T.bZ)(e);if(t.position)return async function(e,t,n,i,r,a,o){const l=e.renderSpatialReference;return await(0,v.W)(t,te,l,0,{signal:o}),await(0,v.W)(n,ee,l,0,{signal:o}),a.targetGeometry=new C.A(t),r.position=new C.A(n),(0,h.f)(Q,te,ee),(0,b.gn)(e,ee,Q,i.up,r),a.scale=(0,b.Fj)(e,(0,h.q)(ee,te),a.targetGeometry.latitude),a.rotation=Z(r.heading),a.camera=r,a}(e,a.targetGeometry,t.position,o,i,a,r);if(t.zoomFactor){const i=o.distance/t.zoomFactor,r=(0,h.h)(_,o.viewForward,-i);o.eye=(0,h.g)(_,o.center,r),a.scale=(0,b.Fj)(e,i,n.latitude)}(0,b.dl)(e,o,i);const l=H(i,t)?b.AO.LOCKED:b.AO.ADJUST;if(!t.zoomFactor){const c=J(e,t);if(null==c){const{renderSpatialReference:t}=e;await(0,v.W)(n,_,t,0,{signal:r}),(0,R.bU)(o.frustum,_)?a.scale=(0,b.Fj)(e,(0,h.q)(o.eye,_),n.latitude):a.scale=(0,b.gx)(e,o)}else a.scale=c;a.camera=await(0,b.gU)(e,a.targetGeometry,a.scale,i,l,r)}return a}function N(e){return null!=(null===e||void 0===e?void 0:e.camera)&&(e.rotation=Z(e.camera.heading)),e}const _=(0,m.vt)(),X=(0,d.vt)(),Y=(0,f.vt)(),V=(0,x.vt)(),$=(0,M.vt)(),Q=(0,m.vt)(),ee=(0,m.vt)(),te=(0,m.vt)(),ne={heading:0,tilt:0},ie=new C.A,re={point(e,t,n){n[0]=e.x,n[1]=e.y,null!=e.z&&(n[2]=e.z),t(n)},polygon(e,t,n){const i=e.hasZ;for(let r=0;r<e.rings.length;r++){const a=e.rings[r];for(let e=0;e<a.length;e++)n[0]=a[e][0],n[1]=a[e][1],i&&(n[2]=a[e][2]),t(n)}},polyline(e,t,n){const i=e.hasZ;for(let r=0;r<e.paths.length;r++){const a=e.paths[r];for(let e=0;e<a.length;e++)n[0]=a[e][0],n[1]=a[e][1],i&&(n[2]=a[e][2]),t(n)}},multipoint(e,t,n){const i=e.points,r=e.hasZ;for(let a=0;a<i.length;a++)n[0]=i[a][0],n[1]=i[a][1],r&&(n[2]=i[a][2]),t(n)},extent(e,t,n){null!=e.zmin&&null!=e.zmax?(t((0,h.s)(n,e.xmin,e.ymin,e.zmin)),t((0,h.s)(n,e.xmax,e.ymin,e.zmin)),t((0,h.s)(n,e.xmin,e.ymax,e.zmin)),t((0,h.s)(n,e.xmax,e.ymax,e.zmin)),t((0,h.s)(n,e.xmin,e.ymin,e.zmax)),t((0,h.s)(n,e.xmax,e.ymin,e.zmax)),t((0,h.s)(n,e.xmin,e.ymax,e.zmax)),t((0,h.s)(n,e.xmax,e.ymax,e.zmax))):(t((0,h.s)(n,e.xmin,e.ymin,n[2])),t((0,h.s)(n,e.xmax,e.ymin,n[2])),t((0,h.s)(n,e.xmin,e.ymax,n[2])),t((0,h.s)(n,e.xmax,e.ymax,n[2])))}}}}]);
//# sourceMappingURL=38987.3b456cab.chunk.js.map