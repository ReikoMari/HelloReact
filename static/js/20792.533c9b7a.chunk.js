"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[20792],{95085:(e,t,i)=>{i.d(t,{A:()=>p});var s=i(35143),n=i(91967),l=i(18690),r=i(69098),o=i(5632),a=i(42553),c=i(46053),u=(i(81806),i(76460),i(85842));let d=0,h=class extends((0,a.Te)((0,r.O)((0,o.sA)(n.A)))){constructor(e){super(e),this.id="".concat(Date.now().toString(16),"-analysis-").concat(d++),this.title=null}get parent(){return this._get("parent")}set parent(e){const t=this.parent;if(null!=t)switch(t.type){case"line-of-sight":case"dimension":t.releaseAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}get isEditable(){return this.requiredPropertiesForEditing.every(l.Ru)}};(0,s._)([(0,c.MZ)({type:String,constructOnly:!0,clonable:!1})],h.prototype,"id",void 0),(0,s._)([(0,c.MZ)({type:String})],h.prototype,"title",void 0),(0,s._)([(0,c.MZ)({clonable:!1,value:null})],h.prototype,"parent",null),(0,s._)([(0,c.MZ)({readOnly:!0})],h.prototype,"isEditable",null),h=(0,s._)([(0,u.$)("esri.analysis.Analysis")],h);const p=h},62315:(e,t,i)=>{i.d(t,{A:()=>v});var s=i(35143),n=(i(35238),i(69098)),l=i(73582),r=i(42553),o=i(30726),a=i(46053),c=i(21403),u=(i(47249),i(81806),i(85842)),d=i(40565),h=i(37546),p=i(13904);let y=class extends((0,n.O)(r.oY)){constructor(e){super(e),this.type="plane",this.position=null,this.heading=0,this.tilt=0,this.width=10,this.height=10}equals(e){return this.heading===e.heading&&this.tilt===e.tilt&&(0,o.CM)(this.position,e.position)&&this.width===e.width&&this.height===e.height}};(0,s._)([(0,a.MZ)({readOnly:!0,json:{read:!1,write:!0}})],y.prototype,"type",void 0),(0,s._)([(0,a.MZ)({type:p.A}),(0,h.P)()],y.prototype,"position",void 0),(0,s._)([(0,a.MZ)({type:Number,nonNullable:!0,range:{min:0,max:360}}),(0,h.P)(),(0,c.w)((e=>l.ie.normalize((0,d.GB)(e),0,!0)))],y.prototype,"heading",void 0),(0,s._)([(0,a.MZ)({type:Number,nonNullable:!0,range:{min:0,max:360}}),(0,h.P)(),(0,c.w)((e=>l.ie.normalize((0,d.GB)(e),0,!0)))],y.prototype,"tilt",void 0),(0,s._)([(0,a.MZ)({type:Number,nonNullable:!0}),(0,h.P)()],y.prototype,"width",void 0),(0,s._)([(0,a.MZ)({type:Number,nonNullable:!0}),(0,h.P)()],y.prototype,"height",void 0),y=(0,s._)([(0,u.$)("esri.analysis.SlicePlane")],y);const v=y},53514:(e,t,i)=>{i.d(t,{T:()=>s,d:()=>v});const s={Base64:0,Hex:1,String:2,Raw:3},n=8,l=(1<<n)-1;function r(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function o(e){const t=[];for(let i=0,s=e.length*n;i<s;i+=n)t[i>>5]|=(e.charCodeAt(i/n)&l)<<i%32;return t}function a(e){const t=[];for(let i=0,s=32*e.length;i<s;i+=n)t.push(String.fromCharCode(e[i>>5]>>>i%32&l));return t.join("")}function c(e,t,i,s,n,l){return r(function(e,t){return e<<t|e>>>32-t}(r(r(t,e),r(s,l)),n),i)}function u(e,t,i,s,n,l,r){return c(t&i|~t&s,e,t,n,l,r)}function d(e,t,i,s,n,l,r){return c(t&s|i&~s,e,t,n,l,r)}function h(e,t,i,s,n,l,r){return c(t^i^s,e,t,n,l,r)}function p(e,t,i,s,n,l,r){return c(i^(t|~s),e,t,n,l,r)}function y(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,s=-271733879,n=-1732584194,l=271733878;for(let o=0;o<e.length;o+=16){const t=i,a=s,c=n,y=l;i=u(i,s,n,l,e[o],7,-680876936),l=u(l,i,s,n,e[o+1],12,-389564586),n=u(n,l,i,s,e[o+2],17,606105819),s=u(s,n,l,i,e[o+3],22,-1044525330),i=u(i,s,n,l,e[o+4],7,-176418897),l=u(l,i,s,n,e[o+5],12,1200080426),n=u(n,l,i,s,e[o+6],17,-1473231341),s=u(s,n,l,i,e[o+7],22,-45705983),i=u(i,s,n,l,e[o+8],7,1770035416),l=u(l,i,s,n,e[o+9],12,-1958414417),n=u(n,l,i,s,e[o+10],17,-42063),s=u(s,n,l,i,e[o+11],22,-1990404162),i=u(i,s,n,l,e[o+12],7,1804603682),l=u(l,i,s,n,e[o+13],12,-40341101),n=u(n,l,i,s,e[o+14],17,-1502002290),s=u(s,n,l,i,e[o+15],22,1236535329),i=d(i,s,n,l,e[o+1],5,-165796510),l=d(l,i,s,n,e[o+6],9,-1069501632),n=d(n,l,i,s,e[o+11],14,643717713),s=d(s,n,l,i,e[o],20,-373897302),i=d(i,s,n,l,e[o+5],5,-701558691),l=d(l,i,s,n,e[o+10],9,38016083),n=d(n,l,i,s,e[o+15],14,-660478335),s=d(s,n,l,i,e[o+4],20,-405537848),i=d(i,s,n,l,e[o+9],5,568446438),l=d(l,i,s,n,e[o+14],9,-1019803690),n=d(n,l,i,s,e[o+3],14,-187363961),s=d(s,n,l,i,e[o+8],20,1163531501),i=d(i,s,n,l,e[o+13],5,-1444681467),l=d(l,i,s,n,e[o+2],9,-51403784),n=d(n,l,i,s,e[o+7],14,1735328473),s=d(s,n,l,i,e[o+12],20,-1926607734),i=h(i,s,n,l,e[o+5],4,-378558),l=h(l,i,s,n,e[o+8],11,-2022574463),n=h(n,l,i,s,e[o+11],16,1839030562),s=h(s,n,l,i,e[o+14],23,-35309556),i=h(i,s,n,l,e[o+1],4,-1530992060),l=h(l,i,s,n,e[o+4],11,1272893353),n=h(n,l,i,s,e[o+7],16,-155497632),s=h(s,n,l,i,e[o+10],23,-1094730640),i=h(i,s,n,l,e[o+13],4,681279174),l=h(l,i,s,n,e[o],11,-358537222),n=h(n,l,i,s,e[o+3],16,-722521979),s=h(s,n,l,i,e[o+6],23,76029189),i=h(i,s,n,l,e[o+9],4,-640364487),l=h(l,i,s,n,e[o+12],11,-421815835),n=h(n,l,i,s,e[o+15],16,530742520),s=h(s,n,l,i,e[o+2],23,-995338651),i=p(i,s,n,l,e[o],6,-198630844),l=p(l,i,s,n,e[o+7],10,1126891415),n=p(n,l,i,s,e[o+14],15,-1416354905),s=p(s,n,l,i,e[o+5],21,-57434055),i=p(i,s,n,l,e[o+12],6,1700485571),l=p(l,i,s,n,e[o+3],10,-1894986606),n=p(n,l,i,s,e[o+10],15,-1051523),s=p(s,n,l,i,e[o+1],21,-2054922799),i=p(i,s,n,l,e[o+8],6,1873313359),l=p(l,i,s,n,e[o+15],10,-30611744),n=p(n,l,i,s,e[o+6],15,-1560198380),s=p(s,n,l,i,e[o+13],21,1309151649),i=p(i,s,n,l,e[o+4],6,-145523070),l=p(l,i,s,n,e[o+11],10,-1120210379),n=p(n,l,i,s,e[o+2],15,718787259),s=p(s,n,l,i,e[o+9],21,-343485551),i=r(i,t),s=r(s,a),n=r(n,c),l=r(l,y)}return[i,s,n,l]}function v(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.Hex)||s.Base64,i=y(o(e),e.length*n);switch(t){case s.Raw:return i;case s.Hex:return function(e){const t="0123456789abcdef",i=[];for(let s=0,n=4*e.length;s<n;s++)i.push(t.charAt(e[s>>2]>>s%4*8+4&15)+t.charAt(e[s>>2]>>s%4*8&15));return i.join("")}(i);case s.String:return a(i);case s.Base64:return function(e){const t=[];for(let i=0,s=4*e.length;i<s;i+=3){const s=(e[i>>2]>>i%4*8&255)<<16|(e[i+1>>2]>>(i+1)%4*8&255)<<8|e[i+2>>2]>>(i+2)%4*8&255;for(let n=0;n<4;n++)8*i+6*n>32*e.length?t.push("="):t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>6*(3-n)&63))}return t.join("")}(i)}}},37546:(e,t,i)=>{i.d(t,{P:()=>p});var s=i(50076),n=i(53514),l=i(24387),r=i(90534),o=i(49723),a=i(19258),c=i(49140),u=i(46053),d=i(95474),h=i(79453);function p(e){var t;const i=null!==(t=null===e||void 0===e?void 0:e.origins)&&void 0!==t?t:[void 0];return(t,s)=>{const n=function(e,t,i){var s;if("resource"===(null===e||void 0===e?void 0:e.type))return function(e,t,i){const s=(0,a.z4)(t,i);return{type:String,read:(e,t,i)=>{const n=(0,h.r)(e,t,i);return s.type===String?n:"function"==typeof s.type?new s.type({url:n}):void 0},write:{writer(t,n,o,a){if(null===a||void 0===a||!a.resources)return"string"==typeof t?void(n[o]=(0,h.t)(t,a)):void(n[o]=t.write({},a));const u=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),p=(0,h.t)(u,{...a,verifyItemRelativeUrls:null!==a&&void 0!==a&&a.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},h.M.NO),_=s.type!==String&&(!(0,l.H)(this)||(null===a||void 0===a?void 0:a.origin)&&this.originIdOf(i)>(0,c.aB)(a.origin)),g={object:this,propertyName:i,value:t,targetUrl:p,dest:n,targetPropertyName:o,context:a,params:e};null!==a&&void 0!==a&&a.portalItem&&p&&!(0,r.oP)(p)?_&&null!==e&&void 0!==e&&e.contentAddressed?y(g):_?function(e){var t;const{context:i,targetUrl:s,params:n,value:l,dest:o,targetPropertyName:a}=e;if(!i.portalItem)return;const c=i.portalItem.resourceFromPath(s),u=w(l,s,i),h=(0,d.n)(u),p=(0,r.Zo)(c.path),_=null!==(t=null===n||void 0===n?void 0:n.compress)&&void 0!==t&&t;h===p?(i.resources&&v({...e,resource:c,content:u,compress:_,updates:i.resources.toUpdate}),o[a]=s):y(e)}(g):function(e){let{context:t,targetUrl:i,dest:s,targetPropertyName:n}=e;t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),s[n]=i)}(g):null!==a&&void 0!==a&&a.portalItem&&(null==p||null!=(0,h.i)(p)||(0,r.w8)(p)||_)?y(g):n[o]=p}}}}(e,t,i);switch(null!==(s=null===e||void 0===e?void 0:e.type)&&void 0!==s?s:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=h.b;return{read:e,write:t}}}}(e,t,s);for(const e of i){const i=(0,u.rM)(t,e,s);for(const e in n)i[e]=n[e]}}}function y(e){var t,i,l,a;const{targetUrl:c,params:u,value:p,context:y,dest:_,targetPropertyName:g}=e;if(!y.portalItem)return;const f=(0,h.p)(c),m=w(p,c,y);if(null!==u&&void 0!==u&&u.contentAddressed&&"json"!==m.type)return void(null===(t=y.messages)||void 0===t||t.push(new s.A("persistable:contentAddressingUnsupported",'Property "'.concat(g,'" is trying to serializing a resource with content of type ').concat(m.type," with content addressing. Content addressing is only supported for json resources."),{content:m})));const b=null!==u&&void 0!==u&&u.contentAddressed&&"json"===m.type?(0,n.d)(m.jsonString):null!==(i=null===f||void 0===f?void 0:f.filename)&&void 0!==i?i:(0,o.lk)(),x=(0,r.fj)(null!==(l=null===u||void 0===u?void 0:u.prefix)&&void 0!==l?l:null===f||void 0===f?void 0:f.prefix,b),M="".concat(x,".").concat((0,d.n)(m));if(null!==u&&void 0!==u&&u.contentAddressed&&y.resources&&"json"===m.type){var V;const e=null!==(V=y.resources.toKeep.find((e=>{let{resource:t}=e;return t.path===M})))&&void 0!==V?V:y.resources.toAdd.find((e=>{let{resource:t}=e;return t.path===M}));if(e)return void(_[g]=e.resource.itemRelativeUrl)}const A=y.portalItem.resourceFromPath(M);(0,r.w8)(c)&&y.resources&&y.resources.pendingOperations.push((0,r.tk)(c).then((e=>{A.path="".concat(x,".").concat((0,d.n)({type:"blob",blob:e})),_[g]=A.itemRelativeUrl})).catch((()=>{})));const Z=null!==(a=null===u||void 0===u?void 0:u.compress)&&void 0!==a&&a;y.resources&&v({...e,resource:A,content:m,compress:Z,updates:y.resources.toAdd}),_[g]=A.itemRelativeUrl}function v(e){let{object:t,propertyName:i,updates:s,resource:n,content:l,compress:r}=e;s.push({resource:n,content:l,compress:r,finish:e=>{!function(e,t,i){"string"==typeof e[t]?e[t]=i.url:e[t].url=i.url}(t,i,e)}})}function w(e,t,i){return"string"==typeof e?{type:"url",url:t}:{type:"json",jsonString:JSON.stringify(e.toJSON(i))}}},24387:(e,t,i)=>{function s(e){return e&&"getAtOrigin"in e&&"originOf"in e}i.d(t,{H:()=>s})},95474:(e,t,i)=>{i.d(t,{n:()=>n});var s=i(90534);function n(e){return l[function(e){return"json"===e.type?"application/json":"blob"===e.type?e.blob.type:function(e){const t=(0,s.Zo)(e);return a[t]||r}(e.url)}(e)]||o}const l={},r="text/plain",o=l[r],a={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const c in a)l[a[c]]=c},20792:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var s=i(35143),n=i(50346),l=i(46053),r=(i(81806),i(76460),i(47249),i(85842)),o=i(25329),a=i(95085),c=i(62315),u=i(19276),d=i(3975);let h=class extends a.A{constructor(e){super(e),this.type="slice",this.tiltEnabled=!1,this.shape=null,this.excludeGroundSurface=!1}get excludedLayers(){return this._get("excludedLayers")||new u.A}set excludedLayers(e){this._set("excludedLayers",(0,d.V)(e,this._get("excludedLayers")))}get requiredPropertiesForEditing(){var e;return[null===(e=this.shape)||void 0===e?void 0:e.position]}clear(){this.shape=null}};(0,s._)([(0,l.MZ)({type:["slice"]})],h.prototype,"type",void 0),(0,s._)([(0,l.MZ)()],h.prototype,"tiltEnabled",void 0),(0,s._)([(0,l.MZ)({types:{key:"type",base:null,typeMap:{plane:c.A},defaultKeyValue:"plane"}})],h.prototype,"shape",void 0),(0,s._)([(0,l.MZ)({cast:d.H,clonable:e=>e.slice()})],h.prototype,"excludedLayers",null),(0,s._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],h.prototype,"excludeGroundSurface",void 0),(0,s._)([(0,l.MZ)({readOnly:!0})],h.prototype,"requiredPropertiesForEditing",null),h=(0,s._)([(0,r.$)("esri.analysis.SliceAnalysis")],h);const p=h;var y=i(29078);const v=new Set;let w=class extends y.D{constructor(e){super(e),this.analysis=null,this.supportedViewType="3d",this.unsupportedErrorMessage="SliceViewModel is only supported in 3D views.",v.add(this)}destroy(){v.delete(this)}get state(){return this.disabled||!this.ready?"disabled":null==this.tool?"ready":this.tool.state}get shape(){return this.analysis.shape}set shape(e){this.analysis.shape=e}get tiltEnabled(){return this.analysis.tiltEnabled}set tiltEnabled(e){this.analysis.tiltEnabled=e}get layersMode(){var e,t;return null!==(e=null===(t=this.tool)||void 0===t?void 0:t.layersMode)&&void 0!==e?e:"none"}get excludedLayers(){return this.analysis.excludedLayers}set excludedLayers(e){this.analysis.excludedLayers=u.A.isCollection(e)?e:new u.A(e)}get excludeGroundSurface(){return this.analysis.excludeGroundSurface}set excludeGroundSurface(e){this.analysis.excludeGroundSurface=e}async start(){await super.start(),v.forEach((e=>{e.view===this.view&&e!==this&&e.clear()})),null!=this.analysisView&&(this.analysisView.active=!0)}enterExcludeLayerMode(){null!=this.tool&&this.tool.enterExcludeLayerMode()}exitExcludeLayerMode(){null!=this.tool&&this.tool.exitExcludeLayerMode()}onConnectToAnalysisView(e){e.active=!0}constructAnalysis(){return new p}};(0,s._)([(0,l.MZ)({type:p})],w.prototype,"analysis",void 0),(0,s._)([(0,l.MZ)({readOnly:!0})],w.prototype,"state",null),(0,s._)([(0,l.MZ)()],w.prototype,"shape",null),(0,s._)([(0,l.MZ)()],w.prototype,"tiltEnabled",null),(0,s._)([(0,l.MZ)()],w.prototype,"layersMode",null),(0,s._)([(0,l.MZ)()],w.prototype,"excludedLayers",null),(0,s._)([(0,l.MZ)({nonNullable:!0})],w.prototype,"excludeGroundSurface",null),w=(0,s._)([(0,r.$)("esri.widgets.Slice.SliceViewModel")],w);const _=w;var g=i(77666),f=i(98108),m=i(87540),b=i(15062),x=(i(76099),i(63582)),M=i(54761);const V="esri-slice",A={base:V,widgetIcon:b.T.slice,actions:"".concat(V,"__actions"),cancelButton:"".concat(V,"__cancel-button"),container:"".concat(V,"__container"),error:"".concat(V,"__error"),excludeButton:"".concat(V,"__exclude-button"),hint:"".concat(V,"__hint"),hintText:"".concat(V,"__hint-text"),layerItem:"".concat(V,"__layer-item"),layerList:"".concat(V,"__layer-list"),layerListHeading:"".concat(V,"__layer-list-title"),newSliceButton:"".concat(V,"__clear-button")};let Z=class extends o.A{constructor(e,t){super(e,t),this.headingLevel=3,this.iconClass=A.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new _,this._onNewSliceClick=()=>{(0,n.QZ)(this.viewModel.start())}}loadDependencies(){return(0,g.W)({action:()=>Promise.all([i.e(39879),i.e(62785),i.e(48897),i.e(37918)]).then(i.bind(i,92111)),button:()=>Promise.all([i.e(39879),i.e(62785),i.e(95203),i.e(75151),i.e(11309)]).then(i.bind(i,11309)),"list-item":()=>Promise.all([i.e(39879),i.e(62785),i.e(48897),i.e(3732)]).then(i.bind(i,84661)),list:()=>Promise.all([i.e(39879),i.e(62785),i.e(95203),i.e(13859),i.e(79545),i.e(58838)]).then(i.bind(i,58838))})}get active(){return this.viewModel.active}get analysis(){return this.viewModel.analysis}set analysis(e){this.viewModel.analysis=e}get excludedLayers(){return this.viewModel.excludedLayers}set excludedLayers(e){this.viewModel.excludedLayers=e}get excludeGroundSurface(){return this.viewModel.excludeGroundSurface}set excludeGroundSurface(e){this.viewModel.excludeGroundSurface=e}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}get hasVoxelLayers(){var e;const t=null===(e=this.viewModel)||void 0===e?void 0:e.view;return null!=t&&t.allLayerViews.some((e=>"voxel-3d"===e.type))}render(){return(0,M.K)("div",{class:this.classes(A.base,f.D.widget,f.D.panel),role:"presentation"},this.visible?(0,M.K)("div",{class:A.container},this.viewModel.supported?[this._renderHint(),this._renderLayerList(),this._renderActions()]:this._renderUnsupported()):null)}_renderUnsupported(){return(0,M.K)("div",{class:A.error,key:"unsupported"},(0,M.K)("p",null,this.messages.unsupported))}_renderHint(){const{hasVoxelLayers:e,messages:t,viewModel:i}=this,{active:s,layersMode:n,state:l}=i;let r=null;return s&&("exclude"===n?r=t.excludeHint:"ready"===l&&(r=e?t.voxelHint:t.hint)),r?(0,M.K)("div",{class:A.hint,key:"hint"},(0,M.K)("p",{class:A.hintText},r),(0,M.K)("p",{class:A.hintText},t.verticalHint)):null}_renderLayerList(){const{excludedLayers:e,excludeGroundSurface:t,headingLevel:i,messages:s,viewModel:n}=this,{layersMode:l,state:r}=n,o="slicing"===r||"sliced"===r,a=e?e.toArray().map((e=>this._renderLayerItem({uid:e.uid,title:e.title,onClick:()=>(this.excludedLayers.remove(e),!1)}))):[];return t&&a.push(this._renderLayerItem({uid:"ground",title:s.ground,onClick:()=>(this.excludeGroundSurface=!1,!1)})),"exclude"!==l&&o&&0!==a.length?(0,M.K)("div",{class:A.layerList,key:"settings"},(0,M.K)(m.D,{class:A.layerListHeading,level:i},s.excludedLayers),(0,M.K)("calcite-list",{selectionMode:"none"},a)):null}_renderActions(){const{messages:e,viewModel:t}=this,{active:i,state:s}=t,n="disabled"===s,l="slicing"===s||"sliced"===s,r="exclude"===t.layersMode,o=[];return i&&!l||r||o.push((0,M.K)("calcite-button",{class:A.newSliceButton,disabled:n,key:"new-slice",onclick:this._onNewSliceClick},e.newSlice)),l&&!r&&o.push((0,M.K)("calcite-button",{appearance:"outline-fill",class:A.excludeButton,disabled:n,key:"exclude",onclick:()=>t.enterExcludeLayerMode()},e.excludeLayer)),i&&r&&o.push((0,M.K)("calcite-button",{appearance:"outline-fill",class:A.cancelButton,disabled:n,key:"cancel-exclude",onclick:()=>t.exitExcludeLayerMode()},e.cancel)),0===o.length?null:(0,M.K)("div",{class:A.actions},o)}_renderLayerItem(e){var t;return(0,M.K)("calcite-list-item",{class:A.layerItem,key:e.uid,label:null!==(t=e.title)&&void 0!==t?t:""},(0,M.K)("calcite-action",{icon:"x",onclick:e.onClick,scale:"s",slot:"actions-end",text:this.messages.includeLayer}))}};(0,s._)([(0,l.MZ)()],Z.prototype,"active",null),(0,s._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],Z.prototype,"analysis",null),(0,s._)([(0,l.MZ)()],Z.prototype,"excludedLayers",null),(0,s._)([(0,l.MZ)()],Z.prototype,"excludeGroundSurface",null),(0,s._)([(0,l.MZ)()],Z.prototype,"headingLevel",void 0),(0,s._)([(0,l.MZ)()],Z.prototype,"iconClass",void 0),(0,s._)([(0,l.MZ)()],Z.prototype,"icon",void 0),(0,s._)([(0,l.MZ)()],Z.prototype,"label",null),(0,s._)([(0,l.MZ)(),(0,x.G)("esri/widgets/Slice/t9n/Slice")],Z.prototype,"messages",void 0),(0,s._)([(0,l.MZ)()],Z.prototype,"view",null),(0,s._)([(0,l.MZ)({type:_})],Z.prototype,"viewModel",void 0),(0,s._)([(0,l.MZ)()],Z.prototype,"visible",null),(0,s._)([(0,l.MZ)()],Z.prototype,"hasVoxelLayers",null),Z=(0,s._)([(0,r.$)("esri.widgets.Slice")],Z);const I=Z},29078:(e,t,i)=>{i.d(t,{D:()=>y});var s,n,l=i(35143),r=i(91967),o=i(98773),a=i(76460),c=i(30726),u=i(50346),d=i(68134),h=i(46053),p=(i(81806),i(47249),i(85842));(n=s||(s={}))[n.PENDING=0]="PENDING",n[n.WAIT_FOR_VIEW_READY=1]="WAIT_FOR_VIEW_READY",n[n.RUNNING=2]="RUNNING";let y=class extends r.A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.view=null,this.analysisView=null,this._reconnectViewTask=null,this._forceInteractiveHandle=null,this._parentChangeFromReconnect=!1,this._startUserOperation=null,this.logger=a.A.getLogger(this);const t=null===e||void 0===e?void 0:e.analysis;null!=t?this.analysis=t:(this._set("analysis",this.constructAnalysis()),this._set("isAnalysisOwner",!0)),null!=(null===e||void 0===e?void 0:e.visible)&&(this.visible=e.visible)}normalizeCtorArgs(e){const{analysis:t,...i}=e;return i}initialize(){this.addHandles([(0,d.watch)((()=>({readyAndNotSupported:null!=this.view&&this.view.ready&&!this.supported})),(e=>{let{readyAndNotSupported:t}=e;t&&this.logger.errorOnce(this.unsupportedErrorMessage)}),d.syncAndInitial),(0,d.watch)((()=>{var e;return null===(e=this.analysis)||void 0===e?void 0:e.parent}),(e=>{this._parentChangeFromReconnect||e===this.view||this._set("isAnalysisOwner",!1);const t=!this._parentChangeFromReconnect;this._parentChangeFromReconnect=!1,t&&this._scheduleViewReconnect()}),d.sync),(0,d.watch)((()=>({view:this.view,ready:null!=this.view&&this.view.ready,supported:this.supported})),((e,t)=>{let{view:i}=e;const s=null===t||void 0===t?void 0:t.view;i!==s&&(this._startUserOperation=(0,c.DC)(this._startUserOperation),this._disconnectFromView(s)),this._scheduleViewReconnect()}),d.syncAndInitial)])}destroy(){this._reconnectViewTask=(0,c.DC)(this._reconnectViewTask),this._startUserOperation=(0,c.DC)(this._startUserOperation),null!=this.analysisView&&(this.analysisView.visible=void 0),this._disconnectFromView(this.view),this._set("view",null),null!=this.analysis&&this.isAnalysisOwner&&(this.analysis.destroy(),this._set("analysis",null))}get supported(){return null==this.view||this.view.type===this.supportedViewType}set visible(e){this._set("visible",e),null!=this.analysisView&&(this.analysisView.visible=e)}get active(){return null!=this.tool&&this.tool.active}get disabled(){return null==this.view||!this.view.ready||!this.supported}set analysis(e){e!==this._get("analysis")&&(this._startUserOperation=(0,c.DC)(this._startUserOperation),this._disconnectFromView(this.view),this._setExternalAnalysis(e),this._scheduleViewReconnect())}get ready(){return null!=this.analysisView&&!this.connectingToView}get connectingToView(){return null!=this._reconnectViewTask}get isAnalysisOwner(){return this._get("isAnalysisOwner")}get tool(){return null!=this.analysisView?this.analysisView.tool:null}clear(){this._startUserOperation=(0,c.DC)(this._startUserOperation),this._resetInteractiveCreationState(),null!=this.tool&&null!=this.view&&this.view.activeTool===this.tool&&(this.view.activeTool=null)}async start(){this.clear();const e={task:null,abort:null,state:s.PENDING},t=(0,o.UT)((async t=>{if(e.state=s.WAIT_FOR_VIEW_READY,await(0,d.whenOnce)((()=>this.ready),t),e.state=s.RUNNING,null==this.analysisView||null==this.view)return;const i=this.analysisView.tool;null!=i&&(this.view.activeTool=i,(0,d.when)((()=>i.created),(()=>{i.active&&null!=this.view&&(this.view.activeTool=null)}),{initial:!0,once:!0}))}));return e.task=t,e.abort=()=>t.abort(),this._startUserOperation=e,t.promise}onConnectToAnalysisView(e){}onDisconnectFromAnalysisView(){}_scheduleViewReconnect(){this._reconnectViewTask=(0,c.DC)(this._reconnectViewTask);const e=(0,o.UT)((async t=>{try{await this._reconnectView(t)}catch(i){if((0,u.Te)(t),!(0,u.zf)(i))return void this.logger.warn("Failed to use analysis in view model",i);throw i}finally{e===this._reconnectViewTask&&(this._reconnectViewTask=null)}}));this._reconnectViewTask=e}async _reconnectView(e){const{view:t}=this,i=null!=t&&t.ready&&this.supported,s=this.analysis;if(this._startUserOperation=v(this._startUserOperation),this._disconnectFromView(t),i&&null!=t&&null!=s){if(this.isAnalysisOwner){if(null!=s.parent)return void this.logger.errorOnce("expected owned analysis to have null parent when connecting to view");this._parentChangeFromReconnect=!0,t.analyses.add(s)}this.analysisView=await t.whenAnalysisView(s),(0,u.G4)(e)?this._startUserOperation=v(this._startUserOperation):(this.analysisView.visible=this.visible,this._forceInteractiveHandle=this.analysisView.forceInteractiveForViewModel(),this.addHandles(this._forceInteractiveHandle),this.onConnectToAnalysisView(this.analysisView))}}_disconnectFromView(e){null!=e&&this.isAnalysisOwner&&e.analyses.includes(this.analysis)&&(this._parentChangeFromReconnect=!0,this.analysis.clear(),e.analyses.remove(this.analysis)),this.onDisconnectFromAnalysisView(),this._forceInteractiveHandle=(0,c.xt)(this._forceInteractiveHandle),this.analysisView=null}_setExternalAnalysis(e){null==this.analysisView||this.isAnalysisOwner||(this.analysisView.visible=void 0,this._forceInteractiveHandle=(0,c.xt)(this._forceInteractiveHandle)),this.analysisView=null,this._set("isAnalysisOwner",!1),this._set("analysis",e),this._parentChangeFromReconnect=!1}_resetInteractiveCreationState(){this.analysis.clear(),null!=this.tool&&this.tool.resetCreated()}get testInfo(){return{analysisView:this.analysisView}}};function v(e){return null!=e&&e.state>=s.RUNNING?(e.abort(),null):e}(0,l._)([(0,h.MZ)()],y.prototype,"supported",null),(0,l._)([(0,h.MZ)()],y.prototype,"view",void 0),(0,l._)([(0,h.MZ)({type:Boolean,value:!0})],y.prototype,"visible",null),(0,l._)([(0,h.MZ)()],y.prototype,"active",null),(0,l._)([(0,h.MZ)()],y.prototype,"disabled",null),(0,l._)([(0,h.MZ)({nonNullable:!0})],y.prototype,"analysis",null),(0,l._)([(0,h.MZ)()],y.prototype,"analysisView",void 0),(0,l._)([(0,h.MZ)()],y.prototype,"ready",null),(0,l._)([(0,h.MZ)()],y.prototype,"connectingToView",null),(0,l._)([(0,h.MZ)({readOnly:!0})],y.prototype,"isAnalysisOwner",null),(0,l._)([(0,h.MZ)()],y.prototype,"_reconnectViewTask",void 0),(0,l._)([(0,h.MZ)()],y.prototype,"_forceInteractiveHandle",void 0),(0,l._)([(0,h.MZ)()],y.prototype,"tool",null),y=(0,l._)([(0,p.$)("esri.widgets.support.AnalysisViewModel")],y)}}]);
//# sourceMappingURL=20792.533c9b7a.chunk.js.map