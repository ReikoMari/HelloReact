"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[89764],{67296:(e,t,o)=>{o.d(t,{default:()=>K});var r=o(35143),i=o(39356),n=o(46053),s=(o(81806),o(76460)),a=(o(47249),o(85842)),l=o(38451),d=o(74438),u=(o(35238),o(3825)),c=o(50076),p=o(49304),y=o(77717),v=o(50346),m=o(90534),h=o(76797),w=o(19902),g=o(61979),f=o(13096),b=o(45802),T=o(6409),I=o(11187);const _=(0,b.O)()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let S=class extends I.A{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const t={...e,query:{f:"json"}},{data:o}=await(0,u.A)(this.statusUrl,t);return this.read(o),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{interval:t=1e3,statusCallback:o}=e;return new Promise(((e,r)=>{this._clearTimer();const i=setInterval((()=>{this._timer||r((0,v.NK)()),this.checkJobStatus().then((t=>{const{status:r}=t;switch(this.status=r,r){case"job-succeeded":this._clearTimer(),e(this);break;case"job-waiting":case"job-executing":o&&o(this)}}),(e=>{this._clearTimer(),r(e)}))}),t);this._timer=i}))}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};(0,r._)([(0,n.MZ)()],S.prototype,"editsResolver",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],S.prototype,"statusUrl",void 0),(0,r._)([(0,T.e)(_)],S.prototype,"status",void 0),(0,r._)([(0,n.MZ)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],S.prototype,"submissionTime",void 0),(0,r._)([(0,n.MZ)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],S.prototype,"lastUpdatedTime",void 0),S=(0,r._)([(0,a.$)("esri.networks.support.TopologyValidationJobInfo")],S);const N=S;var k=o(78715),j=o(35298),M=o(13312);let C=class extends((0,y.P)(p.A)){static fromPortalItem(e){return(0,k.C8)(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._applyEditsHandler=e=>{const{serviceUrl:t,gdbVersion:o,result:r}=e,i=t===this.featureServiceUrl,n=(0,g.gz)(t,o,this.gdbVersion);i&&n&&r.then((e=>{(0,j.w5)(t,o)&&(this.historicMoment=e.historicMoment)}))},this._updateMomentHandler=e=>{const{serviceUrl:t,gdbVersion:o,moment:r}=e,i=t===this.featureServiceUrl,n=(0,g.gz)(t,o,this.gdbVersion);i&&n&&(this.historicMoment=r)},this.when().then((()=>{this.addHandles([(0,g.Jz)(this._applyEditsHandler),(0,g.dP)(this._updateMomentHandler)])}),(()=>{}))}initialize(){this.when().catch((e=>{var t,o;(0,v.zf)(e)||s.A.getLogger(this).error("#load()","Failed to load layer (title: '".concat(null!==(t=this.title)&&void 0!==t?t:"no title","', id: '").concat(null!==(o=this.id)&&void 0!==o?o:"no id","')"),{error:e})}))}get datasetName(){var e,t;return null!==(e=null===(t=this.dataElement)||void 0===t?void 0:t.name)&&void 0!==e?e:null}get owner(){var e,t;return null!==(e=null===(t=this.dataElement)||void 0===t?void 0:t.userIdentity)&&void 0!==e?e:null}get schemaGeneration(){var e,t;return null!==(e=null===(t=this.dataElement)||void 0===t?void 0:t.schemaGeneration)&&void 0!==e?e:null}get parsedUrl(){return(0,m.An)(this.layerUrl)}get featureServiceUrl(){return(0,f.qg)(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return(0,f.qg)(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const r=this.dataElement.domainNetworks;for(const i of r){for(const o of null!==(t=i.edgeSources)&&void 0!==t?t:[]){var t;if(o.sourceId===e)return o.layerId}for(const t of null!==(o=i.junctionSources)&&void 0!==o?o:[]){var o;if(t.sourceId===e)return t.layerId}}return null}return null}async queryNamedTraceConfigurations(e,t){var r;const[{queryNamedTraceConfigurations:i},{default:n}]=await Promise.all([o.e(8341).then(o.bind(o,8341)),o.e(77194).then(o.bind(o,77194))]),s=this.networkServiceUrl,a=n.from(e);return null===(r=await i(s,a,{...t}))||void 0===r?void 0:r.namedTraceConfigurations}async validateTopology(e,t){if(!e.validateArea)throw new c.A("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:i}]=await Promise.all([o.e(77814).then(o.bind(o,77814)),o.e(28266).then(o.bind(o,28266))]),n=i.from(e);(0,j.w5)(this.featureServiceUrl,this.gdbVersion||null)?n.sessionID=j.TA:n.sessionID=null,n.gdbVersion=this.gdbVersion;const s=this.networkServiceUrl,a=this.featureServiceUrl,l=(0,g.Zk)(a,null,this.gdbVersion,!0),d=await r(s,n,{...t});if(null!==d&&void 0!==d&&d.serviceEdits){const e=[];for(const t of d.serviceEdits){var u,p,y;const{editedFeatures:o}=t,r=null!==o&&void 0!==o&&o.spatialReference?new M.A(o.spatialReference):null;e.push({layerId:t.layerId,editedFeatures:{adds:(null===o||void 0===o||null===(u=o.adds)||void 0===u?void 0:u.map((e=>this._createEditedFeature(e,r))))||[],updates:(null===o||void 0===o||null===(p=o.updates)||void 0===p?void 0:p.map((e=>({original:this._createEditedFeature(e[0],r),current:this._createEditedFeature(e[1],r)}))))||[],deletes:(null===o||void 0===o||null===(y=o.deletes)||void 0===y?void 0:y.map((e=>this._createEditedFeature(e,r))))||[],spatialReference:r}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:e,exceededTransferLimit:!1,historicMoment:d.moment})}return d}async submitTopologyValidationJob(e,t){let r=null;if(!e.validateArea)throw new c.A("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const e=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await(0,u.A)(e,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:i},{default:n}]=await Promise.all([o.e(77814).then(o.bind(o,77814)),o.e(28266).then(o.bind(o,28266))]),s=n.from(e);(0,j.w5)(this.featureServiceUrl,this.gdbVersion||null)?s.sessionID=j.TA:s.sessionID=null,s.gdbVersion=this.gdbVersion||r;const a=this.networkServiceUrl,l=this.featureServiceUrl?(0,g.Zk)(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,d=await i(a,s,{...t});return new N({statusUrl:d,editsResolver:l})}_createEditedFeature(e,t){return new i.A({attributes:e.attributes,geometry:(0,w.rS)({...e.geometry,spatialReference:t})})}async _fetchLayerMetaData(e,t){const o=await(0,u.A)(e,{responseType:"json",query:{f:"json"},...t});this.sourceJSON=o.data,this.read(o.data,{origin:"service"})}async _fetchDataElement(e,t,o){if(this.dataElement)return;const r=await(0,u.A)("".concat(e,"/queryDataElements"),{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...o}).then((e=>{var t;return null===(t=e.data.layerDataElements)||void 0===t?void 0:t[0]}));r&&this.read(r,{origin:"service"})}};(0,r._)([(0,n.MZ)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],C.prototype,"id",void 0),(0,r._)([(0,n.MZ)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],C.prototype,"title",void 0),(0,r._)([(0,n.MZ)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],C.prototype,"layerUrl",void 0),(0,r._)([(0,n.MZ)({type:Object,json:{origins:{service:{read:!0}},read:!1}})],C.prototype,"dataElement",void 0),(0,r._)([(0,n.MZ)({type:h.A,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],C.prototype,"fullExtent",void 0),(0,r._)([(0,n.MZ)({type:M.A,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],C.prototype,"spatialReference",void 0),(0,r._)([(0,n.MZ)({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],C.prototype,"type",void 0),(0,r._)([(0,n.MZ)({readOnly:!0})],C.prototype,"datasetName",null),(0,r._)([(0,n.MZ)({readOnly:!0})],C.prototype,"owner",null),(0,r._)([(0,n.MZ)({readOnly:!0})],C.prototype,"schemaGeneration",null),(0,r._)([(0,n.MZ)({readOnly:!0})],C.prototype,"parsedUrl",null),(0,r._)([(0,n.MZ)({readOnly:!0})],C.prototype,"featureServiceUrl",null),(0,r._)([(0,n.MZ)({readOnly:!0})],C.prototype,"networkServiceUrl",null),(0,r._)([(0,n.MZ)({readOnly:!0})],C.prototype,"layerId",null),(0,r._)([(0,n.MZ)()],C.prototype,"sourceJSON",void 0),(0,r._)([(0,n.MZ)({readOnly:!0})],C.prototype,"networkSystemLayers",null),(0,r._)([(0,n.MZ)()],C.prototype,"gdbVersion",void 0),(0,r._)([(0,n.MZ)({type:Date})],C.prototype,"historicMoment",void 0),C=(0,r._)([(0,a.$)("esri.networks.Network")],C);const A=C;var Z=o(42553),E=o(12899);let O=class extends((0,Z.Te)(p.A)){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=u.A}initialize(){}async load(e){const t=this.layer.load(e).then((()=>this._initializeRulesTable()));return this.addResolvingPromise(t),this}getFeatureSQL(e,t){var o,r;const i=e.layerId.toString(),n=null===(o=e.fieldsIndex)||void 0===o?void 0:o.normalizeFieldName("assetGroup"),s=null===(r=e.fieldsIndex)||void 0===r?void 0:r.normalizeFieldName("assetType"),a=n?t.attributes[n]:null,l=s?t.attributes[s]:null,d=this.rulesHash[i];if(d){const e=d.assetGroupHash[a];if(e)return e.assetTypeHash[l]||null}return null}async _initializeRulesTable(){const e={};let t;!function(e){e[e.from=0]="from",e[e.to=1]="to",e[e.via=2]="via"}(t||(t={}));const o=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const f of this.rules){if(f.ruleType===E.D2.RTAttachment){this.rulesCategorized.attachment.push(f);continue}if(f.ruleType===E.D2.RTContainment){this.rulesCategorized.containment.push(f);continue}if(f.ruleType===E.D2.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(f);continue}this.rulesCategorized.connectivity.push(f);let b=[[t.from,t.to],[t.to,t.from]];f.ruleType===E.D2.RTEdgeJunctionEdgeConnectivity&&(b=[[t.from,t.via],[t.via,t.from],[t.to,t.via],[t.via,t.to]]);for(const T of b){var r,i,n,s,a,l,d,u,c,p,y,v,m,h;const b=T.shift(),I=T.shift();let _=!1;switch(f.ruleType){case E.D2.RTEdgeJunctionEdgeConnectivity:_=b===t.from||b===t.to;break;case E.D2.RTJunctionEdgeConnectivity:_=b===t.to}const S=o[b],N=null!==(r=null===(i=f[S.networkSourceId])||void 0===i?void 0:i.layerId.toString())&&void 0!==r?r:"",k=null===(n=f[S.assetGroupId])||void 0===n||null===(n=n.assetGroupCode)||void 0===n?void 0:n.toString(),j=f[S.assetTypeId],M=null===j||void 0===j||null===(s=j.assetTypeCode)||void 0===s?void 0:s.toString(),C=o[I],A=null!==(a=null===(l=f[C.networkSourceId])||void 0===l?void 0:l.layerId.toString())&&void 0!==a?a:"",Z=null===(d=f[C.assetGroupId])||void 0===d||null===(d=d.assetGroupCode)||void 0===d?void 0:d.toString(),O=f[C.assetTypeId],U=null===O||void 0===O||null===(u=O.assetTypeCode)||void 0===u?void 0:u.toString(),R=null!==(c=e[N])&&void 0!==c?c:{assetGroupHash:{}};if(!(k&&M&&Z&&U))continue;const F=null!==(p=R.assetGroupHash[k])&&void 0!==p?p:{assetTypeHash:{}},G=null!==(y=F.assetTypeHash[M])&&void 0!==y?y:{};if(G[A]=null!==(v=G[A])&&void 0!==v?v:{},_){var w,g;G[N]=null!==(w=G[N])&&void 0!==w?w:{};const e="(assetgroup = ".concat(k," AND assettype = ").concat(M,")");G[N].anyVertex=G[N].anyVertex?"".concat(G[N].anyVertex):"".concat(e),"esriNECPEndVertex"===(null===O||void 0===O?void 0:O.connectivityPolicy)&&(G[N].endVertex=null!==(g=G[N])&&void 0!==g&&g.endVertex?"".concat(G[N].endVertex):"".concat(e))}const J="(assetgroup = ".concat(Z," AND assettype = ").concat(U,")");G[A].anyVertex=null!==(m=G[A])&&void 0!==m&&m.anyVertex?"".concat(G[A].anyVertex," OR ").concat(J):"".concat(J),"esriNECPEndVertex"===(null===O||void 0===O?void 0:O.connectivityPolicy)&&(G[A].endVertex=null!==(h=G[A])&&void 0!==h&&h.endVertex?"".concat(G[A].endVertex," OR ").concat(J):"".concat(J)),F.assetTypeHash[M]=G,R.assetGroupHash[k]=F,e[N]=R}}this.rulesHash=e}};(0,r._)([(0,n.MZ)({constructOnly:!0})],O.prototype,"layer",void 0),(0,r._)([(0,n.MZ)({constructOnly:!0})],O.prototype,"rules",void 0),(0,r._)([(0,n.MZ)()],O.prototype,"rulesHash",void 0),(0,r._)([(0,n.MZ)()],O.prototype,"rulesCategorized",void 0),(0,r._)([(0,n.MZ)({constructOnly:!0})],O.prototype,"request",void 0),O=(0,r._)([(0,a.$)("esri.networks.RulesTable")],O);const U=O;var R=o(99666),F=o(91967);let G=class extends F.A{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTableId=null,this.associationsTableUrl=null}};(0,r._)([(0,n.MZ)({constructOnly:!0})],G.prototype,"rulesTableId",void 0),(0,r._)([(0,n.MZ)({constructOnly:!0})],G.prototype,"rulesTableUrl",void 0),(0,r._)([(0,n.MZ)({constructOnly:!0})],G.prototype,"subnetworksTableId",void 0),(0,r._)([(0,n.MZ)({constructOnly:!0})],G.prototype,"subnetworksTableUrl",void 0),(0,r._)([(0,n.MZ)({constructOnly:!0})],G.prototype,"dirtyAreasLayerId",void 0),(0,r._)([(0,n.MZ)({constructOnly:!0})],G.prototype,"dirtyAreasLayerUrl",void 0),(0,r._)([(0,n.MZ)({constructOnly:!0})],G.prototype,"associationsTableId",void 0),(0,r._)([(0,n.MZ)({constructOnly:!0})],G.prototype,"associationsTableUrl",void 0),G=(0,r._)([(0,a.$)("esri.networks.support.NetworkSystemLayers")],G);const J=G;let V=class extends Z.oY{constructor(e){super(e),this.id=null,this.name=null}};(0,r._)([(0,n.MZ)({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],V.prototype,"id",void 0),(0,r._)([(0,n.MZ)({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],V.prototype,"name",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],V.prototype,"isUpstreamTerminal",void 0),V=(0,r._)([(0,a.$)("esri.networks.support.Terminal")],V);const L=V,x=new b.J({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let P=class extends Z.oY{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],P.prototype,"defaultConfiguration",void 0),(0,r._)([(0,n.MZ)({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],P.prototype,"id",void 0),(0,r._)([(0,n.MZ)({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],P.prototype,"name",void 0),(0,r._)([(0,n.MZ)({type:[L],json:{write:!0}})],P.prototype,"terminals",void 0),(0,r._)([(0,n.MZ)({type:x.apiValues,json:{type:x.jsonValues,read:x.read,write:x.write}})],P.prototype,"traversabilityModel",void 0),P=(0,r._)([(0,a.$)("esri.networks.support.TerminalConfiguration")],P);const D=P;var B=o(57778);const q=(0,b.O)()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let z=class extends B.A{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const t={...e,query:{f:"json"}},{data:o}=await(0,u.A)(this.statusUrl,t),r=o.traceResults?{...o.traceResults,...o}:o;return this.read(r),this}async waitForJobCompletion(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{interval:t=1e3,statusCallback:o}=e;return new Promise(((e,r)=>{this._clearTimer();const i=setInterval((()=>{this._timer||r((0,v.NK)()),this.checkJobStatus().then((t=>{const{status:r}=t;switch(this.status=r,r){case"job-succeeded":this._clearTimer(),e(this);break;case"job-waiting":case"job-executing":o&&o(this)}}),(e=>{this._clearTimer(),r(e)}))}),t);this._timer=i}))}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],z.prototype,"statusUrl",void 0),(0,r._)([(0,T.e)(q)],z.prototype,"status",void 0),(0,r._)([(0,n.MZ)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],z.prototype,"submissionTime",void 0),(0,r._)([(0,n.MZ)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],z.prototype,"lastUpdatedTime",void 0),z=(0,r._)([(0,a.$)("esri.networks.support.TraceJobInfo")],z);const $=z;var H=o(68295);let Y=class extends A{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var e,t;return null!==(e=null===(t=this.dataElement)||void 0===t?void 0:t.serviceTerritoryFeatureLayerId)&&void 0!==e?e:null}get networkSystemLayers(){var e,t,o,r,i,n,s,a;return new J({rulesTableId:null===(e=this.sourceJSON)||void 0===e?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?"".concat(this.featureServiceUrl,"/").concat(null===(t=this.sourceJSON)||void 0===t?void 0:t.systemLayers.rulesTableId):null,subnetworksTableId:null===(o=this.sourceJSON)||void 0===o?void 0:o.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?"".concat(this.featureServiceUrl,"/").concat(null===(r=this.sourceJSON)||void 0===r?void 0:r.systemLayers.subnetworksTableId):null,dirtyAreasLayerId:null===(i=this.sourceJSON)||void 0===i?void 0:i.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?"".concat(this.featureServiceUrl,"/").concat(null===(n=this.sourceJSON)||void 0===n?void 0:n.systemLayers.dirtyAreasLayerId):null,associationsTableId:null===(s=this.sourceJSON)||void 0===s?void 0:s.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?"".concat(this.featureServiceUrl,"/").concat(null===(a=this.sourceJSON)||void 0===a?void 0:a.systemLayers.associationsTableId):null})}get terminalConfigurations(){var e;return(null===(e=this.dataElement)||void 0===e?void 0:e.terminalConfigurations.map((e=>D.fromJSON(e))))||[]}get domainNetworkNames(){var e;return(null===(e=this.dataElement)||void 0===e?void 0:e.domainNetworks.map((e=>e.domainNetworkName)))||[]}get _utilityLayerList(){var e;const t=new Set;return null!==(e=this.dataElement)&&void 0!==e&&null!==(e=e.domainNetworks)&&void 0!==e&&e.map((e=>{e.edgeSources.map((e=>{t.add(e.layerId)})),e.junctionSources.map((e=>{t.add(e.layerId)}))})),t}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){let t=null,o=null;const r=e.layer;let i=null;if("feature"===(null===r||void 0===r?void 0:r.type)){if(i=r.layerId,null===i)return null}else{var n,s;if("subtype-sublayer"!==(null===r||void 0===r?void 0:r.type))return null;if(i=null!==(n=null===r||void 0===r||null===(s=r.parent)||void 0===s?void 0:s.layerId)&&void 0!==n?n:null,null===i)return null}const a=e.attributes;if(null==a)return null;for(const y of Object.keys(a))"ASSETGROUP"===y.toUpperCase()&&(t=e.getAttribute(y)),"ASSETTYPE"===y.toUpperCase()&&(o=e.getAttribute(y));if(!this.dataElement)return null;let l=null;const d=this.dataElement.domainNetworks;for(const y of d){var u;const e=null===(u=y.junctionSources)||void 0===u?void 0:u.find((e=>e.layerId===i));if(e){var c;const r=null===(c=e.assetGroups)||void 0===c?void 0:c.find((e=>e.assetGroupCode===t));if(r){var p;const e=null===(p=r.assetTypes)||void 0===p?void 0:p.find((e=>e.assetTypeCode===o));if(e){l=e.terminalConfigurationId;break}}}}if(null!=l){const e=this.dataElement.terminalConfigurations,t=null===e||void 0===e?void 0:e.find((e=>e.terminalConfigurationId===l));return t?D.fromJSON(t):null}return null}getTierNames(e){var t;const o=null===(t=this.dataElement)||void 0===t?void 0:t.domainNetworks.find((t=>t.domainNetworkName===e));return(null===o||void 0===o?void 0:o.tiers.map((e=>e.name)))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}isUtilityLayer(e){var t,o;return this._utilityLayerList.has(e.layerId)&&null!==(t=null===(o=e.url)||void 0===o?void 0:o.startsWith(this.featureServiceUrl))&&void 0!==t&&t}async queryAssociations(e){const[{queryAssociations:t},{default:r}]=await Promise.all([o.e(34176).then(o.bind(o,34176)),o.e(2623).then(o.bind(o,2623))]),i=r.from(e);return i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment,(await t(this.networkServiceUrl,i)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:t},{default:r}]=await Promise.all([o.e(70440).then(o.bind(o,70440)),o.e(75624).then(o.bind(o,75624))]),i=r.from(e);return i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment,t(this.networkServiceUrl,i)}async trace(e){const[{trace:t},{default:r}]=await Promise.all([o.e(40998).then(o.bind(o,40998)),o.e(64826).then(o.bind(o,64826))]),i=r.from(e);return i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment,t(this.networkServiceUrl,i)}async submitTraceJob(e){const[{submitTraceJob:t},{default:r}]=await Promise.all([o.e(40998).then(o.bind(o,40998)),o.e(64826).then(o.bind(o,64826))]),i=r.from(e);i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment;const n=await t(this.networkServiceUrl,i);return new $({statusUrl:n})}async canAddAssociation(e){const t=await this.getRulesTable();if(!t)return!1;await t.load();const o=(e,t)=>e?1===e.terminalId?!(null!==t&&void 0!==t&&t.terminalId)||(null===t||void 0===t?void 0:t.terminalId)===e.terminalId:e.terminalId===(null===t||void 0===t?void 0:t.terminalId):!(null!==t&&void 0!==t&&t.terminalId),r=(e,t)=>{var r,i,n,s,a,l,d,u,c,p,y,v;return(null===(r=e.fromNetworkSource)||void 0===r?void 0:r.sourceId)===(null===(i=t.fromNetworkElement)||void 0===i?void 0:i.networkSourceId)&&(null===(n=e.toNetworkSource)||void 0===n?void 0:n.sourceId)===(null===(s=t.toNetworkElement)||void 0===s?void 0:s.networkSourceId)&&(null===(a=e.fromAssetGroup)||void 0===a?void 0:a.assetGroupCode)===(null===(l=t.fromNetworkElement)||void 0===l?void 0:l.assetGroupCode)&&(null===(d=e.fromAssetType)||void 0===d?void 0:d.assetTypeCode)===(null===(u=t.fromNetworkElement)||void 0===u?void 0:u.assetTypeCode)&&(null===(c=e.toAssetGroup)||void 0===c?void 0:c.assetGroupCode)===(null===(p=t.toNetworkElement)||void 0===p?void 0:p.assetGroupCode)&&(null===(y=e.toAssetType)||void 0===y?void 0:y.assetTypeCode)===(null===(v=t.toNetworkElement)||void 0===v?void 0:v.assetTypeCode)&&o(e.fromTerminal,t.fromNetworkElement)&&o(e.toTerminal,t.toNetworkElement)};return"containment"===e.associationType?t.rulesCategorized.containment.some((t=>r(t,e))):"attachment"===e.associationType?t.rulesCategorized.attachment.some((t=>r(t,e))):t.rulesCategorized.connectivity.some((t=>{var i,n,s,a,l,d,u,c,p,y,v,m,h,w,g,f,b,T,I,_,S,N,k,j;return t.viaNetworkSource?(null===(i=t.fromNetworkSource)||void 0===i?void 0:i.sourceId)===(null===(n=e.fromNetworkElement)||void 0===n?void 0:n.networkSourceId)&&(null===(s=t.viaNetworkSource)||void 0===s?void 0:s.sourceId)===(null===(a=e.toNetworkElement)||void 0===a?void 0:a.networkSourceId)&&(null===(l=t.fromAssetGroup)||void 0===l?void 0:l.assetGroupCode)===(null===(d=e.fromNetworkElement)||void 0===d?void 0:d.assetGroupCode)&&(null===(u=t.fromAssetType)||void 0===u?void 0:u.assetTypeCode)===(null===(c=e.fromNetworkElement)||void 0===c?void 0:c.assetTypeCode)&&(null===(p=t.viaAssetGroup)||void 0===p?void 0:p.assetGroupCode)===(null===(y=e.toNetworkElement)||void 0===y?void 0:y.assetGroupCode)&&(null===(v=t.viaAssetType)||void 0===v?void 0:v.assetTypeCode)===(null===(m=e.toNetworkElement)||void 0===m?void 0:m.assetTypeCode)&&o(t.fromTerminal,e.fromNetworkElement)&&o(t.viaTerminal,e.toNetworkElement)||(null===(h=t.viaNetworkSource)||void 0===h?void 0:h.sourceId)===(null===(w=e.fromNetworkElement)||void 0===w?void 0:w.networkSourceId)&&(null===(g=t.toNetworkSource)||void 0===g?void 0:g.sourceId)===(null===(f=e.toNetworkElement)||void 0===f?void 0:f.networkSourceId)&&(null===(b=t.viaAssetGroup)||void 0===b?void 0:b.assetGroupCode)===(null===(T=e.fromNetworkElement)||void 0===T?void 0:T.assetGroupCode)&&(null===(I=t.viaAssetType)||void 0===I?void 0:I.assetTypeCode)===(null===(_=e.fromNetworkElement)||void 0===_?void 0:_.assetTypeCode)&&(null===(S=t.toAssetGroup)||void 0===S?void 0:S.assetGroupCode)===(null===(N=e.toNetworkElement)||void 0===N?void 0:N.assetGroupCode)&&(null===(k=t.toAssetType)||void 0===k?void 0:k.assetTypeCode)===(null===(j=e.toNetworkElement)||void 0===j?void 0:j.assetTypeCode)&&o(t.viaTerminal,e.fromNetworkElement)&&o(t.toTerminal,e.toNetworkElement):r(t,e)}))}generateAddAssociations(e){return{addFeatures:e.map((e=>{var t,o,r,n,s,a;return new i.A({attributes:{fromnetworksourceid:null===(t=e.fromNetworkElement)||void 0===t?void 0:t.networkSourceId,fromglobalid:null===(o=e.fromNetworkElement)||void 0===o?void 0:o.globalId,fromterminalid:null===(r=e.fromNetworkElement)||void 0===r?void 0:r.terminalId,tonetworksourceid:null===(n=e.toNetworkElement)||void 0===n?void 0:n.networkSourceId,toglobalid:null===(s=e.toNetworkElement)||void 0===s?void 0:s.globalId,toterminalid:null===(a=e.toNetworkElement)||void 0===a?void 0:a.terminalId,associationtype:E.v9[e.associationType],iscontentvisible:e.isContentVisible?1:0,percentalong:e.percentAlong,globalid:e.globalId}})})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}generateDeleteAssociations(e){return{deleteFeatures:e.map((e=>({globalId:e.globalId}))),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}async _loadNamedTraceConfigurationsFromNetwork(e){var t;if(0===(null===(t=this.sharedNamedTraceConfigurations)||void 0===t?void 0:t.length))return;const o=this.sharedNamedTraceConfigurations.map((e=>e.globalId)),r=await this.queryNamedTraceConfigurations({globalIds:o},e);for(const i of this.sharedNamedTraceConfigurations){const e=null===r||void 0===r?void 0:r.find((e=>e.globalId===i.globalId));if(e){const t=e.write({},{origin:"service"});i.read(t,{origin:"service"})}}}async _createRulesTable(){var e;const t=this.networkSystemLayers.rulesTableUrl,o=new l.default({url:t});await o.load();const r=null===(e=this.dataElement)||void 0===e?void 0:e.domainNetworks;if(!r)return null;const i=r.flatMap((e=>[...e.edgeSources||[],...e.junctionSources||[]])),n=(await this._queryRulesTable(o)).map((e=>this._hydrateRuleInfo(o,i,e)));return new U({layer:o,rules:n})}async _queryRulesTable(e){const t=new H.A({where:"1=1",outFields:["*"]});return(await(0,d.SE)(e,t)).features}_hydrateRuleInfo(e,t,o){const r=e.fieldsIndex,i=r.get("RULETYPE"),n=r.get("CREATIONDATE"),s=r.get("FROMNETWORKSOURCEID"),a=r.get("FROMASSETGROUP"),l=r.get("FROMASSETTYPE"),d=r.get("FROMTERMINALID"),u=r.get("TONETWORKSOURCEID"),c=r.get("TOASSETGROUP"),p=r.get("TOASSETTYPE"),y=r.get("TOTERMINALID"),v=r.get("VIANETWORKSOURCEID"),m=r.get("VIAASSETGROUP"),h=r.get("VIAASSETTYPE"),w=r.get("VIATERMINALID"),g=o.attributes[i.name],f=new Date(o.attributes[n.name]),b=[{networkSourceId:o.attributes[s.name],assetGroupId:o.attributes[a.name],assetTypeId:o.attributes[l.name],terminalId:o.attributes[d.name]},{networkSourceId:o.attributes[u.name],assetGroupId:o.attributes[c.name],assetTypeId:o.attributes[p.name],terminalId:o.attributes[y.name]},{networkSourceId:o.attributes[v.name],assetGroupId:o.attributes[m.name],assetTypeId:o.attributes[h.name],terminalId:o.attributes[w.name]}];let T;!function(e){e[e.from=0]="from",e[e.to=1]="to",e[e.via=2]="via"}(T||(T={}));const I={ruleType:g,creationDate:f};for(const _ of[T.from,T.to,T.via]){if(g!==E.D2.RTEdgeJunctionEdgeConnectivity&&_===T.via)continue;const e=b[_],o=t.find((t=>t.sourceId===e.networkSourceId)),r=null===o||void 0===o?void 0:o.assetGroups.find((t=>t.assetGroupCode===e.assetGroupId)),i=null===r||void 0===r?void 0:r.assetTypes.find((t=>t.assetTypeCode===e.assetTypeId)),n=this._getTerminal(i,e);let s="";switch(_){case T.from:s="from";break;case T.to:s="to";break;case T.via:s="via"}I["".concat(s,"NetworkSource")]=o,I["".concat(s,"AssetGroup")]=r,I["".concat(s,"AssetType")]=i,I["".concat(s,"Terminal")]=null===n||void 0===n?void 0:n.toJSON()}return I}_getTerminal(e,t){var o,r,i;const n=null===e||void 0===e?void 0:e.terminalConfigurationId,s=null===(o=this.terminalConfigurations)||void 0===o?void 0:o.find((e=>e.id===n));return null!==(r=null===s||void 0===s||null===(i=s.terminals)||void 0===i?void 0:i.find((e=>e.id===t.terminalId)))&&void 0!==r?r:null}};(0,r._)([(0,n.MZ)({type:[R.A],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Y.prototype,"sharedNamedTraceConfigurations",void 0),(0,r._)([(0,n.MZ)({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Y.prototype,"type",void 0),(0,r._)([(0,n.MZ)({readOnly:!0})],Y.prototype,"serviceTerritoryFeatureLayerId",null),(0,r._)([(0,n.MZ)({readOnly:!0})],Y.prototype,"networkSystemLayers",null),(0,r._)([(0,n.MZ)({readOnly:!0})],Y.prototype,"terminalConfigurations",null),(0,r._)([(0,n.MZ)({readOnly:!0})],Y.prototype,"domainNetworkNames",null),Y=(0,r._)([(0,a.$)("esri.networks.UtilityNetwork")],Y);const K=Y},99666:(e,t,o)=>{o.d(t,{A:()=>p});var r=o(35143),i=o(77717),n=o(46053),s=(o(81806),o(76460),o(47249),o(28379)),a=o(85842),l=o(79685),d=o(12899),u=o(64154);let c=class extends i.L{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,t){return void 0!==e.tierName?u.A.fromJSON(e):l.A.fromJSON(e)}};(0,r._)([(0,n.MZ)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],c.prototype,"globalId",void 0),(0,r._)([(0,n.MZ)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],c.prototype,"title",void 0),(0,r._)([(0,n.MZ)({type:l.A,json:{origins:{service:{read:!0,write:!0}},read:!1}})],c.prototype,"traceConfiguration",void 0),(0,r._)([(0,s.w)("service","traceConfiguration")],c.prototype,"readTraceConfiguration",null),(0,r._)([(0,n.MZ)({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],c.prototype,"creationDate",void 0),(0,r._)([(0,n.MZ)({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],c.prototype,"creator",void 0),(0,r._)([(0,n.MZ)({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],c.prototype,"description",void 0),(0,r._)([(0,n.MZ)({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],c.prototype,"minStartingPoints",void 0),(0,r._)([(0,n.MZ)({json:{origins:{service:{read:!0,write:!0}},read:!1}})],c.prototype,"resultTypes",void 0),(0,r._)([(0,n.MZ)({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],c.prototype,"tags",void 0),(0,r._)([(0,n.MZ)({type:d.fO.apiValues,json:{type:d.fO.jsonValues,origins:{service:{read:d.fO.read,write:d.fO.write}},read:!1}})],c.prototype,"traceType",void 0),c=(0,r._)([(0,a.$)("esri.networks.support.NamedTraceConfiguration")],c);const p=c},79685:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(35143),i=o(42553),n=o(46053),s=(o(81806),o(76460),o(47249),o(85842));let a=class extends i.oY{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};(0,r._)([(0,n.MZ)({type:[Object],json:{write:!0}})],a.prototype,"conditionBarriers",void 0),(0,r._)([(0,n.MZ)({type:[Object],json:{write:!0}})],a.prototype,"outputConditions",void 0),(0,r._)([(0,n.MZ)({type:[Object],json:{write:!0}})],a.prototype,"functions",void 0),(0,r._)([(0,n.MZ)({type:[Object],json:{write:!0}})],a.prototype,"functionBarriers",void 0),(0,r._)([(0,n.MZ)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],a.prototype,"traversabilityScope",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],a.prototype,"shortestPathNetworkAttributeName",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"includeBarriers",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"validateConsistency",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"ignoreBarriersAtStartingPoints",void 0),a=(0,r._)([(0,s.$)("esri.networks.support.TraceConfiguration")],a);const l=a},64154:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(35143),i=o(46053),n=(o(81806),o(76460),o(47249),o(85842)),s=o(79685);let a=class extends s.A{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};(0,r._)([(0,i.MZ)({type:[Object],json:{write:!0}})],a.prototype,"filterBarriers",void 0),(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"arcadeExpressionBarrier",void 0),(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"domainNetworkName",void 0),(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"filterBitsetNetworkAttributeName",void 0),(0,r._)([(0,i.MZ)({type:[Object],json:{write:!0}})],a.prototype,"filterFunctionBarriers",void 0),(0,r._)([(0,i.MZ)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],a.prototype,"filterScope",void 0),(0,r._)([(0,i.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"includeContainers",void 0),(0,r._)([(0,i.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"includeContent",void 0),(0,r._)([(0,i.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"includeIsolated",void 0),(0,r._)([(0,i.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"includeStructures",void 0),(0,r._)([(0,i.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"allowIndeterminateFlow",void 0),(0,r._)([(0,i.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"includeUpToFirstSpatialContainer",void 0),(0,r._)([(0,i.MZ)({type:Object,json:{write:!0}})],a.prototype,"nearestNeighbor",void 0),(0,r._)([(0,i.MZ)({type:[Object],json:{write:!0}})],a.prototype,"outputFilterCategories",void 0),(0,r._)([(0,i.MZ)({type:[Object],json:{write:!0}})],a.prototype,"outputFilters",void 0),(0,r._)([(0,i.MZ)({type:[Object],json:{write:!0}})],a.prototype,"propagators",void 0),(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"subnetworkName",void 0),(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"targetTierName",void 0),(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"diagramTemplateName",void 0),(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"tierName",void 0),(0,r._)([(0,i.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"validateLocatability",void 0),a=(0,r._)([(0,n.$)("esri.networks.support.UNTraceConfiguration")],a);const l=a},12899:(e,t,o)=>{o.d(t,{BD:()=>d,D2:()=>r,XZ:()=>a,fO:()=>s,v9:()=>l});var r,i,n=o(45802);(i=r||(r={}))[i.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",i[i.RTAttachment=2]="RTAttachment",i[i.RTContainment=3]="RTContainment",i[i.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",i[i.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity";const s=new n.J({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"}),a=new n.J({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),l={connectivity:1,"junction-junction-connectivity":1,attachment:2,containment:3,"junction-edge-from-connectivity":4,"junction-midspan-connectivity":5,"junction-edge-to-connectivity":6},d=new n.J({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"})},78715:(e,t,o)=>{o.d(t,{C8:()=>c,ji:()=>l,sI:()=>d});var r=o(3825),i=o(50076),n=o(74438),s=o(70652),a=o(77725);function l(e,t){const o=[],r=new Map;for(const n of t){const t=e.getLayerIdBySourceId(n.networkSourceId);if(null==t)continue;let o=r.get(t);void 0===o&&(o=[]),o.push(n.objectId),r.set(t,o)}const i=e.featureServiceUrl;return r.forEach(((e,t)=>o.push({layerUrl:"".concat(i,"/").concat(t),objectIds:e}))),o}async function d(e,t){const o=e.layers,r=e.layerInfos,i=e.returnGeometry||!1,s=e.outSpatialReference;return await Promise.all(o.map((async e=>{await e.load()}))),(await Promise.all(o.map((async e=>{var o;const l=r.find((t=>{var o;return t.layerUrl===(null===(o=e.parsedUrl)||void 0===o?void 0:o.path)}));if(null===l||void 0===l||null===(o=l.objectIds)||void 0===o||!o.length)return{layer:e,featureSet:void 0};const d=e.createQuery();d.returnGeometry=i,d.outFields=l.outFields||["*"],d.outSpatialReference=s,d.gdbVersion=e.gdbVersion,d.objectIds=l.objectIds,t&&(d.where="1=1");const u=a.A.fromJSON(await(0,n.SE)(e,d));return{layer:e,featureSet:u}})))).filter((e=>void 0!==e.featureSet))}async function u(e,t){if("Utility Network Layer"===e){const{default:e}=await Promise.resolve().then(o.bind(o,67296));return new e({layerUrl:t})}return null}async function c(e){var t;let o="portalItem"in e?e:{portalItem:e};!o.portalItem||o.portalItem instanceof s.default||(o={...o,portalItem:new s.default(o.portalItem)});const n=o.portalItem;if(await n.load(),"Feature Service"!==n.type)throw new i.A("portal:unknown-item-type","Unknown item type '${type}'",{type:n.type});const a=n.url,l=await(0,r.A)(a,{responseType:"json",query:{f:"json"}}),d="Network Layer";if(null!==(t=l.data.type)&&void 0!==t&&t.includes(d))return u(l.data.type,a);if(l.data.layers){const e=l.data.layers.find((e=>e.type.includes(d)));if(e){const t="".concat(a,"/").concat(e.id);return u(e.type,t)}}return null}},64533:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(35143),i=o(42553),n=o(46053),s=(o(81806),o(76460),o(47249),o(85842));let a=class extends i.oY{constructor(e){super(e),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};(0,r._)([(0,n.MZ)({type:Number,json:{write:!0}})],a.prototype,"assetGroupCode",void 0),(0,r._)([(0,n.MZ)({type:Number,json:{write:!0}})],a.prototype,"assetTypeCode",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],a.prototype,"globalId",void 0),(0,r._)([(0,n.MZ)({type:Number,json:{write:!0}})],a.prototype,"networkSourceId",void 0),(0,r._)([(0,n.MZ)({type:Number,json:{write:!0}})],a.prototype,"objectId",void 0),(0,r._)([(0,n.MZ)({type:Number,json:{write:!0}})],a.prototype,"positionFrom",void 0),(0,r._)([(0,n.MZ)({type:Number,json:{write:!0}})],a.prototype,"positionTo",void 0),(0,r._)([(0,n.MZ)({type:Number,json:{write:!0}})],a.prototype,"terminalId",void 0),a=(0,r._)([(0,s.$)("esri.rest.networks.support.NetworkElement")],a);const l=a},57778:(e,t,o)=>{o.d(t,{A:()=>h});var r=o(35143),i=o(42553),n=o(46053),s=(o(81806),o(76460),o(47249),o(85842)),a=o(66388),l=o(65215),d=o(23701);let u=class extends i.oY{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};(0,r._)([(0,n.MZ)({type:d.A,json:{write:!0},readOnly:!0})],u.prototype,"line",void 0),(0,r._)([(0,n.MZ)({type:a.A,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],u.prototype,"multipoint",void 0),(0,r._)([(0,n.MZ)({type:l.A,json:{write:!0},readOnly:!0})],u.prototype,"polygon",void 0),u=(0,r._)([(0,s.$)("esri.rest.networks.support.AggregatedGeometry")],u);const c=u;let p=class extends i.oY{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};(0,r._)([(0,n.MZ)({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],p.prototype,"functionType",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0},readOnly:!0})],p.prototype,"networkAttributeName",void 0),(0,r._)([(0,n.MZ)({type:Number,json:{write:!0},readOnly:!0})],p.prototype,"result",void 0),p=(0,r._)([(0,s.$)("esri.rest.networks.support.FunctionResult")],p);const y=p;var v=o(64533);let m=class extends i.oY{constructor(e){super(e),this.aggregatedGeometry=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.startingPointsIgnored=!1,this.warnings=null}};(0,r._)([(0,n.MZ)({type:c,json:{write:!0},readOnly:!0})],m.prototype,"aggregatedGeometry",void 0),(0,r._)([(0,n.MZ)({type:[v.A],json:{write:!0},readOnly:!0})],m.prototype,"elements",void 0),(0,r._)([(0,n.MZ)({type:[y],json:{write:!0},readOnly:!0})],m.prototype,"globalFunctionResults",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0},readOnly:!0})],m.prototype,"kFeaturesForKNNFound",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0},readOnly:!0})],m.prototype,"startingPointsIgnored",void 0),(0,r._)([(0,n.MZ)({type:[String],json:{write:!0},readOnly:!0})],m.prototype,"warnings",void 0),m=(0,r._)([(0,s.$)("esri.rest.networks.support.TraceResult")],m);const h=m},11187:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(35143),i=o(42553),n=o(46053),s=(o(81806),o(76460),o(47249),o(85842));let a=class extends i.oY{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.dirtyAreaCount=null,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};(0,r._)([(0,n.MZ)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.moment=e?e.getTime():null}}}})],a.prototype,"moment",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"fullUpdate",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"validateErrorsCreated",void 0),(0,r._)([(0,n.MZ)({type:Number,json:{write:!0}})],a.prototype,"dirtyAreaCount",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"exceededTransferLimit",void 0),(0,r._)([(0,n.MZ)({type:[Object],json:{write:!0}})],a.prototype,"serviceEdits",void 0),(0,r._)([(0,n.MZ)({type:[Object],json:{write:!0}})],a.prototype,"discoveredSubnetworks",void 0),a=(0,r._)([(0,s.$)("esri.rest.networks.support.ValidateNetworkTopologyResult")],a);const l=a}}]);
//# sourceMappingURL=89764.632d7050.chunk.js.map