"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[17881],{79650:(t,r,n)=>{n.d(r,{B:()=>v,a:()=>O,b:()=>J,c:()=>p,d:()=>H,e:()=>N,f:()=>m,g:()=>A,h:()=>B,i:()=>y,n:()=>q,r:()=>G,t:()=>w,u:()=>R});n(81806);var i=n(76460),e=n(15941),s=n(97467),o=n(34761),a=n(13191),c=n(20664),l=n(9392),h=n(5568),f=n(44230),u=n(13927),g=n(95925),d=n(96190),_=n(75762);const T=()=>i.A.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");const v=class{constructor(){this.plane=(0,u.vt)(),this.origin=(0,l.vt)(),this.basis1=(0,l.vt)(),this.basis2=(0,l.vt)()}};function O(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return{plane:(0,u.vt)(t.plane),origin:(0,l.o8)(t.origin),basis1:(0,l.o8)(t.basis1),basis2:(0,l.o8)(t.basis2)}}function p(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O();return m(t.origin,t.basis1,t.basis2,r)}function m(t,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O();return(0,c.c)(i.origin,t),(0,c.c)(i.basis1,r),(0,c.c)(i.basis2,n),R(i),function(t,r){Math.abs((0,c.k)(t.basis1,t.basis2)/((0,c.l)(t.basis1)*(0,c.l)(t.basis2)))>1e-6&&T().warn(r,"Provided basis vectors are not perpendicular"),Math.abs((0,c.k)(t.basis1,q(t)))>1e-6&&T().warn(r,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,c.k)(q(t),t.origin)-t.plane[3])>1e-6&&T().warn(r,"Plane offset is not consistent with plane origin")}(i,"fromValues()"),i}function R(t){(0,u.mR)(t.basis2,t.basis1,t.origin,t.plane)}function b(t,r,n){t!==n&&p(t,n);const i=(0,c.h)(_.rq.get(),q(t),r);return(0,c.g)(n.origin,n.origin,i),n.plane[3]-=r,n}function A(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O();const n=(t[2]-t[0])/2,i=(t[3]-t[1])/2;return(0,c.s)(r.origin,t[0]+n,t[1]+i,0),(0,c.s)(r.basis1,n,0,0),(0,c.s)(r.basis2,0,i,0),(0,u.fA)(0,0,1,0,r.plane),r}function y(t,r,n){return!!(0,u.Ui)(t.plane,r,n)&&x(t,n)}function E(t,r,n){const i=k.get();j(t,r,i,k.get());let s=Number.POSITIVE_INFINITY;for(const o of X){const a=V(t,o,S.get()),l=_.rq.get();if((0,u.T7)(i,a,l)){const t=(0,c.E)(_.rq.get(),r.origin,l),i=Math.abs((0,e.XM)((0,c.k)(r.direction,t)));i<s&&(s=i,(0,c.c)(n,l))}}return s===Number.POSITIVE_INFINITY?M(t,r,n):n}function M(t,r,n){if(y(t,r,n))return n;const i=k.get(),e=k.get();j(t,r,i,e);let s=Number.POSITIVE_INFINITY;for(const o of X){const a=V(t,o,S.get()),l=_.rq.get();if((0,u.gv)(i,a,l)){const t=(0,g.kb)(r,l);if(!(0,u.Tj)(e,l))continue;t<s&&(s=t,(0,c.c)(n,l))}}return F(t,r.origin)<s&&L(t,r.origin,n),n}function L(t,r,n){const i=(0,u._I)(t.plane,r,_.rq.get()),e=(0,f.H6)(C(t,t.basis1),i,-1,1,_.rq.get()),s=(0,f.H6)(C(t,t.basis2),i,-1,1,_.rq.get());return(0,c.f)(n,(0,c.g)(_.rq.get(),e,s),t.origin),n}function I(t,r,n){const{origin:i,basis1:e,basis2:s}=t,o=(0,c.f)(_.rq.get(),r,i),a=(0,d.gr)(e,o),l=(0,d.gr)(s,o),h=(0,d.gr)(q(t),o);return(0,c.s)(n,a,l,h)}function F(t,r){const n=I(t,r,_.rq.get()),{basis1:i,basis2:e}=t,s=(0,c.l)(i),o=(0,c.l)(e),a=Math.max(Math.abs(n[0])-s,0),l=Math.max(Math.abs(n[1])-o,0),h=n[2];return a*a+l*l+h*h}function B(t,r){return Math.sqrt(F(t,r))}function N(t,r){return(0,u.Tj)(t.plane,r)&&x(t,r)}function P(t,r){const n=-t.plane[3];return(0,d.gr)(q(t),r)-n}function H(t,r){return(0,c.j)(t.basis1,r.basis1)&&(0,c.j)(t.basis2,r.basis2)&&(0,c.j)(t.origin,r.origin)}function w(t,r,n){return t!==n&&p(t,n),(0,o.B8)(Y,r),(0,o.mg)(Y,Y),(0,c.e)(n.basis1,t.basis1,Y),(0,c.e)(n.basis2,t.basis2,Y),(0,c.e)((0,u.Qj)(n.plane),(0,u.Qj)(t.plane),Y),(0,c.e)(n.origin,t.origin,r),(0,u.mP)(n.plane,n.plane,n.origin),n}function G(t,r,n,i){return t!==i&&p(t,i),(0,o.$0)(Q,r,n),(0,c.e)(i.basis1,t.basis1,Q),(0,c.e)(i.basis2,t.basis2,Q),R(i),i}function q(t){return(0,u.Qj)(t.plane)}function x(t,r){const n=(0,c.f)(_.rq.get(),r,t.origin),i=(0,c.p)(t.basis1),e=(0,c.p)(t.basis2),s=(0,c.k)(t.basis1,n),o=(0,c.k)(t.basis2,n);return-s-i<0&&s-i<0&&-o-e<0&&o-e<0}function C(t,r){const n=S.get();return(0,c.c)(n.origin,t.origin),(0,c.c)(n.vector,r),n}function V(t,r,n){const{basis1:i,basis2:e,origin:s}=t,o=(0,c.h)(_.rq.get(),i,r.origin[0]),a=(0,c.h)(_.rq.get(),e,r.origin[1]);(0,c.g)(n.origin,o,a),(0,c.g)(n.origin,n.origin,s);const l=(0,c.h)(_.rq.get(),i,r.direction[0]),h=(0,c.h)(_.rq.get(),e,r.direction[1]);return(0,c.h)(n.vector,(0,c.g)(l,l,h),2),n}function j(t,r,n,i){const e=q(t);(0,u.mR)(e,r.direction,r.origin,n),(0,u.mR)((0,u.Qj)(n),e,r.origin,i)}const z={plane:(0,u.vt)(),origin:(0,l.fA)(0,0,0),basis1:(0,l.fA)(1,0,0),basis2:(0,l.fA)(0,1,0)},k=new s.I(u.vt),S=new s.I(f.vt),U=(0,l.vt)(),D=new s.I((()=>O())),X=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],Y=(0,a.vt)(),Q=(0,a.vt)(),J=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:v,altitudeAt:P,axisAt:function(t,r,n,i){return function(t,r,n){switch(r){case h._.X:(0,c.c)(n,t.basis1),(0,c.n)(n,n);break;case h._.Y:(0,c.c)(n,t.basis2),(0,c.n)(n,n);break;case h._.Z:(0,c.c)(n,q(t))}return n}(t,n,i)},closestPoint:M,closestPointOnSilhouette:E,copy:p,copyWithoutVerify:function(t,r){(0,c.c)(r.origin,t.origin),(0,c.c)(r.basis1,t.basis1),(0,c.c)(r.basis2,t.basis2),(0,u.C)(r.plane,t.plane)},create:O,distance:B,distance2:F,distanceToSilhouette:function(t,r){let n=Number.NEGATIVE_INFINITY;for(const i of X){const e=V(t,i,S.get()),s=(0,f.kb)(e,r);s>n&&(n=s)}return Math.sqrt(n)},elevate:b,equals:H,extrusionContainsPoint:N,fromAABoundingRect:A,fromValues:m,intersectRay:y,intersectRayClosestSilhouette:function(t,r,n){if(y(t,r,n))return n;const i=E(t,r,_.rq.get());return(0,c.g)(n,r.origin,(0,c.h)(_.rq.get(),r.direction,(0,c.q)(r.origin,i)/(0,c.l)(r.direction))),n},normal:q,projectPoint:L,projectPointLocal:I,rotate:G,setAltitudeAt:function(t,r,n,i){const e=P(t,r),s=(0,c.h)(U,q(t),n-e);return(0,c.g)(i,r,s),i},setExtent:function(t,r,n){return A(r,n),b(n,P(t,t.origin),n),n},transform:w,up:z,updateUnboundedPlane:R,wrap:function(t,r,n){const i=D.get();return i.origin=t,i.basis1=r,i.basis2=n,i.plane=(0,u.LV)(0,0,0,0),R(i),i}},Symbol.toStringTag,{value:"Module"}))},60216:(t,r,n)=>{n.d(r,{C:()=>a,E:()=>o});var i=n(9392),e=n(9624),s=n(14487);function o(t,r,n){return!!(0,s.F)(t,r,c,n.spatialReference)&&(n.x=c[0],n.y=c[1],n.z=c[2],!0)}async function a(t,r,n,i){return await(0,e.initializeProjection)(r,n.spatialReference,null,i),o(t,r,n)}const c=(0,i.vt)()},49595:(t,r,n)=>{n.d(r,{$e:()=>a,Eo:()=>c,j1:()=>l,mO:()=>h,vt:()=>o});var i=n(97467),e=n(20664),s=n(95925);function o(t){return t?{ray:(0,s.vt)(t.ray),c0:t.c0,c1:t.c1}:{ray:(0,s.vt)(),c0:0,c1:Number.MAX_VALUE}}function a(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o();return(0,s.C)(t,r.ray),r.c0=0,r.c1=Number.MAX_VALUE,r}function c(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o();const i=(0,e.l)(t.vector);return(0,s.fA)(t.origin,r,n.ray),n.c0=0,n.c1=i,n}function l(t,r){return f(t,t.c0,r)}function h(t,r){return f(t,t.c1,r)}function f(t,r,n){return(0,e.g)(n,t.ray.origin,(0,e.h)(n,t.ray.direction,r))}new i.I((()=>o()))},4763:(t,r,n)=>{n.d(r,{C:()=>v,DV:()=>p,FB:()=>i,J7:()=>e,Qy:()=>T,ST:()=>A,YH:()=>L,bU:()=>y,c8:()=>M,ig:()=>b,m7:()=>m,pw:()=>R,ui:()=>O,vt:()=>_});var i,e,s,o=n(97467),a=n(34761),c=n(20664),l=n(9392),h=n(43047),f=n(55855),u=n(49595),g=n(13927),d=n(75762);function _(t){return t?[(0,g.vt)(t[0]),(0,g.vt)(t[1]),(0,g.vt)(t[2]),(0,g.vt)(t[3]),(0,g.vt)(t[4]),(0,g.vt)(t[5])]:[(0,g.vt)(),(0,g.vt)(),(0,g.vt)(),(0,g.vt)(),(0,g.vt)(),(0,g.vt)()]}function T(){return[(0,l.vt)(),(0,l.vt)(),(0,l.vt)(),(0,l.vt)(),(0,l.vt)(),(0,l.vt)(),(0,l.vt)(),(0,l.vt)()]}function v(t,r){for(let n=0;n<L;n++)(0,g.C)(t[n],r[n]);return t}function O(t,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;const e=(0,a.lw)(d.Rc.get(),r,t);(0,a.B8)(e,e);for(let s=0;s<I;++s){const t=(0,h.t)(d.Km.get(),F[s],e);(0,c.s)(i[s],t[0]/t[3],t[1]/t[3],t[2]/t[3])}p(n,i)}function p(t,r){(0,g.Cr)(r[e.FAR_BOTTOM_LEFT],r[e.NEAR_BOTTOM_LEFT],r[e.NEAR_TOP_LEFT],t[i.LEFT]),(0,g.Cr)(r[e.NEAR_BOTTOM_RIGHT],r[e.FAR_BOTTOM_RIGHT],r[e.FAR_TOP_RIGHT],t[i.RIGHT]),(0,g.Cr)(r[e.FAR_BOTTOM_LEFT],r[e.FAR_BOTTOM_RIGHT],r[e.NEAR_BOTTOM_RIGHT],t[i.BOTTOM]),(0,g.Cr)(r[e.NEAR_TOP_LEFT],r[e.NEAR_TOP_RIGHT],r[e.FAR_TOP_RIGHT],t[i.TOP]),(0,g.Cr)(r[e.NEAR_BOTTOM_LEFT],r[e.NEAR_BOTTOM_RIGHT],r[e.NEAR_TOP_RIGHT],t[i.NEAR]),(0,g.Cr)(r[e.FAR_BOTTOM_RIGHT],r[e.FAR_BOTTOM_LEFT],r[e.FAR_TOP_LEFT],t[i.FAR])}function m(t,r){for(let n=0;n<L;n++){const i=t[n];if(i[0]*r[0]+i[1]*r[1]+i[2]*r[2]+i[3]>=r[3])return!1}return!0}function R(t,r){return E(t,(0,u.$e)(r,B.get()))}function b(t,r){for(let n=0;n<L;n++){const i=t[n];if(!(0,g.b6)(i,r))return!1}return!0}function A(t,r,n){return E(t,(0,u.Eo)(r,n,B.get()))}function y(t,r){for(let n=0;n<L;n++)if((0,g.mN)(t[n],r)>0)return!1;return!0}function E(t,r){for(let n=0;n<L;n++)if(!(0,g.$Q)(t[n],r))return!1;return!0}(s=i||(i={}))[s.LEFT=0]="LEFT",s[s.RIGHT=1]="RIGHT",s[s.BOTTOM=2]="BOTTOM",s[s.TOP=3]="TOP",s[s.NEAR=4]="NEAR",s[s.FAR=5]="FAR",function(t){t[t.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",t[t.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",t[t.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",t[t.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",t[t.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",t[t.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",t[t.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",t[t.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(e||(e={}));const M={bottom:[e.FAR_BOTTOM_RIGHT,e.NEAR_BOTTOM_RIGHT,e.NEAR_BOTTOM_LEFT,e.FAR_BOTTOM_LEFT],near:[e.NEAR_BOTTOM_LEFT,e.NEAR_BOTTOM_RIGHT,e.NEAR_TOP_RIGHT,e.NEAR_TOP_LEFT],far:[e.FAR_BOTTOM_RIGHT,e.FAR_BOTTOM_LEFT,e.FAR_TOP_LEFT,e.FAR_TOP_RIGHT],right:[e.NEAR_BOTTOM_RIGHT,e.FAR_BOTTOM_RIGHT,e.FAR_TOP_RIGHT,e.NEAR_TOP_RIGHT],left:[e.FAR_BOTTOM_LEFT,e.NEAR_BOTTOM_LEFT,e.NEAR_TOP_LEFT,e.FAR_TOP_LEFT],top:[e.FAR_TOP_LEFT,e.NEAR_TOP_LEFT,e.NEAR_TOP_RIGHT,e.FAR_TOP_RIGHT]},L=6,I=8,F=[(0,f.fA)(-1,-1,-1,1),(0,f.fA)(1,-1,-1,1),(0,f.fA)(1,1,-1,1),(0,f.fA)(-1,1,-1,1),(0,f.fA)(-1,-1,1,1),(0,f.fA)(1,-1,1,1),(0,f.fA)(1,1,1,1),(0,f.fA)(-1,1,1,1)],B=new o.I(u.vt),N=T()},44230:(t,r,n)=>{n.d(r,{C:()=>l,Cr:()=>f,H6:()=>_,_I:()=>g,dz:()=>T,fA:()=>h,kb:()=>u,ld:()=>v,sd:()=>d,vt:()=>c});var i=n(15941),e=n(97467),s=n(20664),o=n(9392),a=n(75762);function c(t){return t?{origin:(0,o.o8)(t.origin),vector:(0,o.o8)(t.vector)}:{origin:(0,o.vt)(),vector:(0,o.vt)()}}function l(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c();return h(t.origin,t.vector,r)}function h(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return(0,s.c)(n.origin,t),(0,s.c)(n.vector,r),n}function f(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return(0,s.c)(n.origin,t),(0,s.f)(n.vector,r,t),n}function u(t,r){const n=(0,s.f)(a.rq.get(),r,t.origin),e=(0,s.k)(t.vector,n),o=(0,s.k)(t.vector,t.vector),c=(0,i.qE)(e/o,0,1),l=(0,s.f)(a.rq.get(),(0,s.h)(a.rq.get(),t.vector,c),n);return(0,s.k)(l,l)}function g(t,r,n){return _(t,r,0,1,n)}function d(t,r,n){return(0,s.g)(n,t.origin,(0,s.h)(n,t.vector,r))}function _(t,r,n,e,o){const{vector:c,origin:l}=t,h=(0,s.f)(a.rq.get(),r,l),f=(0,s.k)(c,h)/(0,s.p)(c);return(0,s.h)(o,c,(0,i.qE)(f,n,e)),(0,s.g)(o,o,t.origin)}function T(t,r){if(O(t,function(t,r){const n=m.get();return n.origin=t,n.vector=r,n}(r.origin,r.direction),!1,p)){const{tA:r,pB:n,distance2:i}=p;if(r>=0&&r<=1)return i;if(r<0)return(0,s.a)(t.origin,n);if(r>1)return(0,s.a)((0,s.g)(a.rq.get(),t.origin,t.vector),n)}return null}function v(t,r,n){return!!O(t,r,!0,p)&&((0,s.c)(n,p.pA),!0)}function O(t,r,n,e){const o=1e-6,c=t.origin,l=(0,s.g)(a.rq.get(),c,t.vector),h=r.origin,f=(0,s.g)(a.rq.get(),h,r.vector),u=a.rq.get(),g=a.rq.get();if(u[0]=c[0]-h[0],u[1]=c[1]-h[1],u[2]=c[2]-h[2],g[0]=f[0]-h[0],g[1]=f[1]-h[1],g[2]=f[2]-h[2],Math.abs(g[0])<o&&Math.abs(g[1])<o&&Math.abs(g[2])<o)return!1;const d=a.rq.get();if(d[0]=l[0]-c[0],d[1]=l[1]-c[1],d[2]=l[2]-c[2],Math.abs(d[0])<o&&Math.abs(d[1])<o&&Math.abs(d[2])<o)return!1;const _=u[0]*g[0]+u[1]*g[1]+u[2]*g[2],T=g[0]*d[0]+g[1]*d[1]+g[2]*d[2],v=u[0]*d[0]+u[1]*d[1]+u[2]*d[2],O=g[0]*g[0]+g[1]*g[1]+g[2]*g[2],p=(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])*O-T*T;if(Math.abs(p)<o)return!1;let m=(_*T-v*O)/p,R=(_+T*m)/O;n&&(m=(0,i.qE)(m,0,1),R=(0,i.qE)(R,0,1));const b=a.rq.get(),A=a.rq.get();return b[0]=c[0]+m*d[0],b[1]=c[1]+m*d[1],b[2]=c[2]+m*d[2],A[0]=h[0]+R*g[0],A[1]=h[1]+R*g[1],A[2]=h[2]+R*g[2],e.tA=m,e.tB=R,e.pA=b,e.pB=A,e.distance2=(0,s.a)(b,A),!0}const p={tA:0,tB:0,pA:(0,o.vt)(),pB:(0,o.vt)(),distance2:0},m=new e.I((()=>c()))},81284:(t,r,n)=>{function i(t){return"point"===t.type}n.d(r,{v:()=>i})},80935:(t,r,n)=>{n.d(r,{R1:()=>o,aY:()=>e,cN:()=>s});var i=n(81284);class e{constructor(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.array=t,this.spatialReference=r,this.offset=n}}function s(t){return"array"in t}function o(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ground";if((0,i.v)(r))return t.getElevation(r.x,r.y,r.z||0,r.spatialReference,n);if(s(r)){var e;let i=r.offset;return t.getElevation(r.array[i++],r.array[i++],r.array[i]||0,null!==(e=r.spatialReference)&&void 0!==e?e:t.spatialReference,n)}return t.getElevation(r[0],r[1],r[2]||0,t.spatialReference,n)}},29808:(t,r,n)=>{n.d(r,{G7:()=>b,TH:()=>_,hz:()=>O});var i=n(34761),e=n(13191),s=n(20664),o=n(9392),a=n(43047),c=n(55855),l=n(95925),h=n(64465),f=n(3112),u=n(35737),g=n(46571),d=n(97974);const _=1e-5;class T{constructor(t){this.options=new f.H6,this._results=new p,this.transform=new d.dg,this.tolerance=_,this.verticalOffset=null,this._ray=(0,l.vt)(),this._rayEnd=(0,o.vt)(),this._rayBeginTransformed=(0,o.vt)(),this._rayEndTransformed=(0,o.vt)(),this.viewingMode=null!==t&&void 0!==t?t:h.RT.Global}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(t,r,n){this.resetWithRay((0,l.Cr)(t,r,this._ray),n)}resetWithRay(t,r){this.camera=r,t!==this._ray&&(0,l.C)(t,this._ray),0!==this.options.verticalOffset?this.viewingMode===h.RT.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,(0,s.g)(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,e=arguments.length>4?arguments[4]:void 0;this.point=r,this.filterPredicate=i,this.tolerance=null!==n&&void 0!==n?n:_;const s=(0,d.ou)(this.verticalOffset);if(t&&t.length>0){const r=e?t=>{e(t)&&this.intersectObject(t)}:t=>{this.intersectObject(t)};for(const n of t){var o;const t=null===(o=n.getSpatialQueryAccelerator)||void 0===o?void 0:o.call(n);null!=t?(null!=s?t.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,r,s):t.forEachAlongRay(this._ray.origin,this._ray.direction,r),this.options.selectionMode&&this.options.hud&&t.forEachDegenerateObject(r)):n.objects.forAll((t=>r(t)))}}this.sortResults()}intersectObject(t){const r=t.geometries;if(!r)return;const n=t.effectiveTransformation,i=(0,d.ou)(this.verticalOffset);for(const o of r){if(!o.visible)continue;const{material:r,id:a}=o;this.transform.setAndInvalidateLazyTransforms(n,o.transformation),(0,s.e)(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),(0,s.e)(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const c=this.transform.transform;null!=i&&(i.objectTransform=this.transform),r.intersect(o,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,((r,n,i,s,o,l)=>{if(r>=0){if(null!=this.filterPredicate&&!this.filterPredicate(this._ray.origin,this._rayEnd,r))return;const h=s?this._results.hud:this._results,g=s?s=>{const c=new u.B$(t,a,i,l);s.set(f.dz.HUD,c,r,n,e.zK,o)}:e=>e.set(f.dz.OBJECT,{object:t,geometryId:a,triangleNr:i},r,n,c,o);if((null==h.min.drapedLayerOrder||o>=h.min.drapedLayerOrder)&&(null==h.min.dist||r<h.min.dist)&&g(h.min),this.options.store!==f.oH.MIN&&(null==h.max.drapedLayerOrder||o<h.max.drapedLayerOrder)&&(null==h.max.dist||r>h.max.dist)&&g(h.max),this.options.store===f.oH.ALL)if(s){const t=new R(this._ray);g(t),this._results.hud.all.push(t)}else{const t=new m(this._ray);g(t),this._results.all.push(t)}}}))}}sortResults(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._results.all).sort(((t,r)=>{var n,i;return t.dist!==r.dist?(null!==(n=t.dist)&&void 0!==n?n:0)-(null!==(i=r.dist)&&void 0!==i?i:0):t.drapedLayerOrder!==r.drapedLayerOrder?v(t.drapedLayerOrder,r.drapedLayerOrder):v(t.drapedLayerGraphicOrder,r.drapedLayerGraphicOrder)}))}}function v(t,r){return(null!==r&&void 0!==r?r:-Number.MAX_VALUE)-(null!==t&&void 0!==t?t:-Number.MAX_VALUE)}function O(t){return new T(t)}class p{constructor(){this.min=new m((0,l.vt)()),this.max=new m((0,l.vt)()),this.hud={min:new R((0,l.vt)()),max:new R((0,l.vt)()),all:new Array},this.ground=new m((0,l.vt)()),this.all=[]}init(t){this.min.init(t),this.max.init(t),this.ground.init(t),this.all.length=0,this.hud.min.init(t),this.hud.max.init(t),this.hud.all.length=0}}class m{get ray(){return this._ray}get distanceInRenderSpace(){return null!=this.dist?((0,s.h)(A,this.ray.direction,this.dist),(0,s.l)(A)):null}getIntersectionPoint(t){return!!(0,g.i3)(this)&&((0,s.h)(A,this.ray.direction,this.dist),(0,s.g)(t,this.ray.origin,A),!0)}getTransformedNormal(t){return(0,s.c)(y,this.normal),y[3]=0,(0,a.t)(y,y,this.transformation),(0,s.c)(t,y),(0,s.n)(t,t)}constructor(t){this.intersector=f.dz.OBJECT,this.normal=(0,o.vt)(),this.transformation=(0,e.vt)(),this._ray=(0,l.vt)(),this.init(t)}init(t){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=f.dz.OBJECT,(0,l.C)(t,this._ray)}set(t,r,n,a,c,l,h){this.intersector=t,this.dist=n,(0,s.c)(this.normal,null!==a&&void 0!==a?a:o.Cb),(0,i.C)(this.transformation,null!==c&&void 0!==c?c:e.zK),this.target=r,this.drapedLayerOrder=l,this.drapedLayerGraphicOrder=h}copy(t){(0,l.C)(t.ray,this._ray),this.intersector=t.intersector,this.dist=t.dist,this.target=t.target,this.drapedLayerOrder=t.drapedLayerOrder,this.drapedLayerGraphicOrder=t.drapedLayerGraphicOrder,(0,s.c)(this.normal,t.normal),(0,i.C)(this.transformation,t.transformation)}}class R extends m{constructor(){super(...arguments),this.intersector=f.dz.HUD}}function b(t){return new m(t)}const A=(0,o.vt)(),y=(0,c.vt)()},3112:(t,r,n)=>{var i,e;n.d(r,{H6:()=>s,dz:()=>i,oH:()=>e}),function(t){t[t.OBJECT=0]="OBJECT",t[t.HUD=1]="HUD",t[t.TERRAIN=2]="TERRAIN",t[t.OVERLAY=3]="OVERLAY",t[t.I3S=4]="I3S",t[t.PCL=5]="PCL",t[t.LOD=6]="LOD",t[t.VOXEL=7]="VOXEL",t[t.TILES3D=8]="TILES3D"}(i||(i={}));class s{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerUids=[],this.store=e.ALL}}!function(t){t[t.MIN=0]="MIN",t[t.MINMAX=1]="MINMAX",t[t.ALL=2]="ALL"}(e||(e={}))},35737:(t,r,n)=>{n.d(r,{B$:()=>s,HE:()=>o,R6:()=>a});var i=n(9392);class e{constructor(t,r,n){this.object=t,this.geometryId=r,this.triangleNr=n}}class s extends e{constructor(t,r,n,e){super(t,r,n),this.center=null!=e?(0,i.o8)(e):null}}class o{constructor(t){this.layerUid=t}}class a extends o{constructor(t,r){super(t),this.graphicUid=r}}},46571:(t,r,n)=>{n.d(r,{$I:()=>l,Q5:()=>c,hH:()=>h,i3:()=>a});var i=n(20664),e=n(9392),s=n(79650),o=n(3112);function a(t){return null!=(null===t||void 0===t?void 0:t.dist)}function c(t){return(r,n,e)=>((0,i.m)(f,r,n,e),!(0,s.e)(t,f))}function l(t){return a(t)&&t.intersector===o.dz.OBJECT&&!!t.target}function h(t){return a(t)&&t.intersector===o.dz.HUD&&!!t.target&&"center"in t.target&&null!=t.target.center}const f=(0,e.vt)()},97974:(t,r,n)=>{n.d(r,{XG:()=>v,dd:()=>p,dg:()=>u,fo:()=>m,ou:()=>_});var i=n(63919),e=n(44680),s=n(34761),o=n(13191),a=n(20664),c=n(9392),l=n(93582),h=n(64465),f=n(59231);class u{constructor(){this._transform=(0,o.vt)(),this._transformInverse=new g({value:this._transform},s.B8,o.vt),this._transformInverseTranspose=new g(this._transformInverse,s.mg,o.vt),this._transformTranspose=new g({value:this._transform},s.mg,o.vt),this._transformInverseRotation=new g({value:this._transform},i.dR,e.vt)}_invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){(0,s.C)(this._transform,t)}multiplyTransform(t){(0,s.lw)(this._transform,this._transform,t)}set(t){(0,s.C)(this._transform,t),this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,r){this.setTransformMatrix(t),this.multiplyTransform(r),this._invalidateLazyTransforms()}}class g{constructor(t,r,n){this._original=t,this._update=r,this._dirty=!0,this._transform=n()}invalidate(){this._dirty=!0}get value(){return this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1),this._transform}}const d=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.offset=t,this.sphere=(0,l.c)(),this.tmpVertex=(0,c.vt)()}applyToVertex(t,r,n){const i=this.objectTransform.transform,e=(0,a.s)(R,t,r,n),s=(0,a.e)(e,e,i),o=this.offset/(0,a.l)(s);(0,a.r)(s,s,s,o);const c=this.objectTransform.inverse;return(0,a.e)(this.tmpVertex,s,c),this.tmpVertex}applyToMinMax(t,r){const n=this.offset/(0,a.l)(t);(0,a.r)(t,t,t,n);const i=this.offset/(0,a.l)(r);(0,a.r)(r,r,r,i)}applyToAabb(t){const r=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*r,t[1]+=t[1]*r,t[2]+=t[2]*r;const n=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*n,t[4]+=t[4]*n,t[5]+=t[5]*n,t}applyToBoundingSphere(t){const r=(0,a.l)((0,l.g)(t)),n=this.offset/r;return(0,a.r)((0,l.g)(this.sphere),(0,l.g)(t),(0,l.g)(t),n),this.sphere[3]=t[3]+t[3]*this.offset/r,this.sphere}};function _(t){return null!=t?(d.offset=t,d):null}const T=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.componentLocalOriginLength=0,this._totalOffset=0,this._offset=0,this._tmpVertex=(0,c.vt)(),this._tmpMbs=(0,l.c)(),this._tmpObb=new f.ab,this._resetOffset(t)}_resetOffset(t){this._offset=t,this._totalOffset=t}set offset(t){this._resetOffset(t)}get offset(){return this._offset}set componentOffset(t){this._totalOffset=this._offset+t}set localOrigin(t){this.componentLocalOriginLength=(0,a.l)(t)}applyToVertex(t,r,n){const i=(0,a.s)(R,t,r,n),e=(0,a.s)(b,t,r,n+this.componentLocalOriginLength),s=this._totalOffset/(0,a.l)(e);return(0,a.r)(this._tmpVertex,i,e,s),this._tmpVertex}applyToAabb(t){const r=this.componentLocalOriginLength,n=t[0],i=t[1],e=t[2]+r,s=t[3],o=t[4],a=t[5]+r,c=Math.abs(n),l=Math.abs(i),h=Math.abs(e),f=Math.abs(s),u=Math.abs(o),g=Math.abs(a),d=.5*(1+Math.sign(n*s))*Math.min(c,f),_=.5*(1+Math.sign(i*o))*Math.min(l,u),T=.5*(1+Math.sign(e*a))*Math.min(h,g),v=Math.max(c,f),O=Math.max(l,u),p=Math.max(h,g),m=Math.sqrt(d*d+_*_+T*T),R=Math.sign(c+n),b=Math.sign(l+i),A=Math.sign(h+e),y=Math.sign(f+s),E=Math.sign(u+o),M=Math.sign(g+a),L=this._totalOffset;if(m<L)return t[0]-=(1-R)*L,t[1]-=(1-b)*L,t[2]-=(1-A)*L,t[3]+=y*L,t[4]+=E*L,t[5]+=M*L,t;const I=L/Math.sqrt(v*v+O*O+p*p),F=L/m,B=F-I,N=-B;return t[0]+=n*(R*N+F),t[1]+=i*(b*N+F),t[2]+=e*(A*N+F),t[3]+=s*(y*B+I),t[4]+=o*(E*B+I),t[5]+=a*(M*B+I),t}applyToMbs(t){const r=(0,a.l)((0,l.g)(t)),n=this._totalOffset/r;return(0,a.r)((0,l.g)(this._tmpMbs),(0,l.g)(t),(0,l.g)(t),n),this._tmpMbs[3]=t[3]+t[3]*this._totalOffset/r,this._tmpMbs}applyToObb(t){return(0,f.gm)(t,this._totalOffset,this._totalOffset,h.RT.Global,this._tmpObb),this._tmpObb}};function v(t){return null!=t?(T.offset=t,T):null}const O=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.offset=t,this.tmpVertex=(0,c.vt)()}applyToVertex(t,r,n){const i=(0,a.s)(R,t,r,n),e=(0,a.g)(b,i,this.localOrigin),s=this.offset/(0,a.l)(e);return(0,a.r)(this.tmpVertex,i,e,s),this.tmpVertex}applyToAabb(t){const r=A,n=y,i=E;for(let a=0;a<3;++a)r[a]=t[0+a]+this.localOrigin[a],n[a]=t[3+a]+this.localOrigin[a],i[a]=r[a];const e=this.applyToVertex(r[0],r[1],r[2]);for(let a=0;a<3;++a)t[a]=e[a],t[a+3]=e[a];const s=r=>{const n=this.applyToVertex(r[0],r[1],r[2]);for(let i=0;i<3;++i)t[i]=Math.min(t[i],n[i]),t[i+3]=Math.max(t[i+3],n[i])};for(let a=1;a<8;++a){for(let t=0;t<3;++t)i[t]=0==(a&1<<t)?r[t]:n[t];s(i)}let o=0;for(let a=0;a<3;++a)r[a]*n[a]<0&&(o|=1<<a);if(0!==o&&7!==o)for(let a=0;a<8;++a)if(0==(o&a)){for(let t=0;t<3;++t)i[t]=0!=(o&1<<t)?0:0!=(a&1<<t)?r[t]:n[t];s(i)}for(let a=0;a<3;++a)t[a]-=this.localOrigin[a],t[a+3]-=this.localOrigin[a];return t}};function p(t){return null!=t?(O.offset=t,O):null}const m="terrain",R=(0,c.vt)(),b=(0,c.vt)(),A=(0,c.vt)(),y=(0,c.vt)(),E=(0,c.vt)()}}]);
//# sourceMappingURL=17881.c6984b53.chunk.js.map