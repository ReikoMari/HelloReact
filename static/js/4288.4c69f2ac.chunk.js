"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[4288],{95085:(e,t,n)=>{n.d(t,{A:()=>p});var i=n(35143),s=n(91967),r=n(18690),o=n(69098),l=n(5632),a=n(42553),u=n(46053),c=(n(81806),n(76460),n(85842));let d=0,h=class extends((0,a.Te)((0,o.O)((0,l.sA)(s.A)))){constructor(e){super(e),this.id="".concat(Date.now().toString(16),"-analysis-").concat(d++),this.title=null}get parent(){return this._get("parent")}set parent(e){const t=this.parent;if(null!=t)switch(t.type){case"line-of-sight":case"dimension":t.releaseAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}get isEditable(){return this.requiredPropertiesForEditing.every(r.Ru)}};(0,i._)([(0,u.MZ)({type:String,constructOnly:!0,clonable:!1})],h.prototype,"id",void 0),(0,i._)([(0,u.MZ)({type:String})],h.prototype,"title",void 0),(0,i._)([(0,u.MZ)({clonable:!1,value:null})],h.prototype,"parent",null),(0,i._)([(0,u.MZ)({readOnly:!0})],h.prototype,"isEditable",null),h=(0,i._)([(0,c.$)("esri.analysis.Analysis")],h);const p=h},56002:(e,t,n)=>{function i(e){let t,n,i=[],s=!1;return function(){for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return s&&t===this&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(o,i)||(n=e.apply(this,o),t=this,i=o,s=!0),n}}n.d(t,{B:()=>i})},64232:(e,t,n)=>{n.d(t,{W:()=>l,g:()=>o});var i=n(9392),s=n(9624),r=n(45308);function o(e,t,n,i){var o,l;if((0,s.canProjectWithoutEngine)(e.spatialReference,n)){var u;a[0]=e.x,a[1]=e.y;const s=e.z;return a[2]=null!==(u=null!==s&&void 0!==s?s:i)&&void 0!==u?u:0,(0,r.projectBuffer)(a,e.spatialReference,0,t,n,0,1)}const c=(0,s.tryProjectWithZConversion)(e,n);return!!c&&(t[0]=null===c||void 0===c?void 0:c.x,t[1]=null===c||void 0===c?void 0:c.y,t[2]=null!==(o=null!==(l=null===c||void 0===c?void 0:c.z)&&void 0!==l?l:i)&&void 0!==o?o:0,!0)}async function l(e,t,n,i,r){return await(0,s.initializeProjection)(e.spatialReference,n,null,r),o(e,t,n,i)}const a=(0,i.vt)()},86458:(e,t,n)=>{n.d(t,{W:()=>r});var i=n(9392),s=n(98799);function r(e,t){o[0]=e.x,o[1]=e.y;const n=e.z;return o[2]=void 0!==n?n:0,(0,s.H)(o,e.spatialReference,t)}const o=(0,i.vt)()},14487:(e,t,n)=>{n.d(t,{F:()=>r});n(9624);var i=n(13312),s=n(64232);function r(e,t,n,i,r){return!(null==t||null==i||e.length<2)&&(o.x=e[0],o.y=e[1],o.z=e[2],o.spatialReference=t,(0,s.g)(o,n,i,r))}const o=(0,n(18117).T)(0,0,0,i.A.WGS84)},98799:(e,t,n)=>{n.d(t,{H:()=>r});var i=n(9392),s=n(482);function r(e,t,n){if(null==t)return!1;const i=(0,s.Yz)(t);return null!=i&&(i(e,0,o,0),n!==o&&(n[0]=o[0],n[1]=o[1],n.length>2&&(n[2]=o[2])),!0)}const o=(0,i.vt)()},18117:(e,t,n)=>{function i(e,t,n,i){return{x:e,y:t,z:n,hasZ:null!=n,hasM:!1,spatialReference:i,type:"point"}}n.d(t,{T:()=>i})},8203:(e,t,n)=>{n.d(t,{A:()=>_});var i,s=n(35143),r=n(35238),o=n(82111),l=n(45802),a=n(42553),u=n(53084),c=n(46053),d=(n(81806),n(76460),n(85842)),h=n(68295);const p=new l.J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),v=new l.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let f=i=class extends a.oY{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{where:t,geometry:n,spatialRelationship:i,timeExtent:s,objectIds:r,units:o,distance:l}=this;return new h.A({geometry:(0,u.o8)(n),objectIds:(0,u.o8)(r),spatialRelationship:i,timeExtent:(0,u.o8)(s),where:t,units:o,distance:l,...e})}clone(){const{where:e,geometry:t,spatialRelationship:n,timeExtent:s,objectIds:r,units:o,distance:l}=this;return new i({geometry:(0,u.o8)(t),objectIds:(0,u.o8)(r),spatialRelationship:n,timeExtent:(0,u.o8)(s),where:e,units:o,distance:l})}};(0,s._)([(0,c.MZ)({type:String,json:{write:!0}})],f.prototype,"where",void 0),(0,s._)([(0,c.MZ)({types:r.yR,json:{write:!0}})],f.prototype,"geometry",void 0),(0,s._)([(0,c.MZ)({type:p.apiValues,json:{name:"spatialRel",read:{reader:p.read},write:{allowNull:!1,writer:p.write,overridePolicy(){return{enabled:null!=this.geometry}}}}})],f.prototype,"spatialRelationship",void 0),(0,s._)([(0,c.MZ)({type:Number,json:{write:{overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],f.prototype,"distance",void 0),(0,s._)([(0,c.MZ)({type:[Number],json:{write:!0}})],f.prototype,"objectIds",void 0),(0,s._)([(0,c.MZ)({type:v.apiValues,json:{read:v.read,write:{writer:v.write,overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],f.prototype,"units",void 0),(0,s._)([(0,c.MZ)({type:o.A,json:{write:!0}})],f.prototype,"timeExtent",void 0),f=i=(0,s._)([(0,d.$)("esri.layers.support.FeatureFilter")],f);const _=f},12482:(e,t,n)=>{n.d(t,{$7:()=>E,B:()=>b,Fo:()=>y,M7:()=>x,NN:()=>h,Q5:()=>m,Tq:()=>S,Up:()=>w,XF:()=>A,Ze:()=>v,bK:()=>l,bh:()=>d,id:()=>f,ky:()=>c,qt:()=>T,tW:()=>R,w7:()=>a,wF:()=>o,wS:()=>_,xS:()=>g,ze:()=>u});var i=n(31633),s=n(59097);function r(e){return e?T:S}function o(e,t){return null!==t&&void 0!==t&&t.mode?t.mode:r(e).mode}function l(e,t){return null!=t?t:r(e)}function a(e,t){return o(null!=e&&e.hasZ,t)}function u(e,t){return l(null!=e&&!!e.hasZ,t)}function c(e){const t=p(e);return a(e.geometry,t)}function d(e){const t=p(e),n=a(e.geometry,t);return{mode:n,offset:null!=t&&"on-the-ground"!==n?x(t):0}}function h(e){if("on-the-ground"===c(e))return!1;const t=p(e),n=null!==t&&void 0!==t&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!n||"0"===n)}function p(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function v(e,t){if(null===e||void 0===e||!e.offset)return 0;const{offset:n,unit:s}=e;if("decimal-degrees"===s)return 0;const r="unknown"!==s&&s?s:"meters",o=(0,i.mq)(t);return o?(0,i.oU)(n,r,o):0}function f(e,t,n){var i,s;if(null===n||void 0===n||!n.mode)return;const r=e.hasZ?e.z:0,o=v(n,e.spatialReference);switch(n.mode){case"absolute-height":return r-o;case"on-the-ground":return 0;case"relative-to-ground":return r-((null!==(i=t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"ground"))&&void 0!==i?i:0)+o);case"relative-to-scene":return r-((null!==(s=t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"scene"))&&void 0!==s?s:0)+o)}}function _(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return y(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,i)}function g(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return y(e,t[0],t[1],t.length>2?t[2]:0,n,i,s)}function y(e,t,n,i,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null==r)return;const l=null!=o?o.mode:"absolute-height";if("on-the-ground"===l)return 0;const{absoluteZ:a}=m(t,n,i,s,e,r);return function(e,t,n,i,s,r,o,l){var a,u;const c=v(o,s);switch(l){case"absolute-height":return e-c;case"relative-to-ground":return e-((null!==(a=r.elevationProvider.getElevation(t,n,i,s,"ground"))&&void 0!==a?a:0)+c);case"relative-to-scene":return e-((null!==(u=r.elevationProvider.getElevation(t,n,i,s,"scene"))&&void 0!==u?u:0)+c)}}(a,t,n,i,s,e,o,l)}function m(e,t,n,i,s,r){const o=v(r,i);switch(r.mode){case"absolute-height":return{absoluteZ:n+o,elevation:0};case"on-the-ground":{var l;const n=null!==(l=s.elevationProvider.getElevation(e,t,0,i,"ground"))&&void 0!==l?l:0;return{absoluteZ:n,elevation:n}}case"relative-to-ground":{var a;const r=null!==(a=s.elevationProvider.getElevation(e,t,n,i,"ground"))&&void 0!==a?a:0;return{absoluteZ:n+r+o,elevation:r}}case"relative-to-scene":{var u;const r=null!==(u=s.elevationProvider.getElevation(e,t,n,i,"scene"))&&void 0!==u?u:0;return{absoluteZ:n+r+o,elevation:r}}}}function w(e,t){if(null==t)return!1;const{mode:n}=t;return null!=n&&("scene"===e&&"relative-to-scene"===n||"ground"===e&&"absolute-height"!==n)}function b(e,t,n){return n&&n.mode!==t?"".concat(e," only support ").concat(t," elevation mode"):null}function E(e,t,n){return(null===n||void 0===n?void 0:n.mode)===t?"".concat(e," do not support ").concat(t," elevation mode"):null}function R(e,t){return null!=(null===t||void 0===t?void 0:t.featureExpressionInfo)&&"0"!==t.featureExpressionInfo.expression?"".concat(e," do not support featureExpressionInfo"):null}function A(e,t){t&&e.warn(".elevationInfo=",t)}function x(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t?t:0)*(0,s.Ao)(null===e||void 0===e?void 0:e.unit)}const T={mode:"absolute-height",offset:0},S={mode:"on-the-ground",offset:null}},77515:(e,t,n)=>{n.d(t,{CL:()=>_,EM:()=>m,Gc:()=>b,OK:()=>f,SH:()=>g,p6:()=>y,s7:()=>E,uc:()=>v,zS:()=>w});var i=n(20664),s=n(9392),r=n(63391),o=n(65215),l=n(13312),a=n(64232),u=n(86458),c=n(98799),d=n(7137),h=n(93582),p=n(94966);function v(e,t){const n=(0,h.g)(t);(0,i.s)(n,0,0,0);for(let r=0;r<e.length;++r)(0,i.g)(n,n,e[r]);(0,i.h)(n,n,1/e.length);let s=0;for(let r=0;r<e.length;++r)s=Math.max(s,(0,i.a)(n,e[r]));t[3]=Math.sqrt(s)}function f(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");(0,p.e9)(e[0],e[1],e[2],t)}function _(e,t){return(0,i.k)(e,t)+e[3]}function g(e,t,n){return(0,a.g)(e,R,n)&&(0,a.g)(t,A,n)?(0,i.q)(R,A):0}function y(e,t){if(!(0,u.W)(e,R)||!(0,u.W)(t,A))return 0;const n=new d.Zj;return(0,d._3)(n,[R[0],R[1]],[A[0],A[1]],l.A.WGS84),n.distance}function m(e,t,n){const i=new d.Zj;return(0,d._3)(i,[e[0],e[1]],[t[0],t[1]],null!==n&&void 0!==n?n:l.A.WGS84),i.distance}function w(e,t,n,i){const s=T;return(0,c.H)(e,i,R)&&(0,c.H)(t,i,A)&&(0,c.H)(n,i,x)?(s.setPoint(0,0,R),s.setPoint(0,1,A),s.setPoint(0,2,x),Math.abs((0,r.geodesicArea)(s,"square-meters"))):0}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=(e,t)=>{if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(let n=0;n<e.length;++n)if((0,i.k)(t,e[n])<-1e-6)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&(0,i.c)(t,e[0]),!0;(0,i.s)(S,0,0,0);for(let r=0;r<e.length;++r)(0,i.g)(S,S,e[r]);if((0,i.n)(S,S),s(e,S))return t&&(0,i.c)(t,S),!0;if(!n)return!1;for(let r=0;r<e.length;++r)for(let n=0;n<e.length;++n)if(r!==n&&((0,i.b)(S,e[r],e[n]),(0,i.n)(S,S),s(e,S)))return t&&(0,i.c)(t,S),!0;return!1}function E(e){return"mouse"!==e.pointerType||0===e.button}const R=(0,s.vt)(),A=(0,s.vt)(),x=(0,s.vt)(),T=new o.A({rings:[[R,A,x]],spatialReference:l.A.WGS84}),S=(0,s.vt)()},37431:(e,t,n)=>{n.d(t,{Gc:()=>a,RI:()=>c,Z4:()=>u,dk:()=>h,vr:()=>d});var i=n(76931),s=n(19555),r=n(20664),o=n(95925),l=n(75762);function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.vt)();return u(e,(0,i.WA)(t),n),(0,r.n)(n.direction,n.direction),n}function u(e,t,n){return c(e,e.screenToRender(t,(0,i.sc)(l.rq.get())),n)}function c(e,t,n){const o=(0,i.sc)((0,s.C)(l.rq.get(),t));if(o[2]=0,!e.unprojectFromRenderScreen(o,n.origin))return null;const a=(0,i.sc)((0,s.C)(l.rq.get(),t));a[2]=1;const u=e.unprojectFromRenderScreen(a,l.rq.get());return null==u?null:((0,r.f)(n.direction,u,n.origin),n)}function d(e,t,n){return h(e,e.screenToRender(t,(0,i.sc)(l.rq.get())),n)}function h(e,t,n){(0,r.c)(n.origin,e.eye);const i=(0,r.s)(l.rq.get(),t[0],t[1],1),s=e.unprojectFromRenderScreen(i,l.rq.get());return null==s?null:((0,r.f)(n.direction,s,n.origin),n)}},5109:(e,t,n)=>{n.d(t,{k:()=>l});var i=n(35143),s=n(68134),r=(n(76460),n(81806),n(47249),n(50076),n(85842)),o=n(56829);let l=class extends o.g{constructor(e){super(e)}initialize(){this.addHandles((0,s.watch)((()=>this.analysisViewData.visible),(e=>this.visible=e),s.syncAndInitial))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set("created",!1)}};l=(0,i._)([(0,r.$)("esri.views.interactive.AnalysisToolBase")],l)},28455:(e,t,n)=>{n.d(t,{X:()=>p});var i=n(54901),s=n(77944),r=n(19276),o=n(68134),l=n(3589),a=n(63078),u=n(83973);var c=n(12843),d=n(43184);const h=new Map;function p(e){if(!h.has(e)){const t=function(e,t){var n,i;const s=new u.A({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:null!==(n=null===t||void 0===t?void 0:t.distance)&&void 0!==n?n:a.N.distance,touchSensitivityMultiplier:null!==(i=null===t||void 0===t?void 0:t.touchSensitivityMultiplier)&&void 0!==i?i:a.N.touchSensitivityMultiplier});return{...(0,o.watch)((()=>{var t,n;return null!==(t=null===(n=e.map)||void 0===n||null===(n=n.allLayers)||void 0===n?void 0:n.toArray())&&void 0!==t?t:[]}),(e=>{s.featureSources=new r.A(e.map((e=>new l.A({layer:e,enabled:!0}))))}),o.initial),options:s}}(e,{distance:10}),n=function(e,t){return new d.g({view:e,options:t,snappingEnginesFactory:(t,n)=>[new c.f({view:e,spatialReference:e.spatialReference,options:n})]})}(e,t.options);h.set(e,{referenceCount:0,snappingManager:n,remove:()=>{t.remove(),n.destroy()}})}const t=h.get(e);t.referenceCount++;const n=(0,i.hA)((()=>function(e,t){t.referenceCount--,t.referenceCount>0||(0,s.d)((()=>{0===t.referenceCount&&(t.remove(),h.delete(e))}))}(e,t)));return{snappingManager:t.snappingManager,...n}}},13284:(e,t,n)=>{n.d(t,{e:()=>i});class i{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}}},61237:(e,t,n)=>{n.d(t,{L:()=>h});var i=n(30726),s=n(50346),r=n(68134),o=n(74e3),l=n(32535),a=n(12482),u=n(17046),c=n(13284),d=n(59752);function h(e){let{predicate:t=(()=>!0),snappingManager:n,snappingContext:l,updatingHandles:h,useZ:g=!0}=e;const y=new u.rh;if(null==n)return{snappingStep:[_,y],cancelSnapping:_};let m,w=null,b=null,E=null;const R=()=>{var e;w=(0,i.DC)(w),n.doneSnapping(),null!==(e=b)&&void 0!==e&&e.frameTask.remove(),b=null,m=(0,i.xt)(m),E=null},A=(x=n,T=g,S=y,(0,s.sg)((async(e,t)=>{let{frameTask:n,point:i,scenePoint:s,context:r,event:l,delta:a,getLastState:u}=e;const c=await n.schedule((()=>x.snap({point:i,scenePoint:s,context:r,signal:t})),t);if(c.valid){let e=await n.schedule((()=>c.apply()),t);const s=u();null!=s.point&&i!==s.point&&(e=x.update({point:s.point,scenePoint:s.scenePoint,context:r})),null!=s.updatePoint&&(0,o.CI)(e,s.updatePoint)||(f(l.mapEnd,e,a,T),S.execute(l))}})));var x,T,S;let M=null,N=null,Z=null;return{snappingStep:[e=>{if(!t(e))return e;const{action:i}=e;if("start"===i){const{info:t}=e,i=function(e){return"3d"===e.type?e.resourceController.scheduler.registerTask(d.W6.SNAPPING):d.nu}(n.view);if(b=function(e,t,n){return{context:new c.e({editGeometryOperations:e.editGeometryOperations,elevationInfo:e.elevationInfo,pointer:e.pointer,vertexHandle:null!=t.info?t.info.handle:null,excludeFeature:e.excludeFeature,feature:e.feature,visualizer:e.visualizer}),originalPos:null!=t.snapOrigin?e.coordinateHelper.vectorToDehydratedPoint(t.snapOrigin):t.mapStart,originalScenePos:null!=t.scenePoints?t.scenePoints.sceneStart:null,frameTask:n}}(l,e,i),b.context.selfSnappingZ=null,!g&&null!=t){var o;const e=function(e,t){if(!e.hasZ())return null;const n=t.vertices;let i=null;for(const s of n){const t=e.getZ(s.pos);if(null!=i&&null!=t&&Math.abs(t-i)>1e-6)return null;null==i&&(i=t)}return i}(l.coordinateHelper,t.handle.component);null!=e&&(b.context.selfSnappingZ={value:e,elevationInfo:null!==(o=l.elevationInfo)&&void 0!==o?o:a.qt})}}if(null!=b){const{context:t,originalScenePos:o,originalPos:l}=b,{mapEnd:a,mapStart:u,scenePoints:c}=e,d=p(l,v(a,u)),_=v(u,l),y={...e,action:"update"},R=b.context,x=function(e,t){return null==e||null==t?null:p(e,v(t.sceneEnd,t.sceneStart))}(o,c),T=n.update({point:d,scenePoint:x,context:t});if(Z=T,f(a,T,_,g),M=d,N=x,"end"!==i){const{frameTask:e}=b;null==w&&(w=new AbortController),E=t=>{h.addPromise((0,s.QZ)(A({frameTask:e,event:y,context:R,point:d,scenePoint:x,delta:_,getLastState:()=>({point:M,scenePoint:N,updatePoint:t.forceUpdate?null:Z})},w.signal)))},E({forceUpdate:!1}),null==m&&(m=(0,r.watch)((()=>n.options.effectiveEnabled),(()=>{var e;return null===(e=E)||void 0===e?void 0:e({forceUpdate:!0})})))}}return"end"===i&&R(),e},y],cancelSnapping:e=>(R(),e)}}function p(e,t){let[n,i,s]=t;const r=(0,l.EL)(e);return r.x+=n,r.y+=i,r.hasZ&&(r.z+=s),r}function v(e,t){const n=e.hasZ&&t.hasZ?e.z-t.z:0;return[e.x-t.x,e.y-t.y,n]}function f(e,t,n,i){let[s,r,o]=n;e.x=t.x+s,e.y=t.y+r,i&&e.hasZ&&t.hasZ&&(e.z=t.z+o)}function _(e){return e}},90992:(e,t,n)=>{function i(e){return e&&"function"==typeof e.highlight}function s(e){return e&&"function"==typeof e.maskOccludee}function r(e,t,n){return null==e||e>n&&(0===t||e<t)}function o(e,t){return null!=e&&e>0||null!=t&&t>0}function l(e){var t,n;const i=e.effectiveScaleRange;return{minScale:null!==(t=null===i||void 0===i?void 0:i.minScale)&&void 0!==t?t:0,maxScale:null!==(n=null===i||void 0===i?void 0:i.maxScale)&&void 0!==n?n:0}}function a(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatures"in e&&"layer"in e&&"view"in e}n.d(t,{Cf:()=>l,JU:()=>r,Of:()=>i,Uk:()=>s,WK:()=>o,lO:()=>a})},76718:(e,t,n)=>{n.d(t,{g:()=>u});var i=n(18690),s=n(76460),r=n(78393),o=n(61678),l=n(93345);const a=()=>s.A.getLogger("esri.views.webgl.BufferObject");class u{static createIndex(e,t,n){return new u(e,l.NZ.ELEMENT_ARRAY_BUFFER,t,n)}static createVertex(e,t,n){return new u(e,l.NZ.ARRAY_BUFFER,t,n)}static createUniform(e,t,n){return new u(e,l.NZ.UNIFORM_BUFFER,t,n)}static createPixelPack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l._U.STREAM_READ,n=arguments.length>2?arguments[2]:void 0;const i=new u(e,l.NZ.PIXEL_PACK_BUFFER,t);return n&&i.setSize(n),i}static createPixelUnpack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l._U.STREAM_DRAW,n=arguments.length>2?arguments[2]:void 0;return new u(e,l.NZ.PIXEL_UNPACK_BUFFER,t,n)}static createTransformFeedback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l._U.STATIC_DRAW,n=arguments.length>2?arguments[2]:void 0;const i=new u(e,l.NZ.TRANSFORM_FEEDBACK_BUFFER,t);return i.setSize(n),i}constructor(e,t,n,i){this._context=e,this.bufferType=t,this.usage=n,this._glName=null,this._size=-1,this._indexType=void 0,e.instanceCounter.increment(l.vt.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,o.Y2)(this._context.gl),i&&this.setData(i)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get usedMemory(){return this.bufferType===l.NZ.ELEMENT_ARRAY_BUFFER?this._indexType===l.pe.UNSIGNED_INT?4*this._size:2*this._size:this._size}get _isVAOAware(){return this.bufferType===l.NZ.ELEMENT_ARRAY_BUFFER||this.bufferType===l.NZ.ARRAY_BUFFER}dispose(){var e;null!==(e=this._context)&&void 0!==e&&e.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(l.vt.BufferObject,this),this._context=null):this._glName&&a().warn("Leaked WebGL buffer object")}setSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e<=0&&a().error("Buffer size needs to be positive!"),this.bufferType===l.NZ.ELEMENT_ARRAY_BUFFER&&null!=t)switch(this._indexType=t,t){case l.pe.UNSIGNED_SHORT:e*=2;break;case l.pe.UNSIGNED_INT:e*=4}this._setBufferData(e)}setData(e){if(!e)return;let t=e.byteLength;this.bufferType===l.NZ.ELEMENT_ARRAY_BUFFER&&((0,r.jq)(e)&&(t/=2,this._indexType=l.pe.UNSIGNED_SHORT),(0,r.XJ)(e)&&(t/=4,this._indexType=l.pe.UNSIGNED_INT)),this._setBufferData(t,e)}_setBufferData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._size=e;const n=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const i=this._context.gl;null!=t?i.bufferData(this.bufferType,t,this.usage):i.bufferData(this.bufferType,e,this.usage),(0,o.Y2)(i),this._isVAOAware&&this._context.bindVAO(n)}setSubData(e,t,n,i){if(!e)return;(t<0||t*e.BYTES_PER_ELEMENT>=this.usedMemory)&&a().error("offset is out of range!"),n>=i&&a().error("end must be bigger than start!"),(t+(i-n))*e.BYTES_PER_ELEMENT>this.usedMemory&&a().error("An attempt to write beyond the end of the buffer!");const s=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const{gl:r}=this._context;r.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,e,n,i-n),(0,o.Y2)(r),this._isVAOAware&&this._context.bindVAO(s)}getSubData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if(n<0||s<0)return void a().error("Problem getting subdata: offset and length were less than zero!");const r=function(e){return(0,i.Xj)(e)}(e)?e.BYTES_PER_ELEMENT:1;if(r*((null!==n&&void 0!==n?n:0)+(null!==s&&void 0!==s?s:0))>e.byteLength)return void a().error("Problem getting subdata: offset and length exceeded destination size!");t+r*(null!==s&&void 0!==s?s:0)>this.usedMemory&&a().warn("Potential problem getting subdata: requested data exceeds buffer size!");const o=this._context.gl;this.bufferType===l.NZ.TRANSFORM_FEEDBACK_BUFFER?(this._context.bindBuffer(this,l.NZ.TRANSFORM_FEEDBACK_BUFFER),o.getBufferSubData(l.NZ.TRANSFORM_FEEDBACK_BUFFER,t,e,n,s),this._context.unbindBuffer(l.NZ.TRANSFORM_FEEDBACK_BUFFER)):(this._context.bindBuffer(this,l.NZ.COPY_READ_BUFFER),o.getBufferSubData(l.NZ.COPY_READ_BUFFER,t,e,n,s),this._context.unbindBuffer(l.NZ.COPY_READ_BUFFER))}async getSubDataAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;await this._context.clientWaitAsync(),this.getSubData(e,t,n,i)}}},21812:(e,t,n)=>{n.d(t,{_:()=>i});class i{constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;this.name=e,this.count=t,this.type=n,this.offset=i,this.stride=s,this.normalized=r,this.divisor=o}}},38224:(e,t,n)=>{n.d(t,{d:()=>p});var i,s,r=n(35143),o=n(98773),l=n(30726),a=n(50346),u=n(68134),c=n(46053),d=(n(81806),n(76460),n(47249),n(85842)),h=n(69124);(s=i||(i={}))[s.PENDING=0]="PENDING",s[s.WAIT_FOR_VIEW_READY=1]="WAIT_FOR_VIEW_READY",s[s.RUNNING=2]="RUNNING";let p=class extends h.j{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.analysisView=null,this._reconnectViewTask=null,this._parentChangeFromReconnect=!1,this._startUserOperation=null;const t=null===e||void 0===e?void 0:e.analysis;null!=t?this.analysis=t:(this._set("analysis",this.constructAnalysis()),this._set("isAnalysisOwner",!0))}normalizeCtorArgs(e){const{analysis:t,...n}=e;return n}initialize(){this.addHandles([(0,u.watch)((()=>{var e;return null===(e=this.analysis)||void 0===e?void 0:e.parent}),(e=>{this._parentChangeFromReconnect||e===this.view||this._set("isAnalysisOwner",!1);const t=!this._parentChangeFromReconnect;this._parentChangeFromReconnect=!1,t&&this._scheduleViewReconnect()}),u.sync),(0,u.watch)((()=>({view:this.view,ready:null!=this.view&&this.view.ready,supported:this.supported})),((e,t)=>{let{view:n}=e;const i=null===t||void 0===t?void 0:t.view;n!==i&&(this._startUserOperation=(0,l.DC)(this._startUserOperation),this._disconnectFromView(i)),this._scheduleViewReconnect()}),u.syncAndInitial),(0,u.watch)((()=>this.analysis.isEditable),((e,t)=>{null!=this.analysisView&&(e&&!t&&null==this.tool?this.createTool():e||!t||null==this.tool||this.tool.active||this.removeTool())}))])}destroy(){this._reconnectViewTask=(0,l.DC)(this._reconnectViewTask),this._startUserOperation=(0,l.DC)(this._startUserOperation),null!=this.analysisView&&(this.analysisView.visible=void 0),this._disconnectFromView(this.view),null!=this.analysis&&this.isAnalysisOwner&&(this.analysis.destroy(),this._set("analysis",null))}set analysis(e){e!==this._get("analysis")&&(this._startUserOperation=(0,l.DC)(this._startUserOperation),this._disconnectFromView(this.view),this._setExternalAnalysis(e),this._scheduleViewReconnect())}get ready(){return null!=this.analysisView&&!this.connectingToView}get connectingToView(){return null!=this._reconnectViewTask}get isAnalysisOwner(){return this._get("isAnalysisOwner")}set visible(e){this._set("visible",e),null!=this.analysisView&&(this.analysisView.visible=e)}async start(){this.clear();const e={task:null,abort:null,state:i.PENDING},t=(0,o.UT)((async t=>{e.state=i.WAIT_FOR_VIEW_READY,await(0,u.whenOnce)((()=>this.ready),t),e.state=i.RUNNING,this.createTool({interactive:!0})}));return e.task=t,e.abort=()=>t.abort(),this._startUserOperation=e,t.promise}clear(){this._startUserOperation=(0,l.DC)(this._startUserOperation),this.removeTool(),this.analysis.clear()}onConnectToAnalysisView(e){}onDisconnectFromAnalysisView(){}_scheduleViewReconnect(){this._reconnectViewTask=(0,l.DC)(this._reconnectViewTask);const e=(0,o.UT)((async t=>{try{await this._reconnectView(t)}catch(n){if((0,a.Te)(t),!(0,a.zf)(n))return void this.logger.warn("Failed to use analysis in view model",n);throw n}finally{e===this._reconnectViewTask&&(this._reconnectViewTask=null)}}));this._reconnectViewTask=e}async _reconnectView(e){const{view:t}=this,n=null!=t&&t.ready&&this.supported,i=this.analysis;if(this._startUserOperation=v(this._startUserOperation),this._disconnectFromView(t),n&&null!=t&&null!=i){if(this.isAnalysisOwner){if(null!=i.parent)return void this.logError("expected owned analysis to have null parent when connecting to view");this._parentChangeFromReconnect=!0,t.analyses.add(i)}this.analysisView=await t.whenAnalysisView(i),(0,a.G4)(e)?this._startUserOperation=v(this._startUserOperation):(this.analysisView.visible=this.visible,this.onConnectToAnalysisView(this.analysisView),this.createTool())}}_disconnectFromView(e){this.removeTool(),null!=e&&this.isAnalysisOwner&&(this._parentChangeFromReconnect=!0,e.analyses.remove(this.analysis),this.analysis.clear()),this.analysisView=null,this.onDisconnectFromAnalysisView()}_setExternalAnalysis(e){null==this.analysisView||this.isAnalysisOwner||(this.analysisView.visible=!0),this.analysisView=null,this._set("isAnalysisOwner",!1),this._set("analysis",e),this._parentChangeFromReconnect=!1}get testInfo(){return{analysisView:this.analysisView}}};function v(e){return null!=e&&e.state>=i.RUNNING?(e.abort(),null):e}(0,r._)([(0,c.MZ)({nonNullable:!0})],p.prototype,"analysis",null),(0,r._)([(0,c.MZ)()],p.prototype,"analysisView",void 0),(0,r._)([(0,c.MZ)()],p.prototype,"ready",null),(0,r._)([(0,c.MZ)()],p.prototype,"connectingToView",null),(0,r._)([(0,c.MZ)({readOnly:!0})],p.prototype,"isAnalysisOwner",null),(0,r._)([(0,c.MZ)({type:Boolean,value:!0})],p.prototype,"visible",null),(0,r._)([(0,c.MZ)()],p.prototype,"_reconnectViewTask",void 0),p=(0,r._)([(0,d.$)("esri.widgets.support.InteractiveAnalysisViewModel")],p)},69124:(e,t,n)=>{n.d(t,{j:()=>u});var i=n(35143),s=n(91967),r=n(76460),o=n(68134),l=n(46053),a=(n(81806),n(47249),n(85842));let u=class extends s.A{constructor(e){super(e),this.tool=null,this._loggedUnsupportedErrorOnce=!1,this.logger=r.A.getLogger(this),null!=(null===e||void 0===e?void 0:e.visible)&&(this.visible=e.visible)}initialize(){this.addHandles((0,o.watch)((()=>({ready:null!=this.view&&this.view.ready,supported:this.supported})),(e=>{let{ready:t,supported:n}=e;!t||n||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)}),o.syncAndInitial))}destroy(){this.removeTool(),this.view=null}get active(){return null!=this.tool&&this.tool.active}get disabled(){return null==this.view||!this.view.ready||!this.supported}get supported(){return null==this.view||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this.removeHandles(t),null!=e&&this.addHandles(e.tools.on("after-remove",(e=>{e.item===this.tool&&this._set("tool",null)})),t)}set visible(e){this._set("visible",e),null!=this.tool&&(this.tool.visible=e)}createTool(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interactive:!1};if(this.removeTool(),null==this.view||!this.view.ready||!this.supported)return;const t=this.constructTool();t.created?(this._set("tool",t),this.view.tools.add(t)):e.interactive?(this._set("tool",t),this.view.addAndActivateTool(t),(0,o.when)((()=>t.created),(()=>{t.active&&null!=this.view&&(this.view.activeTool=null)}),{initial:!0,once:!0})):t.destroy()}removeTool(){var e;const t=this.tool;if(null==t)return;const n=null===(e=this.view)||void 0===e?void 0:e.tools;null!=n?n.remove(t):t.destroy(),this._set("tool",null)}logError(){this.logger.error(...arguments)}};(0,i._)([(0,l.MZ)({constructOnly:!0})],u.prototype,"tool",void 0),(0,i._)([(0,l.MZ)()],u.prototype,"active",null),(0,i._)([(0,l.MZ)()],u.prototype,"disabled",null),(0,i._)([(0,l.MZ)()],u.prototype,"supported",null),(0,i._)([(0,l.MZ)({value:null})],u.prototype,"view",null),(0,i._)([(0,l.MZ)({type:Boolean,value:!0})],u.prototype,"visible",null),u=(0,i._)([(0,a.$)("esri.widgets.support.InteractiveToolViewModel")],u)},33353:(e,t,n)=>{n.d(t,{I:()=>h});var i=n(35143),s=n(46053),r=(n(81806),n(76460),n(47249),n(85842)),o=n(25329),l=n(77666),a=n(47370),u=(n(76099),n(54761));const c="esri-measurement-widget-content",d={base:c,actions:"".concat(c,"__actions"),error:"".concat(c,"__error"),hint:"".concat(c,"__hint"),hintText:"".concat(c,"__hint-text"),panelError:"".concat(c,"__panel--error"),settings:"".concat(c,"__settings"),measurement:"".concat(c,"__measurement"),measurementItem:"".concat(c,"__measurement-item"),measurementItemDisabled:"".concat(c,"__measurement-item--disabled"),measurementItemTitle:"".concat(c,"__measurement-item__title"),measurementItemValue:"".concat(c,"__measurement-item__value")};let h=class extends o.A{constructor(e,t){super(e,t)}loadDependencies(){return(0,l.W)({button:()=>Promise.all([n.e(39879),n.e(62785),n.e(95203),n.e(75151),n.e(11309)]).then(n.bind(n,11309))})}render(){return(0,u.K)("div",{class:d.base},this._renderContent())}_renderContent(){const{supported:e,active:t,state:n}=this;switch(n){case"disabled":case"ready":return e?t?this._renderHint():this._renderActions():this._renderUnsupportedMessage();case"measuring":case"measured":return[this._renderSettings(),this._renderMeasurement(),this._renderActions()]}}_renderUnsupportedMessage(){return(0,u.K)("section",{class:d.error,key:"unsupported"},(0,u.K)("p",null,this.messages.unsupported))}_renderHint(){const{messages:e}=this;return(0,u.K)("section",{class:d.hint,key:"hint"},(0,u.K)("p",{class:d.hintText},e.hint))}_renderSettings(){return(0,u.K)("div",{class:d.settings,key:"settings"},(0,u.K)(a.t,{options:this.unitOptions,selectLabel:this.messages.unit,value:this.unit,onChange:this.onUnitChange}))}_renderMeasurement(){return(0,u.K)("section",{class:d.measurement,key:"measurement"},this.measurementItems.map((e=>this._renderMeasurementItem(e))))}_renderMeasurementItem(e){let{key:t,title:n,value:i}=e;return(0,u.K)("div",{class:this.classes(d.measurementItem,null==i&&d.measurementItemDisabled),key:t},(0,u.K)("span",{class:d.measurementItemTitle},n),(0,u.K)("span",{"aria-live":"polite",class:d.measurementItemValue},null!==i&&void 0!==i?i:this.messages.notApplicable))}_renderActions(){const{messages:e}=this;return(0,u.K)("div",{class:d.actions},(0,u.K)("calcite-button",{class:this.newMeasurementButtonClass,disabled:"disabled"===this.state,onclick:this.onNewMeasurementClick},e.newMeasurement))}};(0,i._)([(0,s.MZ)()],h.prototype,"active",void 0),(0,i._)([(0,s.MZ)()],h.prototype,"measurementItems",void 0),(0,i._)([(0,s.MZ)()],h.prototype,"messages",void 0),(0,i._)([(0,s.MZ)()],h.prototype,"newMeasurementButtonClass",void 0),(0,i._)([(0,s.MZ)()],h.prototype,"onNewMeasurementClick",void 0),(0,i._)([(0,s.MZ)()],h.prototype,"onUnitChange",void 0),(0,i._)([(0,s.MZ)()],h.prototype,"state",void 0),(0,i._)([(0,s.MZ)()],h.prototype,"supported",void 0),(0,i._)([(0,s.MZ)()],h.prototype,"unit",void 0),(0,i._)([(0,s.MZ)()],h.prototype,"unitOptions",void 0),h=(0,i._)([(0,r.$)("esri.widgets.support.MeasurementWidgetContent")],h)},47370:(e,t,n)=>{n.d(t,{t:()=>p});var i=n(35143),s=n(31633),r=n(46053),o=(n(81806),n(76460),n(47249),n(85842)),l=n(25329),a=n(77666),u=(n(76099),n(63582)),c=n(54761);const d="esri-unit-select",h={base:d,label:"".concat(d,"__label"),select:"".concat(d,"__select")};let p=class extends l.A{constructor(e,t){super(e,t),this._onSelectChange=e=>{this.onChange(e.target.value)}}loadDependencies(){return(0,a.W)({label:()=>Promise.all([n.e(39879),n.e(65423)]).then(n.bind(n,65423)),option:()=>n.e(70383).then(n.bind(n,92764)),select:()=>Promise.all([n.e(39879),n.e(95203),n.e(81381)]).then(n.bind(n,81381))})}render(){const{messages:e,options:t,selectLabel:n,value:i,_onSelectChange:r}=this;return(0,c.K)("div",{class:h.base,key:"units"},(0,c.K)("calcite-label",{class:h.label},n,(0,c.K)("calcite-select",{class:h.select,label:n,onCalciteSelectChange:r},t.map((t=>{var n;return(0,c.K)("calcite-option",{key:t,selected:t===i,value:t},(0,s.GT)(t)?e.systems[t]:null===(n=e.units[t])||void 0===n?void 0:n.pluralCapitalized)})))))}};(0,i._)([(0,r.MZ)()],p.prototype,"options",void 0),(0,i._)([(0,r.MZ)()],p.prototype,"onChange",void 0),(0,i._)([(0,r.MZ)()],p.prototype,"selectLabel",void 0),(0,i._)([(0,r.MZ)()],p.prototype,"value",void 0),(0,i._)([(0,r.MZ)(),(0,u.G)("esri/core/t9n/Units")],p.prototype,"messages",void 0),p=(0,i._)([(0,o.$)("esri.widgets.support.UnitSelect")],p)}}]);
//# sourceMappingURL=4288.4c69f2ac.chunk.js.map