"use strict";(self.webpackChunkhelloworld=self.webpackChunkhelloworld||[]).push([[40508],{45136:(e,t,r)=>{r.d(t,{a:()=>o,b:()=>a,c:()=>s,d:()=>i,e:()=>c,f:()=>l,n:()=>p,s:()=>u,t:()=>d});r(81806);var n=r(80066);function i(e,t,r){o(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function o(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!==Math.ceil(t.length/i))return e;const o=e.length/n,s=r[0],a=r[1],l=r[2],u=r[4],d=r[5],c=r[6],p=r[8],h=r[9],f=r[10],y=r[12],v=r[13],g=r[14];let m=0,b=0;for(let I=0;I<o;I++){const r=t[m],o=t[m+1],I=t[m+2];e[b]=s*r+u*o+p*I+y,e[b+1]=a*r+d*o+h*I+v,e[b+2]=l*r+c*o+f*I+g,m+=i,b+=n}return e}function s(e,t,r){a(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function a(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i;if(e.length/i!==Math.ceil(t.length/o))return void(0,n.j)().error("source and destination buffers need to have the same number of elements");const s=e.length/i,a=r[0],l=r[1],u=r[2],d=r[3],c=r[4],p=r[5],h=r[6],f=r[7],y=r[8];let v=0,g=0;for(let n=0;n<s;n++){const r=t[v],n=t[v+1],s=t[v+2];e[g]=a*r+d*n+h*s,e[g+1]=l*r+c*n+f*s,e[g+2]=u*r+p*n+y*s,v+=o,g+=i}}function l(e,t,r){u(e.typedBuffer,t,r,e.typedBufferStride)}function u(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;const i=Math.min(e.length/n,t.count),o=t.typedBuffer,s=t.typedBufferStride;let a=0,l=0;for(let u=0;u<i;u++)e[l]=r*o[a],e[l+1]=r*o[a+1],e[l+2]=r*o[a+2],a+=s,l+=n}function d(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;const o=e.length/n;if(o!==Math.ceil(t.length/i))return e;let s=0,a=0;for(let l=0;l<o;l++)e[a]=t[s]+r[0],e[a+1]=t[s+1]+r[1],e[a+2]=t[s+2]+r[2],s+=i,a+=n;return e}function c(e,t){p(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function p(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;const i=Math.min(e.length/r,t.length/n);let o=0,s=0;for(let a=0;a<i;a++){const i=t[o],a=t[o+1],l=t[o+2],u=i*i+a*a+l*l;if(u>0){const t=1/Math.sqrt(u);e[s]=t*i,e[s+1]=t*a,e[s+2]=t*l}o+=n,s+=r}}Object.freeze(Object.defineProperty({__proto__:null,normalize:p,normalizeView:c,scale:u,scaleView:l,shiftRight:function(e,t,r){const n=Math.min(e.count,t.count),i=e.typedBuffer,o=e.typedBufferStride,s=t.typedBuffer,a=t.typedBufferStride;let l=0,u=0;for(let d=0;d<n;d++)i[u]=s[l]>>r,i[u+1]=s[l+1]>>r,i[u+2]=s[l+2]>>r,l+=a,u+=o},transformMat3:a,transformMat3View:s,transformMat4:o,transformMat4View:i,translate:d},Symbol.toStringTag,{value:"Module"}))},37546:(e,t,r)=>{r.d(t,{P:()=>h});var n=r(50076),i=r(53514),o=r(24387),s=r(90534),a=r(49723),l=r(19258),u=r(49140),d=r(46053),c=r(95474),p=r(79453);function h(e){var t;const r=null!==(t=null===e||void 0===e?void 0:e.origins)&&void 0!==t?t:[void 0];return(t,n)=>{const i=function(e,t,r){var n;if("resource"===(null===e||void 0===e?void 0:e.type))return function(e,t,r){const n=(0,l.z4)(t,r);return{type:String,read:(e,t,r)=>{const i=(0,p.r)(e,t,r);return n.type===String?i:"function"==typeof n.type?new n.type({url:i}):void 0},write:{writer(t,i,a,l){if(null===l||void 0===l||!l.resources)return"string"==typeof t?void(i[a]=(0,p.t)(t,l)):void(i[a]=t.write({},l));const d=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),h=(0,p.t)(d,{...l,verifyItemRelativeUrls:null!==l&&void 0!==l&&l.verifyItemRelativeUrls?{writtenUrls:l.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},p.M.NO),g=n.type!==String&&(!(0,o.H)(this)||(null===l||void 0===l?void 0:l.origin)&&this.originIdOf(r)>(0,u.aB)(l.origin)),m={object:this,propertyName:r,value:t,targetUrl:h,dest:i,targetPropertyName:a,context:l,params:e};null!==l&&void 0!==l&&l.portalItem&&h&&!(0,s.oP)(h)?g&&null!==e&&void 0!==e&&e.contentAddressed?f(m):g?function(e){var t;const{context:r,targetUrl:n,params:i,value:o,dest:a,targetPropertyName:l}=e;if(!r.portalItem)return;const u=r.portalItem.resourceFromPath(n),d=v(o,n,r),p=(0,c.n)(d),h=(0,s.Zo)(u.path),g=null!==(t=null===i||void 0===i?void 0:i.compress)&&void 0!==t&&t;p===h?(r.resources&&y({...e,resource:u,content:d,compress:g,updates:r.resources.toUpdate}),a[l]=n):f(e)}(m):function(e){let{context:t,targetUrl:r,dest:n,targetPropertyName:i}=e;t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),n[i]=r)}(m):null!==l&&void 0!==l&&l.portalItem&&(null==h||null!=(0,p.i)(h)||(0,s.w8)(h)||g)?f(m):i[a]=h}}}}(e,t,r);switch(null!==(n=null===e||void 0===e?void 0:e.type)&&void 0!==n?n:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=p.b;return{read:e,write:t}}}}(e,t,n);for(const e of r){const r=(0,d.rM)(t,e,n);for(const e in i)r[e]=i[e]}}}function f(e){var t,r,o,l;const{targetUrl:u,params:d,value:h,context:f,dest:g,targetPropertyName:m}=e;if(!f.portalItem)return;const b=(0,p.p)(u),I=v(h,u,f);if(null!==d&&void 0!==d&&d.contentAddressed&&"json"!==I.type)return void(null===(t=f.messages)||void 0===t||t.push(new n.A("persistable:contentAddressingUnsupported",'Property "'.concat(m,'" is trying to serializing a resource with content of type ').concat(I.type," with content addressing. Content addressing is only supported for json resources."),{content:I})));const A=null!==d&&void 0!==d&&d.contentAddressed&&"json"===I.type?(0,i.d)(I.jsonString):null!==(r=null===b||void 0===b?void 0:b.filename)&&void 0!==r?r:(0,a.lk)(),w=(0,s.fj)(null!==(o=null===d||void 0===d?void 0:d.prefix)&&void 0!==o?o:null===b||void 0===b?void 0:b.prefix,A),_="".concat(w,".").concat((0,c.n)(I));if(null!==d&&void 0!==d&&d.contentAddressed&&f.resources&&"json"===I.type){var M;const e=null!==(M=f.resources.toKeep.find((e=>{let{resource:t}=e;return t.path===_})))&&void 0!==M?M:f.resources.toAdd.find((e=>{let{resource:t}=e;return t.path===_}));if(e)return void(g[m]=e.resource.itemRelativeUrl)}const S=f.portalItem.resourceFromPath(_);(0,s.w8)(u)&&f.resources&&f.resources.pendingOperations.push((0,s.tk)(u).then((e=>{S.path="".concat(w,".").concat((0,c.n)({type:"blob",blob:e})),g[m]=S.itemRelativeUrl})).catch((()=>{})));const E=null!==(l=null===d||void 0===d?void 0:d.compress)&&void 0!==l&&l;f.resources&&y({...e,resource:S,content:I,compress:E,updates:f.resources.toAdd}),g[m]=S.itemRelativeUrl}function y(e){let{object:t,propertyName:r,updates:n,resource:i,content:o,compress:s}=e;n.push({resource:i,content:o,compress:s,finish:e=>{!function(e,t,r){"string"==typeof e[t]?e[t]=r.url:e[t].url=r.url}(t,r,e)}})}function v(e,t,r){return"string"==typeof e?{type:"url",url:t}:{type:"json",jsonString:JSON.stringify(e.toJSON(r))}}},64232:(e,t,r)=>{r.d(t,{W:()=>a,g:()=>s});var n=r(9392),i=r(9624),o=r(45308);function s(e,t,r,n){var s,a;if((0,i.canProjectWithoutEngine)(e.spatialReference,r)){var u;l[0]=e.x,l[1]=e.y;const i=e.z;return l[2]=null!==(u=null!==i&&void 0!==i?i:n)&&void 0!==u?u:0,(0,o.projectBuffer)(l,e.spatialReference,0,t,r,0,1)}const d=(0,i.tryProjectWithZConversion)(e,r);return!!d&&(t[0]=null===d||void 0===d?void 0:d.x,t[1]=null===d||void 0===d?void 0:d.y,t[2]=null!==(s=null!==(a=null===d||void 0===d?void 0:d.z)&&void 0!==a?a:n)&&void 0!==s?s:0,!0)}async function a(e,t,r,n,o){return await(0,i.initializeProjection)(e.spatialReference,r,null,o),s(e,t,r,n)}const l=(0,n.vt)()},14487:(e,t,r)=>{r.d(t,{F:()=>o});r(9624);var n=r(13312),i=r(64232);function o(e,t,r,n,o){return!(null==t||null==n||e.length<2)&&(s.x=e[0],s.y=e[1],s.z=e[2],s.spatialReference=t,(0,i.g)(s,r,n,o))}const s=(0,r(18117).T)(0,0,0,n.A.WGS84)},44815:(e,t,r)=>{r.d(t,{Ns:()=>l,jh:()=>i,l5:()=>s,s:()=>a,xm:()=>o});var n=r(78393);function i(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e<=n.y9?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function o(e){return((0,n.cy)(e)?e.length:e.byteLength/8)<=n.y9?Array.from(e):new Float64Array(e)}function s(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function a(e,t){for(let r=0;r<t.length;++r)e[r]=t[r];return e}function l(e){return Array.isArray(e)?new Float64Array(e):e}},38496:(e,t,r)=>{r.d(t,{Dg:()=>i,EH:()=>p,JH:()=>s,my:()=>o,tM:()=>d});var n=r(78393);function i(e){if((0,n.cy)(e)){if(e.length<n.y9)return e}else if(e.length<n.y9)return Array.from(e);let t=!0,r=!0;return e.some(((e,n)=>(t=t&&0===e,r=r&&e===n,!t&&!r))),t?p(e.length):r?d(e.length):(0,n.cy)(e)||e.BYTES_PER_ELEMENT!==Uint16Array.BYTES_PER_ELEMENT?function(e){let t=!0;for(const r of e){if(r>=65536)return(0,n.cy)(e)?new Uint32Array(e):e;r>=256&&(t=!1)}return t?new Uint8Array(e):new Uint16Array(e)}(e):e}function o(e){return e<=n.y9?new Array(e):e<=65536?new Uint16Array(e):new Uint32Array(e)}function s(e){return e<=n.y9?new Array(e):new Uint32Array(e)}let a=(()=>{const e=new Uint32Array(131072);for(let t=0;t<e.length;++t)e[t]=t;return e})();const l=[0],u=(()=>{const e=new Uint16Array(65536);for(let t=0;t<e.length;++t)e[t]=t;return e})();function d(e){if(1===e)return l;if(e<n.y9)return Array.from(new Uint16Array(u.buffer,0,e));if(e<u.length)return new Uint16Array(u.buffer,0,e);if(e>a.length){const t=Math.max(2*a.length,e);a=new Uint32Array(t);for(let e=0;e<a.length;e++)a[e]=e}return new Uint32Array(a.buffer,0,e)}let c=new Uint8Array(65536);function p(e){if(1===e)return l;if(e<n.y9)return new Array(e).fill(0);if(e>c.length){const t=Math.max(2*c.length,e);c=new Uint8Array(t)}return new Uint8Array(c.buffer,0,e)}},14894:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(35143),i=r(69098),o=r(42553),s=r(46053),a=(r(81806),r(76460),r(47249),r(6409)),l=r(85842);let u=class extends((0,i.O)(o.oY)){constructor(e){super(e),this.type="georeferenced",this.origin=null}};(0,n._)([(0,a.e)({georeferenced:"georeferenced"},{readOnly:!0})],u.prototype,"type",void 0),(0,n._)([(0,s.MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],u.prototype,"origin",void 0),u=(0,n._)([(0,l.$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],u);const d=u},5845:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(35143),i=r(69098),o=r(42553),s=r(46053),a=(r(81806),r(76460),r(47249),r(6409)),l=r(85842),u=r(9392);let d=class extends((0,i.O)(o.oY)){constructor(e){super(e),this.type="local",this.origin=(0,u.vt)()}};(0,n._)([(0,a.e)({local:"local"},{readOnly:!0})],d.prototype,"type",void 0),(0,n._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],d.prototype,"origin",void 0),d=(0,n._)([(0,l.$)("esri.geometry.support.MeshLocalVertexSpace")],d);const c=d},52896:(e,t,r)=>{r.d(t,{$I:()=>m,AU:()=>y,Cr:()=>p,g7:()=>g,i4:()=>c,ui:()=>h,up:()=>I,vt:()=>d,yo:()=>v});var n=r(15941),i=r(34761),o=r(60008),s=r(4336),a=r(20664),l=r(9392),u=r(55855);function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;return[e[0],e[1],e[2],e[3]]}function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d();return(0,a.c)(r,e),r[3]=t,r}function p(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,u.vt)();return(0,a.b)(r,e,t),(0,a.n)(r,r),r[3]=-(0,a.d)(e,t),r}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d();const r=(0,i.l)(A,e);return b(t,(0,n.KJ)((0,o.Xd)(t,r))),t}function f(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d();return(0,o.x8)(A,e,m(e)),(0,o.x8)(w,t,m(t)),(0,o.lw)(A,w,A),b(r,(0,n.KJ)((0,o.Xd)(r,A)))}function y(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d();return c(l.Cw,e,_),c(l.JP,t,M),c(l.Cb,r,S),f(_,M,_),f(_,S,n),n}function v(e){return e}function g(e){return e[3]}function m(e){return(0,n.kU)(e[3])}function b(e,t){return e[3]=t,e}const I=[0,0,1,0],A=(0,s.vt)(),w=(0,s.vt)(),_=(d(),d()),M=d(),S=d()},80066:(e,t,r)=>{r.d(t,{j:()=>i});var n=r(76460);const i=()=>n.A.getLogger("esri.views.3d.support.buffer.math")},44230:(e,t,r)=>{r.d(t,{C:()=>u,Cr:()=>c,H6:()=>y,_I:()=>h,dz:()=>v,fA:()=>d,kb:()=>p,ld:()=>g,sd:()=>f,vt:()=>l});var n=r(15941),i=r(97467),o=r(20664),s=r(9392),a=r(75762);function l(e){return e?{origin:(0,s.o8)(e.origin),vector:(0,s.o8)(e.vector)}:{origin:(0,s.vt)(),vector:(0,s.vt)()}}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l();return d(e.origin,e.vector,t)}function d(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,o.c)(r.origin,e),(0,o.c)(r.vector,t),r}function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,o.c)(r.origin,e),(0,o.f)(r.vector,t,e),r}function p(e,t){const r=(0,o.f)(a.rq.get(),t,e.origin),i=(0,o.k)(e.vector,r),s=(0,o.k)(e.vector,e.vector),l=(0,n.qE)(i/s,0,1),u=(0,o.f)(a.rq.get(),(0,o.h)(a.rq.get(),e.vector,l),r);return(0,o.k)(u,u)}function h(e,t,r){return y(e,t,0,1,r)}function f(e,t,r){return(0,o.g)(r,e.origin,(0,o.h)(r,e.vector,t))}function y(e,t,r,i,s){const{vector:l,origin:u}=e,d=(0,o.f)(a.rq.get(),t,u),c=(0,o.k)(l,d)/(0,o.p)(l);return(0,o.h)(s,l,(0,n.qE)(c,r,i)),(0,o.g)(s,s,e.origin)}function v(e,t){if(m(e,function(e,t){const r=I.get();return r.origin=e,r.vector=t,r}(t.origin,t.direction),!1,b)){const{tA:t,pB:r,distance2:n}=b;if(t>=0&&t<=1)return n;if(t<0)return(0,o.a)(e.origin,r);if(t>1)return(0,o.a)((0,o.g)(a.rq.get(),e.origin,e.vector),r)}return null}function g(e,t,r){return!!m(e,t,!0,b)&&((0,o.c)(r,b.pA),!0)}function m(e,t,r,i){const s=1e-6,l=e.origin,u=(0,o.g)(a.rq.get(),l,e.vector),d=t.origin,c=(0,o.g)(a.rq.get(),d,t.vector),p=a.rq.get(),h=a.rq.get();if(p[0]=l[0]-d[0],p[1]=l[1]-d[1],p[2]=l[2]-d[2],h[0]=c[0]-d[0],h[1]=c[1]-d[1],h[2]=c[2]-d[2],Math.abs(h[0])<s&&Math.abs(h[1])<s&&Math.abs(h[2])<s)return!1;const f=a.rq.get();if(f[0]=u[0]-l[0],f[1]=u[1]-l[1],f[2]=u[2]-l[2],Math.abs(f[0])<s&&Math.abs(f[1])<s&&Math.abs(f[2])<s)return!1;const y=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],v=h[0]*f[0]+h[1]*f[1]+h[2]*f[2],g=p[0]*f[0]+p[1]*f[1]+p[2]*f[2],m=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],b=(f[0]*f[0]+f[1]*f[1]+f[2]*f[2])*m-v*v;if(Math.abs(b)<s)return!1;let I=(y*v-g*m)/b,A=(y+v*I)/m;r&&(I=(0,n.qE)(I,0,1),A=(0,n.qE)(A,0,1));const w=a.rq.get(),_=a.rq.get();return w[0]=l[0]+I*f[0],w[1]=l[1]+I*f[1],w[2]=l[2]+I*f[2],_[0]=d[0]+A*h[0],_[1]=d[1]+A*h[1],_[2]=d[2]+A*h[2],i.tA=I,i.tB=A,i.pA=w,i.pB=_,i.distance2=(0,o.a)(w,_),!0}const b={tA:0,tB:0,pA:(0,s.vt)(),pB:(0,s.vt)(),distance2:0},I=new i.I((()=>l()))},99773:(e,t,r)=>{r.d(t,{CK:()=>p,Hq:()=>c,MW:()=>h,TE:()=>f,Uj:()=>y,by:()=>v,kp:()=>d});var n=r(63241),i=r(76460),o=r(13904),s=r(14894),a=r(5845),l=r(45136);function u(){return i.A.getLogger("esri.geometry.Mesh")}function d(e){var t;const{vertexSpace:r}=e;if(null!=r.origin)return e.clone();const{anchor:n}=e,i=n.clone(),o=new s.A({origin:[i.x,i.y,i.z]}),a=e.cloneWithVertexSpace(o),{position:u}=a.vertexAttributes;return a.vertexAttributes.position=(0,l.t)(new Float64Array(u.length),u,[-i.x,-i.y,-(null!==(t=i.z)&&void 0!==t?t:0)]),a.vertexAttributesChanged(),a}function c(e){return null!=e.origin}function p(e){return c(e.vertexSpace)}function h(e,t){if(!c(e))return null;const[r,n,i]=e.origin;return new o.A({x:r,y:n,z:i,spatialReference:t})}function f(e,t){const{x:r,y:i,z:o,spatialReference:l}=e,d=[r,i,null!==o&&void 0!==o?o:0];if(void 0!==(null===t||void 0===t?void 0:t.geographic)){if((0,n.io)(u(),"option: geographic",{replacement:"use vertexSpace option instead",version:"4.29",warnOnce:!0}),null===t||void 0===t||!t.vertexSpace)return null!==t&&void 0!==t&&t.geographic?new a.A({origin:d}):new s.A({origin:d});u().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")}if(null===t||void 0===t||!t.vertexSpace)return l.isGeographic||l.isWebMercator?new a.A({origin:d}):new s.A({origin:d});switch(t.vertexSpace){case"local":return new a.A({origin:d});case"georeferenced":return new s.A({origin:d});case"georeferenced-absolute":return new s.A}}function y(e){return e.isGeographic||e.isWebMercator?"local":"georeferenced"}function v(e,t){return"local"===e?new a.A({origin:t}):new s.A({origin:t})}},45097:(e,t,r)=>{r.d(t,{Fm:()=>l,Q7:()=>u});var n=r(97467),i=r(20664),o=r(9392),s=r(44230);r(75762);function a(e){return e?{p0:(0,o.o8)(e.p0),p1:(0,o.o8)(e.p1),p2:(0,o.o8)(e.p2)}:{p0:(0,o.vt)(),p1:(0,o.vt)(),p2:(0,o.vt)()}}function l(e,t,r){const n=t[0]-e[0],i=t[1]-e[1],o=r[0]-e[0],s=r[1]-e[1];return.5*Math.abs(n*s-i*o)}function u(e,t,r){return(0,i.f)(d,t,e),(0,i.f)(c,r,e),.5*(0,i.l)((0,i.b)(d,d,c))}new n.I(s.vt),new n.I((()=>a()));const d=(0,o.vt)(),c=(0,o.vt)()},48723:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Se});var n=r(35143),i=r(39356),o=r(16868),s=(r(63844),r(14873),r(47662),r(72690),r(86946),r(71832),r(5766),r(35039),r(86616),r(31382)),a=r(3825),l=r(69098),u=r(19276),d=r(50076),c=r(76460),p=r(77717),h=r(50346),f=r(68134),y=r(90534),v=r(46053),g=(r(81806),r(47249),r(39314)),m=r(28379),b=r(85842),I=r(49140),A=r(18582),w=r(13904),_=r(25515),M=r(45652),S=r(12406),E=r(19502),x=r(31362),O=r(61979),T=r(11270),F=r(94729),L=r(5682),P=r(90260),R=r(11155),N=r(13096),U=r(39323),j=r(16981),C=r(95363),D=r(91447),Z=r(80524),q=r(89672),B=r(76350),k=r(1900),V=r(53430),z=r(2395),G=r(19463),Q=r(71401),H=r(27937),W=r(5618),$=r(62487),K=r(42553);let Y=class extends K.oY{constructor(){super(...arguments),this.name=null,this.field=null,this.currentRangeExtent=null,this.fullRangeExtent=null,this.type="rangeInfo"}};(0,n._)([(0,v.MZ)({type:String,json:{read:!0,write:!0}})],Y.prototype,"name",void 0),(0,n._)([(0,v.MZ)({type:String,json:{read:!0,write:!0}})],Y.prototype,"field",void 0),(0,n._)([(0,v.MZ)({type:[Number],json:{read:!0,write:!0}})],Y.prototype,"currentRangeExtent",void 0),(0,n._)([(0,v.MZ)({type:[Number],json:{read:!0,write:!0}})],Y.prototype,"fullRangeExtent",void 0),(0,n._)([(0,v.MZ)({type:["rangeInfo"],readOnly:!0,json:{read:!1,write:!0}})],Y.prototype,"type",void 0),Y=(0,n._)([(0,b.$)("esri.layers.support.RangeInfo")],Y);var X,J=r(53084),ee=r(37546),te=r(62754),re=r(65215),ne=r(9624);let ie=X=class extends((0,K.Te)(u.A.ofType(re.A))){constructor(e){super(e)}clone(){return new X(this.items.map((e=>e.clone())))}write(e,t){return this.toJSON(t)}toJSON(e){var t;const r=null===e||void 0===e||null===(t=e.layer)||void 0===t?void 0:t.spatialReference;return r?this.toArray().map((t=>{if(!r.equals(t.spatialReference)){if(!(0,ne.canProjectWithoutEngine)(t.spatialReference,r))return null!==e&&void 0!==e&&e.messages&&e.messages.push(new te.A("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),null;const n=new re.A;(0,ne.projectPolygon)(t,n,r),t=n}const n=t.toJSON(e);return delete n.spatialReference,n})).filter((e=>null!=e)):(null!==e&&void 0!==e&&e.messages&&e.messages.push(new te.A("scenefilter:unsupported","Writing Scene filters without context layer is not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),this.toArray().map((t=>t.toJSON(e))))}static fromJSON(e,t){const r=new X;return e.forEach((e=>r.add(re.A.fromJSON(e,t)))),r}};ie=X=(0,n._)([(0,b.$)("esri.layers.support.PolygonCollection")],ie);const oe=ie;var se,ae=r(79453);let le=se=class extends K.oY{constructor(e){super(e),this.spatialRelationship="disjoint",this.geometries=new oe,this._geometriesSource=null}initialize(){this.addHandles((0,f.on)((()=>this.geometries),"after-changes",(()=>this.geometries=this.geometries),f.sync))}readGeometries(e,t,r){Array.isArray(e)?this.geometries=oe.fromJSON(e,r):this._geometriesSource={url:(0,ae.f)(e,r),context:r}}async loadGeometries(e,t){if(null==this._geometriesSource)return;const{url:r,context:n}=this._geometriesSource,i=await(0,a.A)(r,{responseType:"json",signal:null===t||void 0===t?void 0:t.signal}),o=e.toJSON(),s=i.data.map((e=>({...e,spatialReference:o})));this.geometries=oe.fromJSON(s,n),this._geometriesSource=null}clone(){const e=new se({geometries:(0,J.o8)(this.geometries),spatialRelationship:this.spatialRelationship});return e._geometriesSource=this._geometriesSource,e}};(0,n._)([(0,v.MZ)({type:["disjoint","contains"],nonNullable:!0,json:{write:!0}})],le.prototype,"spatialRelationship",void 0),(0,n._)([(0,v.MZ)({type:oe,nonNullable:!0,json:{write:!0}}),(0,ee.P)({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],le.prototype,"geometries",void 0),(0,n._)([(0,m.w)(["web-scene","portal-item"],"geometries")],le.prototype,"readGeometries",null),le=se=(0,n._)([(0,b.$)("esri.layers.support.SceneFilter")],le);const ue=le;var de=r(81589),ce=r(68295),pe=r(12482),he=r(31111),fe=r(30973);async function ye(e){const t=[];for(const r of e)r.name.toLowerCase().endsWith(".zip")?t.push(ve(r)):t.push(Promise.resolve(r));return(await Promise.all(t)).flat()}async function ve(e){const{BlobReader:t,ZipReader:n,BlobWriter:i}=await r.e(85795).then(r.bind(r,85795)),o=[],s=new n(new t(e));return(await s.getEntries()).forEach((e=>{var t;if(e.directory||/^__MACOS/i.test(e.filename))return;const r=new i,n=null===(t=e.getData)||void 0===t?void 0:t.call(e,r).then((t=>new File([t],e.filename)));n&&o.push(n)})),Promise.all(o)}var ge=r(74279),me=r(2257),be=r(2183);const Ie=new Set(["3DObject","Point"]),Ae=(0,B.p)();let we=class extends((0,R.M)((0,O.w6)((0,P.w6)((0,E.b)((0,T.q)((0,F.A)((0,L.j)((0,p.P)((0,x.d)((0,S.p)((0,l.O)(_.A)))))))))))){constructor(){super(...arguments),this.featureReduction=null,this.rangeInfos=null,this.operationalLayerType="ArcGISSceneServiceLayer",this.type="scene",this.fields=null,this.floorInfo=null,this.outFields=null,this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.excludeObjectIds=new u.A,this.definitionExpression=null,this.filter=null,this.path=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.priority=null,this.semantic=null,this.cachedDrawingInfo={color:!1},this.popupEnabled=!0,this.popupTemplate=null,this.objectIdField=null,this.globalIdField=null,this._fieldUsageInfo={},this.screenSizePerspectiveEnabled=!0,this.serviceItemId=void 0}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}destroy(){this._set("renderer",null)}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){var r,n,i;const o=null===(r=this.getFeatureType(null===t||void 0===t?void 0:t.feature))||void 0===r||null===(r=r.domains)||void 0===r?void 0:r[e];return o&&"inherited"!==o.type?o:null!==(n=null===(i=this.getField(e))||void 0===i?void 0:i.domain)&&void 0!==n?n:null}getFeatureType(e){return e&&this.associatedLayer?this.associatedLayer.getFeatureType(e):null}get types(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.types)&&void 0!==e?e:[]}get typeIdField(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.typeIdField)&&void 0!==e?e:null}get templates(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.templates)&&void 0!==e?e:null}get formTemplate(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.formTemplate)&&void 0!==e?e:null}get fieldsIndex(){return new k.A(this.fields)}readNodePages(e,t,r){return"Point"===t.layerType&&(e=t.pointNodePages),null==e||"object"!=typeof e?null:z.W4.fromJSON(e,r)}set elevationInfo(e){this._set("elevationInfo",e),this.loaded&&this._validateElevationInfo()}get effectiveCapabilities(){var e;return this._capabilitiesFromAssociatedFeatureLayer(null===(e=this.associatedLayer)||void 0===e?void 0:e.effectiveCapabilities)}get effectiveEditingEnabled(){return null!=this.associatedLayer&&(0,D.C$)(this.associatedLayer)}get geometryType(){return Me[this.profile]||"mesh"}set renderer(e){(0,V.yp)(e,this.fieldsIndex),this._set("renderer",e)}readCachedDrawingInfo(e){return null!=e&&"object"==typeof e||(e={}),null==e.color&&(e.color=!1),e}get capabilities(){var e;return this._capabilitiesFromAssociatedFeatureLayer(null===(e=this.associatedLayer)||void 0===e?void 0:e.capabilities)}_capabilitiesFromAssociatedFeatureLayer(e){var t;e=null!=e?e:j.P;const{query:r,queryRelated:n,editing:{supportsGlobalId:i,supportsRollbackOnFailure:o,supportsUploadWithItemId:s,supportsGeometryUpdate:a,supportsReturnServiceEditsInSourceSpatialReference:l},data:{supportsZ:u,supportsM:d,isVersioned:c,supportsAttachment:p},operations:{supportsEditing:h,supportsAdd:f,supportsUpdate:y,supportsDelete:v,supportsQuery:g,supportsQueryAttachments:m,supportsAsyncConvert3D:b}}=e,I=e.operations.supportsChangeTracking,A=!(null===(t=this.associatedLayer)||void 0===t||!t.infoFor3D)&&(0,he.Vo)();return{query:r,queryRelated:n,editing:{supportsGlobalId:i,supportsReturnServiceEditsInSourceSpatialReference:l,supportsRollbackOnFailure:o,supportsGeometryUpdate:A&&a,supportsUploadWithItemId:s},data:{supportsAttachment:p,supportsZ:u,supportsM:d,isVersioned:c},operations:{supportsQuery:g,supportsQueryAttachments:m,supportsEditing:h&&I,supportsAdd:A&&f&&I,supportsDelete:A&&v&&I,supportsUpdate:y&&I,supportsAsyncConvert3D:b}}}get editingEnabled(){var e,t;return this._isOverridden("editingEnabled")?this._get("editingEnabled"):null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.editingEnabled)&&void 0!==e&&e}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}get infoFor3D(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.infoFor3D)&&void 0!==e?e:null}get relationships(){var e;return null===(e=this.associatedLayer)||void 0===e?void 0:e.relationships}get defaultPopupTemplate(){return this.associatedLayer||this.attributeStorageInfo?this.createPopupTemplate():null}readObjectIdField(e,t){return!e&&t.fields&&t.fields.some((t=>("esriFieldTypeOID"===t.type&&(e=t.name),!!e))),e||void 0}readGlobalIdField(e,t){return!e&&t.fields&&t.fields.some((t=>("esriFieldTypeGlobalID"===t.type&&(e=t.name),!!e))),e||void 0}get displayField(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.displayField)&&void 0!==e?e:null}readProfile(e,t){const r=t.store.profile;return null!=r&&_e[r]?_e[r]:(c.A.getLogger(this).error("Unknown or missing profile",{profile:r,layer:this}),"mesh-pyramids")}load(e){return this.addResolvingPromise(this._load(e)),Promise.resolve(this)}async _load(e){const t=null!=e?e.signal:null;await this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(h.QP),await this._fetchService(t),await Promise.all([this._fetchIndexAndUpdateExtent(this.nodePages,t),this._setAssociatedFeatureLayer(t),this._loadFilterGeometries()]),this._validateElevationInfo(),this._applyAssociatedLayerOverrides(),this._populateFieldUsageInfo(),await(0,de.L)(this,{origin:"service"},t),(0,V.yp)(this.renderer,this.fieldsIndex),await this.finishLoadEditablePortalLayer(e)}async beforeSave(){null!=this.filter&&(this.filter=this.filter.clone(),await this.load())}async _loadFilterGeometries(){if(this.filter)try{await this.filter.loadGeometries(this.spatialReference)}catch(e){c.A.getLogger(this).error("#_loadFilterGeometries()",this,"Failed to load filter geometries. Geometry filter will not be applied for this layer.",{error:e}),this.filter=null}}createQuery(){const e=new ce.A;return"mesh"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||"1=1",e.sqlFormat="standard",e.outFields=["*"],e}queryExtent(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryExtent(e||this.createQuery(),t)))}queryFeatureCount(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatureCount(e||this.createQuery(),t)))}queryFeatures(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatures(e||this.createQuery(),t))).then((e=>{if(null!==e&&void 0!==e&&e.features)for(const t of e.features)t.layer=this,t.sourceLayer=this;return e}))}async queryRelatedFeatures(e,t){if(await this.load(),!this.associatedLayer)throw new d.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});return this.associatedLayer.queryRelatedFeatures(e,t)}async queryRelatedFeaturesCount(e,t){if(await this.load(),!this.associatedLayer)throw new d.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});return this.associatedLayer.queryRelatedFeaturesCount(e,t)}async queryCachedAttributes(e,t){var r;const n=(0,V.hL)(this.fieldsIndex,await(0,me.TO)(this,(0,me.D8)(this)));return(0,ge.s1)(this.parsedUrl.path,null!==(r=this.attributeStorageInfo)&&void 0!==r?r:[],e,t,n,this.apiKey,this.customParameters)}async queryCachedFeature(e,t){const r=await this.queryCachedAttributes(e,[t]);if(!r||0===r.length)throw new d.A("scenelayer:feature-not-in-cached-data","Feature not found in cached data");const n=new i.A;return n.attributes=r[0],n.layer=this,n.sourceLayer=this,n}queryObjectIds(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryObjectIds(e||this.createQuery(),t)))}queryAttachments(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryAttachments(e,t)))}getFieldUsageInfo(e){const t={supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1};return this.loaded?this._fieldUsageInfo[e]||t:(c.A.getLogger(this).error("#getFieldUsageInfo()","Unavailable until layer is loaded"),t)}createPopupTemplate(e){return(0,fe.tn)(this,e)}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return null!==e&&void 0!==e&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),!this.associatedLayer)throw new d.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new d.A("scenelayer:query-not-available","SceneLayer associated feature layer could not be loaded",{layer:this,error:e})}return this.associatedLayer}hasCachedStatistics(e){return null!=this.statisticsInfo&&this.statisticsInfo.some((t=>t.name===e))}async queryCachedStatistics(e,t){if(await this.load(t),!this.statisticsInfo)throw new d.A("scenelayer:no-cached-statistics","Cached statistics are not available for this layer");const r=this.fieldsIndex.get(e);if(!r)throw new d.A("scenelayer:field-unexisting","Field '".concat(e,"' does not exist on the layer"));for(const n of this.statisticsInfo)if(n.name===r.name){const e=(0,y.fj)(this.parsedUrl.path,n.href);return(0,a.A)(e,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t?t.signal:null}).then((e=>e.data))}throw new d.A("scenelayer:no-cached-statistics","Cached statistics for this attribute are not available")}async saveAs(e,t){return this._debouncedSaveOperations(P.Xh.SAVE_AS,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"scene"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"scene"};return this._debouncedSaveOperations(P.Xh.SAVE,e)}async applyEdits(e,t){var n,i;const{applyEdits:o}=await r.e(32229).then(r.bind(r,54610));let s=t;await this.load();const a=this.associatedLayer;if(!a)throw new d.A("".concat(this.type,"-layer:not-editable"),"Service is not editable");await a.load();const{globalIdField:l}=a,u=!!a.infoFor3D,c=null===(n=null===(i=s)||void 0===i?void 0:i.globalIdUsed)||void 0===n||n;if(u&&null==l)throw new d.A("".concat(this.type,"-layer:not-editable"),"Valid globalIdField expected on editable SceneLayer");if(u&&!c)throw new d.A("".concat(this.type,"-layer:globalid-required"),"globalIdUsed must not be false for SceneLayer editing as globalIds are required.");return(0,N.Wo)(a.url)&&u&&null!=e.deleteFeatures&&null!=l&&(s={...s,globalIdToObjectId:await(0,D.GA)(a,e.deleteFeatures,l)}),o(this,a.source,e,s)}async uploadAssets(e,t){if(await this.load(),null==this.associatedLayer)throw new d.A("".concat(this.type,"-layer:not-editable"),"Service is not editable");return await this.associatedLayer.load(),this.associatedLayer.uploadAssets(e,t)}on(e,t){return super.on(e,t)}async convertMesh(e,t){var r;const n=e=>{throw c.A.getLogger(this).error(".convertMesh()",e.message),e};await this.load(),this.infoFor3D||n(new d.A("invalid:layer","SceneLayer has no capability for mesh conversion"));const i=await this.extractAndFilterFiles(e),o=i.reduce(((e,t)=>(0,G.oF)(this.infoFor3D,t)?e+1:e),0);0===o&&n(new M.VP),o>1&&n(new M.XQ);const s=this.spatialReference,a=null!==(r=null===t||void 0===t?void 0:t.location)&&void 0!==r?r:new w.A({x:0,y:0,z:0,spatialReference:s}),l=a.spatialReference.isGeographic?"local":"georeferenced",u=A.A.createWithExternalSource(a,i,{vertexSpace:l}),[p]=await this.uploadAssets([u],t);return p}async extractAndFilterFiles(e){await this.load();const t=this.infoFor3D;return t?(await ye(e)).filter((e=>(0,G.fu)(t,e))):e}validateLayer(e){if(e.layerType&&!Ie.has(e.layerType))throw new d.A("scenelayer:layer-type-not-supported","SceneLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new d.A("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x, 2.x"});if(this.version.major>2)throw new d.A("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x, 2.x"});!function(e,t){let r=!1,n=!1;if(null==e)r=!0,n=!0;else{const i=t&&t.isGeographic;switch(e){case"east-north-up":case"earth-centered":r=!0,n=i;break;case"vertex-reference-frame":r=!0,n=!i;break;default:r=!1}}if(!r)throw new d.A("scenelayer:unsupported-normal-reference-frame","Normal reference frame is invalid.");if(!n)throw new d.A("scenelayer:incompatible-normal-reference-frame","Normal reference frame is incompatible with layer spatial reference.")}(this.normalReferenceFrame,this.spatialReference)}_getTypeKeywords(){const e=[];if("points"===this.profile)e.push("Point");else{if("mesh-pyramids"!==this.profile)throw new d.A("scenelayer:unknown-profile","SceneLayer:save() encountered an unknown SceneLayer profile: "+this.profile);e.push("3DObject")}return e}_populateFieldUsageInfo(){if(this._fieldUsageInfo={},this.fields)for(const t of this.fields){var e;const r=!(!this.attributeStorageInfo||!this.attributeStorageInfo.some((e=>e.name===t.name))),n=!(null===(e=this.associatedLayer)||void 0===e||null===(e=e.fields)||void 0===e||!e.some((e=>e&&t.name===e.name))),i={supportsLabelingInfo:r,supportsRenderer:r,supportsPopupTemplate:r||n,supportsLayerQuery:n};this._fieldUsageInfo[t.name]=i}}_applyAssociatedLayerOverrides(){this._applyAssociatedLayerFieldsOverrides(),this._applyAssociatedLayerPopupOverrides(),this._applyAssociatedLayerExtentOverride(),this._applyAssociatedLayerPrivileges()}_applyAssociatedLayerFieldsOverrides(){var e;if(null===(e=this.associatedLayer)||void 0===e||!e.fields)return;let t=null;for(const r of this.associatedLayer.fields){const e=this.getField(r.name);e?(!e.domain&&r.domain&&(e.domain=r.domain.clone()),e.editable=r.editable,e.nullable=r.nullable,e.length=r.length):(t||(t=this.fields?this.fields.slice():[]),t.push(r.clone()))}t&&this._set("fields",t)}_applyAssociatedLayerPopupOverrides(){if(!this.associatedLayer)return;const e=["popupTemplate","popupEnabled"],t=(0,g.oY)(this);for(let r=0;r<e.length;r++){const n=e[r],i=this.originIdOf(n),o=this.associatedLayer.originIdOf(n);i<o&&(o===I.Gr.SERVICE||o===I.Gr.PORTAL_ITEM)&&t.setAtOrigin(n,this.associatedLayer[n],o)}}_applyAssociatedLayerExtentOverride(){var e,t,r,n,i,o;const s=null===(e=this.associatedLayer)||void 0===e||null===(e=e.editingInfo)||void 0===e?void 0:e.lastEditDate,a=null===(t=this.associatedLayer)||void 0===t?void 0:t.serverGens,l=null===(r=this.associatedLayer)||void 0===r?void 0:r.getAtOrigin("fullExtent","service");(0,he.Vo)()&&null!=(null===(n=this.associatedLayer)||void 0===n?void 0:n.infoFor3D)&&l&&(0,N.Wo)(null===(i=this.associatedLayer)||void 0===i?void 0:i.url)&&s&&(null===(o=this.serviceUpdateTimeStamp)||void 0===o?void 0:o.lastUpdate)!==s.getTime()&&(this.serviceUpdateTimeStamp||(null===a||void 0===a?void 0:a.minServerGen)!==(null===a||void 0===a?void 0:a.serverGen))&&(0,g.oY)(this).setAtOrigin("fullExtent",l.clone(),I.Gr.SERVICE)}_applyAssociatedLayerPrivileges(){const e=this.associatedLayer;e&&(this._set("userHasEditingPrivileges",e.userHasEditingPrivileges),this._set("userHasFullEditingPrivileges",e.userHasFullEditingPrivileges),this._set("userHasUpdateItemPrivileges",e.userHasUpdateItemPrivileges))}async _setAssociatedFeatureLayer(e){if(["mesh-pyramids","points"].includes(this.profile))try{const{serverUrl:t,layerId:r,portalItem:n}=await(0,U.L)("".concat(this.url,"/layers/").concat(this.layerId),{sceneLayerItem:this.portalItem,customParameters:this.customParameters,apiKey:this.apiKey,signal:e}),i=await $.S.FeatureLayer();this.associatedLayer=new i({url:t,customParameters:this.customParameters,layerId:r,portalItem:n}),await this.associatedLayer.load()}catch(ve){(0,h.zf)(ve)||this._logWarningOnPopupEnabled()}}async _logWarningOnPopupEnabled(){await(0,f.whenOnce)((()=>this.popupEnabled&&null!=this.popupTemplate));const e="this SceneLayer: ".concat(this.title);null==this.attributeStorageInfo?c.A.getLogger(this).warn("Associated FeatureLayer could not be loaded and no binary attributes found. Popups will not work on ".concat(e)):c.A.getLogger(this).info("Associated FeatureLayer could not be loaded. Falling back to binary attributes for Popups on ".concat(e))}_validateElevationInfo(){const e=this.elevationInfo;"mesh-pyramids"===this.profile&&(0,pe.XF)(c.A.getLogger(this),(0,pe.$7)("Mesh scene layers","relative-to-scene",e)),(0,pe.XF)(c.A.getLogger(this),(0,pe.tW)("Scene layers",e))}};(0,n._)([(0,v.MZ)({types:{key:"type",base:Z.c,typeMap:{selection:q.A}},json:{origins:{"web-scene":{name:"layerDefinition.featureReduction",write:!0},"portal-item":{name:"layerDefinition.featureReduction",write:!0}}}})],we.prototype,"featureReduction",void 0),(0,n._)([(0,v.MZ)({type:[Y],json:{read:!1,origins:{"web-scene":{name:"layerDefinition.rangeInfos",write:!0},"portal-item":{name:"layerDefinition.rangeInfos",write:!0}}}})],we.prototype,"rangeInfos",void 0),(0,n._)([(0,v.MZ)({json:{read:!1}})],we.prototype,"associatedLayer",void 0),(0,n._)([(0,v.MZ)({type:["show","hide"]})],we.prototype,"listMode",void 0),(0,n._)([(0,v.MZ)({type:["ArcGISSceneServiceLayer"]})],we.prototype,"operationalLayerType",void 0),(0,n._)([(0,v.MZ)({json:{read:!1},readOnly:!0})],we.prototype,"type",void 0),(0,n._)([(0,v.MZ)({...Ae.fields,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],we.prototype,"fields",void 0),(0,n._)([(0,v.MZ)()],we.prototype,"types",null),(0,n._)([(0,v.MZ)()],we.prototype,"typeIdField",null),(0,n._)([(0,v.MZ)()],we.prototype,"templates",null),(0,n._)([(0,v.MZ)()],we.prototype,"formTemplate",null),(0,n._)([(0,v.MZ)({readOnly:!0,clonable:!1})],we.prototype,"fieldsIndex",null),(0,n._)([(0,v.MZ)({type:W.A,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],we.prototype,"floorInfo",void 0),(0,n._)([(0,v.MZ)(Ae.outFields)],we.prototype,"outFields",void 0),(0,n._)([(0,v.MZ)({type:z.W4,readOnly:!0,json:{read:!1}})],we.prototype,"nodePages",void 0),(0,n._)([(0,m.w)("service","nodePages",["nodePages","pointNodePages"])],we.prototype,"readNodePages",null),(0,n._)([(0,v.MZ)({type:[z.uV],readOnly:!0})],we.prototype,"materialDefinitions",void 0),(0,n._)([(0,v.MZ)({type:[z.Ot],readOnly:!0})],we.prototype,"textureSetDefinitions",void 0),(0,n._)([(0,v.MZ)({type:[z.L0],readOnly:!0})],we.prototype,"geometryDefinitions",void 0),(0,n._)([(0,v.MZ)({readOnly:!0})],we.prototype,"serviceUpdateTimeStamp",void 0),(0,n._)([(0,v.MZ)({readOnly:!0})],we.prototype,"attributeStorageInfo",void 0),(0,n._)([(0,v.MZ)({readOnly:!0})],we.prototype,"statisticsInfo",void 0),(0,n._)([(0,v.MZ)({type:u.A.ofType(Number),nonNullable:!0,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.excludeObjectIds",write:{enabled:!0}}})],we.prototype,"excludeObjectIds",void 0),(0,n._)([(0,v.MZ)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],we.prototype,"definitionExpression",void 0),(0,n._)([(0,v.MZ)({type:ue,json:{name:"layerDefinition.polygonFilter",write:{enabled:!0,allowNull:!0},origins:{service:{read:!1,write:!1}}}})],we.prototype,"filter",void 0),(0,n._)([(0,v.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],we.prototype,"path",void 0),(0,n._)([(0,v.MZ)(C.Yj)],we.prototype,"elevationInfo",null),(0,n._)([(0,v.MZ)({readOnly:!0,json:{read:!1}})],we.prototype,"effectiveCapabilities",null),(0,n._)([(0,v.MZ)({readOnly:!0})],we.prototype,"effectiveEditingEnabled",null),(0,n._)([(0,v.MZ)({type:String})],we.prototype,"geometryType",null),(0,n._)([(0,v.MZ)(C.kF)],we.prototype,"labelsVisible",void 0),(0,n._)([(0,v.MZ)({type:[Q.A],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:{reader:H.w},write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:H.w},write:!0}})],we.prototype,"labelingInfo",void 0),(0,n._)([(0,v.MZ)(C.fV)],we.prototype,"legendEnabled",void 0),(0,n._)([(0,v.MZ)({type:Number,json:{origins:{"web-document":{default:1,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}},read:{source:["opacity","layerDefinition.drawingInfo.transparency"],reader(e,t){var r;if("number"==typeof e&&e>=0&&e<=1)return e;const n=null===(r=t.layerDefinition)||void 0===r||null===(r=r.drawingInfo)||void 0===r?void 0:r.transparency;return void 0!==n?(0,be.D)(n):void 0}}},"portal-item":{write:!0},service:{read:!1}}}})],we.prototype,"opacity",void 0),(0,n._)([(0,v.MZ)({type:["Low","High"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],we.prototype,"priority",void 0),(0,n._)([(0,v.MZ)({type:["Labels"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],we.prototype,"semantic",void 0),(0,n._)([(0,v.MZ)({types:s.X,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:!0},value:null})],we.prototype,"renderer",null),(0,n._)([(0,v.MZ)({json:{read:!1}})],we.prototype,"cachedDrawingInfo",void 0),(0,n._)([(0,m.w)("service","cachedDrawingInfo")],we.prototype,"readCachedDrawingInfo",null),(0,n._)([(0,v.MZ)({readOnly:!0,json:{read:!1}})],we.prototype,"capabilities",null),(0,n._)([(0,v.MZ)({type:Boolean,json:{read:!1}})],we.prototype,"editingEnabled",null),(0,n._)([(0,v.MZ)({readOnly:!0,json:{write:!1,read:!1}})],we.prototype,"infoFor3D",null),(0,n._)([(0,v.MZ)({readOnly:!0,json:{write:!1,read:!1}})],we.prototype,"relationships",null),(0,n._)([(0,v.MZ)(C.M6)],we.prototype,"popupEnabled",void 0),(0,n._)([(0,v.MZ)({type:o.A,json:{name:"popupInfo",write:!0}})],we.prototype,"popupTemplate",void 0),(0,n._)([(0,v.MZ)({readOnly:!0,json:{read:!1}})],we.prototype,"defaultPopupTemplate",null),(0,n._)([(0,v.MZ)({type:String,json:{read:!1}})],we.prototype,"objectIdField",void 0),(0,n._)([(0,m.w)("service","objectIdField",["objectIdField","fields"])],we.prototype,"readObjectIdField",null),(0,n._)([(0,v.MZ)({type:String,json:{read:!1}})],we.prototype,"globalIdField",void 0),(0,n._)([(0,m.w)("service","globalIdField",["globalIdField","fields"])],we.prototype,"readGlobalIdField",null),(0,n._)([(0,v.MZ)({readOnly:!0,type:String,json:{read:!1}})],we.prototype,"displayField",null),(0,n._)([(0,v.MZ)({type:String,json:{read:!1}})],we.prototype,"profile",void 0),(0,n._)([(0,m.w)("service","profile",["store.profile"])],we.prototype,"readProfile",null),(0,n._)([(0,v.MZ)({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],we.prototype,"normalReferenceFrame",void 0),(0,n._)([(0,v.MZ)(C.PY)],we.prototype,"screenSizePerspectiveEnabled",void 0),(0,n._)([(0,v.MZ)({json:{read:!1,origins:{service:{read:!0}}}})],we.prototype,"serviceItemId",void 0),we=(0,n._)([(0,b.$)("esri.layers.SceneLayer")],we);const _e={"mesh-pyramids":"mesh-pyramids",meshpyramids:"mesh-pyramids","features-meshes":"mesh-pyramids",points:"points","features-points":"points",lines:"lines","features-lines":"lines",polygons:"polygons","features-polygons":"polygons"},Me={"mesh-pyramids":"mesh",points:"point",lines:"polyline",polygons:"polygon"},Se=we},18117:(e,t,r)=>{function n(e,t,r,n){return{x:e,y:t,z:r,hasZ:null!=r,hasM:!1,spatialReference:n,type:"point"}}r.d(t,{T:()=>n})},45652:(e,t,r)=>{r.d(t,{$1:()=>u,H2:()=>h,MT:()=>f,VP:()=>y,WF:()=>d,Wt:()=>s,XQ:()=>v,hK:()=>p,nS:()=>c,uh:()=>a,xY:()=>l});var n=r(50076);const i="upload-assets",o=()=>new Error;class s extends n.A{constructor(){super("".concat(i,":unsupported"),"Layer does not support asset uploads.",o())}}class a extends n.A{constructor(){super("".concat(i,":no-glb-support"),"Layer does not support glb.",o())}}class l extends n.A{constructor(){super("".concat(i,":no-supported-source"),"No supported external source found",o())}}class u extends n.A{constructor(){super("".concat(i,":not-base-64"),"Expected gltf data in base64 format after conversion.",o())}}class d extends n.A{constructor(){super("".concat(i,":unable-to-prepare-options"),"Unable to prepare uploadAsset request options.",o())}}class c extends n.A{constructor(e,t){super("".concat(i,":bad-response"),"Bad response. Uploaded ".concat(e," items and received ").concat(t," results."),o())}}class p extends n.A{constructor(e,t){var r,n;super("".concat(i,"-layer:upload-failed"),"Failed to upload mesh file ".concat(e,". Error code: ").concat(null!==(r=null===t||void 0===t?void 0:t.code)&&void 0!==r?r:"-1",". Error message: ").concat(null!==(n=null===t||void 0===t?void 0:t.messages)&&void 0!==n?n:"unknown"),o())}}class h extends n.A{constructor(e){super("".concat(i,"-layer:unsupported-format"),"The service allowed us to upload an asset of FormatID ".concat(e,", but it does not list it in its supported formats."),o())}}class f extends n.A{constructor(){super("".concat(i,":convert3D-failed"),"convert3D failed.")}}class y extends n.A{constructor(){super("invalid-input:no-model","No supported model found")}}class v extends n.A{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}},61979:(e,t,r)=>{r.d(t,{$9:()=>h,Jz:()=>d,Mk:()=>v,Zk:()=>p,dP:()=>c,gz:()=>m,w6:()=>b});var n=r(35143),i=r(54099),o=r(53084),s=r(50346),a=(r(76460),r(81806),r(50076),r(85842)),l=r(35298);const u=new i.A.EventEmitter;function d(e){return u.on("apply-edits",new WeakRef(e))}function c(e){return u.on("update-moment",new WeakRef(e))}function p(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=(0,s.Tw)();return n=null==t||n,u.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:n,result:i.promise}),i}function h(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;u.emit("update-moment",{serviceUrl:e,layerId:t,gdbVersion:r,moment:n})}const f="esri.layers.mixins.EditBusLayer",y=Symbol(f);function v(e){return null!=e&&"object"==typeof e&&y in e}function g(e){return null!=e&&"object"==typeof e&&"gdbVersion"in e}function m(e,t,r){const n=new URL(e).host,i=l.Z3.get(n),o=e=>!e||e===i;return o(t)&&o(r)||t===r}const b=e=>{var t;let r=class extends e{constructor(){super(...arguments),this[t]=!0,this._applyEditsHandler=e=>{const{serviceUrl:t,layerId:r,gdbVersion:n,mayReceiveServiceEdits:i,result:s}=e,a=t===this.url,u=null!=r&&null!=this.layerId&&r===this.layerId,d=g(this),c=g(this)&&m(t,n,this.gdbVersion);if(!a||d&&!c||!u&&!i)return;const p=s.then((e=>{var t;if(u&&(e.addedFeatures.length||e.updatedFeatures.length||e.deletedFeatures.length||e.addedAttachments.length||e.updatedAttachments.length||e.deletedAttachments.length))return this.emit("edits",(0,o.o8)(e)),e;const r=null===(t=e.editedFeatures)||void 0===t?void 0:t.find((e=>{let{layerId:t}=e;return t===this.layerId}));if(r){const{adds:t,updates:n,deletes:i}=r.editedFeatures,s={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:t?t.map((e=>{let{attributes:t}=e;return{objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]}})):[],deletedFeatures:i?i.map((e=>{let{attributes:t}=e;return{objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]}})):[],updatedFeatures:n?n.map((e=>{let{current:{attributes:t}}=e;return{objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]}})):[],editedFeatures:(0,o.o8)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,o.o8)(e.historicMoment)};return this.emit("edits",s),s}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:(0,o.o8)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,o.o8)(e.historicMoment)}})).then((e=>("historicMoment"in this&&this.historicMoment!==e.historicMoment&&(0,l.w5)(t,n)&&(this.historicMoment=e.historicMoment),e)));this.emit("apply-edits",{result:p})},this._updateMomentHandler=e=>{const{serviceUrl:t,gdbVersion:r,moment:n}=e,i=t===this.url,o=g(this),s=g(this)&&m(t,r,this.gdbVersion),a=g(this)&&!m(t,this.gdbVersion,null);i&&o&&s&&a&&"historicMoment"in this&&this.historicMoment!==n&&(this.historicMoment=n)},this.when().then((()=>{this.addHandles(d(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(c(this._updateMomentHandler))}),(()=>{}))}};return t=y,r=(0,n._)([(0,a.$)(f)],r),r}},11155:(e,t,r)=>{r.d(t,{M:()=>d});var n=r(35143),i=r(82111),o=r(53666),s=r(46053),a=(r(81806),r(76460),r(47249),r(85842)),l=r(53430),u=r(83982);const d=e=>{let t=class extends e{get timeInfo(){var e;const t=null===(e=this.associatedLayer)||void 0===e?void 0:e.timeInfo;if(null==t)return t;const r=t.clone();return(0,l.sv)(r,this.fieldsIndex),r}set timeInfo(e){(0,l.sv)(e,this.fieldsIndex),this._override("timeInfo",e)}get timeExtent(){var e;return null===(e=this.associatedLayer)||void 0===e?void 0:e.timeExtent}set timeExtent(e){this._override("timeExtent",e)}get timeOffset(){var e;return null===(e=this.associatedLayer)||void 0===e?void 0:e.timeOffset}set timeOffset(e){this._override("timeOffset",e)}get useViewTime(){var e,t;return null===(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.useViewTime)||void 0===e||e}set useViewTime(e){this._override("useViewTime",e)}get datesInUnknownTimezone(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.datesInUnknownTimezone)&&void 0!==e&&e}set datesInUnknownTimezone(e){this._override("datesInUnknownTimezone",e)}};return(0,n._)([(0,s.MZ)({type:u.A})],t.prototype,"timeInfo",null),(0,n._)([(0,s.MZ)({type:i.A})],t.prototype,"timeExtent",null),(0,n._)([(0,s.MZ)({type:o.A})],t.prototype,"timeOffset",null),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],t.prototype,"useViewTime",null),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],t.prototype,"datesInUnknownTimezone",null),t=(0,n._)([(0,a.$)("esri.layers.mixins.TemporalSceneLayer")],t),t}},2395:(e,t,r)=>{r.d(t,{L0:()=>g,Ot:()=>h,W4:()=>l,uV:()=>c});var n=r(35143),i=r(42553),o=r(46053),s=(r(81806),r(76460),r(47249),r(6409)),a=r(85842);let l=class extends i.oY{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,n._)([(0,o.MZ)({type:Number})],l.prototype,"nodesPerPage",void 0),(0,n._)([(0,o.MZ)({type:Number})],l.prototype,"rootIndex",void 0),(0,n._)([(0,o.MZ)({type:String})],l.prototype,"lodSelectionMetricType",void 0),l=(0,n._)([(0,a.$)("esri.layer.support.I3SNodePageDefinition")],l);let u=class extends i.oY{constructor(){super(...arguments),this.factor=1}};(0,n._)([(0,o.MZ)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],u.prototype,"id",void 0),(0,n._)([(0,o.MZ)({type:Number})],u.prototype,"factor",void 0),u=(0,n._)([(0,a.$)("esri.layer.support.I3SMaterialTexture")],u);let d=class extends i.oY{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,n._)([(0,o.MZ)({type:[Number]})],d.prototype,"baseColorFactor",void 0),(0,n._)([(0,o.MZ)({type:u})],d.prototype,"baseColorTexture",void 0),(0,n._)([(0,o.MZ)({type:u})],d.prototype,"metallicRoughnessTexture",void 0),(0,n._)([(0,o.MZ)({type:Number})],d.prototype,"metallicFactor",void 0),(0,n._)([(0,o.MZ)({type:Number})],d.prototype,"roughnessFactor",void 0),d=(0,n._)([(0,a.$)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],d);let c=class extends i.oY{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,n._)([(0,s.e)({opaque:"opaque",mask:"mask",blend:"blend"})],c.prototype,"alphaMode",void 0),(0,n._)([(0,o.MZ)({type:Number})],c.prototype,"alphaCutoff",void 0),(0,n._)([(0,o.MZ)({type:Boolean})],c.prototype,"doubleSided",void 0),(0,n._)([(0,s.e)({none:"none",back:"back",front:"front"})],c.prototype,"cullFace",void 0),(0,n._)([(0,o.MZ)({type:u})],c.prototype,"normalTexture",void 0),(0,n._)([(0,o.MZ)({type:u})],c.prototype,"occlusionTexture",void 0),(0,n._)([(0,o.MZ)({type:u})],c.prototype,"emissiveTexture",void 0),(0,n._)([(0,o.MZ)({type:[Number]})],c.prototype,"emissiveFactor",void 0),(0,n._)([(0,o.MZ)({type:d})],c.prototype,"pbrMetallicRoughness",void 0),c=(0,n._)([(0,a.$)("esri.layer.support.I3SMaterialDefinition")],c);let p=class extends i.oY{};(0,n._)([(0,o.MZ)({type:String,json:{read:{source:["name","index"],reader:(e,t)=>null!=e?e:"".concat(t.index)}}})],p.prototype,"name",void 0),(0,n._)([(0,s.e)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],p.prototype,"format",void 0),p=(0,n._)([(0,a.$)("esri.layer.support.I3STextureFormat")],p);let h=class extends i.oY{constructor(){super(...arguments),this.atlas=!1}};(0,n._)([(0,o.MZ)({type:[p]})],h.prototype,"formats",void 0),(0,n._)([(0,o.MZ)({type:Boolean})],h.prototype,"atlas",void 0),h=(0,n._)([(0,a.$)("esri.layer.support.I3STextureSetDefinition")],h);let f=class extends i.oY{};(0,n._)([(0,s.e)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],f.prototype,"type",void 0),(0,n._)([(0,o.MZ)({type:Number})],f.prototype,"component",void 0),f=(0,n._)([(0,a.$)("esri.layer.support.I3SGeometryAttribute")],f);let y=class extends i.oY{};(0,n._)([(0,s.e)({draco:"draco"})],y.prototype,"encoding",void 0),(0,n._)([(0,o.MZ)({type:[String]})],y.prototype,"attributes",void 0),y=(0,n._)([(0,a.$)("esri.layer.support.I3SGeometryCompressedAttributes")],y);let v=class extends i.oY{constructor(){super(...arguments),this.offset=0}};(0,n._)([(0,o.MZ)({type:Number})],v.prototype,"offset",void 0),(0,n._)([(0,o.MZ)({type:f})],v.prototype,"position",void 0),(0,n._)([(0,o.MZ)({type:f})],v.prototype,"normal",void 0),(0,n._)([(0,o.MZ)({type:f})],v.prototype,"uv0",void 0),(0,n._)([(0,o.MZ)({type:f})],v.prototype,"color",void 0),(0,n._)([(0,o.MZ)({type:f})],v.prototype,"uvRegion",void 0),(0,n._)([(0,o.MZ)({type:f})],v.prototype,"featureId",void 0),(0,n._)([(0,o.MZ)({type:f})],v.prototype,"faceRange",void 0),(0,n._)([(0,o.MZ)({type:y})],v.prototype,"compressedAttributes",void 0),v=(0,n._)([(0,a.$)("esri.layer.support.I3SGeometryBuffer")],v);let g=class extends i.oY{};(0,n._)([(0,s.e)({triangle:"triangle"})],g.prototype,"topology",void 0),(0,n._)([(0,o.MZ)()],g.prototype,"geometryBuffers",void 0),g=(0,n._)([(0,a.$)("esri.layer.support.I3SGeometryDefinition")],g)},39323:(e,t,r)=>{r.d(t,{L:()=>d});var n=r(55171),i=r(3825),o=r(50076),s=r(50346),a=r(13096),l=r(65308),u=r(70652);async function d(e,t){var r,d;const h=(0,a.qg)(e);if(!h)throw new o.A("invalid-url","Invalid scene service url");const f={...t,sceneServerUrl:h.url.path,layerId:null!==(r=h.sublayer)&&void 0!==r?r:void 0};if(null!==(d=f.sceneLayerItem)&&void 0!==d||(f.sceneLayerItem=await async function(e){const t=(await c(e)).serviceItemId;if(!t)return null;const r=new u.default({id:t,apiKey:e.apiKey}),o=await async function(e){const t=null===n.id||void 0===n.id?void 0:n.id.findServerInfo(e.sceneServerUrl);if(null!==t&&void 0!==t&&t.owningSystemUrl)return t.owningSystemUrl;const r=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const t=(await(0,i.A)(r,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(t)return t}catch(y){(0,s.QP)(y)}return null}(e);null!=o&&(r.portal=new l.A({url:o}));try{return r.load({signal:e.signal})}catch(v){return(0,s.QP)(v),null}}(f)),null==f.sceneLayerItem)return p(f.sceneServerUrl.replace("/SceneServer","/FeatureServer"),f);const y=await async function(e){let{sceneLayerItem:t,signal:r}=e;if(!t)return null;try{const e=(await t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:r})).find((e=>"Feature Service"===e.type))||null;if(!e)return null;const n=new u.default({portal:e.portal,id:e.id});return await n.load(),n}catch(n){return(0,s.QP)(n),null}}(f);if(null===y||void 0===y||!y.url)throw new o.A("related-service-not-found","Could not find feature service through portal item relationship");f.featureServiceItem=y;const v=await p(y.url,f);return v.portalItem=y,v}async function c(e){if(e.rootDocument)return e.rootDocument;const t={query:{f:"json",...e.customParameters,token:e.apiKey},responseType:"json",signal:e.signal};try{const r=await(0,i.A)(e.sceneServerUrl,t);e.rootDocument=r.data}catch{e.rootDocument={}}return e.rootDocument}async function p(e,t){var r,n,s;const l=(0,a.qg)(e);if(!l)throw new o.A("invalid-feature-service-url","Invalid feature service url");const u=l.url.path,d=t.layerId;if(null==d)return{serverUrl:u};const p=c(t),h=t.featureServiceItem?await t.featureServiceItem.fetchData("json"):null,f=null===(r=(null===h||void 0===h||null===(n=h.layers)||void 0===n?void 0:n[0])||(null===h||void 0===h||null===(s=h.tables)||void 0===s?void 0:s[0]))||void 0===r?void 0:r.customParameters,y=e=>{const r={query:{f:"json",...f},responseType:"json",authMode:e,signal:t.signal};return(0,i.A)(u,r)},v=y("anonymous").catch((()=>y("no-prompt"))),[g,m]=await Promise.all([v,p]),b=null===m||void 0===m?void 0:m.layers,I=g.data&&g.data.layers;if(!Array.isArray(I))throw new Error("expected layers array");if(Array.isArray(b)){for(let i=0;i<Math.min(b.length,I.length);i++)if(b[i].id===d)return{serverUrl:u,layerId:I[i].id}}else if(null!=d&&d<I.length)return{serverUrl:u,layerId:I[d].id};throw new Error("could not find matching associated sublayer")}},16981:(e,t,r)=>{r.d(t,{P:()=>n});const n={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsAsyncApplyEdits:!1,zDefault:void 0},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},95474:(e,t,r)=>{r.d(t,{n:()=>i});var n=r(90534);function i(e){return o[function(e){return"json"===e.type?"application/json":"blob"===e.type?e.blob.type:function(e){const t=(0,n.Zo)(e);return l[t]||s}(e.url)}(e)]||a}const o={},s="text/plain",a=o[s],l={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const u in l)o[l[u]]=u},81589:(e,t,r)=>{r.d(t,{L:()=>s});var n=r(98773),i=r(50346),o=r(62754);async function s(e,t,r){const s=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(s&&"unique-value"===s.type&&s.styleOrigin){const a=await(0,n.Ke)(s.populateFromStyle());if((0,i.Te)(r),!1===a.ok){const r=a.error;null!==t&&void 0!==t&&t.messages&&t.messages.push(new o.A("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(r.message),{error:r,context:t})),e.clear("renderer",null===t||void 0===t?void 0:t.origin)}}}},12482:(e,t,r)=>{r.d(t,{$7:()=>w,B:()=>A,Fo:()=>m,M7:()=>S,NN:()=>p,Q5:()=>b,Tq:()=>x,Up:()=>I,XF:()=>M,Ze:()=>f,bK:()=>a,bh:()=>c,id:()=>y,ky:()=>d,qt:()=>E,tW:()=>_,w7:()=>l,wF:()=>s,wS:()=>v,xS:()=>g,ze:()=>u});var n=r(31633),i=r(59097);function o(e){return e?E:x}function s(e,t){return null!==t&&void 0!==t&&t.mode?t.mode:o(e).mode}function a(e,t){return null!=t?t:o(e)}function l(e,t){return s(null!=e&&e.hasZ,t)}function u(e,t){return a(null!=e&&!!e.hasZ,t)}function d(e){const t=h(e);return l(e.geometry,t)}function c(e){const t=h(e),r=l(e.geometry,t);return{mode:r,offset:null!=t&&"on-the-ground"!==r?S(t):0}}function p(e){if("on-the-ground"===d(e))return!1;const t=h(e),r=null!==t&&void 0!==t&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!r||"0"===r)}function h(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function f(e,t){if(null===e||void 0===e||!e.offset)return 0;const{offset:r,unit:i}=e;if("decimal-degrees"===i)return 0;const o="unknown"!==i&&i?i:"meters",s=(0,n.mq)(t);return s?(0,n.oU)(r,o,s):0}function y(e,t,r){var n,i;if(null===r||void 0===r||!r.mode)return;const o=e.hasZ?e.z:0,s=f(r,e.spatialReference);switch(r.mode){case"absolute-height":return o-s;case"on-the-ground":return 0;case"relative-to-ground":return o-((null!==(n=t.elevationProvider.getElevation(e.x,e.y,o,e.spatialReference,"ground"))&&void 0!==n?n:0)+s);case"relative-to-scene":return o-((null!==(i=t.elevationProvider.getElevation(e.x,e.y,o,e.spatialReference,"scene"))&&void 0!==i?i:0)+s)}}function v(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return m(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,r,n)}function g(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return m(e,t[0],t[1],t.length>2?t[2]:0,r,n,i)}function m(e,t,r,n,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null==o)return;const a=null!=s?s.mode:"absolute-height";if("on-the-ground"===a)return 0;const{absoluteZ:l}=b(t,r,n,i,e,o);return function(e,t,r,n,i,o,s,a){var l,u;const d=f(s,i);switch(a){case"absolute-height":return e-d;case"relative-to-ground":return e-((null!==(l=o.elevationProvider.getElevation(t,r,n,i,"ground"))&&void 0!==l?l:0)+d);case"relative-to-scene":return e-((null!==(u=o.elevationProvider.getElevation(t,r,n,i,"scene"))&&void 0!==u?u:0)+d)}}(l,t,r,n,i,e,s,a)}function b(e,t,r,n,i,o){const s=f(o,n);switch(o.mode){case"absolute-height":return{absoluteZ:r+s,elevation:0};case"on-the-ground":{var a;const r=null!==(a=i.elevationProvider.getElevation(e,t,0,n,"ground"))&&void 0!==a?a:0;return{absoluteZ:r,elevation:r}}case"relative-to-ground":{var l;const o=null!==(l=i.elevationProvider.getElevation(e,t,r,n,"ground"))&&void 0!==l?l:0;return{absoluteZ:r+o+s,elevation:o}}case"relative-to-scene":{var u;const o=null!==(u=i.elevationProvider.getElevation(e,t,r,n,"scene"))&&void 0!==u?u:0;return{absoluteZ:r+o+s,elevation:o}}}}function I(e,t){if(null==t)return!1;const{mode:r}=t;return null!=r&&("scene"===e&&"relative-to-scene"===r||"ground"===e&&"absolute-height"!==r)}function A(e,t,r){return r&&r.mode!==t?"".concat(e," only support ").concat(t," elevation mode"):null}function w(e,t,r){return(null===r||void 0===r?void 0:r.mode)===t?"".concat(e," do not support ").concat(t," elevation mode"):null}function _(e,t){return null!=(null===t||void 0===t?void 0:t.featureExpressionInfo)&&"0"!==t.featureExpressionInfo.expression?"".concat(e," do not support featureExpressionInfo"):null}function M(e,t){t&&e.warn(".elevationInfo=",t)}function S(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t?t:0)*(0,i.Ao)(null===e||void 0===e?void 0:e.unit)}const E={mode:"absolute-height",offset:0},x={mode:"on-the-ground",offset:null}},35298:(e,t,r)=>{r.d(t,{CD:()=>a,DC:()=>s,TA:()=>i,We:()=>l,Z3:()=>o,ZJ:()=>u,w5:()=>d});var n=r(3825);const i=(0,r(49723).vD)(),o=new Map,s=new Map,a=new Map;async function l(e,t,r){if(!e||!r)return!1;if(!t)return!0;const i=new URL(e).host;let s=o.get(i);if(!s){const t=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await(0,n.A)(t,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===t}async function u(e,t){var n;let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||!t)return!0;const a=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),l=null===(n=s.get(a))||void 0===n?void 0:n.entries();if(l)for(const[s,d]of l)if(d.name===t){var u;const e=!(null!==(u=d.stack)&&void 0!==u&&u.hasForwardEdits());if(!e&&o){const[{deleteForwardEdits:e},{default:t}]=await Promise.all([r.e(56868).then(r.bind(r,56868)),r.e(37028).then(r.bind(r,37028))]);return e(a,s,new t({sessionId:i,moment:d.moment}))}return e}return!0}function d(e,t){var r;if(!e)return!1;const n=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=null===(r=s.get(n))||void 0===r?void 0:r.entries();if(i)for(const[o,s]of i)if(s.name===t)return"edit"===s.lockType;return!1}},7342:(e,t,r)=>{r.d(t,{Cc:()=>l,Qo:()=>u,CC:()=>d,RF:()=>a});var n=r(69539),i=(r(81806),r(76931)),o=r(55855);var s=r(46702);function a(e){return e&&e.enabled&&(function(e){return"extrude"===e.type}(e)||function(e){return"fill"===e.type}(e))&&null!=e.edges}function l(e,t){return u(function(e){return e&&e.enabled&&e.edges||null}(e),t)}function u(e,t){if(null==e)return null;const r=null!=e.color?(0,o.ci)(n.A.toUnitRGBA(e.color)):(0,o.fA)(0,0,0,0),s=(0,i.Lz)(e.size),a=(0,i.Lz)(e.extensionLength);switch(e.type){case"solid":return d({color:r,size:s,extensionLength:a,...t});case"sketch":return function(e){return{...p,...e,type:"sketch"}}({color:r,size:s,extensionLength:a,...t});default:return}}function d(e){return{...c,...e,type:"solid"}}const c={color:(0,o.fA)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:s.x.OPAQUE,hasSlicePlane:!1},p={color:(0,o.fA)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:s.x.OPAQUE,hasSlicePlane:!1}},51990:(e,t,r)=>{r.d(t,{Eb:()=>s,_j:()=>a,k5:()=>n});var n,i,o=r(15941);function s(e){switch(e){case"multiply":default:return n.Multiply;case"ignore":return n.Ignore;case"replace":return n.Replace;case"tint":return n.Tint}}function a(e,t,r){if(null==e||t===n.Ignore)return r[0]=255,r[1]=255,r[2]=255,void(r[3]=255);const i=(0,o.qE)(Math.round(e[3]*u),0,u),s=0===i||t===n.Tint?0:t===n.Replace?d:c;r[0]=(0,o.qE)(Math.round(e[0]*l),0,l),r[1]=(0,o.qE)(Math.round(e[1]*l),0,l),r[2]=(0,o.qE)(Math.round(e[2]*l),0,l),r[3]=i+s}(i=n||(n={}))[i.Multiply=1]="Multiply",i[i.Ignore=2]="Ignore",i[i.Replace=3]="Replace",i[i.Tint=4]="Tint";const l=255,u=85,d=u,c=2*u},85086:(e,t,r)=>{r.d(t,{j:()=>a});var n=r(30015),i=r(20664),o=r(9392),s=r(86994);class a{constructor(e,t,r){this.primitiveIndices=e,this._numIndexPerPrimitive=t,this.position=r,this._children=void 0,(0,s.vA)(e.length>=1),(0,s.vA)(3===r.size||4===r.size);const{data:n,size:a,indices:u}=r;(0,s.vA)(u.length%this._numIndexPerPrimitive==0),(0,s.vA)(u.length>=e.length*this._numIndexPerPrimitive);const d=e.length;let c=a*u[this._numIndexPerPrimitive*e[0]];l.clear(),l.push(c);const p=(0,o.fA)(n[c],n[c+1],n[c+2]),h=(0,o.o8)(p);for(let i=0;i<d;++i){const t=this._numIndexPerPrimitive*e[i];for(let e=0;e<this._numIndexPerPrimitive;++e){c=a*u[t+e],l.push(c);let r=n[c];p[0]=Math.min(r,p[0]),h[0]=Math.max(r,h[0]),r=n[c+1],p[1]=Math.min(r,p[1]),h[1]=Math.max(r,h[1]),r=n[c+2],p[2]=Math.min(r,p[2]),h[2]=Math.max(r,h[2])}}this.bbMin=p,this.bbMax=h;const f=(0,i.m)((0,o.vt)(),this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(h[0]-p[0],h[1]-p[1]),h[2]-p[2]);let y=this.radius*this.radius;for(let i=0;i<l.length;++i){c=l.at(i);const e=n[c]-f[0],t=n[c+1]-f[1],r=n[c+2]-f[2],o=e*e+t*t+r*r;if(o<=y)continue;const s=Math.sqrt(o),a=.5*(s-this.radius);this.radius=this.radius+a,y=this.radius*this.radius;const u=a/s;f[0]+=e*u,f[1]+=t*u,f[2]+=r*u}this.center=f,l.clear()}getChildren(){if(this._children||(0,i.a)(this.bbMin,this.bbMax)<=1)return this._children;const e=(0,i.m)((0,o.vt)(),this.bbMin,this.bbMax,.5),t=this.primitiveIndices.length,r=new Uint8Array(t),n=new Array(8);for(let i=0;i<8;++i)n[i]=0;const{data:s,size:l,indices:u}=this.position;for(let i=0;i<t;++i){let t=0;const o=this._numIndexPerPrimitive*this.primitiveIndices[i];let a=l*u[o],d=s[a],c=s[a+1],p=s[a+2];for(let e=1;e<this._numIndexPerPrimitive;++e){a=l*u[o+e];const t=s[a],r=s[a+1],n=s[a+2];t<d&&(d=t),r<c&&(c=r),n<p&&(p=n)}d<e[0]&&(t|=1),c<e[1]&&(t|=2),p<e[2]&&(t|=4),r[i]=t,++n[t]}let d=0;for(let i=0;i<8;++i)n[i]>0&&++d;if(d<2)return;const c=new Array(8);for(let i=0;i<8;++i)c[i]=n[i]>0?new Uint32Array(n[i]):void 0;for(let i=0;i<8;++i)n[i]=0;for(let i=0;i<t;++i){const e=r[i];c[e][n[e]++]=this.primitiveIndices[i]}this._children=new Array;for(let i=0;i<8;++i)void 0!==c[i]&&this._children.push(new a(c[i],this._numIndexPerPrimitive,this.position));return this._children}static prune(){l.prune()}}const l=new n.A({deallocator:null})},73146:(e,t,r)=>{r.d(t,{J:()=>i});var n=r(90632);class i{constructor(){this.id=(0,n.c)()}}},87634:(e,t,r)=>{var n;r.d(t,{X:()=>n}),function(e){e[e.Layer=0]="Layer",e[e.Object=1]="Object",e[e.Mesh=2]="Mesh",e[e.Line=3]="Line",e[e.Point=4]="Point",e[e.Material=5]="Material",e[e.Texture=6]="Texture",e[e.COUNT=7]="COUNT"}(n||(n={}))},51799:(e,t,r)=>{r.d(t,{V:()=>w});var n=r(13191),i=r(20664),o=r(38496),s=r(78393);function a(e){if(e.length<s.y9)return Array.from(e);if((0,s.cy)(e))return Float64Array.from(e);if(!("BYTES_PER_ELEMENT"in e))return Array.from(e);switch(e.BYTES_PER_ELEMENT){case 1:return Uint8Array.from(e);case 2:return(0,s.jq)(e)?Uint16Array.from(e):Int16Array.from(e);case 4:return Float32Array.from(e);default:return Float64Array.from(e)}}var l=r(83490),u=r(85086),d=r(73146),c=r(87634),p=r(9392),h=r(45097);const f=(0,p.vt)(),y=(0,p.vt)(),v=(0,p.vt)(),g=(0,p.vt)();var m=r(35416),b=r(86994),I=r(66470),A=r(68967);class w extends d.J{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.X.Mesh,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;super(),this.material=e,this.mapPositions=r,this.type=n,this.objectAndLayerIdColor=i,this.edgeIndicesLength=s,this.visible=!0,this._attributes=new Map,this._boundingInfo=null;for(const[a,l]of t)this._attributes.set(a,{...l,indices:(0,o.Dg)(l.indices)}),a===I.r.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._attributes.get(a).indices.length:this.edgeIndicesLength)}instantiate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new w(e.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);return this._attributes.forEach(((e,r)=>{e.exclusive=!1,t._attributes.set(r,e)})),t._boundingInfo=this._boundingInfo,t.transformation=e.transformation||this.transformation,t}get attributes(){return this._attributes}getMutableAttribute(e){let t=this._attributes.get(e);return t&&!t.exclusive&&(t={...t,exclusive:!0,data:a(t.data)},this._attributes.set(e,t)),t}setAttributeData(e,t){const r=this._attributes.get(e);r&&this._attributes.set(e,{...r,exclusive:!0,data:t})}get indexCount(){var e;const t=this._attributes.values().next().value.indices;return null!==(e=null===t||void 0===t?void 0:t.length)&&void 0!==e?e:0}get faceCount(){return this.indexCount/3}get boundingInfo(){return null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(e){return!!(this.type===c.X.Mesh?this._computeAttachmentOriginTriangles(e):this.type===c.X.Line?this._computeAttachmentOriginLines(e):this._computeAttachmentOriginPoints(e))&&(null!=this._transformation&&(0,i.e)(e,e,this._transformation),!0)}_computeAttachmentOriginTriangles(e){return function(e,t){if(!e)return!1;const{size:r,data:n,indices:o}=e;(0,i.s)(t,0,0,0),(0,i.s)(g,0,0,0);let s=0,a=0;for(let l=0;l<o.length-2;l+=3){const e=o[l]*r,u=o[l+1]*r,d=o[l+2]*r;(0,i.s)(f,n[e],n[e+1],n[e+2]),(0,i.s)(y,n[u],n[u+1],n[u+2]),(0,i.s)(v,n[d],n[d+1],n[d+2]);const c=(0,h.Q7)(f,y,v);c?((0,i.g)(f,f,y),(0,i.g)(f,f,v),(0,i.h)(f,f,1/3*c),(0,i.g)(t,t,f),s+=c):((0,i.g)(g,g,f),(0,i.g)(g,g,y),(0,i.g)(g,g,v),a+=3)}return(0!==a||0!==s)&&(0!==s?((0,i.h)(t,t,1/s),!0):0!==a&&((0,i.h)(t,g,1/a),!0))}(this.attributes.get(I.r.POSITION),e)}_computeAttachmentOriginLines(e){const t=this.attributes.get(I.r.POSITION);return function(e,t,r){if(!e)return!1;(0,i.s)(r,0,0,0),(0,i.s)(g,0,0,0);let n=0,o=0;const{size:s,data:a,indices:l}=e,u=l.length-1,d=u+(t?2:0);for(let c=0;c<d;c+=2){const e=c<u?c+1:0,t=l[c<u?c:u]*s,d=l[e]*s;f[0]=a[t],f[1]=a[t+1],f[2]=a[t+2],y[0]=a[d],y[1]=a[d+1],y[2]=a[d+2],(0,i.h)(f,(0,i.g)(f,f,y),.5);const p=(0,i.o)(f,y);p>0?((0,i.g)(r,r,(0,i.h)(f,f,p)),n+=p):0===n&&((0,i.g)(g,g,f),o++)}return 0!==n?((0,i.h)(r,r,1/n),!0):0!==o&&((0,i.h)(r,g,1/o),!0)}(t,function(e,t){return!(!("isClosed"in e)||!e.isClosed)&&t.indices.length>2}(this.material.parameters,t),e)}_computeAttachmentOriginPoints(e){return function(e,t){if(!e)return!1;const{size:r,data:n,indices:o}=e;(0,i.s)(t,0,0,0);let s=-1,a=0;for(let i=0;i<o.length;i++){const e=o[i]*r;s!==e&&(t[0]+=n[e],t[1]+=n[e+1],t[2]+=n[e+2],a++),s=e}return a>1&&(0,i.h)(t,t,1/a),a>0}(this.attributes.get(I.r.POSITION),e)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const e=this.attributes.get(I.r.POSITION);if(!e||0===e.indices.length)return null;const t=this.type===c.X.Mesh?3:1;(0,b.vA)(e.indices.length%t==0,"Indexing error: "+e.indices.length+" not divisible by "+t);const r=(0,o.tM)(e.indices.length/t);return new u.j(r,t,e)}get transformation(){var e;return null!==(e=this._transformation)&&void 0!==e?e:n.zK}set transformation(e){this._transformation=e&&e!==n.zK?(0,n.o8)(e):null}addHighlight(){const e=new m.X(l.Mg.Highlight);return this.highlights=(0,A.Ci)(this.highlights,e),e}removeHighlight(e){this.highlights=(0,A.PC)(this.highlights,e)}}},35416:(e,t,r)=>{r.d(t,{X:()=>i});var n=r(90632);class i{constructor(e){this.channel=e,this.id=(0,n.c)()}}},86994:(e,t,r)=>{r.d(t,{Cv:()=>c,L:()=>d,MX:()=>l,M_:()=>h,O_:()=>u,kL:()=>p,vA:()=>a,zH:()=>f});var n=r(72745),i=r(43047);const o=(0,r(55855).vt)();class s{constructor(e){this.message=e}toString(){return"AssertException: ".concat(this.message)}}function a(e,t){if(!e){t=t||"Assertion";const e=new Error(t).stack;throw new s("".concat(t," at ").concat(e))}}function l(e,t){e||(t=t||"",console.warn("Verify failed: "+t+"\n"+new Error("verify").stack))}function u(e,t,r,n){let i,o=(r[0]-e[0])/t[0],s=(n[0]-e[0])/t[0];o>s&&(i=o,o=s,s=i);let a=(r[1]-e[1])/t[1],l=(n[1]-e[1])/t[1];if(a>l&&(i=a,a=l,l=i),o>l||a>s)return!1;a>o&&(o=a),l<s&&(s=l);let u=(r[2]-e[2])/t[2],d=(n[2]-e[2])/t[2];return u>d&&(i=u,u=d,d=i),!(o>d||u>s)&&(d<s&&(s=d),!(s<0))}function d(e,t,r,i,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,n.vt)();const a=(i[o]-r[o])*(t[0]-e[0])-(i[0]-r[0])*(t[o]-e[o]),l=(i[0]-r[0])*(e[o]-r[o])-(i[o]-r[o])*(e[0]-r[0]);if(0===a)return!1;const u=l/a;return s[0]=e[0]+u*(t[0]-e[0]),s[1]=e[o]+u*(t[o]-e[o]),!0}function c(e,t,r,n,s){o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=1,(0,i.t)(o,o,t),s.length>2&&(s[2]=-o[2]),(0,i.t)(o,o,r),a(0!==o[3]),s[0]=o[0]/o[3],s[1]=o[1]/o[3],s[2]=o[2]/o[3],s[0]=(.5*s[0]+.5)*n[2]+n[0],s[1]=(.5*s[1]+.5)*n[3]+n[1]}function p(e,t){return Math.log(e)/Math.log(t)}function h(e,t,r,n){e[12]=t,e[13]=r,e[14]=n}function f(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]}},66470:(e,t,r)=>{var n;function i(e){return e===n.POSITION}r.d(t,{b:()=>i,r:()=>n}),function(e){e.POSITION="position",e.NORMAL="normal",e.NORMALCOMPRESSED="normalCompressed",e.UV0="uv0",e.COLOR="color",e.SYMBOLCOLOR="symbolColor",e.SIZE="size",e.TANGENT="tangent",e.OFFSET="offset",e.PERSPECTIVEDIVIDE="perspectiveDivide",e.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",e.LENGTH="length",e.PREVPOSITION="prevPosition",e.NEXTPOSITION="nextPosition",e.SUBDIVISIONFACTOR="subdivisionFactor",e.COLORFEATUREATTRIBUTE="colorFeatureAttribute",e.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",e.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",e.DISTANCETOSTART="distanceToStart",e.UVMAPSPACE="uvMapSpace",e.BOUNDINGRECT="boundingRect",e.UVREGION="uvRegion",e.PROFILERIGHT="profileRight",e.PROFILEUP="profileUp",e.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",e.FEATUREVALUE="featureValue",e.INSTANCEMODELORIGINHI="instanceModelOriginHi",e.INSTANCEMODELORIGINLO="instanceModelOriginLo",e.INSTANCEMODEL="instanceModel",e.INSTANCEMODELNORMAL="instanceModelNormal",e.INSTANCECOLOR="instanceColor",e.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",e.LOCALTRANSFORM="localTransform",e.GLOBALTRANSFORM="globalTransform",e.BOUNDINGSPHERE="boundingSphere",e.MODELORIGIN="modelOrigin",e.MODELSCALEFACTORS="modelScaleFactors",e.FEATUREATTRIBUTE="featureAttribute",e.STATE="state",e.LODLEVEL="lodLevel",e.POSITION0="position0",e.POSITION1="position1",e.NORMAL2COMPRESSED="normal2Compressed",e.COMPONENTINDEX="componentIndex",e.VARIANTOFFSET="variantOffset",e.VARIANTSTROKE="variantStroke",e.VARIANTEXTENSION="variantExtension",e.SIDENESS="sideness",e.START="start",e.END="end",e.UP="up",e.EXTRUDE="extrude",e.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",e.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(n||(n={}))},83490:(e,t,r)=>{var n,i,o,s,a,l,u,d,c;r.d(t,{Am:()=>s,C7:()=>o,ID:()=>d,JS:()=>c,Mg:()=>l,dd:()=>a,it:()=>i,s2:()=>n,sf:()=>u}),function(e){e[e.None=0]="None",e[e.Front=1]="Front",e[e.Back=2]="Back",e[e.COUNT=3]="COUNT"}(n||(n={})),function(e){e[e.Less=0]="Less",e[e.Lequal=1]="Lequal",e[e.COUNT=2]="COUNT"}(i||(i={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.UPDATE=1]="UPDATE"}(o||(o={})),function(e){e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(s||(s={})),function(e){e[e.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",e[e.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(a||(a={})),function(e){e[e.Highlight=0]="Highlight",e[e.MaskOccludee=1]="MaskOccludee",e[e.COUNT=2]="COUNT"}(l||(l={})),function(e){e[e.Blend=0]="Blend",e[e.Opaque=1]="Opaque",e[e.Mask=2]="Mask",e[e.MaskBlend=3]="MaskBlend",e[e.COUNT=4]="COUNT"}(u||(u={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(d||(d={})),function(e){e.DDS_ENCODING="image/vnd-ms.dds",e.KTX2_ENCODING="image/ktx2",e.BASIS_ENCODING="image/x.basis"}(c||(c={}))},46702:(e,t,r)=>{var n;r.d(t,{x:()=>n}),function(e){e[e.INVISIBLE=0]="INVISIBLE",e[e.TRANSPARENT=1]="TRANSPARENT",e[e.OPAQUE=2]="OPAQUE"}(n||(n={}))},68967:(e,t,r)=>{r.d(t,{Ci:()=>o,PC:()=>s,Vk:()=>a});var n=r(9392),i=r(99643);function o(e,t){return null==e&&(e=[]),e.push(t),e}function s(e,t){if(null==e)return null;const r=e.filter((e=>e!==t));return 0===r.length?null:r}function a(e,t,r,n,o){l[0]=e.get(t,0),l[1]=e.get(t,1),l[2]=e.get(t,2),(0,i.jS)(l,u,3),r.set(o,0,u[0]),n.set(o,0,u[1]),r.set(o,1,u[2]),n.set(o,1,u[3]),r.set(o,2,u[4]),n.set(o,2,u[5])}const l=(0,n.vt)(),u=new Float32Array(6)},2257:(e,t,r)=>{r.d(t,{D8:()=>o,TO:()=>i,d0:()=>s});var n=r(53430);async function i(e){var t,r;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.popupTemplate;if(null==i)return[];const o=await i.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:s}=i,{objectIdField:a,typeIdField:l,globalIdField:u,relationships:d}=e;if(o.includes("*"))return["*"];const c=s?(0,n.eX)(e):[],p=(0,n.DB)(e.fieldsIndex,[...o,...c]);return l&&p.push(l),p&&a&&null!==(t=e.fieldsIndex)&&void 0!==t&&t.has(a)&&!p.includes(a)&&p.push(a),p&&u&&null!==(r=e.fieldsIndex)&&void 0!==r&&r.has(u)&&!p.includes(u)&&p.push(u),d&&d.forEach((t=>{var r;const{keyField:n}=t;p&&n&&(null===(r=e.fieldsIndex)||void 0===r?void 0:r.has(n))&&!p.includes(n)&&p.push(n)})),p}function o(e,t){return e.popupTemplate?e.popupTemplate:null!=t&&t.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function s(e,t){return null!=o(e,{defaultPopupTemplateEnabled:t})}},99643:(e,t,r)=>{function n(e,t,r){for(let n=0;n<r;++n)t[2*n]=e[n],t[2*n+1]=e[n]-t[2*n]}function i(e,t){const r=e.length;for(let n=0;n<r;++n)s[0]=e[n],t[n]=s[0];return t}function o(e,t){const r=e.length;for(let n=0;n<r;++n)s[0]=e[n],s[1]=e[n]-s[0],t[n]=s[1];return t}r.d(t,{Zo:()=>i,jA:()=>o,jS:()=>n});const s=new Float32Array(2)}}]);
//# sourceMappingURL=40508.02b13f05.chunk.js.map